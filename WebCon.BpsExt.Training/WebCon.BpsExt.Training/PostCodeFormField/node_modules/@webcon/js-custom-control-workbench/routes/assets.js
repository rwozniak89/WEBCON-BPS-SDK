var path = require('path');

const configureAssets = (app, configuration) => {
    app.get('/assets/:name', function(req, res, next) {
        // '/api/sdk/xxxx/assets'
        const assets = configuration.manifest.files.assets;
        const assetName = req.params.name;

        if (assetName === undefined) {
            res.status(400).send(`Asset name is required.`);

            return;
        }

        if (assets === undefined || assets[assetName] === undefined) {
            res.status(404).send(`Asset "${assetName}" not found.`);

            return;
        }

        const fileName = `${assetName}${path.extname(assets[assetName])}`;
        const filePath = path.join(configuration.distPath, 'assets', fileName);

        res.sendFile(filePath);
    });
};

module.exports = configureAssets;
