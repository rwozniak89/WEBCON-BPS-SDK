function createValidationChangeObject(a,b,c,d){var e={};return e[d]=Object.assign({},a.cells[d],{validation:Object.assign({},a.cells[d].validation,{messages:b.messages,isValid:c.isValid}),saveRestrictions:Object.assign({},a.cells[d].saveRestrictions,c)}),e}function createSaveRestrictionsChangeObject(a,b,c,d){var e={};return e[d]=Object.assign({},a.cells[d],{saveRestrictions:Object.assign({},a.cells[d].saveRestrictions,b)}),e}function ifValidationChanged(a,b){return a.control.data.rows.filter(function(a){return a.id===b.rowId})[0].cells[b.fieldName].validation.isValid!==b.isValid}function handleChangeValidation(a,b){if(!ifValidationChanged(a,b))return a;var c=a.control.data.rows.map(function(a){return a.id===b.rowId?Object.assign({},a,{cells:Object.assign({},a.cells,createValidationChangeObject(a,{isValid:b.isValid},b.saveRestrictions,b.fieldName))}):a}),d=createSubsCloneForDataChange(a);return d.control.data={rows:c},d}function createChangedData(a,b){return{rows:a.control.data.rows.map(function(a,c){if(c===b.rowId){var d={};return d[b.fieldName]=Object.assign({},a.cells[b.fieldName],{data:b.value}),Object.assign({},a,{cells:Object.assign({},a.cells,d)})}return a})}}function createUndoEditRow(a,b){return{rows:a.control.data.rows.map(function(a,c){return c===b.rowId?b.originalRow:a})}}function createRemoveRow(a,b){return{rows:a.control.data.rows.filter(function(a,c){return c!==b.rowId})}}function createRemoveSelectedRows(a,b){return{rows:a.control.data.rows.filter(function(a,c){return-1===b.rows.indexOf(c)})}}function createCloneRow(a,b){return{rows:mergeValidationBetweenRows(b.newModel.rows,a.control.data.rows)}}function createRemoveAll(){return{rows:[]}}function createAddRow(a,b){return{rows:mergeValidationBetweenRows(b.newModel.rows,a.control.data.rows)}}function mergeValidationBetweenRows(a,b){return a.map(function(a){var c=b.find(function(b){return b.id===a.id});return c?mergeValidationBetweenSingleRows(a,c):a})}function mergeValidationBetweenSingleRows(a,b){var c=Object.assign({},a.cells);for(var d in c)c.hasOwnProperty(d)&&b.cells.hasOwnProperty(d)&&(c[d].validation=b.cells[d].validation,c[d].saveRestrictions=b.cells[d].saveRestrictions);return Object.assign({},a,{cells:c})}function updateSpecificCells(a,b,c){var d=Object.assign({},b.cells);return _.each(c,function(b){d.hasOwnProperty(b)&&a.cells.hasOwnProperty(b)&&(d[b]=a.cells[b])}),Object.assign({},a,{cells:d})}function createAddValidationMessage(a,b){return{rows:a.control.data.rows.map(function(a){return a.id===b.rowId?Object.assign({},a,{cells:Object.assign({},a.cells,createValidationChangeObject(a,{messages:b.messages},b.saveRestrictions,b.fieldName))}):a})}}function createChangeSaveRestrictions(a,b){return{rows:a.control.data.rows.map(function(a){return a.id===b.rowId?Object.assign({},a,{cells:Object.assign({},a.cells,createSaveRestrictionsChangeObject(a,{messages:[b.message],isSavable:b.isSavable,invalidValue:b.value},{value:b.value},b.fieldName))}):a})}}function createRestoreDefaults(a){return a.newModel}function createChangeColumnVisibility(a,b){return a.control.config.columns.map(function(a){return a.fieldName===b.columnName?Object.assign({},a,{isVisible:b.isVisible,isTechnical:!b.isVisible&&a.isTechnical}):a})}function createUndoChangeColumnsVisibility(a,b){return a.control.config.columns.map(function(a,c){return Object.assign({},a,{isVisible:b.originalColumns[c].isVisible,isTechnical:b.originalColumns[c].isTechnical})})}function createSubsCloneForDataChange(a){return Object.assign({},a,{control:Object.assign({},a.control,{data:null})})}function createSubsCloneForColumnsConfigChange(a){return Object.assign({},a,{control:Object.assign({},a.control,{config:Object.assign({},a.control.config,{columns:null})})})}function app(a,b){var c=a.initialModel;if(!c)throw new Error("NoInitialModel");if(c.Errors.CriticalErrorsList&&c.Errors.CriticalErrorsList.length>0)return ReactDOM.render(React.createElement(webcon.views.FatalErrorPanel,{name:"FatalErrorPanel",errors:c.Errors.CriticalErrorsList.map(function(a){return{message:a.Message,innerError:{message:a.InnerError?a.InnerError.Message:void 0}}})}),document.getElementById("fatalErrorPanel")),void $("#loadSpinner").hide();if(!c.SystemSettings)throw new Error("NoSystemSettingsInInitialModel");if(!c.FormInfo)throw new Error("NoFormInfoInInitialModel");b.instances.forEach(function(a){Injector.instance(a.name,a.dependencies,a.instance,a.env)}),b.factories.forEach(function(a){Injector.factory(a.name,a.dependencies,a.instance,a.env)}),b.controllers.forEach(function(a){Injector.controller(a.name,a.dependencies,a.instance,a.env)}),Injector.configuration("SystemSettings",c.SystemSettings),Injector.configuration("FormInfo",c.FormInfo),Injector.configuration("ClientInfo",c.ClientInfo),Injector.configuration("ActiveXVersion",a.initModel.activeXAddonVersion),c.Errors.ErrorsOnTopList&&c.Errors.ErrorsOnTopList.length>0&&ReactDOM.render(React.createElement(webcon.views.ErrorPanel,{name:"ErrorPanel",errors:c.Errors.ErrorsOnTopList.map(function(a){return{message:a.Message,innerError:{message:a.InnerError?a.InnerError.Message:void 0}}})}),document.getElementById("topErrorPanel")),Injector.resolve(["logger"],function(b){a.printLogs=b.print,a.clearLogs=b.clear,b.debug("loggerPrint/clearRegistered")}),Injector.resolve(["CustomControlsService"],function(b){function c(){Injector.resolve(["GlobalVariablesController"],function(b){b.setUpJsApi(a),b.setGlobalInfoVariables(a)}),Injector.resolve(["StartupController"],function(a){a.bootstrap()}),$("#loadSpinner").hide(),a.webcon=a.webcon||{},a.webcon.pageLoaded=!0;var b=new Date;a.webcon.reloadTimeStamp=b.getMinutes()+"_"+b.getSeconds()+"_"+b.getMilliseconds()}b.fetchAndInitialize(c)})}function massActionApp(a,b){var c=a.initialModel;if(!c.SystemSettings)throw new Error("NoSystemSettingsInInitialModel");if(!c.FormInfo)throw new Error("NoFormInfoInInitialModel");if(!c.ClientInfo)throw new Error("NoClientInfoInInitialModel");b.instances.forEach(function(a){Injector.instance(a.name,a.dependencies,a.instance,a.env)}),b.factories.forEach(function(a){Injector.factory(a.name,a.dependencies,a.instance,a.env)}),b.controllers.forEach(function(a){Injector.controller(a.name,a.dependencies,a.instance,a.env)}),Injector.configuration("SystemSettings",c.SystemSettings),Injector.configuration("FormInfo",c.FormInfo),Injector.configuration("ClientInfo",c.ClientInfo),Injector.resolve(["CustomControlsService"],function(b){function c(){Injector.resolve(["GlobalVariablesController"],function(b){b.setUpJsApi(a)}),Injector.resolve(["MassActionStarter"],function(a){a.bootstrap()}),a.webcon=a.webcon||{},a.webcon.pageLoaded=!0;var b=new Date;a.webcon.reloadTimeStamp=b.getMinutes()+"_"+b.getSeconds()+"_"+b.getMilliseconds()}b.fetchAndInitialize(c)})}if(window.webcon=function(a){return a.extensions={},a.extensions.indexOf=function(a){if(!a)throw new Error("PatternCannotBeEmptyOrUndefined");var b=this.length>>>0,c=Number(arguments[1])||0;for(c=c<0?Math.ceil(c):Math.floor(c),c<0&&(c+=b);c<b;c++)if(c in this&&this[c]===a)return c;return-1},a.extensions.splitRemoveEmptyEntries=function(a){for(var b=this.split(a),c=0;c<b.length;c++)b[c]&&""!=b[c].trim()||(b.splice(c,1),c--);return b},a.extensions.getExtension=function(a){return a=a.toString(),a.substring(a.lastIndexOf(".")+1)},a.extensions.isBlank=function(a){return null==a&&(a=""),/^\s*$/.test(a)},a}(window.webcon||{}),function(){String.prototype.contains=function(a){return-1!=this.indexOf(a)},String.prototype.splice=function(a,b,c){return this.slice(0,a)+c+this.slice(a+Math.abs(b))},"function"!=typeof String.prototype.startsWith&&(String.prototype.startsWith=function(a){return 0==this.indexOf(a)}),"function"!=typeof String.prototype.endsWith&&(String.prototype.endsWith=function(a){if(""===a)return!0;var b=this;return null!=b&&null!=a&&(b=String(b),a=String(a),b.length>=a.length&&b.slice(b.length-a.length)===a)}),Array.prototype.indexOf||(Array.prototype.indexOf=webcon.extensions.indexOf),Array.prototype.fill||Object.defineProperty(Array.prototype,"fill",{value:function(a){if(null==this)throw new TypeError("this is null or not defined");for(var b=Object(this),c=b.length>>>0,d=arguments[1],e=d>>0,f=e<0?Math.max(c+e,0):Math.min(e,c),g=arguments[2],h=void 0===g?c:g>>0,i=h<0?Math.max(c+h,0):Math.min(h,c);f<i;)b[f]=a,f++;return b}}),String.prototype.splitRemoveEmptyEntries||(String.prototype.splitRemoveEmptyEntries=webcon.extensions.splitRemoveEmptyEntries),String.prototype.isBlank||(String.prototype.isBlank=webcon.extensions.isBlank),"function"!=typeof Object.assign&&(Object.assign=function(a,b){"use strict";if(null==a)throw new TypeError("Cannot convert undefined or null to object");for(var c=Object(a),d=1;d<arguments.length;d++){var e=arguments[d];if(null!=e)for(var f in e)Object.prototype.hasOwnProperty.call(e,f)&&(c[f]=e[f])}return c})}(),Date.prototype.formatDate=function(a){var b=this,c=b.getDate(),d=b.getMonth()+1,e=b.getFullYear(),f=b.getHours(),g=b.getMinutes(),h=b.getSeconds();return a||(a="MM/dd/yyyy"),a.indexOf("MM")>-1?a=a.replace("MM",d.toString().replace(/^(\d)$/,"0$1")):a.indexOf("M")>-1&&(a=a.replace("M",d.toString())),a.indexOf("yyyy")>-1?a=a.replace("yyyy",e.toString()):a.indexOf("yy")>-1&&(a=a.replace("yy",e.toString().substr(2,2))),a.indexOf("dd")>-1?a=a.replace("dd",c.toString().replace(/^(\d)$/,"0$1")):a.indexOf("d")>-1&&(a=a.replace("d",c.toString())),a.indexOf("t")>-1&&(a=f>11?a.replace("t","pm"):a.replace("t","am")),a.indexOf("HH")>-1&&(a=a.replace("HH",f.toString().replace(/^(\d)$/,"0$1"))),a.indexOf("hh")>-1&&(f>12&&(f-=12),0===f&&(f=12),a=a.replace("hh",f.toString().replace(/^(\d)$/,"0$1"))),a.indexOf("mm")>-1&&(a=a.replace("mm",g.toString().replace(/^(\d)$/,"0$1"))),a.indexOf("ss")>-1&&(a=a.replace("ss",h.toString().replace(/^(\d)$/,"0$1"))),a},window.Guard=function(){function a(a,b){if(void 0===a||null===a)throw new Error(b+"CannotBeUndefined")}function b(a,b){if(!a||"function"!=typeof a)throw new Error(b+"IsNotAFunction")}function c(a,b){if(!a||"object"!=typeof a)throw new Error(b+"IsNotAnObject")}function d(a,b){if(void 0===a||null===a||""===a)throw new Error(b+"CannotBeUndefinedOrEmpty")}function e(a,b){if(void 0===a||null===a||isNaN(a))throw new Error(b+"CanBeOnlyNumber")}function f(a,b){if(e(a,b),a<0)throw new Error(b+"NumberMustBePositive")}return{notNull:a,notNullFunction:b,notNullObject:c,notNullOrEmpty:d,onlyNumber:e,onlyPositiveNumber:f}}(),function(a,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){function c(a){var b=a.length,c=_.type(a);return"function"!==c&&!_.isWindow(a)&&(!(1!==a.nodeType||!b)||("array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a))}function d(a,b,c){if(_.isFunction(b))return _.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return _.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(ha.test(b))return _.filter(b,a,c);b=_.filter(b,a)}return _.grep(a,function(a){return U.call(b,a)>=0!==c})}function e(a,b){for(;(a=a[b])&&1!==a.nodeType;);return a}function f(a){var b=na[a]={};return _.each(a.match(ma)||[],function(a,c){b[c]=!0}),b}function g(){Z.removeEventListener("DOMContentLoaded",g,!1),a.removeEventListener("load",g,!1),_.ready()}function h(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=_.expando+h.uid++}function i(a,b,c){var d;if(void 0===c&&1===a.nodeType)if(d="data-"+b.replace(ta,"-$1").toLowerCase(),"string"==typeof(c=a.getAttribute(d))){try{c="true"===c||"false"!==c&&("null"===c?null:+c+""===c?+c:sa.test(c)?_.parseJSON(c):c)}catch(a){}ra.set(a,b,c)}else c=void 0;return c}function j(){return!0}function k(){return!1}function l(){try{return Z.activeElement}catch(a){}}function m(a,b){return _.nodeName(a,"table")&&_.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function n(a){return a.type=(null!==a.getAttribute("type"))+"/"+a.type,a}function o(a){var b=Ja.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function p(a,b){for(var c=0,d=a.length;d>c;c++)qa.set(a[c],"globalEval",!b||qa.get(b[c],"globalEval"))}function q(a,b){var c,d,e,f,g,h,i,j;if(1===b.nodeType){if(qa.hasData(a)&&(f=qa.access(a),g=qa.set(b,f),j=f.events)){delete g.handle,g.events={};for(e in j)for(c=0,d=j[e].length;d>c;c++)_.event.add(b,e,j[e][c])}ra.hasData(a)&&(h=ra.access(a),i=_.extend({},h),ra.set(b,i))}}function r(a,b){var c=a.getElementsByTagName?a.getElementsByTagName(b||"*"):a.querySelectorAll?a.querySelectorAll(b||"*"):[];return void 0===b||b&&_.nodeName(a,b)?_.merge([a],c):c}function s(a,b){var c=b.nodeName.toLowerCase();"input"===c&&xa.test(a.type)?b.checked=a.checked:("input"===c||"textarea"===c)&&(b.defaultValue=a.defaultValue)}function t(b,c){var d,e=_(c.createElement(b)).appendTo(c.body),f=a.getDefaultComputedStyle&&(d=a.getDefaultComputedStyle(e[0]))?d.display:_.css(e[0],"display");return e.detach(),f}function u(a){var b=Z,c=Na[a];return c||(c=t(a,b),"none"!==c&&c||(Ma=(Ma||_("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=Ma[0].contentDocument,b.write(),b.close(),c=t(a,b),Ma.detach()),Na[a]=c),c}function v(a,b,c){var d,e,f,g,h=a.style;return c=c||Qa(a),c&&(g=c.getPropertyValue(b)||c[b]),c&&(""!==g||_.contains(a.ownerDocument,a)||(g=_.style(a,b)),Pa.test(g)&&Oa.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),void 0!==g?g+"":g}function w(a,b){return{get:function(){return a()?void delete this.get:(this.get=b).apply(this,arguments)}}}function x(a,b){if(b in a)return b;for(var c=b[0].toUpperCase()+b.slice(1),d=b,e=Wa.length;e--;)if((b=Wa[e]+c)in a)return b;return d}function y(a,b,c){var d=Sa.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function z(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;4>f;f+=2)"margin"===c&&(g+=_.css(a,c+va[f],!0,e)),d?("content"===c&&(g-=_.css(a,"padding"+va[f],!0,e)),"margin"!==c&&(g-=_.css(a,"border"+va[f]+"Width",!0,e))):(g+=_.css(a,"padding"+va[f],!0,e),"padding"!==c&&(g+=_.css(a,"border"+va[f]+"Width",!0,e)));return g}function A(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=Qa(a),g="border-box"===_.css(a,"boxSizing",!1,f);if(0>=e||null==e){if(e=v(a,b,f),(0>e||null==e)&&(e=a.style[b]),Pa.test(e))return e;d=g&&(Y.boxSizingReliable()||e===a.style[b]),e=parseFloat(e)||0}return e+z(a,b,c||(g?"border":"content"),d,f)+"px"}function B(a,b){for(var c,d,e,f=[],g=0,h=a.length;h>g;g++)d=a[g],d.style&&(f[g]=qa.get(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&wa(d)&&(f[g]=qa.access(d,"olddisplay",u(d.nodeName)))):(e=wa(d),"none"===c&&e||qa.set(d,"olddisplay",e?c:_.css(d,"display"))));for(g=0;h>g;g++)d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}function C(a,b,c,d,e){return new C.prototype.init(a,b,c,d,e)}function D(){return setTimeout(function(){Xa=void 0}),Xa=_.now()}function E(a,b){var c,d=0,e={height:a};for(b=b?1:0;4>d;d+=2-b)c=va[d],e["margin"+c]=e["padding"+c]=a;return b&&(e.opacity=e.width=a),e}function F(a,b,c){for(var d,e=(bb[b]||[]).concat(bb["*"]),f=0,g=e.length;g>f;f++)if(d=e[f].call(c,b,a))return d}function G(a,b,c){var d,e,f,g,h,i,j,k=this,l={},m=a.style,n=a.nodeType&&wa(a),o=qa.get(a,"fxshow");c.queue||(h=_._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,k.always(function(){k.always(function(){h.unqueued--,_.queue(a,"fx").length||h.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[m.overflow,m.overflowX,m.overflowY],j=_.css(a,"display"),"inline"===("none"===j?qa.get(a,"olddisplay")||u(a.nodeName):j)&&"none"===_.css(a,"float")&&(m.display="inline-block")),c.overflow&&(m.overflow="hidden",k.always(function(){m.overflow=c.overflow[0],m.overflowX=c.overflow[1],m.overflowY=c.overflow[2]}));for(d in b)if(e=b[d],Za.exec(e)){if(delete b[d],f=f||"toggle"===e,e===(n?"hide":"show")){if("show"!==e||!o||void 0===o[d])continue;n=!0}l[d]=o&&o[d]||_.style(a,d)}else j=void 0;if(_.isEmptyObject(l))"inline"===("none"===j?u(a.nodeName):j)&&(m.display=j);else{o?"hidden"in o&&(n=o.hidden):o=qa.access(a,"fxshow",{}),f&&(o.hidden=!n),n?_(a).show():k.done(function(){_(a).hide()}),k.done(function(){var b;qa.remove(a,"fxshow");for(b in l)_.style(a,b,l[b])});for(d in l)g=F(n?o[d]:0,d,k),d in o||(o[d]=g.start,n&&(g.end=g.start,g.start="width"===d||"height"===d?1:0))}}function H(a,b){var c,d,e,f,g;for(c in a)if(d=_.camelCase(c),e=b[d],f=a[c],_.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),(g=_.cssHooks[d])&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function I(a,b,c){var d,e,f=0,g=ab.length,h=_.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=Xa||D(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;i>g;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),1>f&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:_.extend({},b),opts:_.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:Xa||D(),duration:c.duration,tweens:[],createTween:function(b,c){var d=_.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;d>c;c++)j.tweens[c].run(1);return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;for(H(k,j.opts.specialEasing);g>f;f++)if(d=ab[f].call(j,a,k,j.opts))return d;return _.map(k,F,j),_.isFunction(j.opts.start)&&j.opts.start.call(a,j),_.fx.timer(_.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}function J(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(ma)||[];if(_.isFunction(c))for(;d=f[e++];)"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function K(a,b,c,d){function e(h){var i;return f[h]=!0,_.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||g||f[j]?g?!(i=j):void 0:(b.dataTypes.unshift(j),e(j),!1)}),i}var f={},g=a===sb;return e(b.dataTypes[0])||!f["*"]&&e("*")}function L(a,b){var c,d,e=_.ajaxSettings.flatOptions||{};for(c in b)void 0!==b[c]&&((e[c]?a:d||(d={}))[c]=b[c]);return d&&_.extend(!0,a,d),a}function M(a,b,c){for(var d,e,f,g,h=a.contents,i=a.dataTypes;"*"===i[0];)i.shift(),void 0===d&&(d=a.mimeType||b.getResponseHeader("Content-Type"));if(d)for(e in h)if(h[e]&&h[e].test(d)){i.unshift(e);break}if(i[0]in c)f=i[0];else{for(e in c){if(!i[0]||a.converters[e+" "+i[0]]){f=e;break}g||(g=e)}f=f||g}return f?(f!==i[0]&&i.unshift(f),c[f]):void 0}function N(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];for(f=k.shift();f;)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(!(g=j[i+" "+f]||j["* "+f]))for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){!0===g?g=j[e]:!0!==j[e]&&(f=h[0],k.unshift(h[1]));break}if(!0!==g)if(g&&a.throws)b=g(b);else try{b=g(b)}catch(a){return{state:"parsererror",error:g?a:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}function O(a,b,c,d){var e;if(_.isArray(b))_.each(b,function(b,e){c||xb.test(a)?d(a,e):O(a+"["+("object"==typeof e?b:"")+"]",e,c,d)});else if(c||"object"!==_.type(b))d(a,b);else for(e in b)O(a+"["+e+"]",b[e],c,d)}function P(a){return _.isWindow(a)?a:9===a.nodeType&&a.defaultView}var Q=[],R=Q.slice,S=Q.concat,T=Q.push,U=Q.indexOf,V={},W=V.toString,X=V.hasOwnProperty,Y={},Z=a.document,$="2.1.3",_=function(a,b){return new _.fn.init(a,b)},aa=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ba=/^-ms-/,ca=/-([\da-z])/gi,da=function(a,b){return b.toUpperCase()};_.fn=_.prototype={jquery:$,constructor:_,selector:"",length:0,toArray:function(){return R.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:R.call(this)},pushStack:function(a){var b=_.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a,b){return _.each(this,a,b)},map:function(a){return this.pushStack(_.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(R.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:T,sort:Q.sort,splice:Q.splice},_.extend=_.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||_.isFunction(g)||(g={}),h===i&&(g=this,h--);i>h;h++)if(null!=(a=arguments[h]))for(b in a)c=g[b],d=a[b],g!==d&&(j&&d&&(_.isPlainObject(d)||(e=_.isArray(d)))?(e?(e=!1,f=c&&_.isArray(c)?c:[]):f=c&&_.isPlainObject(c)?c:{},g[b]=_.extend(j,f,d)):void 0!==d&&(g[b]=d));return g},_.extend({expando:"jQuery"+($+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===_.type(a)},isArray:Array.isArray,isWindow:function(a){return null!=a&&a===a.window},isNumeric:function(a){return!_.isArray(a)&&a-parseFloat(a)+1>=0},isPlainObject:function(a){return"object"===_.type(a)&&!a.nodeType&&!_.isWindow(a)&&!(a.constructor&&!X.call(a.constructor.prototype,"isPrototypeOf"))},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?V[W.call(a)]||"object":typeof a},globalEval:function(a){var b,c=eval;(a=_.trim(a))&&(1===a.indexOf("use strict")?(b=Z.createElement("script"),b.text=a,Z.head.appendChild(b).parentNode.removeChild(b)):c(a))},camelCase:function(a){return a.replace(ba,"ms-").replace(ca,da)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,d){var e=0,f=a.length,g=c(a);if(d){if(g)for(;f>e&&!1!==b.apply(a[e],d);e++);else for(e in a)if(!1===b.apply(a[e],d))break}else if(g)for(;f>e&&!1!==b.call(a[e],e,a[e]);e++);else for(e in a)if(!1===b.call(a[e],e,a[e]))break;return a},trim:function(a){return null==a?"":(a+"").replace(aa,"")},makeArray:function(a,b){var d=b||[];return null!=a&&(c(Object(a))?_.merge(d,"string"==typeof a?[a]:a):T.call(d,a)),d},inArray:function(a,b,c){return null==b?-1:U.call(b,a,c)},merge:function(a,b){for(var c=+b.length,d=0,e=a.length;c>d;d++)a[e++]=b[d];return a.length=e,a},grep:function(a,b,c){for(var d=[],e=0,f=a.length,g=!c;f>e;e++)!b(a[e],e)!==g&&d.push(a[e]);return d},map:function(a,b,d){var e,f=0,g=a.length,h=c(a),i=[];if(h)for(;g>f;f++)null!=(e=b(a[f],f,d))&&i.push(e);else for(f in a)null!=(e=b(a[f],f,d))&&i.push(e);return S.apply([],i)},guid:1,proxy:function(a,b){var c,d,e;return"string"==typeof b&&(c=a[b],b=a,a=c),_.isFunction(a)?(d=R.call(arguments,2),e=function(){return a.apply(b||this,d.concat(R.call(arguments)))},e.guid=a.guid=a.guid||_.guid++,e):void 0},now:Date.now,support:Y}),_.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){V["[object "+b+"]"]=b.toLowerCase()});var ea=function(a){function b(a,b,c,d){var e,f,g,h,i,j,l,n,o,p;if((b?b.ownerDocument||b:O)!==G&&F(b),b=b||G,c=c||[],h=b.nodeType,"string"!=typeof a||!a||1!==h&&9!==h&&11!==h)return c;if(!d&&I){if(11!==h&&(e=sa.exec(a)))if(g=e[1]){if(9===h){if(!(f=b.getElementById(g))||!f.parentNode)return c;if(f.id===g)return c.push(f),c}else if(b.ownerDocument&&(f=b.ownerDocument.getElementById(g))&&M(b,f)&&f.id===g)return c.push(f),c}else{if(e[2])return $.apply(c,b.getElementsByTagName(a)),c;if((g=e[3])&&v.getElementsByClassName)return $.apply(c,b.getElementsByClassName(g)),c}if(v.qsa&&(!J||!J.test(a))){if(n=l=N,o=b,p=1!==h&&a,1===h&&"object"!==b.nodeName.toLowerCase()){for(j=z(a),(l=b.getAttribute("id"))?n=l.replace(ua,"\\$&"):b.setAttribute("id",n),n="[id='"+n+"'] ",i=j.length;i--;)j[i]=n+m(j[i]);o=ta.test(a)&&k(b.parentNode)||b,p=j.join(",")}if(p)try{return $.apply(c,o.querySelectorAll(p)),c}catch(a){}finally{l||b.removeAttribute("id")}}}return B(a.replace(ia,"$1"),b,c,d)}function c(){function a(c,d){return b.push(c+" ")>w.cacheLength&&delete a[b.shift()],a[c+" "]=d}var b=[];return a}function d(a){return a[N]=!0,a}function e(a){var b=G.createElement("div");try{return!!a(b)}catch(a){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function f(a,b){for(var c=a.split("|"),d=a.length;d--;)w.attrHandle[c[d]]=b}function g(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||V)-(~a.sourceIndex||V);if(d)return d;if(c)for(;c=c.nextSibling;)if(c===b)return-1;return a?1:-1}function h(a){return function(b){return"input"===b.nodeName.toLowerCase()&&b.type===a}}function i(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function j(a){return d(function(b){return b=+b,d(function(c,d){for(var e,f=a([],c.length,b),g=f.length;g--;)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function k(a){return a&&void 0!==a.getElementsByTagName&&a}function l(){}function m(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b].value;return d}function n(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=Q++;return b.first?function(b,c,f){for(;b=b[d];)if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j=[P,f];if(g){for(;b=b[d];)if((1===b.nodeType||e)&&a(b,c,g))return!0}else for(;b=b[d];)if(1===b.nodeType||e){if(i=b[N]||(b[N]={}),(h=i[d])&&h[0]===P&&h[1]===f)return j[2]=h[2];if(i[d]=j,j[2]=a(b,c,g))return!0}}}function o(a){return a.length>1?function(b,c,d){for(var e=a.length;e--;)if(!a[e](b,c,d))return!1;return!0}:a[0]}function p(a,c,d){for(var e=0,f=c.length;f>e;e++)b(a,c[e],d);return d}function q(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(!c||c(f,d,e))&&(g.push(f),j&&b.push(h));return g}function r(a,b,c,e,f,g){return e&&!e[N]&&(e=r(e)),f&&!f[N]&&(f=r(f,g)),d(function(d,g,h,i){var j,k,l,m=[],n=[],o=g.length,r=d||p(b||"*",h.nodeType?[h]:h,[]),s=!a||!d&&b?r:q(r,m,a,h,i),t=c?f||(d?a:o||e)?[]:g:s;if(c&&c(s,t,h,i),e)for(j=q(t,n),e(j,[],h,i),k=j.length;k--;)(l=j[k])&&(t[n[k]]=!(s[n[k]]=l));if(d){if(f||a){if(f){for(j=[],k=t.length;k--;)(l=t[k])&&j.push(s[k]=l);f(null,t=[],j,i)}for(k=t.length;k--;)(l=t[k])&&(j=f?aa(d,l):m[k])>-1&&(d[j]=!(g[j]=l))}}else t=q(t===g?t.splice(o,t.length):t),f?f(null,g,t,i):$.apply(g,t)})}function s(a){for(var b,c,d,e=a.length,f=w.relative[a[0].type],g=f||w.relative[" "],h=f?1:0,i=n(function(a){return a===b},g,!0),j=n(function(a){return aa(b,a)>-1},g,!0),k=[function(a,c,d){var e=!f&&(d||c!==C)||((b=c).nodeType?i(a,c,d):j(a,c,d));return b=null,e}];e>h;h++)if(c=w.relative[a[h].type])k=[n(o(k),c)];else{if(c=w.filter[a[h].type].apply(null,a[h].matches),c[N]){for(d=++h;e>d&&!w.relative[a[d].type];d++);return r(h>1&&o(k),h>1&&m(a.slice(0,h-1).concat({value:" "===a[h-2].type?"*":""})).replace(ia,"$1"),c,d>h&&s(a.slice(h,d)),e>d&&s(a=a.slice(d)),e>d&&m(a))}k.push(c)}return o(k)}function t(a,c){var e=c.length>0,f=a.length>0,g=function(d,g,h,i,j){var k,l,m,n=0,o="0",p=d&&[],r=[],s=C,t=d||f&&w.find.TAG("*",j),u=P+=null==s?1:Math.random()||.1,v=t.length;for(j&&(C=g!==G&&g);o!==v&&null!=(k=t[o]);o++){if(f&&k){for(l=0;m=a[l++];)if(m(k,g,h)){i.push(k);break}j&&(P=u)}e&&((k=!m&&k)&&n--,d&&p.push(k))}if(n+=o,e&&o!==n){for(l=0;m=c[l++];)m(p,r,g,h);if(d){if(n>0)for(;o--;)p[o]||r[o]||(r[o]=Y.call(i));r=q(r)}$.apply(i,r),j&&!d&&r.length>0&&n+c.length>1&&b.uniqueSort(i)}return j&&(P=u,C=s),p};return e?d(g):g}var u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N="sizzle"+1*new Date,O=a.document,P=0,Q=0,R=c(),S=c(),T=c(),U=function(a,b){return a===b&&(E=!0),0},V=1<<31,W={}.hasOwnProperty,X=[],Y=X.pop,Z=X.push,$=X.push,_=X.slice,aa=function(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1},ba="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ca="[\\x20\\t\\r\\n\\f]",da="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ea=da.replace("w","w#"),fa="\\["+ca+"*("+da+")(?:"+ca+"*([*^$|!~]?=)"+ca+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ea+"))|)"+ca+"*\\]",ga=":("+da+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+fa+")*)|.*)\\)|)",ha=new RegExp(ca+"+","g"),ia=new RegExp("^"+ca+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ca+"+$","g"),ja=new RegExp("^"+ca+"*,"+ca+"*"),ka=new RegExp("^"+ca+"*([>+~]|"+ca+")"+ca+"*"),la=new RegExp("="+ca+"*([^\\]'\"]*?)"+ca+"*\\]","g"),ma=new RegExp(ga),na=new RegExp("^"+ea+"$"),oa={ID:new RegExp("^#("+da+")"),CLASS:new RegExp("^\\.("+da+")"),TAG:new RegExp("^("+da.replace("w","w*")+")"),ATTR:new RegExp("^"+fa),PSEUDO:new RegExp("^"+ga),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ca+"*(even|odd|(([+-]|)(\\d*)n|)"+ca+"*(?:([+-]|)"+ca+"*(\\d+)|))"+ca+"*\\)|)","i"),bool:new RegExp("^(?:"+ba+")$","i"),needsContext:new RegExp("^"+ca+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ca+"*((?:-\\d)?\\d*)"+ca+"*\\)|)(?=[^-]|$)","i")},pa=/^(?:input|select|textarea|button)$/i,qa=/^h\d$/i,ra=/^[^{]+\{\s*\[native \w/,sa=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ta=/[+~]/,ua=/'|\\/g,va=new RegExp("\\\\([\\da-f]{1,6}"+ca+"?|("+ca+")|.)","ig"),wa=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:0>d?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)},xa=function(){F()};try{$.apply(X=_.call(O.childNodes),O.childNodes),X[O.childNodes.length].nodeType}catch(a){$={apply:X.length?function(a,b){Z.apply(a,_.call(b))}:function(a,b){for(var c=a.length,d=0;a[c++]=b[d++];);a.length=c-1}}}v=b.support={},y=b.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return!!b&&"HTML"!==b.nodeName},F=b.setDocument=function(a){var b,c,d=a?a.ownerDocument||a:O;return d!==G&&9===d.nodeType&&d.documentElement?(G=d,H=d.documentElement,c=d.defaultView,c&&c!==c.top&&(c.addEventListener?c.addEventListener("unload",xa,!1):c.attachEvent&&c.attachEvent("onunload",xa)),I=!y(d),v.attributes=e(function(a){return a.className="i",!a.getAttribute("className")}),v.getElementsByTagName=e(function(a){return a.appendChild(d.createComment("")),!a.getElementsByTagName("*").length}),v.getElementsByClassName=ra.test(d.getElementsByClassName),v.getById=e(function(a){return H.appendChild(a).id=N,!d.getElementsByName||!d.getElementsByName(N).length}),v.getById?(w.find.ID=function(a,b){if(void 0!==b.getElementById&&I){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},w.filter.ID=function(a){var b=a.replace(va,wa);return function(a){return a.getAttribute("id")===b}}):(delete w.find.ID,w.filter.ID=function(a){var b=a.replace(va,wa);return function(a){var c=void 0!==a.getAttributeNode&&a.getAttributeNode("id");return c&&c.value===b}}),w.find.TAG=v.getElementsByTagName?function(a,b){return void 0!==b.getElementsByTagName?b.getElementsByTagName(a):v.qsa?b.querySelectorAll(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){for(;c=f[e++];)1===c.nodeType&&d.push(c);return d}return f},w.find.CLASS=v.getElementsByClassName&&function(a,b){return I?b.getElementsByClassName(a):void 0},K=[],J=[],(v.qsa=ra.test(d.querySelectorAll))&&(e(function(a){H.appendChild(a).innerHTML="<a id='"+N+"'></a><select id='"+N+"-\f]' msallowcapture=''><option selected=''></option></select>",a.querySelectorAll("[msallowcapture^='']").length&&J.push("[*^$]="+ca+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||J.push("\\["+ca+"*(?:value|"+ba+")"),a.querySelectorAll("[id~="+N+"-]").length||J.push("~="),a.querySelectorAll(":checked").length||J.push(":checked"),
a.querySelectorAll("a#"+N+"+*").length||J.push(".#.+[+~]")}),e(function(a){var b=d.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&J.push("name"+ca+"*[*^$|!~]?="),a.querySelectorAll(":enabled").length||J.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),J.push(",.*:")})),(v.matchesSelector=ra.test(L=H.matches||H.webkitMatchesSelector||H.mozMatchesSelector||H.oMatchesSelector||H.msMatchesSelector))&&e(function(a){v.disconnectedMatch=L.call(a,"div"),L.call(a,"[s!='']:x"),K.push("!=",ga)}),J=J.length&&new RegExp(J.join("|")),K=K.length&&new RegExp(K.join("|")),b=ra.test(H.compareDocumentPosition),M=b||ra.test(H.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1},U=b?function(a,b){if(a===b)return E=!0,0;var c=!a.compareDocumentPosition-!b.compareDocumentPosition;return c||(c=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&c||!v.sortDetached&&b.compareDocumentPosition(a)===c?a===d||a.ownerDocument===O&&M(O,a)?-1:b===d||b.ownerDocument===O&&M(O,b)?1:D?aa(D,a)-aa(D,b):0:4&c?-1:1)}:function(a,b){if(a===b)return E=!0,0;var c,e=0,f=a.parentNode,h=b.parentNode,i=[a],j=[b];if(!f||!h)return a===d?-1:b===d?1:f?-1:h?1:D?aa(D,a)-aa(D,b):0;if(f===h)return g(a,b);for(c=a;c=c.parentNode;)i.unshift(c);for(c=b;c=c.parentNode;)j.unshift(c);for(;i[e]===j[e];)e++;return e?g(i[e],j[e]):i[e]===O?-1:j[e]===O?1:0},d):G},b.matches=function(a,c){return b(a,null,null,c)},b.matchesSelector=function(a,c){if((a.ownerDocument||a)!==G&&F(a),c=c.replace(la,"='$1']"),!(!v.matchesSelector||!I||K&&K.test(c)||J&&J.test(c)))try{var d=L.call(a,c);if(d||v.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(a){}return b(c,G,null,[a]).length>0},b.contains=function(a,b){return(a.ownerDocument||a)!==G&&F(a),M(a,b)},b.attr=function(a,b){(a.ownerDocument||a)!==G&&F(a);var c=w.attrHandle[b.toLowerCase()],d=c&&W.call(w.attrHandle,b.toLowerCase())?c(a,b,!I):void 0;return void 0!==d?d:v.attributes||!I?a.getAttribute(b):(d=a.getAttributeNode(b))&&d.specified?d.value:null},b.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},b.uniqueSort=function(a){var b,c=[],d=0,e=0;if(E=!v.detectDuplicates,D=!v.sortStable&&a.slice(0),a.sort(U),E){for(;b=a[e++];)b===a[e]&&(d=c.push(e));for(;d--;)a.splice(c[d],1)}return D=null,a},x=b.getText=function(a){var b,c="",d=0,e=a.nodeType;if(e){if(1===e||9===e||11===e){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=x(a)}else if(3===e||4===e)return a.nodeValue}else for(;b=a[d++];)c+=x(b);return c},w=b.selectors={cacheLength:50,createPseudo:d,match:oa,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(va,wa),a[3]=(a[3]||a[4]||a[5]||"").replace(va,wa),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||b.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&b.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return oa.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&ma.test(c)&&(b=z(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(va,wa).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=R[a+" "];return b||(b=new RegExp("(^|"+ca+")"+a+"("+ca+"|$)"))&&R(a,function(a){return b.test("string"==typeof a.className&&a.className||void 0!==a.getAttribute&&a.getAttribute("class")||"")})},ATTR:function(a,c,d){return function(e){var f=b.attr(e,a);return null==f?"!="===c:!c||(f+="","="===c?f===d:"!="===c?f!==d:"^="===c?d&&0===f.indexOf(d):"*="===c?d&&f.indexOf(d)>-1:"$="===c?d&&f.slice(-d.length)===d:"~="===c?(" "+f.replace(ha," ")+" ").indexOf(d)>-1:"|="===c&&(f===d||f.slice(0,d.length+1)===d+"-"))}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h;if(q){if(f){for(;p;){for(l=b;l=l[p];)if(h?l.nodeName.toLowerCase()===r:1===l.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){for(k=q[N]||(q[N]={}),j=k[a]||[],n=j[0]===P&&j[1],m=j[0]===P&&j[2],l=n&&q.childNodes[n];l=++n&&l&&l[p]||(m=n=0)||o.pop();)if(1===l.nodeType&&++m&&l===b){k[a]=[P,n,m];break}}else if(s&&(j=(b[N]||(b[N]={}))[a])&&j[0]===P)m=j[1];else for(;(l=++n&&l&&l[p]||(m=n=0)||o.pop())&&((h?l.nodeName.toLowerCase()!==r:1!==l.nodeType)||!++m||(s&&((l[N]||(l[N]={}))[a]=[P,m]),l!==b)););return(m-=e)===d||m%d==0&&m/d>=0}}},PSEUDO:function(a,c){var e,f=w.pseudos[a]||w.setFilters[a.toLowerCase()]||b.error("unsupported pseudo: "+a);return f[N]?f(c):f.length>1?(e=[a,a,"",c],w.setFilters.hasOwnProperty(a.toLowerCase())?d(function(a,b){for(var d,e=f(a,c),g=e.length;g--;)d=aa(a,e[g]),a[d]=!(b[d]=e[g])}):function(a){return f(a,0,e)}):f}},pseudos:{not:d(function(a){var b=[],c=[],e=A(a.replace(ia,"$1"));return e[N]?d(function(a,b,c,d){for(var f,g=e(a,null,d,[]),h=a.length;h--;)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,d,f){return b[0]=a,e(b,null,f,c),b[0]=null,!c.pop()}}),has:d(function(a){return function(c){return b(a,c).length>0}}),contains:d(function(a){return a=a.replace(va,wa),function(b){return(b.textContent||b.innerText||x(b)).indexOf(a)>-1}}),lang:d(function(a){return na.test(a||"")||b.error("unsupported lang: "+a),a=a.replace(va,wa).toLowerCase(),function(b){var c;do{if(c=I?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return(c=c.toLowerCase())===a||0===c.indexOf(a+"-")}while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===H},focus:function(a){return a===G.activeElement&&(!G.hasFocus||G.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return!1===a.disabled},disabled:function(a){return!0===a.disabled},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,!0===a.selected},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!w.pseudos.empty(a)},header:function(a){return qa.test(a.nodeName)},input:function(a){return pa.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:j(function(){return[0]}),last:j(function(a,b){return[b-1]}),eq:j(function(a,b,c){return[0>c?c+b:c]}),even:j(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:j(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:j(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),gt:j(function(a,b,c){for(var d=0>c?c+b:c;++d<b;)a.push(d);return a})}},w.pseudos.nth=w.pseudos.eq;for(u in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})w.pseudos[u]=h(u);for(u in{submit:!0,reset:!0})w.pseudos[u]=i(u);return l.prototype=w.filters=w.pseudos,w.setFilters=new l,z=b.tokenize=function(a,c){var d,e,f,g,h,i,j,k=S[a+" "];if(k)return c?0:k.slice(0);for(h=a,i=[],j=w.preFilter;h;){(!d||(e=ja.exec(h)))&&(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),d=!1,(e=ka.exec(h))&&(d=e.shift(),f.push({value:d,type:e[0].replace(ia," ")}),h=h.slice(d.length));for(g in w.filter)!(e=oa[g].exec(h))||j[g]&&!(e=j[g](e))||(d=e.shift(),f.push({value:d,type:g,matches:e}),h=h.slice(d.length));if(!d)break}return c?h.length:h?b.error(a):S(a,i).slice(0)},A=b.compile=function(a,b){var c,d=[],e=[],f=T[a+" "];if(!f){for(b||(b=z(a)),c=b.length;c--;)f=s(b[c]),f[N]?d.push(f):e.push(f);f=T(a,t(e,d)),f.selector=a}return f},B=b.select=function(a,b,c,d){var e,f,g,h,i,j="function"==typeof a&&a,l=!d&&z(a=j.selector||a);if(c=c||[],1===l.length){if(f=l[0]=l[0].slice(0),f.length>2&&"ID"===(g=f[0]).type&&v.getById&&9===b.nodeType&&I&&w.relative[f[1].type]){if(!(b=(w.find.ID(g.matches[0].replace(va,wa),b)||[])[0]))return c;j&&(b=b.parentNode),a=a.slice(f.shift().value.length)}for(e=oa.needsContext.test(a)?0:f.length;e--&&(g=f[e],!w.relative[h=g.type]);)if((i=w.find[h])&&(d=i(g.matches[0].replace(va,wa),ta.test(f[0].type)&&k(b.parentNode)||b))){if(f.splice(e,1),!(a=d.length&&m(f)))return $.apply(c,d),c;break}}return(j||A(a,l))(d,b,!I,c,ta.test(a)&&k(b.parentNode)||b),c},v.sortStable=N.split("").sort(U).join("")===N,v.detectDuplicates=!!E,F(),v.sortDetached=e(function(a){return 1&a.compareDocumentPosition(G.createElement("div"))}),e(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||f("type|href|height|width",function(a,b,c){return c?void 0:a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),v.attributes&&e(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||f("value",function(a,b,c){return c||"input"!==a.nodeName.toLowerCase()?void 0:a.defaultValue}),e(function(a){return null==a.getAttribute("disabled")})||f(ba,function(a,b,c){var d;return c?void 0:!0===a[b]?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),b}(a);_.find=ea,_.expr=ea.selectors,_.expr[":"]=_.expr.pseudos,_.unique=ea.uniqueSort,_.text=ea.getText,_.isXMLDoc=ea.isXML,_.contains=ea.contains;var fa=_.expr.match.needsContext,ga=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,ha=/^.[^:#\[\.,]*$/;_.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?_.find.matchesSelector(d,a)?[d]:[]:_.find.matches(a,_.grep(b,function(a){return 1===a.nodeType}))},_.fn.extend({find:function(a){var b,c=this.length,d=[],e=this;if("string"!=typeof a)return this.pushStack(_(a).filter(function(){for(b=0;c>b;b++)if(_.contains(e[b],this))return!0}));for(b=0;c>b;b++)_.find(a,e[b],d);return d=this.pushStack(c>1?_.unique(d):d),d.selector=this.selector?this.selector+" "+a:a,d},filter:function(a){return this.pushStack(d(this,a||[],!1))},not:function(a){return this.pushStack(d(this,a||[],!0))},is:function(a){return!!d(this,"string"==typeof a&&fa.test(a)?_(a):a||[],!1).length}});var ia,ja=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(_.fn.init=function(a,b){var c,d;if(!a)return this;if("string"==typeof a){if(!(c="<"===a[0]&&">"===a[a.length-1]&&a.length>=3?[null,a,null]:ja.exec(a))||!c[1]&&b)return!b||b.jquery?(b||ia).find(a):this.constructor(b).find(a);if(c[1]){if(b=b instanceof _?b[0]:b,_.merge(this,_.parseHTML(c[1],b&&b.nodeType?b.ownerDocument||b:Z,!0)),ga.test(c[1])&&_.isPlainObject(b))for(c in b)_.isFunction(this[c])?this[c](b[c]):this.attr(c,b[c]);return this}return d=Z.getElementById(c[2]),d&&d.parentNode&&(this.length=1,this[0]=d),this.context=Z,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):_.isFunction(a)?void 0!==ia.ready?ia.ready(a):a(_):(void 0!==a.selector&&(this.selector=a.selector,this.context=a.context),_.makeArray(a,this))}).prototype=_.fn,ia=_(Z);var ka=/^(?:parents|prev(?:Until|All))/,la={children:!0,contents:!0,next:!0,prev:!0};_.extend({dir:function(a,b,c){for(var d=[],e=void 0!==c;(a=a[b])&&9!==a.nodeType;)if(1===a.nodeType){if(e&&_(a).is(c))break;d.push(a)}return d},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}}),_.fn.extend({has:function(a){var b=_(a,this),c=b.length;return this.filter(function(){for(var a=0;c>a;a++)if(_.contains(this,b[a]))return!0})},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=fa.test(a)||"string"!=typeof a?_(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&_.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?_.unique(f):f)},index:function(a){return a?"string"==typeof a?U.call(_(a),this[0]):U.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(_.unique(_.merge(this.get(),_(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}}),_.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return _.dir(a,"parentNode")},parentsUntil:function(a,b,c){return _.dir(a,"parentNode",c)},next:function(a){return e(a,"nextSibling")},prev:function(a){return e(a,"previousSibling")},nextAll:function(a){return _.dir(a,"nextSibling")},prevAll:function(a){return _.dir(a,"previousSibling")},nextUntil:function(a,b,c){return _.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return _.dir(a,"previousSibling",c)},siblings:function(a){return _.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return _.sibling(a.firstChild)},contents:function(a){return a.contentDocument||_.merge([],a.childNodes)}},function(a,b){_.fn[a]=function(c,d){var e=_.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=_.filter(d,e)),this.length>1&&(la[a]||_.unique(e),ka.test(a)&&e.reverse()),this.pushStack(e)}});var ma=/\S+/g,na={};_.Callbacks=function(a){a="string"==typeof a?na[a]||f(a):_.extend({},a);var b,c,d,e,g,h,i=[],j=!a.once&&[],k=function(f){for(b=a.memory&&f,c=!0,h=e||0,e=0,g=i.length,d=!0;i&&g>h;h++)if(!1===i[h].apply(f[0],f[1])&&a.stopOnFalse){b=!1;break}d=!1,i&&(j?j.length&&k(j.shift()):b?i=[]:l.disable())},l={add:function(){if(i){var c=i.length;!function b(c){_.each(c,function(c,d){var e=_.type(d);"function"===e?a.unique&&l.has(d)||i.push(d):d&&d.length&&"string"!==e&&b(d)})}(arguments),d?g=i.length:b&&(e=c,k(b))}return this},remove:function(){return i&&_.each(arguments,function(a,b){for(var c;(c=_.inArray(b,i,c))>-1;)i.splice(c,1),d&&(g>=c&&g--,h>=c&&h--)}),this},has:function(a){return a?_.inArray(a,i)>-1:!(!i||!i.length)},empty:function(){return i=[],g=0,this},disable:function(){return i=j=b=void 0,this},disabled:function(){return!i},lock:function(){return j=void 0,b||l.disable(),this},locked:function(){return!j},fireWith:function(a,b){return!i||c&&!j||(b=b||[],b=[a,b.slice?b.slice():b],d?j.push(b):k(b)),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!c}};return l},_.extend({Deferred:function(a){var b=[["resolve","done",_.Callbacks("once memory"),"resolved"],["reject","fail",_.Callbacks("once memory"),"rejected"],["notify","progress",_.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return _.Deferred(function(c){_.each(b,function(b,f){var g=_.isFunction(a[b])&&a[b];e[f[1]](function(){var a=g&&g.apply(this,arguments);a&&_.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[f[0]+"With"](this===d?c.promise():this,g?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?_.extend(a,d):d}},e={};return d.pipe=d.then,_.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b,c,d,e=0,f=R.call(arguments),g=f.length,h=1!==g||a&&_.isFunction(a.promise)?g:0,i=1===h?a:_.Deferred(),j=function(a,c,d){return function(e){c[a]=this,d[a]=arguments.length>1?R.call(arguments):e,d===b?i.notifyWith(c,d):--h||i.resolveWith(c,d)}};if(g>1)for(b=new Array(g),c=new Array(g),d=new Array(g);g>e;e++)f[e]&&_.isFunction(f[e].promise)?f[e].promise().done(j(e,d,f)).fail(i.reject).progress(j(e,c,b)):--h;return h||i.resolveWith(d,f),i.promise()}});var oa;_.fn.ready=function(a){return _.ready.promise().done(a),this},_.extend({isReady:!1,readyWait:1,holdReady:function(a){a?_.readyWait++:_.ready(!0)},ready:function(a){(!0===a?--_.readyWait:_.isReady)||(_.isReady=!0,!0!==a&&--_.readyWait>0||(oa.resolveWith(Z,[_]),_.fn.triggerHandler&&(_(Z).triggerHandler("ready"),_(Z).off("ready"))))}}),_.ready.promise=function(b){return oa||(oa=_.Deferred(),"complete"===Z.readyState?setTimeout(_.ready):(Z.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1))),oa.promise(b)},_.ready.promise();var pa=_.access=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===_.type(c)){e=!0;for(h in c)_.access(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,_.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(_(a),c)})),b))for(;i>h;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f};_.acceptData=function(a){return 1===a.nodeType||9===a.nodeType||!+a.nodeType},h.uid=1,h.accepts=_.acceptData,h.prototype={key:function(a){if(!h.accepts(a))return 0;var b={},c=a[this.expando];if(!c){c=h.uid++;try{b[this.expando]={value:c},Object.defineProperties(a,b)}catch(d){b[this.expando]=c,_.extend(a,b)}}return this.cache[c]||(this.cache[c]={}),c},set:function(a,b,c){var d,e=this.key(a),f=this.cache[e];if("string"==typeof b)f[b]=c;else if(_.isEmptyObject(f))_.extend(this.cache[e],b);else for(d in b)f[d]=b[d];return f},get:function(a,b){var c=this.cache[this.key(a)];return void 0===b?c:c[b]},access:function(a,b,c){var d;return void 0===b||b&&"string"==typeof b&&void 0===c?(d=this.get(a,b),void 0!==d?d:this.get(a,_.camelCase(b))):(this.set(a,b,c),void 0!==c?c:b)},remove:function(a,b){var c,d,e,f=this.key(a),g=this.cache[f];if(void 0===b)this.cache[f]={};else{_.isArray(b)?d=b.concat(b.map(_.camelCase)):(e=_.camelCase(b),b in g?d=[b,e]:(d=e,d=d in g?[d]:d.match(ma)||[])),c=d.length;for(;c--;)delete g[d[c]]}},hasData:function(a){return!_.isEmptyObject(this.cache[a[this.expando]]||{})},discard:function(a){a[this.expando]&&delete this.cache[a[this.expando]]}};var qa=new h,ra=new h,sa=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ta=/([A-Z])/g;_.extend({hasData:function(a){return ra.hasData(a)||qa.hasData(a)},data:function(a,b,c){return ra.access(a,b,c)},removeData:function(a,b){ra.remove(a,b)},_data:function(a,b,c){return qa.access(a,b,c)},_removeData:function(a,b){qa.remove(a,b)}}),_.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=ra.get(f),1===f.nodeType&&!qa.get(f,"hasDataAttrs"))){for(c=g.length;c--;)g[c]&&(d=g[c].name,0===d.indexOf("data-")&&(d=_.camelCase(d.slice(5)),i(f,d,e[d])));qa.set(f,"hasDataAttrs",!0)}return e}return"object"==typeof a?this.each(function(){ra.set(this,a)}):pa(this,function(b){var c,d=_.camelCase(a);if(f&&void 0===b){if(void 0!==(c=ra.get(f,a)))return c;if(void 0!==(c=ra.get(f,d)))return c;if(void 0!==(c=i(f,d,void 0)))return c}else this.each(function(){var c=ra.get(this,d);ra.set(this,d,b),-1!==a.indexOf("-")&&void 0!==c&&ra.set(this,a,b)})},null,b,arguments.length>1,null,!0)},removeData:function(a){return this.each(function(){ra.remove(this,a)})}}),_.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=qa.get(a,b),c&&(!d||_.isArray(c)?d=qa.access(a,b,_.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=_.queue(a,b),d=c.length,e=c.shift(),f=_._queueHooks(a,b),g=function(){_.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return qa.get(a,c)||qa.access(a,c,{empty:_.Callbacks("once memory").add(function(){qa.remove(a,[b+"queue",c])})})}}),_.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?_.queue(this[0],a):void 0===b?this:this.each(function(){var c=_.queue(this,a,b);_._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&_.dequeue(this,a)})},dequeue:function(a){return this.each(function(){_.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=_.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};for("string"!=typeof a&&(b=a,a=void 0),a=a||"fx";g--;)(c=qa.get(f[g],a+"queueHooks"))&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var ua=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,va=["Top","Right","Bottom","Left"],wa=function(a,b){return a=b||a,"none"===_.css(a,"display")||!_.contains(a.ownerDocument,a)},xa=/^(?:checkbox|radio)$/i;!function(){var a=Z.createDocumentFragment(),b=a.appendChild(Z.createElement("div")),c=Z.createElement("input");c.setAttribute("type","radio"),c.setAttribute("checked","checked"),c.setAttribute("name","t"),b.appendChild(c),Y.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,b.innerHTML="<textarea>x</textarea>",Y.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue}();var ya="undefined";Y.focusinBubbles="onfocusin"in a;var za=/^key/,Aa=/^(?:mouse|pointer|contextmenu)|click/,Ba=/^(?:focusinfocus|focusoutblur)$/,Ca=/^([^.]*)(?:\.(.+)|)$/;_.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=qa.get(a);if(q)for(c.handler&&(f=c,c=f.handler,e=f.selector),c.guid||(c.guid=_.guid++),(i=q.events)||(i=q.events={}),(g=q.handle)||(g=q.handle=function(b){return typeof _!==ya&&_.event.triggered!==b.type?_.event.dispatch.apply(a,arguments):void 0}),b=(b||"").match(ma)||[""],j=b.length;j--;)h=Ca.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort(),n&&(l=_.event.special[n]||{},n=(e?l.delegateType:l.bindType)||n,l=_.event.special[n]||{},k=_.extend({type:n,origType:p,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&_.expr.match.needsContext.test(e),namespace:o.join(".")},f),(m=i[n])||(m=i[n]=[],m.delegateCount=0,l.setup&&!1!==l.setup.call(a,d,o,g)||a.addEventListener&&a.addEventListener(n,g,!1)),l.add&&(l.add.call(a,k),k.handler.guid||(k.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,k):m.push(k),_.event.global[n]=!0)},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=qa.hasData(a)&&qa.get(a);if(q&&(i=q.events)){for(b=(b||"").match(ma)||[""],j=b.length;j--;)if(h=Ca.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort(),n){for(l=_.event.special[n]||{},n=(d?l.delegateType:l.bindType)||n,m=i[n]||[],h=h[2]&&new RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"),g=f=m.length;f--;)k=m[f],!e&&p!==k.origType||c&&c.guid!==k.guid||h&&!h.test(k.namespace)||d&&d!==k.selector&&("**"!==d||!k.selector)||(m.splice(f,1),k.selector&&m.delegateCount--,l.remove&&l.remove.call(a,k));g&&!m.length&&(l.teardown&&!1!==l.teardown.call(a,o,q.handle)||_.removeEvent(a,n,q.handle),delete i[n])}else for(n in i)_.event.remove(a,n+b[j],c,d,!0);_.isEmptyObject(i)&&(delete q.handle,qa.remove(a,"events"))}},trigger:function(b,c,d,e){var f,g,h,i,j,k,l,m=[d||Z],n=X.call(b,"type")?b.type:b,o=X.call(b,"namespace")?b.namespace.split("."):[];if(g=h=d=d||Z,3!==d.nodeType&&8!==d.nodeType&&!Ba.test(n+_.event.triggered)&&(n.indexOf(".")>=0&&(o=n.split("."),n=o.shift(),o.sort()),j=n.indexOf(":")<0&&"on"+n,b=b[_.expando]?b:new _.Event(n,"object"==typeof b&&b),b.isTrigger=e?2:3,b.namespace=o.join("."),b.namespace_re=b.namespace?new RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=d),c=null==c?[b]:_.makeArray(c,[b]),l=_.event.special[n]||{},e||!l.trigger||!1!==l.trigger.apply(d,c))){if(!e&&!l.noBubble&&!_.isWindow(d)){for(i=l.delegateType||n,Ba.test(i+n)||(g=g.parentNode);g;g=g.parentNode)m.push(g),h=g;h===(d.ownerDocument||Z)&&m.push(h.defaultView||h.parentWindow||a)}for(f=0;(g=m[f++])&&!b.isPropagationStopped();)b.type=f>1?i:l.bindType||n,k=(qa.get(g,"events")||{})[b.type]&&qa.get(g,"handle"),k&&k.apply(g,c),(k=j&&g[j])&&k.apply&&_.acceptData(g)&&(b.result=k.apply(g,c),!1===b.result&&b.preventDefault());return b.type=n,e||b.isDefaultPrevented()||l._default&&!1!==l._default.apply(m.pop(),c)||!_.acceptData(d)||j&&_.isFunction(d[n])&&!_.isWindow(d)&&(h=d[j],h&&(d[j]=null),_.event.triggered=n,d[n](),_.event.triggered=void 0,h&&(d[j]=h)),b.result}},dispatch:function(a){a=_.event.fix(a);var b,c,d,e,f,g=[],h=R.call(arguments),i=(qa.get(this,"events")||{})[a.type]||[],j=_.event.special[a.type]||{};if(h[0]=a,a.delegateTarget=this,!j.preDispatch||!1!==j.preDispatch.call(this,a)){for(g=_.event.handlers.call(this,a,i),b=0;(e=g[b++])&&!a.isPropagationStopped();)for(a.currentTarget=e.elem,c=0;(f=e.handlers[c++])&&!a.isImmediatePropagationStopped();)(!a.namespace_re||a.namespace_re.test(f.namespace))&&(a.handleObj=f,a.data=f.data,void 0!==(d=((_.event.special[f.origType]||{}).handle||f.handler).apply(e.elem,h))&&!1===(a.result=d)&&(a.preventDefault(),a.stopPropagation()));return j.postDispatch&&j.postDispatch.call(this,a),a.result}},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&(!a.button||"click"!==a.type))for(;i!==this;i=i.parentNode||this)if(!0!==i.disabled||"click"!==a.type){for(d=[],c=0;h>c;c++)f=b[c],e=f.selector+" ",void 0===d[e]&&(d[e]=f.needsContext?_(e,this).index(i)>=0:_.find(e,this,null,[i]).length),d[e]&&d.push(f);d.length&&g.push({elem:i,handlers:d})}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,d,e,f=b.button;return null==a.pageX&&null!=b.clientX&&(c=a.target.ownerDocument||Z,d=c.documentElement,e=c.body,a.pageX=b.clientX+(d&&d.scrollLeft||e&&e.scrollLeft||0)-(d&&d.clientLeft||e&&e.clientLeft||0),a.pageY=b.clientY+(d&&d.scrollTop||e&&e.scrollTop||0)-(d&&d.clientTop||e&&e.clientTop||0)),a.which||void 0===f||(a.which=1&f?1:2&f?3:4&f?2:0),a}},fix:function(a){if(a[_.expando])return a;var b,c,d,e=a.type,f=a,g=this.fixHooks[e];for(g||(this.fixHooks[e]=g=Aa.test(e)?this.mouseHooks:za.test(e)?this.keyHooks:{}),d=g.props?this.props.concat(g.props):this.props,a=new _.Event(f),b=d.length;b--;)c=d[b],a[c]=f[c];return a.target||(a.target=Z),3===a.target.nodeType&&(a.target=a.target.parentNode),g.filter?g.filter(a,f):a},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==l()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===l()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&_.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(a){return _.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){var e=_.extend(new _.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?_.event.trigger(e,null,b):_.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},_.removeEvent=function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)},_.Event=function(a,b){return this instanceof _.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&!1===a.returnValue?j:k):this.type=a,b&&_.extend(this,b),this.timeStamp=a&&a.timeStamp||_.now(),void(this[_.expando]=!0)):new _.Event(a,b)},_.Event.prototype={isDefaultPrevented:k,isPropagationStopped:k,isImmediatePropagationStopped:k,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=j,a&&a.preventDefault&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=j,a&&a.stopPropagation&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=j,a&&a.stopImmediatePropagation&&a.stopImmediatePropagation(),this.stopPropagation()}},_.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){_.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return(!e||e!==d&&!_.contains(d,e))&&(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),Y.focusinBubbles||_.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){_.event.simulate(b,a.target,_.event.fix(a),!0)};_.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=qa.access(d,b);e||d.addEventListener(a,c,!0),qa.access(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=qa.access(d,b)-1;e?qa.access(d,b,e):(d.removeEventListener(a,c,!0),qa.remove(d,b))}}}),_.fn.extend({on:function(a,b,c,d,e){var f,g;if("object"==typeof a){"string"!=typeof b&&(c=c||b,b=void 0);for(g in a)this.on(g,b,c,a[g],e);return this}if(null==c&&null==d?(d=b,c=b=void 0):null==d&&("string"==typeof b?(d=c,c=void 0):(d=c,c=b,b=void 0)),!1===d)d=k;else if(!d)return this;return 1===e&&(f=d,d=function(a){return _().off(a),f.apply(this,arguments)},d.guid=f.guid||(f.guid=_.guid++)),this.each(function(){_.event.add(this,a,d,c,b)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,_(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return(!1===b||"function"==typeof b)&&(c=b,b=void 0),!1===c&&(c=k),this.each(function(){_.event.remove(this,a,c,b)})},trigger:function(a,b){return this.each(function(){_.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];return c?_.event.trigger(a,b,c,!0):void 0}});var Da=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Ea=/<([\w:]+)/,Fa=/<|&#?\w+;/,Ga=/<(?:script|style|link)/i,Ha=/checked\s*(?:[^=]|=\s*.checked.)/i,Ia=/^$|\/(?:java|ecma)script/i,Ja=/^true\/(.*)/,Ka=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,La={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};La.optgroup=La.option,La.tbody=La.tfoot=La.colgroup=La.caption=La.thead,La.th=La.td,_.extend({clone:function(a,b,c){var d,e,f,g,h=a.cloneNode(!0),i=_.contains(a.ownerDocument,a);if(!(Y.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||_.isXMLDoc(a)))for(g=r(h),f=r(a),d=0,e=f.length;e>d;d++)s(f[d],g[d]);if(b)if(c)for(f=f||r(a),g=g||r(h),d=0,e=f.length;e>d;d++)q(f[d],g[d]);else q(a,h);return g=r(h,"script"),g.length>0&&p(g,!i&&r(a,"script")),h},buildFragment:function(a,b,c,d){for(var e,f,g,h,i,j,k=b.createDocumentFragment(),l=[],m=0,n=a.length;n>m;m++)if((e=a[m])||0===e)if("object"===_.type(e))_.merge(l,e.nodeType?[e]:e);else if(Fa.test(e)){for(f=f||k.appendChild(b.createElement("div")),g=(Ea.exec(e)||["",""])[1].toLowerCase(),h=La[g]||La._default,f.innerHTML=h[1]+e.replace(Da,"<$1></$2>")+h[2],j=h[0];j--;)f=f.lastChild;_.merge(l,f.childNodes),f=k.firstChild,f.textContent=""}else l.push(b.createTextNode(e));for(k.textContent="",m=0;e=l[m++];)if((!d||-1===_.inArray(e,d))&&(i=_.contains(e.ownerDocument,e),f=r(k.appendChild(e),"script"),i&&p(f),c))for(j=0;e=f[j++];)Ia.test(e.type||"")&&c.push(e);return k},cleanData:function(a){for(var b,c,d,e,f=_.event.special,g=0;void 0!==(c=a[g]);g++){if(_.acceptData(c)&&(e=c[qa.expando])&&(b=qa.cache[e])){if(b.events)for(d in b.events)f[d]?_.event.remove(c,d):_.removeEvent(c,d,b.handle);qa.cache[e]&&delete qa.cache[e]}delete ra.cache[c[ra.expando]]}}}),_.fn.extend({
text:function(a){return pa(this,function(a){return void 0===a?_.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=a)})},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){m(this,a).appendChild(a)}})},prepend:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=m(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,d=a?_.filter(a,this):this,e=0;null!=(c=d[e]);e++)b||1!==c.nodeType||_.cleanData(r(c)),c.parentNode&&(b&&_.contains(c.ownerDocument,c)&&p(r(c,"script")),c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)1===a.nodeType&&(_.cleanData(r(a,!1)),a.textContent="");return this},clone:function(a,b){return a=null!=a&&a,b=null==b?a:b,this.map(function(){return _.clone(this,a,b)})},html:function(a){return pa(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a&&1===b.nodeType)return b.innerHTML;if("string"==typeof a&&!Ga.test(a)&&!La[(Ea.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(Da,"<$1></$2>");try{for(;d>c;c++)b=this[c]||{},1===b.nodeType&&(_.cleanData(r(b,!1)),b.innerHTML=a);b=0}catch(a){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=arguments[0];return this.domManip(arguments,function(b){a=this.parentNode,_.cleanData(r(this)),a&&a.replaceChild(b,this)}),a&&(a.length||a.nodeType)?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b){a=S.apply([],a);var c,d,e,f,g,h,i=0,j=this.length,k=this,l=j-1,m=a[0],p=_.isFunction(m);if(p||j>1&&"string"==typeof m&&!Y.checkClone&&Ha.test(m))return this.each(function(c){var d=k.eq(c);p&&(a[0]=m.call(this,c,d.html())),d.domManip(a,b)});if(j&&(c=_.buildFragment(a,this[0].ownerDocument,!1,this),d=c.firstChild,1===c.childNodes.length&&(c=d),d)){for(e=_.map(r(c,"script"),n),f=e.length;j>i;i++)g=c,i!==l&&(g=_.clone(g,!0,!0),f&&_.merge(e,r(g,"script"))),b.call(this[i],g,i);if(f)for(h=e[e.length-1].ownerDocument,_.map(e,o),i=0;f>i;i++)g=e[i],Ia.test(g.type||"")&&!qa.access(g,"globalEval")&&_.contains(h,g)&&(g.src?_._evalUrl&&_._evalUrl(g.src):_.globalEval(g.textContent.replace(Ka,"")))}return this}}),_.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){_.fn[a]=function(a){for(var c,d=[],e=_(a),f=e.length-1,g=0;f>=g;g++)c=g===f?this:this.clone(!0),_(e[g])[b](c),T.apply(d,c.get());return this.pushStack(d)}});var Ma,Na={},Oa=/^margin/,Pa=new RegExp("^("+ua+")(?!px)[a-z%]+$","i"),Qa=function(b){return b.ownerDocument.defaultView.opener?b.ownerDocument.defaultView.getComputedStyle(b,null):a.getComputedStyle(b,null)};!function(){function b(){g.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",g.innerHTML="",e.appendChild(f);var b=a.getComputedStyle(g,null);c="1%"!==b.top,d="4px"===b.width,e.removeChild(f)}var c,d,e=Z.documentElement,f=Z.createElement("div"),g=Z.createElement("div");g.style&&(g.style.backgroundClip="content-box",g.cloneNode(!0).style.backgroundClip="",Y.clearCloneStyle="content-box"===g.style.backgroundClip,f.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",f.appendChild(g),a.getComputedStyle&&_.extend(Y,{pixelPosition:function(){return b(),c},boxSizingReliable:function(){return null==d&&b(),d},reliableMarginRight:function(){var b,c=g.appendChild(Z.createElement("div"));return c.style.cssText=g.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",c.style.marginRight=c.style.width="0",g.style.width="1px",e.appendChild(f),b=!parseFloat(a.getComputedStyle(c,null).marginRight),e.removeChild(f),g.removeChild(c),b}}))}(),_.swap=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e};var Ra=/^(none|table(?!-c[ea]).+)/,Sa=new RegExp("^("+ua+")(.*)$","i"),Ta=new RegExp("^([+-])=("+ua+")","i"),Ua={position:"absolute",visibility:"hidden",display:"block"},Va={letterSpacing:"0",fontWeight:"400"},Wa=["Webkit","O","Moz","ms"];_.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=v(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=_.camelCase(b),i=a.style;return b=_.cssProps[h]||(_.cssProps[h]=x(i,h)),g=_.cssHooks[b]||_.cssHooks[h],void 0===c?g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b]:(f=typeof c,"string"===f&&(e=Ta.exec(c))&&(c=(e[1]+1)*e[2]+parseFloat(_.css(a,b)),f="number"),void(null!=c&&c===c&&("number"!==f||_.cssNumber[h]||(c+="px"),Y.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),g&&"set"in g&&void 0===(c=g.set(a,c,d))||(i[b]=c))))}},css:function(a,b,c,d){var e,f,g,h=_.camelCase(b);return b=_.cssProps[h]||(_.cssProps[h]=x(a.style,h)),g=_.cssHooks[b]||_.cssHooks[h],g&&"get"in g&&(e=g.get(a,!0,c)),void 0===e&&(e=v(a,b,d)),"normal"===e&&b in Va&&(e=Va[b]),""===c||c?(f=parseFloat(e),!0===c||_.isNumeric(f)?f||0:e):e}}),_.each(["height","width"],function(a,b){_.cssHooks[b]={get:function(a,c,d){return c?Ra.test(_.css(a,"display"))&&0===a.offsetWidth?_.swap(a,Ua,function(){return A(a,b,d)}):A(a,b,d):void 0},set:function(a,c,d){var e=d&&Qa(a);return y(a,c,d?z(a,b,d,"border-box"===_.css(a,"boxSizing",!1,e),e):0)}}}),_.cssHooks.marginRight=w(Y.reliableMarginRight,function(a,b){return b?_.swap(a,{display:"inline-block"},v,[a,"marginRight"]):void 0}),_.each({margin:"",padding:"",border:"Width"},function(a,b){_.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];4>d;d++)e[a+va[d]+b]=f[d]||f[d-2]||f[0];return e}},Oa.test(a)||(_.cssHooks[a+b].set=y)}),_.fn.extend({css:function(a,b){return pa(this,function(a,b,c){var d,e,f={},g=0;if(_.isArray(b)){for(d=Qa(a),e=b.length;e>g;g++)f[b[g]]=_.css(a,b[g],!1,d);return f}return void 0!==c?_.style(a,b,c):_.css(a,b)},a,b,arguments.length>1)},show:function(){return B(this,!0)},hide:function(){return B(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){wa(this)?_(this).show():_(this).hide()})}}),_.Tween=C,C.prototype={constructor:C,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(_.cssNumber[c]?"":"px")},cur:function(){var a=C.propHooks[this.prop];return a&&a.get?a.get(this):C.propHooks._default.get(this)},run:function(a){var b,c=C.propHooks[this.prop];return this.pos=b=this.options.duration?_.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):C.propHooks._default.set(this),this}},C.prototype.init.prototype=C.prototype,C.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=_.css(a.elem,a.prop,""),b&&"auto"!==b?b:0):a.elem[a.prop]},set:function(a){_.fx.step[a.prop]?_.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[_.cssProps[a.prop]]||_.cssHooks[a.prop])?_.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},C.propHooks.scrollTop=C.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},_.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},_.fx=C.prototype.init,_.fx.step={};var Xa,Ya,Za=/^(?:toggle|show|hide)$/,$a=new RegExp("^(?:([+-])=|)("+ua+")([a-z%]*)$","i"),_a=/queueHooks$/,ab=[G],bb={"*":[function(a,b){var c=this.createTween(a,b),d=c.cur(),e=$a.exec(b),f=e&&e[3]||(_.cssNumber[a]?"":"px"),g=(_.cssNumber[a]||"px"!==f&&+d)&&$a.exec(_.css(c.elem,a)),h=1,i=20;if(g&&g[3]!==f){f=f||g[3],e=e||[],g=+d||1;do{h=h||".5",g/=h,_.style(c.elem,a,g+f)}while(h!==(h=c.cur()/d)&&1!==h&&--i)}return e&&(g=c.start=+g||+d||0,c.unit=f,c.end=e[1]?g+(e[1]+1)*e[2]:+e[2]),c}]};_.Animation=_.extend(I,{tweener:function(a,b){_.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;e>d;d++)c=a[d],bb[c]=bb[c]||[],bb[c].unshift(b)},prefilter:function(a,b){b?ab.unshift(a):ab.push(a)}}),_.speed=function(a,b,c){var d=a&&"object"==typeof a?_.extend({},a):{complete:c||!c&&b||_.isFunction(a)&&a,duration:a,easing:c&&b||b&&!_.isFunction(b)&&b};return d.duration=_.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in _.fx.speeds?_.fx.speeds[d.duration]:_.fx.speeds._default,(null==d.queue||!0===d.queue)&&(d.queue="fx"),d.old=d.complete,d.complete=function(){_.isFunction(d.old)&&d.old.call(this),d.queue&&_.dequeue(this,d.queue)},d},_.fn.extend({fadeTo:function(a,b,c,d){return this.filter(wa).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=_.isEmptyObject(a),f=_.speed(b,c,d),g=function(){var b=I(this,_.extend({},a),f);(e||qa.get(this,"finish"))&&b.stop(!0)};return g.finish=g,e||!1===f.queue?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&!1!==a&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=_.timers,g=qa.get(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&_a.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));(b||!c)&&_.dequeue(this,a)})},finish:function(a){return!1!==a&&(a=a||"fx"),this.each(function(){var b,c=qa.get(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=_.timers,g=d?d.length:0;for(c.finish=!0,_.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;g>b;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),_.each(["toggle","show","hide"],function(a,b){var c=_.fn[b];_.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(E(b,!0),a,d,e)}}),_.each({slideDown:E("show"),slideUp:E("hide"),slideToggle:E("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){_.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),_.timers=[],_.fx.tick=function(){var a,b=0,c=_.timers;for(Xa=_.now();b<c.length;b++)(a=c[b])()||c[b]!==a||c.splice(b--,1);c.length||_.fx.stop(),Xa=void 0},_.fx.timer=function(a){_.timers.push(a),a()?_.fx.start():_.timers.pop()},_.fx.interval=13,_.fx.start=function(){Ya||(Ya=setInterval(_.fx.tick,_.fx.interval))},_.fx.stop=function(){clearInterval(Ya),Ya=null},_.fx.speeds={slow:600,fast:200,_default:400},_.fn.delay=function(a,b){return a=_.fx?_.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},function(){var a=Z.createElement("input"),b=Z.createElement("select"),c=b.appendChild(Z.createElement("option"));a.type="checkbox",Y.checkOn=""!==a.value,Y.optSelected=c.selected,b.disabled=!0,Y.optDisabled=!c.disabled,a=Z.createElement("input"),a.value="t",a.type="radio",Y.radioValue="t"===a.value}();var cb,db,eb=_.expr.attrHandle;_.fn.extend({attr:function(a,b){return pa(this,_.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){_.removeAttr(this,a)})}}),_.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(a&&3!==f&&8!==f&&2!==f)return typeof a.getAttribute===ya?_.prop(a,b,c):(1===f&&_.isXMLDoc(a)||(b=b.toLowerCase(),d=_.attrHooks[b]||(_.expr.match.bool.test(b)?db:cb)),void 0===c?d&&"get"in d&&null!==(e=d.get(a,b))?e:(e=_.find.attr(a,b),null==e?void 0:e):null!==c?d&&"set"in d&&void 0!==(e=d.set(a,c,b))?e:(a.setAttribute(b,c+""),c):void _.removeAttr(a,b))},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(ma);if(f&&1===a.nodeType)for(;c=f[e++];)d=_.propFix[c]||c,_.expr.match.bool.test(c)&&(a[d]=!1),a.removeAttribute(c)},attrHooks:{type:{set:function(a,b){if(!Y.radioValue&&"radio"===b&&_.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}}}),db={set:function(a,b,c){return!1===b?_.removeAttr(a,c):a.setAttribute(c,c),c}},_.each(_.expr.match.bool.source.match(/\w+/g),function(a,b){var c=eb[b]||_.find.attr;eb[b]=function(a,b,d){var e,f;return d||(f=eb[b],eb[b]=e,e=null!=c(a,b,d)?b.toLowerCase():null,eb[b]=f),e}});var fb=/^(?:input|select|textarea|button)$/i;_.fn.extend({prop:function(a,b){return pa(this,_.prop,a,b,arguments.length>1)},removeProp:function(a){return this.each(function(){delete this[_.propFix[a]||a]})}}),_.extend({propFix:{for:"htmlFor",class:"className"},prop:function(a,b,c){var d,e,f,g=a.nodeType;if(a&&3!==g&&8!==g&&2!==g)return f=1!==g||!_.isXMLDoc(a),f&&(b=_.propFix[b]||b,e=_.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){return a.hasAttribute("tabindex")||fb.test(a.nodeName)||a.href?a.tabIndex:-1}}}}),Y.optSelected||(_.propHooks.selected={get:function(a){var b=a.parentNode;return b&&b.parentNode&&b.parentNode.selectedIndex,null}}),_.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){_.propFix[this.toLowerCase()]=this});var gb=/[\t\r\n\f]/g;_.fn.extend({addClass:function(a){var b,c,d,e,f,g,h="string"==typeof a&&a,i=0,j=this.length;if(_.isFunction(a))return this.each(function(b){_(this).addClass(a.call(this,b,this.className))});if(h)for(b=(a||"").match(ma)||[];j>i;i++)if(c=this[i],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(gb," "):" ")){for(f=0;e=b[f++];)d.indexOf(" "+e+" ")<0&&(d+=e+" ");g=_.trim(d),c.className!==g&&(c.className=g)}return this},removeClass:function(a){var b,c,d,e,f,g,h=0===arguments.length||"string"==typeof a&&a,i=0,j=this.length;if(_.isFunction(a))return this.each(function(b){_(this).removeClass(a.call(this,b,this.className))});if(h)for(b=(a||"").match(ma)||[];j>i;i++)if(c=this[i],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(gb," "):"")){for(f=0;e=b[f++];)for(;d.indexOf(" "+e+" ")>=0;)d=d.replace(" "+e+" "," ");g=a?_.trim(d):"",c.className!==g&&(c.className=g)}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):this.each(_.isFunction(a)?function(c){_(this).toggleClass(a.call(this,c,this.className,b),b)}:function(){if("string"===c)for(var b,d=0,e=_(this),f=a.match(ma)||[];b=f[d++];)e.hasClass(b)?e.removeClass(b):e.addClass(b);else(c===ya||"boolean"===c)&&(this.className&&qa.set(this,"__className__",this.className),this.className=this.className||!1===a?"":qa.get(this,"__className__")||"")})},hasClass:function(a){for(var b=" "+a+" ",c=0,d=this.length;d>c;c++)if(1===this[c].nodeType&&(" "+this[c].className+" ").replace(gb," ").indexOf(b)>=0)return!0;return!1}});var hb=/\r/g;_.fn.extend({val:function(a){var b,c,d,e=this[0];return arguments.length?(d=_.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,_(this).val()):a,null==e?e="":"number"==typeof e?e+="":_.isArray(e)&&(e=_.map(e,function(a){return null==a?"":a+""})),(b=_.valHooks[this.type]||_.valHooks[this.nodeName.toLowerCase()])&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))})):e?(b=_.valHooks[e.type]||_.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(hb,""):null==c?"":c)):void 0}}),_.extend({valHooks:{option:{get:function(a){var b=_.find.attr(a,"value");return null!=b?b:_.trim(_.text(a))}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||0>e,g=f?null:[],h=f?e+1:d.length,i=0>e?h:f?e:0;h>i;i++)if(c=d[i],!(!c.selected&&i!==e||(Y.optDisabled?c.disabled:null!==c.getAttribute("disabled"))||c.parentNode.disabled&&_.nodeName(c.parentNode,"optgroup"))){if(b=_(c).val(),f)return b;g.push(b)}return g},set:function(a,b){for(var c,d,e=a.options,f=_.makeArray(b),g=e.length;g--;)d=e[g],(d.selected=_.inArray(d.value,f)>=0)&&(c=!0);return c||(a.selectedIndex=-1),f}}}}),_.each(["radio","checkbox"],function(){_.valHooks[this]={set:function(a,b){return _.isArray(b)?a.checked=_.inArray(_(a).val(),b)>=0:void 0}},Y.checkOn||(_.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})}),_.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){_.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),_.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}});var ib=_.now(),jb=/\?/;_.parseJSON=function(a){return JSON.parse(a+"")},_.parseXML=function(a){var b,c;if(!a||"string"!=typeof a)return null;try{c=new DOMParser,b=c.parseFromString(a,"text/xml")}catch(a){b=void 0}return(!b||b.getElementsByTagName("parsererror").length)&&_.error("Invalid XML: "+a),b};var kb=/#.*$/,lb=/([?&])_=[^&]*/,mb=/^(.*?):[ \t]*([^\r\n]*)$/gm,nb=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,ob=/^(?:GET|HEAD)$/,pb=/^\/\//,qb=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,rb={},sb={},tb="*/".concat("*"),ub=a.location.href,vb=qb.exec(ub.toLowerCase())||[];_.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ub,type:"GET",isLocal:nb.test(vb[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":tb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":_.parseJSON,"text xml":_.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?L(L(a,_.ajaxSettings),b):L(_.ajaxSettings,a)},ajaxPrefilter:J(rb),ajaxTransport:J(sb),ajax:function(a,b){function c(a,b,c,g){var i,k,r,s,u,w=b;2!==t&&(t=2,h&&clearTimeout(h),d=void 0,f=g||"",v.readyState=a>0?4:0,i=a>=200&&300>a||304===a,c&&(s=M(l,v,c)),s=N(l,s,v,i),i?(l.ifModified&&(u=v.getResponseHeader("Last-Modified"),u&&(_.lastModified[e]=u),(u=v.getResponseHeader("etag"))&&(_.etag[e]=u)),204===a||"HEAD"===l.type?w="nocontent":304===a?w="notmodified":(w=s.state,k=s.data,r=s.error,i=!r)):(r=w,(a||!w)&&(w="error",0>a&&(a=0))),v.status=a,v.statusText=(b||w)+"",i?o.resolveWith(m,[k,w,v]):o.rejectWith(m,[v,w,r]),v.statusCode(q),q=void 0,j&&n.trigger(i?"ajaxSuccess":"ajaxError",[v,l,i?k:r]),p.fireWith(m,[v,w]),j&&(n.trigger("ajaxComplete",[v,l]),--_.active||_.event.trigger("ajaxStop")))}"object"==typeof a&&(b=a,a=void 0),b=b||{};var d,e,f,g,h,i,j,k,l=_.ajaxSetup({},b),m=l.context||l,n=l.context&&(m.nodeType||m.jquery)?_(m):_.event,o=_.Deferred(),p=_.Callbacks("once memory"),q=l.statusCode||{},r={},s={},t=0,u="canceled",v={readyState:0,getResponseHeader:function(a){var b;if(2===t){if(!g)for(g={};b=mb.exec(f);)g[b[1].toLowerCase()]=b[2];b=g[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===t?f:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return t||(a=s[c]=s[c]||a,r[a]=b),this},overrideMimeType:function(a){return t||(l.mimeType=a),this},statusCode:function(a){var b;if(a)if(2>t)for(b in a)q[b]=[q[b],a[b]];else v.always(a[v.status]);return this},abort:function(a){var b=a||u;return d&&d.abort(b),c(0,b),this}};if(o.promise(v).complete=p.add,v.success=v.done,v.error=v.fail,l.url=((a||l.url||ub)+"").replace(kb,"").replace(pb,vb[1]+"//"),l.type=b.method||b.type||l.method||l.type,l.dataTypes=_.trim(l.dataType||"*").toLowerCase().match(ma)||[""],null==l.crossDomain&&(i=qb.exec(l.url.toLowerCase()),l.crossDomain=!(!i||i[1]===vb[1]&&i[2]===vb[2]&&(i[3]||("http:"===i[1]?"80":"443"))===(vb[3]||("http:"===vb[1]?"80":"443")))),l.data&&l.processData&&"string"!=typeof l.data&&(l.data=_.param(l.data,l.traditional)),K(rb,l,b,v),2===t)return v;j=_.event&&l.global,j&&0==_.active++&&_.event.trigger("ajaxStart"),l.type=l.type.toUpperCase(),l.hasContent=!ob.test(l.type),e=l.url,l.hasContent||(l.data&&(e=l.url+=(jb.test(e)?"&":"?")+l.data,delete l.data),!1===l.cache&&(l.url=lb.test(e)?e.replace(lb,"$1_="+ib++):e+(jb.test(e)?"&":"?")+"_="+ib++)),l.ifModified&&(_.lastModified[e]&&v.setRequestHeader("If-Modified-Since",_.lastModified[e]),_.etag[e]&&v.setRequestHeader("If-None-Match",_.etag[e])),(l.data&&l.hasContent&&!1!==l.contentType||b.contentType)&&v.setRequestHeader("Content-Type",l.contentType),v.setRequestHeader("Accept",l.dataTypes[0]&&l.accepts[l.dataTypes[0]]?l.accepts[l.dataTypes[0]]+("*"!==l.dataTypes[0]?", "+tb+"; q=0.01":""):l.accepts["*"]);for(k in l.headers)v.setRequestHeader(k,l.headers[k]);if(l.beforeSend&&(!1===l.beforeSend.call(m,v,l)||2===t))return v.abort();u="abort";for(k in{success:1,error:1,complete:1})v[k](l[k]);if(d=K(sb,l,b,v)){v.readyState=1,j&&n.trigger("ajaxSend",[v,l]),l.async&&l.timeout>0&&(h=setTimeout(function(){v.abort("timeout")},l.timeout));try{t=1,d.send(r,c)}catch(a){if(!(2>t))throw a;c(-1,a)}}else c(-1,"No Transport");return v},getJSON:function(a,b,c){return _.get(a,b,c,"json")},getScript:function(a,b){return _.get(a,void 0,b,"script")}}),_.each(["get","post"],function(a,b){_[b]=function(a,c,d,e){return _.isFunction(c)&&(e=e||d,d=c,c=void 0),_.ajax({url:a,type:b,dataType:e,data:c,success:d})}}),_._evalUrl=function(a){return _.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},_.fn.extend({wrapAll:function(a){var b;return _.isFunction(a)?this.each(function(b){_(this).wrapAll(a.call(this,b))}):(this[0]&&(b=_(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){for(var a=this;a.firstElementChild;)a=a.firstElementChild;return a}).append(this)),this)},wrapInner:function(a){return this.each(_.isFunction(a)?function(b){_(this).wrapInner(a.call(this,b))}:function(){var b=_(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=_.isFunction(a);return this.each(function(c){_(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){_.nodeName(this,"body")||_(this).replaceWith(this.childNodes)}).end()}}),_.expr.filters.hidden=function(a){return a.offsetWidth<=0&&a.offsetHeight<=0},_.expr.filters.visible=function(a){return!_.expr.filters.hidden(a)};var wb=/%20/g,xb=/\[\]$/,yb=/\r?\n/g,zb=/^(?:submit|button|image|reset|file)$/i,Ab=/^(?:input|select|textarea|keygen)/i;_.param=function(a,b){var c,d=[],e=function(a,b){b=_.isFunction(b)?b():null==b?"":b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(void 0===b&&(b=_.ajaxSettings&&_.ajaxSettings.traditional),_.isArray(a)||a.jquery&&!_.isPlainObject(a))_.each(a,function(){e(this.name,this.value)});else for(c in a)O(c,a[c],b,e);return d.join("&").replace(wb,"+")},_.fn.extend({serialize:function(){return _.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=_.prop(this,"elements");return a?_.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!_(this).is(":disabled")&&Ab.test(this.nodeName)&&!zb.test(a)&&(this.checked||!xa.test(a))}).map(function(a,b){var c=_(this).val();return null==c?null:_.isArray(c)?_.map(c,function(a){return{name:b.name,value:a.replace(yb,"\r\n")}}):{name:b.name,value:c.replace(yb,"\r\n")}}).get()}}),_.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(a){}};var Bb=0,Cb={},Db={0:200,1223:204},Eb=_.ajaxSettings.xhr();a.attachEvent&&a.attachEvent("onunload",function(){for(var a in Cb)Cb[a]()}),Y.cors=!!Eb&&"withCredentials"in Eb,Y.ajax=Eb=!!Eb,_.ajaxTransport(function(a){var b;return Y.cors||Eb&&!a.crossDomain?{send:function(c,d){var e,f=a.xhr(),g=++Bb;if(f.open(a.type,a.url,a.async,a.username,a.password),a.xhrFields)for(e in a.xhrFields)f[e]=a.xhrFields[e];a.mimeType&&f.overrideMimeType&&f.overrideMimeType(a.mimeType),a.crossDomain||c["X-Requested-With"]||(c["X-Requested-With"]="XMLHttpRequest");for(e in c)f.setRequestHeader(e,c[e]);b=function(a){return function(){b&&(delete Cb[g],b=f.onload=f.onerror=null,"abort"===a?f.abort():"error"===a?d(f.status,f.statusText):d(Db[f.status]||f.status,f.statusText,"string"==typeof f.responseText?{text:f.responseText}:void 0,f.getAllResponseHeaders()))}},f.onload=b(),f.onerror=b("error"),b=Cb[g]=b("abort");try{f.send(a.hasContent&&a.data||null)}catch(a){if(b)throw a}},abort:function(){b&&b()}}:void 0}),_.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){return _.globalEval(a),a}}}),_.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET")}),_.ajaxTransport("script",function(a){if(a.crossDomain){var b,c;return{send:function(d,e){b=_("<script>").prop({async:!0,charset:a.scriptCharset,src:a.url}).on("load error",c=function(a){b.remove(),c=null,a&&e("error"===a.type?404:200,a.type)}),Z.head.appendChild(b[0])},abort:function(){c&&c()}}}});var Fb=[],Gb=/(=)\?(?=&|$)|\?\?/;_.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Fb.pop()||_.expando+"_"+ib++;return this[a]=!0,a}}),_.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=!1!==b.jsonp&&(Gb.test(b.url)?"url":"string"==typeof b.data&&!(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&Gb.test(b.data)&&"data");return h||"jsonp"===b.dataTypes[0]?(e=b.jsonpCallback=_.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(Gb,"$1"+e):!1!==b.jsonp&&(b.url+=(jb.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||_.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,Fb.push(e)),g&&_.isFunction(f)&&f(g[0]),g=f=void 0}),"script"):void 0}),_.parseHTML=function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||Z;var d=ga.exec(a),e=!c&&[];return d?[b.createElement(d[1])]:(d=_.buildFragment([a],b,e),e&&e.length&&_(e).remove(),_.merge([],d.childNodes))};var Hb=_.fn.load;_.fn.load=function(a,b,c){if("string"!=typeof a&&Hb)return Hb.apply(this,arguments);var d,e,f,g=this,h=a.indexOf(" ");return h>=0&&(d=_.trim(a.slice(h)),a=a.slice(0,h)),_.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(e="POST"),g.length>0&&_.ajax({url:a,type:e,dataType:"html",data:b}).done(function(a){f=arguments,g.html(d?_("<div>").append(_.parseHTML(a)).find(d):a)}).complete(c&&function(a,b){g.each(c,f||[a.responseText,b,a])}),this},_.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){_.fn[b]=function(a){return this.on(b,a)}}),_.expr.filters.animated=function(a){return _.grep(_.timers,function(b){return a===b.elem}).length};var Ib=a.document.documentElement;_.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=_.css(a,"position"),l=_(a),m={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=_.css(a,"top"),i=_.css(a,"left"),j=("absolute"===k||"fixed"===k)&&(f+i).indexOf("auto")>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),_.isFunction(b)&&(b=b.call(a,c,h)),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},_.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){_.offset.setOffset(this,a,b)});var b,c,d=this[0],e={top:0,left:0},f=d&&d.ownerDocument;return f?(b=f.documentElement,_.contains(b,d)?(typeof d.getBoundingClientRect!==ya&&(e=d.getBoundingClientRect()),c=P(f),{top:e.top+c.pageYOffset-b.clientTop,left:e.left+c.pageXOffset-b.clientLeft}):e):void 0},position:function(){if(this[0]){var a,b,c=this[0],d={top:0,left:0};return"fixed"===_.css(c,"position")?b=c.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),_.nodeName(a[0],"html")||(d=a.offset()),d.top+=_.css(a[0],"borderTopWidth",!0),d.left+=_.css(a[0],"borderLeftWidth",!0)),{top:b.top-d.top-_.css(c,"marginTop",!0),left:b.left-d.left-_.css(c,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||Ib;a&&!_.nodeName(a,"html")&&"static"===_.css(a,"position");)a=a.offsetParent;return a||Ib})}}),_.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(b,c){var d="pageYOffset"===c;_.fn[b]=function(e){return pa(this,function(b,e,f){var g=P(b);return void 0===f?g?g[c]:b[e]:void(g?g.scrollTo(d?a.pageXOffset:f,d?f:a.pageYOffset):b[e]=f)},b,e,arguments.length,null)}}),_.each(["top","left"],function(a,b){_.cssHooks[b]=w(Y.pixelPosition,function(a,c){return c?(c=v(a,b),Pa.test(c)?_(a).position()[b]+"px":c):void 0})}),_.each({Height:"height",Width:"width"},function(a,b){_.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){_.fn[d]=function(d,e){var f=arguments.length&&(c||"boolean"!=typeof d),g=c||(!0===d||!0===e?"margin":"border");return pa(this,function(b,c,d){var e;return _.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(e=b.documentElement,Math.max(b.body["scroll"+a],e["scroll"+a],b.body["offset"+a],e["offset"+a],e["client"+a])):void 0===d?_.css(b,c,g):_.style(b,c,d,g)},b,f?d:void 0,f,null)}})}),_.fn.size=function(){return this.length},_.fn.andSelf=_.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return _});var Jb=a.jQuery,Kb=a.$;return _.noConflict=function(b){return a.$===_&&(a.$=Kb),b&&a.jQuery===_&&(a.jQuery=Jb),_},typeof b===ya&&(a.jQuery=a.$=_),_}),function(a,b){"object"==typeof exports&&"object"==typeof module?module.exports=b(require("react")):"function"==typeof define&&define.amd?define(["react"],b):"object"==typeof exports?exports.createReactClass=b(require("react")):a.createReactClass=b(a.React)}(this,function(a){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};return b.m=a,b.c=c,b.i=function(a){return a},b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:d})},b.n=function(a){var c=a&&a.__esModule?function(){return a.default}:function(){return a};return b.d(c,"a",c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p="",b(b.s=2)}([function(a,b,c){"use strict";function d(a){return a}function e(a,b,c){function e(a,b){var c=s.hasOwnProperty(b)?s[b]:null;x.hasOwnProperty(b)&&h("OVERRIDE_BASE"===c,"ReactClassInterface: You are attempting to override `%s` from your class specification. Ensure that your method names do not overlap with React methods.",b),a&&h("DEFINE_MANY"===c||"DEFINE_MANY_MERGED"===c,"ReactClassInterface: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",b)}function j(a,c){if(c){h("function"!=typeof c,"ReactClass: You're attempting to use a component class or function as a mixin. Instead, just use a regular object."),
h(!b(c),"ReactClass: You're attempting to use a component as a mixin. Instead, just use a regular object.");var d=a.prototype,f=d.__reactAutoBindPairs;c.hasOwnProperty(i)&&u.mixins(a,c.mixins);for(var g in c)if(c.hasOwnProperty(g)&&g!==i){var j=c[g],k=d.hasOwnProperty(g);if(e(k,g),u.hasOwnProperty(g))u[g](a,j);else{var l=s.hasOwnProperty(g),o="function"==typeof j,p=o&&!l&&!k&&!1!==c.autobind;if(p)f.push(g,j),d[g]=j;else if(k){var q=s[g];h(l&&("DEFINE_MANY_MERGED"===q||"DEFINE_MANY"===q),"ReactClass: Unexpected spec policy %s for key %s when mixing in component specs.",q,g),"DEFINE_MANY_MERGED"===q?d[g]=m(d[g],j):"DEFINE_MANY"===q&&(d[g]=n(d[g],j))}else d[g]=j}}}}function k(a,b){if(b)for(var c in b){var d=b[c];if(b.hasOwnProperty(c)){var e=c in u;h(!e,'ReactClass: You are attempting to define a reserved property, `%s`, that shouldn\'t be on the "statics" key. Define it as an instance property instead; it will still be accessible on the constructor.',c);var f=c in a;if(f){var g=t.hasOwnProperty(c)?t[c]:null;return h("DEFINE_MANY_MERGED"===g,"ReactClass: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",c),void(a[c]=m(a[c],d))}a[c]=d}}}function l(a,b){h(a&&b&&"object"==typeof a&&"object"==typeof b,"mergeIntoWithNoDuplicateKeys(): Cannot merge non-objects.");for(var c in b)b.hasOwnProperty(c)&&(h(void 0===a[c],"mergeIntoWithNoDuplicateKeys(): Tried to merge two objects with the same key: `%s`. This conflict may be due to a mixin; in particular, this may be caused by two getInitialState() or getDefaultProps() methods returning objects with clashing keys.",c),a[c]=b[c]);return a}function m(a,b){return function(){var c=a.apply(this,arguments),d=b.apply(this,arguments);if(null==c)return d;if(null==d)return c;var e={};return l(e,c),l(e,d),e}}function n(a,b){return function(){a.apply(this,arguments),b.apply(this,arguments)}}function o(a,b){return b.bind(a)}function p(a){for(var b=a.__reactAutoBindPairs,c=0;c<b.length;c+=2){var d=b[c],e=b[c+1];a[d]=o(a,e)}}function q(a){var b=d(function(a,d,e){this.__reactAutoBindPairs.length&&p(this),this.props=a,this.context=d,this.refs=g,this.updater=e||c,this.state=null;var f=this.getInitialState?this.getInitialState():null;h("object"==typeof f&&!Array.isArray(f),"%s.getInitialState(): must return an object or null",b.displayName||"ReactCompositeComponent"),this.state=f});b.prototype=new y,b.prototype.constructor=b,b.prototype.__reactAutoBindPairs=[],r.forEach(j.bind(null,b)),j(b,v),j(b,a),j(b,w),b.getDefaultProps&&(b.defaultProps=b.getDefaultProps()),h(b.prototype.render,"createClass(...): Class specification must implement a `render` method.");for(var e in s)b.prototype[e]||(b.prototype[e]=null);return b}var r=[],s={mixins:"DEFINE_MANY",statics:"DEFINE_MANY",propTypes:"DEFINE_MANY",contextTypes:"DEFINE_MANY",childContextTypes:"DEFINE_MANY",getDefaultProps:"DEFINE_MANY_MERGED",getInitialState:"DEFINE_MANY_MERGED",getChildContext:"DEFINE_MANY_MERGED",render:"DEFINE_ONCE",componentWillMount:"DEFINE_MANY",componentDidMount:"DEFINE_MANY",componentWillReceiveProps:"DEFINE_MANY",shouldComponentUpdate:"DEFINE_ONCE",componentWillUpdate:"DEFINE_MANY",componentDidUpdate:"DEFINE_MANY",componentWillUnmount:"DEFINE_MANY",UNSAFE_componentWillMount:"DEFINE_MANY",UNSAFE_componentWillReceiveProps:"DEFINE_MANY",UNSAFE_componentWillUpdate:"DEFINE_MANY",updateComponent:"OVERRIDE_BASE"},t={getDerivedStateFromProps:"DEFINE_MANY_MERGED"},u={displayName:function(a,b){a.displayName=b},mixins:function(a,b){if(b)for(var c=0;c<b.length;c++)j(a,b[c])},childContextTypes:function(a,b){a.childContextTypes=f({},a.childContextTypes,b)},contextTypes:function(a,b){a.contextTypes=f({},a.contextTypes,b)},getDefaultProps:function(a,b){a.getDefaultProps?a.getDefaultProps=m(a.getDefaultProps,b):a.getDefaultProps=b},propTypes:function(a,b){a.propTypes=f({},a.propTypes,b)},statics:function(a,b){k(a,b)},autobind:function(){}},v={componentDidMount:function(){this.__isMounted=!0}},w={componentWillUnmount:function(){this.__isMounted=!1}},x={replaceState:function(a,b){this.updater.enqueueReplaceState(this,a,b)},isMounted:function(){return!!this.__isMounted}},y=function(){};return f(y.prototype,a.prototype,x),q}var f=c(5),g=c(3),h=c(4),i="mixins";a.exports=e},function(b,c){b.exports=a},function(a,b,c){"use strict";var d=c(1),e=c(0);if(void 0===d)throw Error("create-react-class could not find the React object. If you are using script tags, make sure that React is being loaded before create-react-class.");var f=(new d.Component).updater;a.exports=e(d.Component,d.isValidElement,f)},function(a,b,c){"use strict";var d={};a.exports=d},function(a,b,c){"use strict";function d(a,b,c,d,f,g,h,i){if(e(b),!a){var j;if(void 0===b)j=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var k=[c,d,f,g,h,i],l=0;j=new Error(b.replace(/%s/g,function(){return k[l++]})),j.name="Invariant Violation"}throw j.framesToPop=1,j}}var e=function(a){};a.exports=d},function(a,b,c){"use strict";function d(a){if(null===a||void 0===a)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(a)}var e=Object.getOwnPropertySymbols,f=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable;a.exports=function(){try{if(!Object.assign)return!1;var a=new String("abc");if(a[5]="de","5"===Object.getOwnPropertyNames(a)[0])return!1;for(var b={},c=0;c<10;c++)b["_"+String.fromCharCode(c)]=c;if("0123456789"!==Object.getOwnPropertyNames(b).map(function(a){return b[a]}).join(""))return!1;var d={};return"abcdefghijklmnopqrst".split("").forEach(function(a){d[a]=a}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},d)).join("")}catch(a){return!1}}()?Object.assign:function(a,b){for(var c,h,i=d(a),j=1;j<arguments.length;j++){c=Object(arguments[j]);for(var k in c)f.call(c,k)&&(i[k]=c[k]);if(e){h=e(c);for(var l=0;l<h.length;l++)g.call(c,h[l])&&(i[h[l]]=c[h[l]])}}return i}}])}),function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.PropTypes=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c||a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){"use strict";var c=a(4),d=a(5),e=a(3);b.exports=function(){function a(a,b,c,f,g,h){h!==e&&d(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function b(){return a}a.isRequired=a;var f={array:a,bool:a,func:a,number:a,object:a,string:a,symbol:a,any:a,arrayOf:b,element:a,instanceOf:b,node:a,objectOf:b,oneOf:b,oneOfType:b,shape:b,exact:b};return f.checkPropTypes=c,f.PropTypes=f,f}},{3:3,4:4,5:5}],2:[function(a,b){b.exports=a(1)()},{1:1}],3:[function(a,b){"use strict";b.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},{}],4:[function(a,b){"use strict";function c(a){return function(){return a}}var d=function(){};d.thatReturns=c,d.thatReturnsFalse=c(!1),d.thatReturnsTrue=c(!0),d.thatReturnsNull=c(null),d.thatReturnsThis=function(){return this},d.thatReturnsArgument=function(a){return a},b.exports=d},{}],5:[function(a,b){"use strict";function c(a,b,c,e,f,g,h,i){if(d(b),!a){var j;if(void 0===b)j=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var k=[c,e,f,g,h,i],l=0;j=new Error(b.replace(/%s/g,function(){return k[l++]})),j.name="Invariant Violation"}throw j.framesToPop=1,j}}var d=function(){};b.exports=c},{}]},{},[2])(2)}),function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a("object"==typeof exports?require("jquery"):jQuery)}(function(a){var b=0,c=Array.prototype.slice;a.cleanData=function(b){return function(c){var d,e,f;for(f=0;null!=(e=c[f]);f++)try{d=a._data(e,"events"),d&&d.remove&&a(e).triggerHandler("remove")}catch(a){}b(c)}}(a.cleanData),a.widget=function(b,c,d){var e,f,g,h,i={},j=b.split(".")[0];return b=b.split(".")[1],e=j+"-"+b,d||(d=c,c=a.Widget),a.expr[":"][e.toLowerCase()]=function(b){return!!a.data(b,e)},a[j]=a[j]||{},f=a[j][b],g=a[j][b]=function(a,b){if(!this._createWidget)return new g(a,b);arguments.length&&this._createWidget(a,b)},a.extend(g,f,{version:d.version,_proto:a.extend({},d),_childConstructors:[]}),h=new c,h.options=a.widget.extend({},h.options),a.each(d,function(b,d){if(!a.isFunction(d))return void(i[b]=d);i[b]=function(){var a=function(){return c.prototype[b].apply(this,arguments)},e=function(a){return c.prototype[b].apply(this,a)};return function(){var b,c=this._super,f=this._superApply;return this._super=a,this._superApply=e,b=d.apply(this,arguments),this._super=c,this._superApply=f,b}}()}),g.prototype=a.widget.extend(h,{widgetEventPrefix:f?h.widgetEventPrefix||b:b},i,{constructor:g,namespace:j,widgetName:b,widgetFullName:e}),f?(a.each(f._childConstructors,function(b,c){var d=c.prototype;a.widget(d.namespace+"."+d.widgetName,g,c._proto)}),delete f._childConstructors):c._childConstructors.push(g),a.widget.bridge(b,g),g},a.widget.extend=function(b){for(var d,e,f=c.call(arguments,1),g=0,h=f.length;g<h;g++)for(d in f[g])e=f[g][d],f[g].hasOwnProperty(d)&&void 0!==e&&(a.isPlainObject(e)?b[d]=a.isPlainObject(b[d])?a.widget.extend({},b[d],e):a.widget.extend({},e):b[d]=e);return b},a.widget.bridge=function(b,d){var e=d.prototype.widgetFullName||b;a.fn[b]=function(f){var g="string"==typeof f,h=c.call(arguments,1),i=this;return f=!g&&h.length?a.widget.extend.apply(null,[f].concat(h)):f,g?this.each(function(){var c,d=a.data(this,e);return"instance"===f?(i=d,!1):d?a.isFunction(d[f])&&"_"!==f.charAt(0)?(c=d[f].apply(d,h),c!==d&&void 0!==c?(i=c&&c.jquery?i.pushStack(c.get()):c,!1):void 0):a.error("no such method '"+f+"' for "+b+" widget instance"):a.error("cannot call methods on "+b+" prior to initialization; attempted to call method '"+f+"'")}):this.each(function(){var b=a.data(this,e);b?(b.option(f||{}),b._init&&b._init()):a.data(this,e,new d(f,this))}),i}},a.Widget=function(){},a.Widget._childConstructors=[],a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(c,d){d=a(d||this.defaultElement||this)[0],this.element=a(d),this.uuid=b++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=a.widget.extend({},this.options,this._getCreateOptions(),c),this.bindings=a(),this.hoverable=a(),this.focusable=a(),d!==this&&(a.data(d,this.widgetFullName,this),this._on(!0,this.element,{remove:function(a){a.target===d&&this.destroy()}}),this.document=a(d.style?d.ownerDocument:d.document||d),this.window=a(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:a.noop,_getCreateEventData:a.noop,_create:a.noop,_init:a.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(a.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:a.noop,widget:function(){return this.element},option:function(b,c){var d,e,f,g=b;if(0===arguments.length)return a.widget.extend({},this.options);if("string"==typeof b)if(g={},d=b.split("."),b=d.shift(),d.length){for(e=g[b]=a.widget.extend({},this.options[b]),f=0;f<d.length-1;f++)e[d[f]]=e[d[f]]||{},e=e[d[f]];if(b=d.pop(),1===arguments.length)return void 0===e[b]?null:e[b];e[b]=c}else{if(1===arguments.length)return void 0===this.options[b]?null:this.options[b];g[b]=c}return this._setOptions(g),this},_setOptions:function(a){var b;for(b in a)this._setOption(b,a[b]);return this},_setOption:function(a,b){return this.options[a]=b,"disabled"===a&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!b),b&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(b,c,d){var e,f=this;"boolean"!=typeof b&&(d=c,c=b,b=!1),d?(c=e=a(c),this.bindings=this.bindings.add(c)):(d=c,c=this.element,e=this.widget()),a.each(d,function(d,g){function h(){if(b||!0!==f.options.disabled&&!a(this).hasClass("ui-state-disabled"))return("string"==typeof g?f[g]:g).apply(f,arguments)}"string"!=typeof g&&(h.guid=g.guid=g.guid||h.guid||a.guid++);var i=d.match(/^([\w:-]*)\s*(.*)$/),j=i[1]+f.eventNamespace,k=i[2];k?e.delegate(k,j,h):c.bind(j,h)})},_off:function(a,b){b=(b||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,a.unbind(b).undelegate(b)},_delay:function(a,b){function c(){return("string"==typeof a?d[a]:a).apply(d,arguments)}var d=this;return setTimeout(c,b||0)},_hoverable:function(b){this.hoverable=this.hoverable.add(b),this._on(b,{mouseenter:function(b){a(b.currentTarget).addClass("ui-state-hover")},mouseleave:function(b){a(b.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(b){this.focusable=this.focusable.add(b),this._on(b,{focusin:function(b){a(b.currentTarget).addClass("ui-state-focus")},focusout:function(b){a(b.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(b,c,d){var e,f,g=this.options[b];if(d=d||{},c=a.Event(c),c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase(),c.target=this.element[0],f=c.originalEvent)for(e in f)e in c||(c[e]=f[e]);return this.element.trigger(c,d),!(a.isFunction(g)&&!1===g.apply(this.element[0],[c].concat(d))||c.isDefaultPrevented())}},a.each({show:"fadeIn",hide:"fadeOut"},function(b,c){a.Widget.prototype["_"+b]=function(d,e,f){"string"==typeof e&&(e={effect:e});var g,h=e?!0===e||"number"==typeof e?c:e.effect||c:b;e=e||{},"number"==typeof e&&(e={duration:e}),g=!a.isEmptyObject(e),e.complete=f,e.delay&&d.delay(e.delay),g&&a.effects&&a.effects.effect[h]?d[b](e):h!==b&&d[h]?d[h](e.duration,e.easing,f):d.queue(function(c){a(this)[b](),f&&f.call(d[0]),c()})}});a.widget}),function(a){"use strict";"function"==typeof define&&define.amd?define(["jquery"],a):a("object"==typeof exports?require("jquery"):window.jQuery)}(function(a){"use strict";var b=0;a.ajaxTransport("iframe",function(c){if(c.async){var d,e,f,g=c.initialIframeSrc||"javascript:false;";return{send:function(h,i){d=a('<form style="display:none;"></form>'),d.attr("accept-charset",c.formAcceptCharset),f=/\?/.test(c.url)?"&":"?","DELETE"===c.type?(c.url=c.url+f+"_method=DELETE",c.type="POST"):"PUT"===c.type?(c.url=c.url+f+"_method=PUT",c.type="POST"):"PATCH"===c.type&&(c.url=c.url+f+"_method=PATCH",c.type="POST"),b+=1,e=a('<iframe src="'+g+'" name="iframe-transport-'+b+'"></iframe>').bind("load",function(){var b,f=a.isArray(c.paramName)?c.paramName:[c.paramName];e.unbind("load").bind("load",function(){var b;try{if(b=e.contents(),!b.length||!b[0].firstChild)throw new Error}catch(a){b=void 0}i(200,"success",{iframe:b}),a('<iframe src="'+g+'"></iframe>').appendTo(d),window.setTimeout(function(){d.remove()},0)}),d.prop("target",e.prop("name")).prop("action",c.url).prop("method",c.type),c.formData&&a.each(c.formData,function(b,c){a('<input type="hidden"/>').prop("name",c.name).val(c.value).appendTo(d)}),c.fileInput&&c.fileInput.length&&"POST"===c.type&&(b=c.fileInput.clone(),c.fileInput.after(function(a){return b[a]}),c.paramName&&c.fileInput.each(function(b){a(this).prop("name",f[b]||c.paramName)}),d.append(c.fileInput).prop("enctype","multipart/form-data").prop("encoding","multipart/form-data"),c.fileInput.removeAttr("form")),d.submit(),b&&b.length&&c.fileInput.each(function(c,d){var e=a(b[c]);a(d).prop("name",e.prop("name")).attr("form",e.attr("form")),e.replaceWith(d)})}),d.append(e).appendTo(document.body)},abort:function(){e&&e.unbind("load").prop("src",g),d&&d.remove()}}}}),a.ajaxSetup({converters:{"iframe text":function(b){return b&&a(b[0].body).text()},"iframe json":function(b){return b&&a.parseJSON(a(b[0].body).text())},"iframe html":function(b){return b&&a(b[0].body).html()},"iframe xml":function(b){var c=b&&b[0];return c&&a.isXMLDoc(c)?c:a.parseXML(c.XMLDocument&&c.XMLDocument.xml||a(c.body).html())},"iframe script":function(b){return b&&a.globalEval(a(b[0].body).text())}}})}),function(a){"use strict";"function"==typeof define&&define.amd?define(["jquery","jquery.ui.widget"],a):"object"==typeof exports?a(require("jquery"),require("./vendor/jquery.ui.widget")):a(window.jQuery)}(function(a){"use strict";function b(b){var c="dragover"===b;return function(d){d.dataTransfer=d.originalEvent&&d.originalEvent.dataTransfer;var e=d.dataTransfer;e&&-1!==a.inArray("Files",e.types)&&!1!==this._trigger(b,a.Event(b,{delegatedEvent:d}))&&(d.preventDefault(),c&&(e.dropEffect="copy"))}}a.support.fileInput=!(new RegExp("(Android (1\\.[0156]|2\\.[01]))|(Windows Phone (OS 7|8\\.0))|(XBLWP)|(ZuneWP)|(WPDesktop)|(w(eb)?OSBrowser)|(webOS)|(Kindle/(1\\.0|2\\.[05]|3\\.0))").test(window.navigator.userAgent)||a('<input type="file">').prop("disabled")),a.support.xhrFileUpload=!(!window.ProgressEvent||!window.FileReader),a.support.xhrFormDataFileUpload=!!window.FormData,a.support.blobSlice=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice),a.widget("blueimp.fileupload",{options:{dropZone:a(document),pasteZone:void 0,fileInput:void 0,replaceFileInput:!0,paramName:void 0,singleFileUploads:!0,limitMultiFileUploads:void 0,limitMultiFileUploadSize:void 0,limitMultiFileUploadSizeOverhead:512,sequentialUploads:!1,limitConcurrentUploads:void 0,forceIframeTransport:!1,redirect:void 0,redirectParamName:void 0,postMessage:void 0,multipart:!0,maxChunkSize:void 0,uploadedBytes:void 0,recalculateProgress:!0,progressInterval:100,bitrateInterval:500,autoUpload:!0,messages:{uploadedBytes:"Uploaded bytes exceed file size"},i18n:function(b,c){return b=this.messages[b]||b.toString(),c&&a.each(c,function(a,c){b=b.replace("{"+a+"}",c)}),b},formData:function(a){return a.serializeArray()},add:function(b,c){if(b.isDefaultPrevented())return!1;(c.autoUpload||!1!==c.autoUpload&&a(this).fileupload("option","autoUpload"))&&c.process().done(function(){c.submit()})},processData:!1,contentType:!1,cache:!1},_specialOptions:["fileInput","dropZone","pasteZone","multipart","forceIframeTransport"],_blobSlice:a.support.blobSlice&&function(){return(this.slice||this.webkitSlice||this.mozSlice).apply(this,arguments)},_BitrateTimer:function(){this.timestamp=Date.now?Date.now():(new Date).getTime(),this.loaded=0,this.bitrate=0,this.getBitrate=function(a,b,c){var d=a-this.timestamp;return(!this.bitrate||!c||d>c)&&(this.bitrate=(b-this.loaded)*(1e3/d)*8,this.loaded=b,this.timestamp=a),this.bitrate}},_isXHRUpload:function(b){return!b.forceIframeTransport&&(!b.multipart&&a.support.xhrFileUpload||a.support.xhrFormDataFileUpload)},_getFormData:function(b){var c;return"function"===a.type(b.formData)?b.formData(b.form):a.isArray(b.formData)?b.formData:"object"===a.type(b.formData)?(c=[],a.each(b.formData,function(a,b){c.push({name:a,value:b})}),c):[]},_getTotal:function(b){var c=0;return a.each(b,function(a,b){c+=b.size||1}),c},_initProgressObject:function(b){var c={loaded:0,total:0,bitrate:0};b._progress?a.extend(b._progress,c):b._progress=c},_initResponseObject:function(a){var b;if(a._response)for(b in a._response)a._response.hasOwnProperty(b)&&delete a._response[b];else a._response={}},_onProgress:function(b,c){if(b.lengthComputable){var d,e=Date.now?Date.now():(new Date).getTime();if(c._time&&c.progressInterval&&e-c._time<c.progressInterval&&b.loaded!==b.total)return;c._time=e,d=Math.floor(b.loaded/b.total*(c.chunkSize||c._progress.total))+(c.uploadedBytes||0),this._progress.loaded+=d-c._progress.loaded,this._progress.bitrate=this._bitrateTimer.getBitrate(e,this._progress.loaded,c.bitrateInterval),c._progress.loaded=c.loaded=d,c._progress.bitrate=c.bitrate=c._bitrateTimer.getBitrate(e,d,c.bitrateInterval),this._trigger("progress",a.Event("progress",{delegatedEvent:b}),c),this._trigger("progressall",a.Event("progressall",{delegatedEvent:b}),this._progress)}},_initProgressListener:function(b){var c=this,d=b.xhr?b.xhr():a.ajaxSettings.xhr();d.upload&&(a(d.upload).bind("progress",function(a){var d=a.originalEvent;a.lengthComputable=d.lengthComputable,a.loaded=d.loaded,a.total=d.total,c._onProgress(a,b)}),b.xhr=function(){return d})},_isInstanceOf:function(a,b){return Object.prototype.toString.call(b)==="[object "+a+"]"},_initXHRData:function(b){var c,d=this,e=b.files[0],f=b.multipart||!a.support.xhrFileUpload,g="array"===a.type(b.paramName)?b.paramName[0]:b.paramName;b.headers=a.extend({},b.headers),b.contentRange&&(b.headers["Content-Range"]=b.contentRange),f&&!b.blob&&this._isInstanceOf("File",e)||(b.headers["Content-Disposition"]='attachment; filename="'+encodeURI(e.name)+'"'),f?a.support.xhrFormDataFileUpload&&(b.postMessage?(c=this._getFormData(b),b.blob?c.push({name:g,value:b.blob}):a.each(b.files,function(d,e){c.push({name:"array"===a.type(b.paramName)&&b.paramName[d]||g,value:e})})):(d._isInstanceOf("FormData",b.formData)?c=b.formData:(c=new FormData,a.each(this._getFormData(b),function(a,b){c.append(b.name,b.value)})),b.blob?c.append(g,b.blob,e.name):a.each(b.files,function(e,f){(d._isInstanceOf("File",f)||d._isInstanceOf("Blob",f))&&c.append("array"===a.type(b.paramName)&&b.paramName[e]||g,f,f.uploadName||f.name)})),b.data=c):(b.contentType=e.type||"application/octet-stream",b.data=b.blob||e),b.blob=null},_initIframeSettings:function(b){var c=a("<a></a>").prop("href",b.url).prop("host");b.dataType="iframe "+(b.dataType||""),b.formData=this._getFormData(b),b.redirect&&c&&c!==location.host&&b.formData.push({name:b.redirectParamName||"redirect",value:b.redirect})},_initDataSettings:function(a){this._isXHRUpload(a)?(this._chunkedUpload(a,!0)||(a.data||this._initXHRData(a),this._initProgressListener(a)),a.postMessage&&(a.dataType="postmessage "+(a.dataType||""))):this._initIframeSettings(a)},_getParamName:function(b){var c=a(b.fileInput),d=b.paramName;return d?a.isArray(d)||(d=[d]):(d=[],c.each(function(){for(var b=a(this),c=b.prop("name")||"files[]",e=(b.prop("files")||[1]).length;e;)d.push(c),e-=1}),d.length||(d=[c.prop("name")||"files[]"])),d},_initFormSettings:function(b){b.form&&b.form.length||(b.form=a(b.fileInput.prop("form")),b.form.length||(b.form=a(this.options.fileInput.prop("form")))),b.paramName=this._getParamName(b),b.url||(b.url=b.form.prop("action")||location.href),b.type=(b.type||"string"===a.type(b.form.prop("method"))&&b.form.prop("method")||"").toUpperCase(),"POST"!==b.type&&"PUT"!==b.type&&"PATCH"!==b.type&&(b.type="POST"),b.formAcceptCharset||(b.formAcceptCharset=b.form.attr("accept-charset"))},_getAJAXSettings:function(b){var c=a.extend({},this.options,b);return this._initFormSettings(c),this._initDataSettings(c),c},_getDeferredState:function(a){return a.state?a.state():a.isResolved()?"resolved":a.isRejected()?"rejected":"pending"},_enhancePromise:function(a){return a.success=a.done,a.error=a.fail,a.complete=a.always,a},_getXHRPromise:function(b,c,d){var e=a.Deferred(),f=e.promise();return c=c||this.options.context||f,!0===b?e.resolveWith(c,d):!1===b&&e.rejectWith(c,d),f.abort=e.promise,this._enhancePromise(f)},_addConvenienceMethods:function(b,c){var d=this,e=function(b){return a.Deferred().resolveWith(d,b).promise()};c.process=function(b,f){return(b||f)&&(c._processQueue=this._processQueue=(this._processQueue||e([this])).pipe(function(){return c.errorThrown?a.Deferred().rejectWith(d,[c]).promise():e(arguments)}).pipe(b,f)),this._processQueue||e([this])},c.submit=function(){return"pending"!==this.state()&&(c.jqXHR=this.jqXHR=!1!==d._trigger("submit",a.Event("submit",{delegatedEvent:b}),this)&&d._onSend(b,this)),this.jqXHR||d._getXHRPromise()},c.abort=function(){return this.jqXHR?this.jqXHR.abort():(this.errorThrown="abort",d._trigger("fail",null,this),d._getXHRPromise(!1))},c.state=function(){return this.jqXHR?d._getDeferredState(this.jqXHR):this._processQueue?d._getDeferredState(this._processQueue):void 0},c.processing=function(){return!this.jqXHR&&this._processQueue&&"pending"===d._getDeferredState(this._processQueue)},c.progress=function(){return this._progress},c.response=function(){return this._response}},_getUploadedBytes:function(a){var b=a.getResponseHeader("Range"),c=b&&b.split("-"),d=c&&c.length>1&&parseInt(c[1],10);return d&&d+1},_chunkedUpload:function(b,c){b.uploadedBytes=b.uploadedBytes||0;var d,e,f=this,g=b.files[0],h=g.size,i=b.uploadedBytes,j=b.maxChunkSize||h,k=this._blobSlice,l=a.Deferred(),m=l.promise();return!(!(this._isXHRUpload(b)&&k&&(i||j<h))||b.data)&&(!!c||(i>=h?(g.error=b.i18n("uploadedBytes"),this._getXHRPromise(!1,b.context,[null,"error",g.error])):(e=function(){var c=a.extend({},b),m=c._progress.loaded;c.blob=k.call(g,i,i+j,g.type),c.chunkSize=c.blob.size,c.contentRange="bytes "+i+"-"+(i+c.chunkSize-1)+"/"+h,f._initXHRData(c),f._initProgressListener(c),d=(!1!==f._trigger("chunksend",null,c)&&a.ajax(c)||f._getXHRPromise(!1,c.context)).done(function(d,g,j){i=f._getUploadedBytes(j)||i+c.chunkSize,m+c.chunkSize-c._progress.loaded&&f._onProgress(a.Event("progress",{lengthComputable:!0,loaded:i-c.uploadedBytes,total:i-c.uploadedBytes}),c),b.uploadedBytes=c.uploadedBytes=i,c.result=d,c.textStatus=g,c.jqXHR=j,f._trigger("chunkdone",null,c),f._trigger("chunkalways",null,c),i<h?e():l.resolveWith(c.context,[d,g,j])}).fail(function(a,b,d){c.jqXHR=a,c.textStatus=b,c.errorThrown=d,f._trigger("chunkfail",null,c),f._trigger("chunkalways",null,c),l.rejectWith(c.context,[a,b,d])})},this._enhancePromise(m),m.abort=function(){return d.abort()},e(),m)))},_beforeSend:function(a,b){0===this._active&&(this._trigger("start"),this._bitrateTimer=new this._BitrateTimer,this._progress.loaded=this._progress.total=0,this._progress.bitrate=0),this._initResponseObject(b),this._initProgressObject(b),b._progress.loaded=b.loaded=b.uploadedBytes||0,b._progress.total=b.total=this._getTotal(b.files)||1,b._progress.bitrate=b.bitrate=0,this._active+=1,this._progress.loaded+=b.loaded,this._progress.total+=b.total},_onDone:function(b,c,d,e){var f=e._progress.total,g=e._response;e._progress.loaded<f&&this._onProgress(a.Event("progress",{lengthComputable:!0,loaded:f,total:f}),e),g.result=e.result=b,g.textStatus=e.textStatus=c,g.jqXHR=e.jqXHR=d,this._trigger("done",null,e)},_onFail:function(a,b,c,d){var e=d._response;d.recalculateProgress&&(this._progress.loaded-=d._progress.loaded,this._progress.total-=d._progress.total),e.jqXHR=d.jqXHR=a,e.textStatus=d.textStatus=b,e.errorThrown=d.errorThrown=c,this._trigger("fail",null,d)},_onAlways:function(a,b,c,d){this._trigger("always",null,d)},_onSend:function(b,c){c.submit||this._addConvenienceMethods(b,c);var d,e,f,g,h=this,i=h._getAJAXSettings(c),j=function(){return h._sending+=1,i._bitrateTimer=new h._BitrateTimer,d=d||((e||!1===h._trigger("send",a.Event("send",{delegatedEvent:b}),i))&&h._getXHRPromise(!1,i.context,e)||h._chunkedUpload(i)||a.ajax(i)).done(function(a,b,c){h._onDone(a,b,c,i)}).fail(function(a,b,c){h._onFail(a,b,c,i)}).always(function(a,b,c){if(h._onAlways(a,b,c,i),h._sending-=1,h._active-=1,i.limitConcurrentUploads&&i.limitConcurrentUploads>h._sending)for(var d=h._slots.shift();d;){if("pending"===h._getDeferredState(d)){d.resolve();break}d=h._slots.shift()}0===h._active&&h._trigger("stop")})};return this._beforeSend(b,i),this.options.sequentialUploads||this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending?(this.options.limitConcurrentUploads>1?(f=a.Deferred(),this._slots.push(f),g=f.pipe(j)):(this._sequence=this._sequence.pipe(j,j),g=this._sequence),g.abort=function(){return e=[void 0,"abort","abort"],d?d.abort():(f&&f.rejectWith(i.context,e),j())},this._enhancePromise(g)):j()},_onAdd:function(b,c){var d,e,f,g,h=this,i=!0,j=a.extend({},this.options,c),k=c.files,l=k.length,m=j.limitMultiFileUploads,n=j.limitMultiFileUploadSize,o=j.limitMultiFileUploadSizeOverhead,p=0,q=this._getParamName(j),r=0;if(!n||l&&void 0!==k[0].size||(n=void 0),(j.singleFileUploads||m||n)&&this._isXHRUpload(j))if(j.singleFileUploads||n||!m)if(!j.singleFileUploads&&n)for(f=[],d=[],g=0;g<l;g+=1)p+=k[g].size+o,(g+1===l||p+k[g+1].size+o>n||m&&g+1-r>=m)&&(f.push(k.slice(r,g+1)),e=q.slice(r,g+1),e.length||(e=q),d.push(e),r=g+1,p=0);else d=q;else for(f=[],d=[],g=0;g<l;g+=m)f.push(k.slice(g,g+m)),e=q.slice(g,g+m),e.length||(e=q),d.push(e);else f=[k],d=[q];return c.originalFiles=k,a.each(f||k,function(e,g){var j=a.extend({},c);return j.files=f?g:[g],j.paramName=d[e],h._initResponseObject(j),h._initProgressObject(j),h._addConvenienceMethods(b,j),i=h._trigger("add",a.Event("add",{delegatedEvent:b}),j)}),i},_replaceFileInput:function(b){var c=b.fileInput,d=c.clone(!0);b.fileInputClone=d,a("<form></form>").append(d)[0].reset(),c.after(d).detach(),a.cleanData(c.unbind("remove")),this.options.fileInput=this.options.fileInput.map(function(a,b){return b===c[0]?d[0]:b}),c[0]===this.element[0]&&(this.element=d)},_handleFileTreeEntry:function(b,c){var d,e=this,f=a.Deferred(),g=function(a){a&&!a.entry&&(a.entry=b),f.resolve([a])},h=function(a){e._handleFileTreeEntries(a,c+b.name+"/").done(function(a){f.resolve(a)}).fail(g)},i=function(){d.readEntries(function(a){a.length?(j=j.concat(a),i()):h(j)},g)},j=[];return c=c||"",b.isFile?b._file?(b._file.relativePath=c,f.resolve(b._file)):b.file(function(a){a.relativePath=c,f.resolve(a)},g):b.isDirectory?(d=b.createReader(),i()):f.resolve([]),f.promise()},_handleFileTreeEntries:function(b,c){var d=this;return a.when.apply(a,a.map(b,function(a){return d._handleFileTreeEntry(a,c)})).pipe(function(){return Array.prototype.concat.apply([],arguments)})},_getDroppedFiles:function(b){b=b||{};var c=b.items;return c&&c.length&&(c[0].webkitGetAsEntry||c[0].getAsEntry)?this._handleFileTreeEntries(a.map(c,function(a){var b;return a.webkitGetAsEntry?(b=a.webkitGetAsEntry(),b&&(b._file=a.getAsFile()),b):a.getAsEntry()})):a.Deferred().resolve(a.makeArray(b.files)).promise()},_getSingleFileInputFiles:function(b){b=a(b);var c,d,e=b.prop("webkitEntries")||b.prop("entries");if(e&&e.length)return this._handleFileTreeEntries(e);if(c=a.makeArray(b.prop("files")),c.length)void 0===c[0].name&&c[0].fileName&&a.each(c,function(a,b){b.name=b.fileName,b.size=b.fileSize});else{if(!(d=b.prop("value")))return a.Deferred().resolve([]).promise();c=[{name:d.replace(/^.*\\/,"")}]}return a.Deferred().resolve(c).promise()},_getFileInputFiles:function(b){return b instanceof a&&1!==b.length?a.when.apply(a,a.map(b,this._getSingleFileInputFiles)).pipe(function(){return Array.prototype.concat.apply([],arguments)}):this._getSingleFileInputFiles(b)},_onChange:function(b){var c=this,d={fileInput:a(b.target),form:a(b.target.form)};this._getFileInputFiles(d.fileInput).always(function(e){d.files=e,c.options.replaceFileInput&&c._replaceFileInput(d),!1!==c._trigger("change",a.Event("change",{delegatedEvent:b}),d)&&c._onAdd(b,d)})},_onPaste:function(b){var c=b.originalEvent&&b.originalEvent.clipboardData&&b.originalEvent.clipboardData.items,d={files:[]};c&&c.length&&(a.each(c,function(a,b){var c=b.getAsFile&&b.getAsFile();c&&d.files.push(c)}),!1!==this._trigger("paste",a.Event("paste",{delegatedEvent:b}),d)&&this._onAdd(b,d))},_onDrop:function(b){b.dataTransfer=b.originalEvent&&b.originalEvent.dataTransfer;var c=this,d=b.dataTransfer,e={}
;d&&d.files&&d.files.length&&(b.preventDefault(),this._getDroppedFiles(d).always(function(d){e.files=d,!1!==c._trigger("drop",a.Event("drop",{delegatedEvent:b}),e)&&c._onAdd(b,e)}))},_onDragOver:b("dragover"),_onDragEnter:b("dragenter"),_onDragLeave:b("dragleave"),_initEventHandlers:function(){this._isXHRUpload(this.options)&&(this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop,dragenter:this._onDragEnter,dragleave:this._onDragLeave}),this._on(this.options.pasteZone,{paste:this._onPaste})),a.support.fileInput&&this._on(this.options.fileInput,{change:this._onChange})},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragenter dragleave dragover drop"),this._off(this.options.pasteZone,"paste"),this._off(this.options.fileInput,"change")},_setOption:function(b,c){var d=-1!==a.inArray(b,this._specialOptions);d&&this._destroyEventHandlers(),this._super(b,c),d&&(this._initSpecialOptions(),this._initEventHandlers())},_initSpecialOptions:function(){var b=this.options;void 0===b.fileInput?b.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]'):b.fileInput instanceof a||(b.fileInput=a(b.fileInput)),b.dropZone instanceof a||(b.dropZone=a(b.dropZone)),b.pasteZone instanceof a||(b.pasteZone=a(b.pasteZone))},_getRegExp:function(a){var b=a.split("/"),c=b.pop();return b.shift(),new RegExp(b.join("/"),c)},_isRegExpOption:function(b,c){return"url"!==b&&"string"===a.type(c)&&/^\/.*\/[igm]{0,3}$/.test(c)},_initDataAttributes:function(){var b=this,c=this.options,d=a(this.element[0].cloneNode(!1)),e=d.data();d.remove(),a.each(e,function(a,e){var f="data-"+a.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();d.attr(f)&&(b._isRegExpOption(a,e)&&(e=b._getRegExp(e)),c[a]=e)})},_create:function(){this._initDataAttributes(),this._initSpecialOptions(),this._slots=[],this._sequence=this._getXHRPromise(!0),this._sending=this._active=0,this._initProgressObject(this),this._initEventHandlers()},active:function(){return this._active},progress:function(){return this._progress},add:function(b){var c=this;b&&!this.options.disabled&&(b.fileInput&&!b.files?this._getFileInputFiles(b.fileInput).always(function(a){b.files=a,c._onAdd(null,b)}):(b.files=a.makeArray(b.files),this._onAdd(null,b)))},send:function(b){if(b&&!this.options.disabled){if(b.fileInput&&!b.files){var c,d,e=this,f=a.Deferred(),g=f.promise();return g.abort=function(){return d=!0,c?c.abort():(f.reject(null,"abort","abort"),g)},this._getFileInputFiles(b.fileInput).always(function(a){if(!d){if(!a.length)return void f.reject();b.files=a,c=e._onSend(null,b),c.then(function(a,b,c){f.resolve(a,b,c)},function(a,b,c){f.reject(a,b,c)})}}),this._enhancePromise(g)}if(b.files=a.makeArray(b.files),b.files.length)return this._onSend(null,b)}return this._getXHRPromise(!1,b&&b.context)}})}),function(a){"function"==typeof define&&define.amd&&define.amd.jQuery?define(["jquery"],a):a(jQuery)}(function(a){"use strict";function b(b){return!b||void 0!==b.allowPageScroll||void 0===b.swipe&&void 0===b.swipeStatus||(b.allowPageScroll=j),void 0!==b.click&&void 0===b.tap&&(b.tap=b.click),b||(b={}),b=a.extend({},a.fn.swipe.defaults,b),this.each(function(){var d=a(this),e=d.data(B);e||(e=new c(this,b),d.data(B,e))})}function c(b,c){function C(b){if(!(ja()||a(b.target).closest(c.excludedElements,Sa).length>0)){var d,e=b.originalEvent?b.originalEvent:b,f=y&&e.touches?e.touches[0]:e;return Ta=u,(y&&(Ua=e.touches?e.touches.length:1),Ja=0,Ka=null,Qa=null,La=0,Ma=0,Na=0,Oa=1,Pa=0,Va=oa(),Ra=ra(),ha(),!y||Ua===c.fingers||c.fingers===s||R()?(la(0,f),Wa=Aa(),2==Ua&&e.touches&&(la(1,e.touches[1]),Ma=Na=ua(Va[0].start,Va[1].start)),(c.swipeStatus||c.pinchStatus)&&(d=J(e,Ta))):d=!1,!1===d)?(Ta=x,J(e,Ta),d):(c.hold&&(ab=setTimeout(a.proxy(function(){Sa.trigger("hold",[e.target]),c.hold&&(d=c.hold.call(Sa,e,e.target))},this),c.longTapThreshold)),ka(!0),null)}}function D(a){var b=a.originalEvent?a.originalEvent:a;if(Ta!==w&&Ta!==x&&!ia()){var d,e=y&&b.touches?b.touches[0]:b,f=ma(e);if(Xa=Aa(),y&&(Ua=b.touches?b.touches.length:1),c.hold&&clearTimeout(ab),Ta=v,2==Ua&&(0==Ma?(la(1,b.touches[1]),Ma=Na=ua(Va[0].start,Va[1].start)):(ma(b.touches[1]),Na=ua(Va[0].end,Va[1].end),Qa=wa(Va[0].end,Va[1].end)),Oa=va(Ma,Na),Pa=Math.abs(Ma-Na)),Ua===c.fingers||c.fingers===s||!y||R()){if(Ka=za(f.start,f.end),P(a,Ka),Ja=xa(f.start,f.end),La=ta(),pa(Ka,Ja),(c.swipeStatus||c.pinchStatus)&&(d=J(b,Ta)),!c.triggerOnTouchEnd||c.triggerOnTouchLeave){var g=!0;if(c.triggerOnTouchLeave){var h=Ba(this);g=Ca(f.end,h)}!c.triggerOnTouchEnd&&g?Ta=I(v):c.triggerOnTouchLeave&&!g&&(Ta=I(w)),Ta!=x&&Ta!=w||J(b,Ta)}}else Ta=x,J(b,Ta);!1===d&&(Ta=x,J(b,Ta))}}function E(a){var b=a.originalEvent;return y&&b.touches&&b.touches.length>0?(ga(),!0):(ia()&&(Ua=Za),Xa=Aa(),La=ta(),M()||!L()?(Ta=x,J(b,Ta)):c.triggerOnTouchEnd||0==c.triggerOnTouchEnd&&Ta===v?(a.preventDefault(),Ta=w,J(b,Ta)):!c.triggerOnTouchEnd&&Y()?(Ta=w,K(b,Ta,n)):Ta===v&&(Ta=x,J(b,Ta)),ka(!1),null)}function F(){Ua=0,Xa=0,Wa=0,Ma=0,Na=0,Oa=1,ha(),ka(!1)}function G(a){var b=a.originalEvent;c.triggerOnTouchLeave&&(Ta=I(w),J(b,Ta))}function H(){Sa.unbind(Ea,C),Sa.unbind(Ia,F),Sa.unbind(Fa,D),Sa.unbind(Ga,E),Ha&&Sa.unbind(Ha,G),ka(!1)}function I(a){var b=a,d=O(),e=L(),f=M();return!d||f?b=x:!e||a!=v||c.triggerOnTouchEnd&&!c.triggerOnTouchLeave?!e&&a==w&&c.triggerOnTouchLeave&&(b=x):b=w,b}function J(a,b){var c=void 0;return V()||U()||S()||R()?((V()||U())&&(c=K(a,b,l)),(S()||R())&&!1!==c&&(c=K(a,b,m))):ea()&&!1!==c?c=K(a,b,o):fa()&&!1!==c?c=K(a,b,p):da()&&!1!==c&&(c=K(a,b,n)),b===x&&F(a),b===w&&(y?a.touches&&0==a.touches.length&&F(a):F(a)),c}function K(b,j,k){var q=void 0;if(k==l){if(Sa.trigger("swipeStatus",[j,Ka||null,Ja||0,La||0,Ua,Va]),c.swipeStatus&&!1===(q=c.swipeStatus.call(Sa,b,j,Ka||null,Ja||0,La||0,Ua,Va)))return!1;if(j==w&&T()){if(Sa.trigger("swipe",[Ka,Ja,La,Ua,Va]),c.swipe&&!1===(q=c.swipe.call(Sa,b,Ka,Ja,La,Ua,Va)))return!1;switch(Ka){case d:Sa.trigger("swipeLeft",[Ka,Ja,La,Ua,Va]),c.swipeLeft&&(q=c.swipeLeft.call(Sa,b,Ka,Ja,La,Ua,Va));break;case e:Sa.trigger("swipeRight",[Ka,Ja,La,Ua,Va]),c.swipeRight&&(q=c.swipeRight.call(Sa,b,Ka,Ja,La,Ua,Va));break;case f:Sa.trigger("swipeUp",[Ka,Ja,La,Ua,Va]),c.swipeUp&&(q=c.swipeUp.call(Sa,b,Ka,Ja,La,Ua,Va));break;case g:Sa.trigger("swipeDown",[Ka,Ja,La,Ua,Va]),c.swipeDown&&(q=c.swipeDown.call(Sa,b,Ka,Ja,La,Ua,Va))}}}if(k==m){if(Sa.trigger("pinchStatus",[j,Qa||null,Pa||0,La||0,Ua,Oa,Va]),c.pinchStatus&&!1===(q=c.pinchStatus.call(Sa,b,j,Qa||null,Pa||0,La||0,Ua,Oa,Va)))return!1;if(j==w&&Q())switch(Qa){case h:Sa.trigger("pinchIn",[Qa||null,Pa||0,La||0,Ua,Oa,Va]),c.pinchIn&&(q=c.pinchIn.call(Sa,b,Qa||null,Pa||0,La||0,Ua,Oa,Va));break;case i:Sa.trigger("pinchOut",[Qa||null,Pa||0,La||0,Ua,Oa,Va]),c.pinchOut&&(q=c.pinchOut.call(Sa,b,Qa||null,Pa||0,La||0,Ua,Oa,Va))}}return k==n?j!==x&&j!==w||(clearTimeout(_a),clearTimeout(ab),Z()&&!aa()?($a=Aa(),_a=setTimeout(a.proxy(function(){$a=null,Sa.trigger("tap",[b.target]),c.tap&&(q=c.tap.call(Sa,b,b.target))},this),c.doubleTapThreshold)):($a=null,Sa.trigger("tap",[b.target]),c.tap&&(q=c.tap.call(Sa,b,b.target)))):k==o?j!==x&&j!==w||(clearTimeout(_a),$a=null,Sa.trigger("doubletap",[b.target]),c.doubleTap&&(q=c.doubleTap.call(Sa,b,b.target))):k==p&&(j!==x&&j!==w||(clearTimeout(_a),$a=null,Sa.trigger("longtap",[b.target]),c.longTap&&(q=c.longTap.call(Sa,b,b.target)))),q}function L(){var a=!0;return null!==c.threshold&&(a=Ja>=c.threshold),a}function M(){var a=!1;return null!==c.cancelThreshold&&null!==Ka&&(a=qa(Ka)-Ja>=c.cancelThreshold),a}function N(){return null===c.pinchThreshold||Pa>=c.pinchThreshold}function O(){return!c.maxTimeThreshold||!(La>=c.maxTimeThreshold)}function P(a,b){if(!1!==c.preventDefaultEvents)if(c.allowPageScroll===j)a.preventDefault();else{var h=c.allowPageScroll===k;switch(b){case d:(c.swipeLeft&&h||!h&&c.allowPageScroll!=q)&&a.preventDefault();break;case e:(c.swipeRight&&h||!h&&c.allowPageScroll!=q)&&a.preventDefault();break;case f:(c.swipeUp&&h||!h&&c.allowPageScroll!=r)&&a.preventDefault();break;case g:(c.swipeDown&&h||!h&&c.allowPageScroll!=r)&&a.preventDefault()}}}function Q(){var a=W(),b=X(),c=N();return a&&b&&c}function R(){return!!(c.pinchStatus||c.pinchIn||c.pinchOut)}function S(){return!(!Q()||!R())}function T(){var a=O(),b=L(),c=W(),d=X();return!M()&&d&&c&&b&&a}function U(){return!!(c.swipe||c.swipeStatus||c.swipeLeft||c.swipeRight||c.swipeUp||c.swipeDown)}function V(){return!(!T()||!U())}function W(){return Ua===c.fingers||c.fingers===s||!y}function X(){return 0!==Va[0].end.x}function Y(){return!!c.tap}function Z(){return!!c.doubleTap}function $(){return!!c.longTap}function _(){if(null==$a)return!1;var a=Aa();return Z()&&a-$a<=c.doubleTapThreshold}function aa(){return _()}function ba(){return(1===Ua||!y)&&(isNaN(Ja)||Ja<c.threshold)}function ca(){return La>c.longTapThreshold&&Ja<t}function da(){return!(!ba()||!Y())}function ea(){return!(!_()||!Z())}function fa(){return!(!ca()||!$())}function ga(){Ya=Aa(),Za=event.touches?event.touches.length+1:1}function ha(){Ya=0,Za=0}function ia(){var a=!1;if(Ya){Aa()-Ya<=c.fingerReleaseThreshold&&(a=!0)}return a}function ja(){return!(!0!==Sa.data(B+"_intouch"))}function ka(a){!0===a?(Sa.bind(Fa,D),Sa.bind(Ga,E),Ha&&Sa.bind(Ha,G)):(Sa.unbind(Fa,D,!1),Sa.unbind(Ga,E,!1),Ha&&Sa.unbind(Ha,G,!1)),Sa.data(B+"_intouch",!0===a)}function la(a,b){var c=void 0!==b.identifier?b.identifier:0;return Va[a].identifier=c,Va[a].start.x=Va[a].end.x=b.pageX||b.clientX,Va[a].start.y=Va[a].end.y=b.pageY||b.clientY,Va[a]}function ma(a){var b=void 0!==a.identifier?a.identifier:0,c=na(b);return c.end.x=a.pageX||a.clientX,c.end.y=a.pageY||a.clientY,c}function na(a){for(var b=0;b<Va.length;b++)if(Va[b].identifier==a)return Va[b]}function oa(){for(var a=[],b=0;b<=5;b++)a.push({start:{x:0,y:0},end:{x:0,y:0},identifier:0});return a}function pa(a,b){b=Math.max(b,qa(a)),Ra[a].distance=b}function qa(a){if(Ra[a])return Ra[a].distance}function ra(){var a={};return a[d]=sa(d),a[e]=sa(e),a[f]=sa(f),a[g]=sa(g),a}function sa(a){return{direction:a,distance:0}}function ta(){return Xa-Wa}function ua(a,b){var c=Math.abs(a.x-b.x),d=Math.abs(a.y-b.y);return Math.round(Math.sqrt(c*c+d*d))}function va(a,b){return(b/a*1).toFixed(2)}function wa(){return Oa<1?i:h}function xa(a,b){return Math.round(Math.sqrt(Math.pow(b.x-a.x,2)+Math.pow(b.y-a.y,2)))}function ya(a,b){var c=a.x-b.x,d=b.y-a.y,e=Math.atan2(d,c),f=Math.round(180*e/Math.PI);return f<0&&(f=360-Math.abs(f)),f}function za(a,b){var c=ya(a,b);return c<=45&&c>=0?d:c<=360&&c>=315?d:c>=135&&c<=225?e:c>45&&c<135?g:f}function Aa(){return(new Date).getTime()}function Ba(b){b=a(b);var c=b.offset();return{left:c.left,right:c.left+b.outerWidth(),top:c.top,bottom:c.top+b.outerHeight()}}function Ca(a,b){return a.x>b.left&&a.x<b.right&&a.y>b.top&&a.y<b.bottom}var Da=y||A||!c.fallbackToMouseEvents,Ea=Da?A?z?"MSPointerDown":"pointerdown":"touchstart":"mousedown",Fa=Da?A?z?"MSPointerMove":"pointermove":"touchmove":"mousemove",Ga=Da?A?z?"MSPointerUp":"pointerup":"touchend":"mouseup",Ha=Da?null:"mouseleave",Ia=A?z?"MSPointerCancel":"pointercancel":"touchcancel",Ja=0,Ka=null,La=0,Ma=0,Na=0,Oa=1,Pa=0,Qa=0,Ra=null,Sa=a(b),Ta="start",Ua=0,Va=null,Wa=0,Xa=0,Ya=0,Za=0,$a=0,_a=null,ab=null;try{Sa.bind(Ea,C),Sa.bind(Ia,F)}catch(b){a.error("events not supported "+Ea+","+Ia+" on jQuery.swipe")}this.enable=function(){return Sa.bind(Ea,C),Sa.bind(Ia,F),Sa},this.disable=function(){return H(),Sa},this.destroy=function(){H(),Sa.data(B,null),Sa=null},this.option=function(b,d){if(void 0!==c[b]){if(void 0===d)return c[b];c[b]=d}else a.error("Option "+b+" does not exist on jQuery.swipe.options");return null}}var d="left",e="right",f="up",g="down",h="in",i="out",j="none",k="auto",l="swipe",m="pinch",n="tap",o="doubletap",p="longtap",q="horizontal",r="vertical",s="all",t=10,u="start",v="move",w="end",x="cancel",y="ontouchstart"in window,z=window.navigator.msPointerEnabled&&!window.navigator.pointerEnable&&!1,A=window.navigator.pointerEnabled||window.navigator.msPointerEnabled,B="TouchSwipe",C={fingers:1,threshold:75,cancelThreshold:null,pinchThreshold:20,maxTimeThreshold:null,fingerReleaseThreshold:250,longTapThreshold:500,doubleTapThreshold:200,swipe:null,swipeLeft:null,swipeRight:null,swipeUp:null,swipeDown:null,swipeStatus:null,pinchIn:null,pinchOut:null,pinchStatus:null,click:null,tap:null,doubleTap:null,longTap:null,hold:null,triggerOnTouchEnd:!0,triggerOnTouchLeave:!1,allowPageScroll:"auto",fallbackToMouseEvents:!0,excludedElements:"label, button, input, select, textarea, a, .noSwipe",preventDefaultEvents:!0};a.fn.swipe=function(c){var d=a(this),e=d.data(B);if(e&&"string"==typeof c){if(e[c])return e[c].apply(this,Array.prototype.slice.call(arguments,1));a.error("Method "+c+" does not exist on jQuery.swipe")}else if(!(e||"object"!=typeof c&&c))return b.apply(this,arguments);return d},a.fn.swipe.defaults=C,a.fn.swipe.phases={PHASE_START:u,PHASE_MOVE:v,PHASE_END:w,PHASE_CANCEL:x},a.fn.swipe.directions={LEFT:d,RIGHT:e,UP:f,DOWN:g,IN:h,OUT:i},a.fn.swipe.pageScroll={NONE:j,HORIZONTAL:q,VERTICAL:r,AUTO:k},a.fn.swipe.fingers={ONE:1,TWO:2,THREE:3,ALL:s}}),function(){function a(a){function b(b,c,d,e,f,g){for(;f>=0&&g>f;f+=a){var h=e?e[f]:f;d=c(d,b[h],h,b)}return d}return function(c,d,e,f){d=t(d,f,4);var g=!A(c)&&s.keys(c),h=(g||c).length,i=a>0?0:h-1;return arguments.length<3&&(e=c[g?g[i]:i],i+=a),b(c,d,e,g,i,h)}}function b(a){return function(b,c,d){c=u(c,d);for(var e=z(b),f=a>0?0:e-1;f>=0&&e>f;f+=a)if(c(b[f],f,b))return f;return-1}}function c(a,b,c){return function(d,e,f){var g=0,h=z(d);if("number"==typeof f)a>0?g=f>=0?f:Math.max(f+h,g):h=f>=0?Math.min(f+1,h):f+h+1;else if(c&&f&&h)return f=c(d,e),d[f]===e?f:-1;if(e!==e)return f=b(k.call(d,g,h),s.isNaN),f>=0?f+g:-1;for(f=a>0?g:h-1;f>=0&&h>f;f+=a)if(d[f]===e)return f;return-1}}function d(a,b){var c=F.length,d=a.constructor,e=s.isFunction(d)&&d.prototype||h,f="constructor";for(s.has(a,f)&&!s.contains(b,f)&&b.push(f);c--;)(f=F[c])in a&&a[f]!==e[f]&&!s.contains(b,f)&&b.push(f)}var e=this,f=e._,g=Array.prototype,h=Object.prototype,i=Function.prototype,j=g.push,k=g.slice,l=h.toString,m=h.hasOwnProperty,n=Array.isArray,o=Object.keys,p=i.bind,q=Object.create,r=function(){},s=function(a){return a instanceof s?a:this instanceof s?void(this._wrapped=a):new s(a)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=s),exports._=s):e._=s,s.VERSION="1.8.3";var t=function(a,b,c){if(void 0===b)return a;switch(null==c?3:c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,c,d,e,f)}}return function(){return a.apply(b,arguments)}},u=function(a,b,c){return null==a?s.identity:s.isFunction(a)?t(a,b,c):s.isObject(a)?s.matcher(a):s.property(a)};s.iteratee=function(a,b){return u(a,b,1/0)};var v=function(a,b){return function(c){var d=arguments.length;if(2>d||null==c)return c;for(var e=1;d>e;e++)for(var f=arguments[e],g=a(f),h=g.length,i=0;h>i;i++){var j=g[i];b&&void 0!==c[j]||(c[j]=f[j])}return c}},w=function(a){if(!s.isObject(a))return{};if(q)return q(a);r.prototype=a;var b=new r;return r.prototype=null,b},x=function(a){return function(b){return null==b?void 0:b[a]}},y=Math.pow(2,53)-1,z=x("length"),A=function(a){var b=z(a);return"number"==typeof b&&b>=0&&y>=b};s.each=s.forEach=function(a,b,c){b=t(b,c);var d,e;if(A(a))for(d=0,e=a.length;e>d;d++)b(a[d],d,a);else{var f=s.keys(a);for(d=0,e=f.length;e>d;d++)b(a[f[d]],f[d],a)}return a},s.map=s.collect=function(a,b,c){b=u(b,c);for(var d=!A(a)&&s.keys(a),e=(d||a).length,f=Array(e),g=0;e>g;g++){var h=d?d[g]:g;f[g]=b(a[h],h,a)}return f},s.reduce=s.foldl=s.inject=a(1),s.reduceRight=s.foldr=a(-1),s.find=s.detect=function(a,b,c){var d;return d=A(a)?s.findIndex(a,b,c):s.findKey(a,b,c),void 0!==d&&-1!==d?a[d]:void 0},s.filter=s.select=function(a,b,c){var d=[];return b=u(b,c),s.each(a,function(a,c,e){b(a,c,e)&&d.push(a)}),d},s.reject=function(a,b,c){return s.filter(a,s.negate(u(b)),c)},s.every=s.all=function(a,b,c){b=u(b,c);for(var d=!A(a)&&s.keys(a),e=(d||a).length,f=0;e>f;f++){var g=d?d[f]:f;if(!b(a[g],g,a))return!1}return!0},s.some=s.any=function(a,b,c){b=u(b,c);for(var d=!A(a)&&s.keys(a),e=(d||a).length,f=0;e>f;f++){var g=d?d[f]:f;if(b(a[g],g,a))return!0}return!1},s.contains=s.includes=s.include=function(a,b,c,d){return A(a)||(a=s.values(a)),("number"!=typeof c||d)&&(c=0),s.indexOf(a,b,c)>=0},s.invoke=function(a,b){var c=k.call(arguments,2),d=s.isFunction(b);return s.map(a,function(a){var e=d?b:a[b];return null==e?e:e.apply(a,c)})},s.pluck=function(a,b){return s.map(a,s.property(b))},s.where=function(a,b){return s.filter(a,s.matcher(b))},s.findWhere=function(a,b){return s.find(a,s.matcher(b))},s.max=function(a,b,c){var d,e,f=-1/0,g=-1/0;if(null==b&&null!=a){a=A(a)?a:s.values(a);for(var h=0,i=a.length;i>h;h++)(d=a[h])>f&&(f=d)}else b=u(b,c),s.each(a,function(a,c,d){((e=b(a,c,d))>g||e===-1/0&&f===-1/0)&&(f=a,g=e)});return f},s.min=function(a,b,c){var d,e,f=1/0,g=1/0;if(null==b&&null!=a){a=A(a)?a:s.values(a);for(var h=0,i=a.length;i>h;h++)d=a[h],f>d&&(f=d)}else b=u(b,c),s.each(a,function(a,c,d){e=b(a,c,d),(g>e||1/0===e&&1/0===f)&&(f=a,g=e)});return f},s.shuffle=function(a){for(var b,c=A(a)?a:s.values(a),d=c.length,e=Array(d),f=0;d>f;f++)b=s.random(0,f),b!==f&&(e[f]=e[b]),e[b]=c[f];return e},s.sample=function(a,b,c){return null==b||c?(A(a)||(a=s.values(a)),a[s.random(a.length-1)]):s.shuffle(a).slice(0,Math.max(0,b))},s.sortBy=function(a,b,c){return b=u(b,c),s.pluck(s.map(a,function(a,c,d){return{value:a,index:c,criteria:b(a,c,d)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;if(c!==d){if(c>d||void 0===c)return 1;if(d>c||void 0===d)return-1}return a.index-b.index}),"value")};var B=function(a){return function(b,c,d){var e={};return c=u(c,d),s.each(b,function(d,f){var g=c(d,f,b);a(e,d,g)}),e}};s.groupBy=B(function(a,b,c){s.has(a,c)?a[c].push(b):a[c]=[b]}),s.indexBy=B(function(a,b,c){a[c]=b}),s.countBy=B(function(a,b,c){s.has(a,c)?a[c]++:a[c]=1}),s.toArray=function(a){return a?s.isArray(a)?k.call(a):A(a)?s.map(a,s.identity):s.values(a):[]},s.size=function(a){return null==a?0:A(a)?a.length:s.keys(a).length},s.partition=function(a,b,c){b=u(b,c);var d=[],e=[];return s.each(a,function(a,c,f){(b(a,c,f)?d:e).push(a)}),[d,e]},s.first=s.head=s.take=function(a,b,c){return null==a?void 0:null==b||c?a[0]:s.initial(a,a.length-b)},s.initial=function(a,b,c){return k.call(a,0,Math.max(0,a.length-(null==b||c?1:b)))},s.last=function(a,b,c){return null==a?void 0:null==b||c?a[a.length-1]:s.rest(a,Math.max(0,a.length-b))},s.rest=s.tail=s.drop=function(a,b,c){return k.call(a,null==b||c?1:b)},s.compact=function(a){return s.filter(a,s.identity)};var C=function(a,b,c,d){for(var e=[],f=0,g=d||0,h=z(a);h>g;g++){var i=a[g];if(A(i)&&(s.isArray(i)||s.isArguments(i))){b||(i=C(i,b,c));var j=0,k=i.length;for(e.length+=k;k>j;)e[f++]=i[j++]}else c||(e[f++]=i)}return e};s.flatten=function(a,b){return C(a,b,!1)},s.without=function(a){return s.difference(a,k.call(arguments,1))},s.uniq=s.unique=function(a,b,c,d){s.isBoolean(b)||(d=c,c=b,b=!1),null!=c&&(c=u(c,d));for(var e=[],f=[],g=0,h=z(a);h>g;g++){var i=a[g],j=c?c(i,g,a):i;b?(g&&f===j||e.push(i),f=j):c?s.contains(f,j)||(f.push(j),e.push(i)):s.contains(e,i)||e.push(i)}return e},s.union=function(){return s.uniq(C(arguments,!0,!0))},s.intersection=function(a){for(var b=[],c=arguments.length,d=0,e=z(a);e>d;d++){var f=a[d];if(!s.contains(b,f)){for(var g=1;c>g&&s.contains(arguments[g],f);g++);g===c&&b.push(f)}}return b},s.difference=function(a){var b=C(arguments,!0,!0,1);return s.filter(a,function(a){return!s.contains(b,a)})},s.zip=function(){return s.unzip(arguments)},s.unzip=function(a){for(var b=a&&s.max(a,z).length||0,c=Array(b),d=0;b>d;d++)c[d]=s.pluck(a,d);return c},s.object=function(a,b){for(var c={},d=0,e=z(a);e>d;d++)b?c[a[d]]=b[d]:c[a[d][0]]=a[d][1];return c},s.findIndex=b(1),s.findLastIndex=b(-1),s.sortedIndex=function(a,b,c,d){c=u(c,d,1);for(var e=c(b),f=0,g=z(a);g>f;){var h=Math.floor((f+g)/2);c(a[h])<e?f=h+1:g=h}return f},s.indexOf=c(1,s.findIndex,s.sortedIndex),s.lastIndexOf=c(-1,s.findLastIndex),s.range=function(a,b,c){null==b&&(b=a||0,a=0),c=c||1;for(var d=Math.max(Math.ceil((b-a)/c),0),e=Array(d),f=0;d>f;f++,a+=c)e[f]=a;return e};var D=function(a,b,c,d,e){if(!(d instanceof b))return a.apply(c,e);var f=w(a.prototype),g=a.apply(f,e);return s.isObject(g)?g:f};s.bind=function(a,b){if(p&&a.bind===p)return p.apply(a,k.call(arguments,1));if(!s.isFunction(a))throw new TypeError("Bind must be called on a function");var c=k.call(arguments,2),d=function(){return D(a,d,b,this,c.concat(k.call(arguments)))};return d},s.partial=function(a){var b=k.call(arguments,1),c=function(){for(var d=0,e=b.length,f=Array(e),g=0;e>g;g++)f[g]=b[g]===s?arguments[d++]:b[g];for(;d<arguments.length;)f.push(arguments[d++]);return D(a,c,this,this,f)};return c},s.bindAll=function(a){var b,c,d=arguments.length;if(1>=d)throw new Error("bindAll must be passed function names");for(b=1;d>b;b++)c=arguments[b],a[c]=s.bind(a[c],a);return a},s.memoize=function(a,b){var c=function(d){var e=c.cache,f=""+(b?b.apply(this,arguments):d);return s.has(e,f)||(e[f]=a.apply(this,arguments)),e[f]};return c.cache={},c},s.delay=function(a,b){var c=k.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)},s.defer=s.partial(s.delay,s,1),s.throttle=function(a,b,c){var d,e,f,g=null,h=0;c||(c={});var i=function(){h=!1===c.leading?0:s.now(),g=null,f=a.apply(d,e),g||(d=e=null)};return function(){var j=s.now();h||!1!==c.leading||(h=j);var k=b-(j-h);return d=this,e=arguments,0>=k||k>b?(g&&(clearTimeout(g),g=null),h=j,f=a.apply(d,e),g||(d=e=null)):g||!1===c.trailing||(g=setTimeout(i,k)),f}},s.debounce=function(a,b,c){var d,e,f,g,h,i=function(){var j=s.now()-g;b>j&&j>=0?d=setTimeout(i,b-j):(d=null,c||(h=a.apply(f,e),d||(f=e=null)))};return function(){f=this,e=arguments,g=s.now();var j=c&&!d;return d||(d=setTimeout(i,b)),j&&(h=a.apply(f,e),f=e=null),h}},s.wrap=function(a,b){return s.partial(b,a)},s.negate=function(a){return function(){return!a.apply(this,arguments)}},s.compose=function(){var a=arguments,b=a.length-1;return function(){for(var c=b,d=a[b].apply(this,arguments);c--;)d=a[c].call(this,d);return d}},s.after=function(a,b){return function(){return--a<1?b.apply(this,arguments):void 0}},s.before=function(a,b){var c;return function(){return--a>0&&(c=b.apply(this,arguments)),1>=a&&(b=null),c}},s.once=s.partial(s.before,2);var E=!{toString:null}.propertyIsEnumerable("toString"),F=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];s.keys=function(a){if(!s.isObject(a))return[];if(o)return o(a);var b=[];for(var c in a)s.has(a,c)&&b.push(c);return E&&d(a,b),b},s.allKeys=function(a){if(!s.isObject(a))return[];var b=[];for(var c in a)b.push(c);return E&&d(a,b),b},s.values=function(a){for(var b=s.keys(a),c=b.length,d=Array(c),e=0;c>e;e++)d[e]=a[b[e]];return d},s.mapObject=function(a,b,c){b=u(b,c);for(var d,e=s.keys(a),f=e.length,g={},h=0;f>h;h++)d=e[h],g[d]=b(a[d],d,a);return g},s.pairs=function(a){for(var b=s.keys(a),c=b.length,d=Array(c),e=0;c>e;e++)d[e]=[b[e],a[b[e]]];return d},s.invert=function(a){for(var b={},c=s.keys(a),d=0,e=c.length;e>d;d++)b[a[c[d]]]=c[d];return b},s.functions=s.methods=function(a){var b=[];for(var c in a)s.isFunction(a[c])&&b.push(c);return b.sort()},s.extend=v(s.allKeys),s.extendOwn=s.assign=v(s.keys),s.findKey=function(a,b,c){b=u(b,c);for(var d,e=s.keys(a),f=0,g=e.length;g>f;f++)if(d=e[f],b(a[d],d,a))return d},s.pick=function(a,b,c){var d,e,f={},g=a;if(null==g)return f;s.isFunction(b)?(e=s.allKeys(g),d=t(b,c)):(e=C(arguments,!1,!1,1),d=function(a,b,c){return b in c},g=Object(g));for(var h=0,i=e.length;i>h;h++){var j=e[h],k=g[j];d(k,j,g)&&(f[j]=k)}return f},s.omit=function(a,b,c){if(s.isFunction(b))b=s.negate(b);else{var d=s.map(C(arguments,!1,!1,1),String);b=function(a,b){return!s.contains(d,b)}}return s.pick(a,b,c)},s.defaults=v(s.allKeys,!0),s.create=function(a,b){var c=w(a);return b&&s.extendOwn(c,b),c},s.clone=function(a){return s.isObject(a)?s.isArray(a)?a.slice():s.extend({},a):a},s.tap=function(a,b){return b(a),a},s.isMatch=function(a,b){var c=s.keys(b),d=c.length;if(null==a)return!d;for(var e=Object(a),f=0;d>f;f++){var g=c[f];if(b[g]!==e[g]||!(g in e))return!1}return!0};var G=function(a,b,c,d){if(a===b)return 0!==a||1/a==1/b;if(null==a||null==b)return a===b;a instanceof s&&(a=a._wrapped),b instanceof s&&(b=b._wrapped);var e=l.call(a);if(e!==l.call(b))return!1;switch(e){case"[object RegExp]":case"[object String]":return""+a==""+b;case"[object Number]":return+a!=+a?+b!=+b:0==+a?1/+a==1/b:+a==+b;case"[object Date]":case"[object Boolean]":return+a==+b}var f="[object Array]"===e;if(!f){if("object"!=typeof a||"object"!=typeof b)return!1;var g=a.constructor,h=b.constructor;if(g!==h&&!(s.isFunction(g)&&g instanceof g&&s.isFunction(h)&&h instanceof h)&&"constructor"in a&&"constructor"in b)return!1}c=c||[],d=d||[];for(var i=c.length;i--;)if(c[i]===a)return d[i]===b;if(c.push(a),d.push(b),f){if((i=a.length)!==b.length)return!1;for(;i--;)if(!G(a[i],b[i],c,d))return!1}else{var j,k=s.keys(a);if(i=k.length,s.keys(b).length!==i)return!1;for(;i--;)if(j=k[i],!s.has(b,j)||!G(a[j],b[j],c,d))return!1}return c.pop(),d.pop(),!0};s.isEqual=function(a,b){return G(a,b)},s.isEmpty=function(a){return null==a||(A(a)&&(s.isArray(a)||s.isString(a)||s.isArguments(a))?0===a.length:0===s.keys(a).length)},s.isElement=function(a){return!(!a||1!==a.nodeType)},s.isArray=n||function(a){return"[object Array]"===l.call(a)},s.isObject=function(a){var b=typeof a;return"function"===b||"object"===b&&!!a},s.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(a){s["is"+a]=function(b){return l.call(b)==="[object "+a+"]"}}),s.isArguments(arguments)||(s.isArguments=function(a){return s.has(a,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(s.isFunction=function(a){return"function"==typeof a||!1}),s.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))},s.isNaN=function(a){return s.isNumber(a)&&a!==+a},s.isBoolean=function(a){return!0===a||!1===a||"[object Boolean]"===l.call(a)},s.isNull=function(a){return null===a},s.isUndefined=function(a){return void 0===a},s.has=function(a,b){return null!=a&&m.call(a,b)},s.noConflict=function(){return e._=f,this},s.identity=function(a){return a},s.constant=function(a){return function(){return a}},s.noop=function(){},s.property=x,s.propertyOf=function(a){return null==a?function(){}:function(b){return a[b]}},s.matcher=s.matches=function(a){return a=s.extendOwn({},a),function(b){return s.isMatch(b,a)}},s.times=function(a,b,c){var d=Array(Math.max(0,a));b=t(b,c,1);for(var e=0;a>e;e++)d[e]=b(e);return d},s.random=function(a,b){return null==b&&(b=a,a=0),a+Math.floor(Math.random()*(b-a+1))},s.now=Date.now||function(){return(new Date).getTime()};var H={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},I=s.invert(H),J=function(a){var b=function(b){return a[b]},c="(?:"+s.keys(a).join("|")+")",d=RegExp(c),e=RegExp(c,"g");return function(a){return a=null==a?"":""+a,d.test(a)?a.replace(e,b):a}};s.escape=J(H),s.unescape=J(I),s.result=function(a,b,c){var d=null==a?void 0:a[b];return void 0===d&&(d=c),s.isFunction(d)?d.call(a):d};var K=0;s.uniqueId=function(a){var b=++K+"";return a?a+b:b},s.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var L=/(.)^/,M={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},N=/\\|'|\r|\n|\u2028|\u2029/g,O=function(a){return"\\"+M[a]};s.template=function(a,b,c){!b&&c&&(b=c),b=s.defaults({},b,s.templateSettings);var d=RegExp([(b.escape||L).source,(b.interpolate||L).source,(b.evaluate||L).source].join("|")+"|$","g"),e=0,f="__p+='";a.replace(d,function(b,c,d,g,h){return f+=a.slice(e,h).replace(N,O),e=h+b.length,c?f+="'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'":d?f+="'+\n((__t=("+d+"))==null?'':__t)+\n'":g&&(f+="';\n"+g+"\n__p+='"),b}),f+="';\n",b.variable||(f="with(obj||{}){\n"+f+"}\n"),f="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+f+"return __p;\n";try{var g=new Function(b.variable||"obj","_",f)}catch(a){throw a.source=f,a}var h=function(a){return g.call(this,a,s)},i=b.variable||"obj";return h.source="function("+i+"){\n"+f+"}",h},s.chain=function(a){var b=s(a);return b._chain=!0,b};var P=function(a,b){return a._chain?s(b).chain():b};s.mixin=function(a){s.each(s.functions(a),function(b){var c=s[b]=a[b];s.prototype[b]=function(){var a=[this._wrapped];return j.apply(a,arguments),P(this,c.apply(s,a))}})},s.mixin(s),s.each(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=g[a];s.prototype[a]=function(){var c=this._wrapped;return b.apply(c,arguments),"shift"!==a&&"splice"!==a||0!==c.length||delete c[0],P(this,c)}}),s.each(["concat","join","slice"],function(a){var b=g[a];s.prototype[a]=function(){return P(this,b.apply(this._wrapped,arguments))}}),s.prototype.value=function(){return this._wrapped},s.prototype.valueOf=s.prototype.toJSON=s.prototype.value,s.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return s})}.call(this),"undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(a){"use strict";var b=a.fn.jquery.split(" ")[0].split(".");if(b[0]<2&&b[1]<9||1==b[0]&&9==b[1]&&b[2]<1)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher")}(jQuery),function(a){"use strict";function b(b){b&&3===b.which||(a(e).remove(),a(f).each(function(){var d=a(this),e=c(d),f={relatedTarget:this};e.hasClass("open")&&(e.trigger(b=a.Event("hide.bs.dropdown",f)),b.isDefaultPrevented()||(d.attr("aria-expanded","false"),e.removeClass("open").trigger("hidden.bs.dropdown",f)))}))}function c(b){var c=b.attr("data-target");c||(c=b.attr("href"),c=c&&/#[A-Za-z]/.test(c)&&c.replace(/.*(?=#[^\s]*$)/,""));var d=c&&a(c);return d&&d.length?d:b.parent()}function d(b){return this.each(function(){var c=a(this),d=c.data("bs.dropdown");d||c.data("bs.dropdown",d=new g(this)),"string"==typeof b&&d[b].call(c)})}var e=".dropdown-backdrop",f='[data-toggle="dropdown"]',g=function(b){a(b).on("click.bs.dropdown",this.toggle)};g.VERSION="3.3.4",g.prototype.toggle=function(d){var e=a(this);if(!e.is(".disabled, :disabled")){var f=c(e),g=f.hasClass("open");if(b(),!g){"ontouchstart"in document.documentElement&&!f.closest(".navbar-nav").length&&a('<div class="dropdown-backdrop"/>').insertAfter(a(this)).on("click",b);var h={relatedTarget:this};if(f.trigger(d=a.Event("show.bs.dropdown",h)),d.isDefaultPrevented())return;e.trigger("focus").attr("aria-expanded","true"),f.toggleClass("open").trigger("shown.bs.dropdown",h)}return!1}},g.prototype.keydown=function(b){if(/(38|40|27|32)/.test(b.which)&&!/input|textarea/i.test(b.target.tagName)){var d=a(this);if(b.preventDefault(),b.stopPropagation(),!d.is(".disabled, :disabled")){var e=c(d),g=e.hasClass("open");if(!g&&27!=b.which||g&&27==b.which)return 27==b.which&&e.find(f).trigger("focus"),d.trigger("click");var h=" li:not(.disabled):visible a",i=e.find('[role="menu"]'+h+', [role="listbox"]'+h);if(i.length){var j=i.index(b.target);38==b.which&&j>0&&j--,40==b.which&&j<i.length-1&&j++,~j||(j=0),i.eq(j).trigger("focus")}}}};var h=a.fn.dropdown;a.fn.dropdown=d,a.fn.dropdown.Constructor=g,a.fn.dropdown.noConflict=function(){return a.fn.dropdown=h,this},a(document).on("click.bs.dropdown.data-api",b).on("click.bs.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on("click.bs.dropdown.data-api",f,g.prototype.toggle).on("keydown.bs.dropdown.data-api",f,g.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="menu"]',g.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="listbox"]',g.prototype.keydown)}(jQuery),function(a){"use strict";function b(b){
var c,d=b.attr("data-target")||(c=b.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,"");return a(d)}function c(b){return this.each(function(){var c=a(this),e=c.data("bs.collapse"),f=a.extend({},d.DEFAULTS,c.data(),"object"==typeof b&&b);!e&&f.toggle&&/show|hide/.test(b)&&(f.toggle=!1),e||c.data("bs.collapse",e=new d(this,f)),"string"==typeof b&&e[b]()})}var d=function(b,c){this.$element=a(b),this.options=a.extend({},d.DEFAULTS,c),this.$trigger=a('[data-toggle="collapse"][href="#'+b.id+'"],[data-toggle="collapse"][data-target="#'+b.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};d.VERSION="3.3.4",d.TRANSITION_DURATION=350,d.DEFAULTS={toggle:!0},d.prototype.dimension=function(){return this.$element.hasClass("width")?"width":"height"},d.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var b,e=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(e&&e.length&&(b=e.data("bs.collapse"))&&b.transitioning)){var f=a.Event("show.bs.collapse");if(this.$element.trigger(f),!f.isDefaultPrevented()){e&&e.length&&(c.call(e,"hide"),b||e.data("bs.collapse",null));var g=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[g](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var h=function(){this.$element.removeClass("collapsing").addClass("collapse in")[g](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!a.support.transition)return h.call(this);var i=a.camelCase(["scroll",g].join("-"));this.$element.one("bsTransitionEnd",a.proxy(h,this)).emulateTransitionEnd(d.TRANSITION_DURATION)[g](this.$element[0][i])}}}},d.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var b=a.Event("hide.bs.collapse");if(this.$element.trigger(b),!b.isDefaultPrevented()){var c=this.dimension();this.$element[c](this.$element[c]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var e=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return a.support.transition?void this.$element[c](0).one("bsTransitionEnd",a.proxy(e,this)).emulateTransitionEnd(d.TRANSITION_DURATION):e.call(this)}}},d.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},d.prototype.getParent=function(){return a(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(a.proxy(function(c,d){var e=a(d);this.addAriaAndCollapsedClass(b(e),e)},this)).end()},d.prototype.addAriaAndCollapsedClass=function(a,b){var c=a.hasClass("in");a.attr("aria-expanded",c),b.toggleClass("collapsed",!c).attr("aria-expanded",c)};var e=a.fn.collapse;a.fn.collapse=c,a.fn.collapse.Constructor=d,a.fn.collapse.noConflict=function(){return a.fn.collapse=e,this},a(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(d){var e=a(this);e.attr("data-target")||d.preventDefault();var f=b(e),g=f.data("bs.collapse"),h=g?"toggle":e.data();c.call(f,h)})}(jQuery),function(a){"use strict";function b(){var a=document.createElement("bootstrap"),b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var c in b)if(void 0!==a.style[c])return{end:b[c]};return!1}a.fn.emulateTransitionEnd=function(b){var c=!1,d=this;a(this).one("bsTransitionEnd",function(){c=!0});var e=function(){c||a(d).trigger(a.support.transition.end)};return setTimeout(e,b),this},a(function(){a.support.transition=b(),a.support.transition&&(a.event.special.bsTransitionEnd={bindType:a.support.transition.end,delegateType:a.support.transition.end,handle:function(b){return a(b.target).is(this)?b.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),function(a,b,c,d){"use strict";var e=function(){return this.init.apply(this,arguments)};e.prototype={defaults:{onstatechange:function(){},ondragend:function(){},onbarclicked:function(){},isRange:!1,showLabels:!0,showScale:!0,step:1,format:"%s",theme:"theme-green",width:300,disable:!1,snap:!1},template:'<div class="slider-container">\t\t\t<div class="back-bar">                <div class="selected-bar"></div>                <div class="pointer low"></div><div class="pointer-label low">123456</div>                <div class="pointer high"></div><div class="pointer-label high">456789</div>                <div class="clickable-dummy"></div>            </div>            <div class="scale"></div>\t\t</div>',init:function(b,c){this.options=a.extend({},this.defaults,c),this.inputNode=a(b),this.options.value=this.inputNode.val()||(this.options.isRange?this.options.from+","+this.options.from:this.options.from),this.domNode=a(this.template),this.domNode.addClass(this.options.theme),this.inputNode.after(this.domNode),this.domNode.on("change",this.onChange),this.pointers=a(".pointer",this.domNode),this.lowPointer=this.pointers.first(),this.highPointer=this.pointers.last(),this.labels=a(".pointer-label",this.domNode),this.lowLabel=this.labels.first(),this.highLabel=this.labels.last(),this.scale=a(".scale",this.domNode),this.bar=a(".selected-bar",this.domNode),this.clickableBar=this.domNode.find(".clickable-dummy"),this.interval=this.options.to-this.options.from,this.render()},render:function(){if(0===this.inputNode.width()&&!this.options.width)return void console.log("jRange : no width found, returning");this.options.width=this.options.width||this.inputNode.width(),this.domNode.width(this.options.width),this.inputNode.hide(),this.isSingle()&&(this.lowPointer.hide(),this.lowLabel.hide()),this.options.showLabels||this.labels.hide(),this.attachEvents(),this.options.showScale&&this.renderScale(),this.setValue(this.options.value)},isSingle:function(){return"number"==typeof this.options.value||-1===this.options.value.indexOf(",")&&!this.options.isRange},attachEvents:function(){this.clickableBar.click(a.proxy(this.barClicked,this)),this.pointers.on("mousedown touchstart",a.proxy(this.onDragStart,this)),this.pointers.bind("dragstart",function(a){a.preventDefault()})},onDragStart:function(b){if(!(this.options.disable||"mousedown"===b.type&&1!==b.which)){b.stopPropagation(),b.preventDefault();var d=a(b.target);this.pointers.removeClass("last-active"),d.addClass("focused last-active"),this[(d.hasClass("low")?"low":"high")+"Label"].addClass("focused"),a(c).on("mousemove.slider touchmove.slider",a.proxy(this.onDrag,this,d)),a(c).on("mouseup.slider touchend.slider touchcancel.slider",a.proxy(this.onDragEnd,this))}},onDrag:function(a,b){b.stopPropagation(),b.preventDefault(),b.originalEvent.touches&&b.originalEvent.touches.length?b=b.originalEvent.touches[0]:b.originalEvent.changedTouches&&b.originalEvent.changedTouches.length&&(b=b.originalEvent.changedTouches[0]);var c=b.clientX-this.domNode.offset().left;this.domNode.trigger("change",[this,a,c])},onDragEnd:function(b){this.pointers.removeClass("focused").trigger("rangeslideend"),this.labels.removeClass("focused"),a(c).off(".slider"),this.options.ondragend.call(this,this.options.value)},barClicked:function(a){if(!this.options.disable){var b=a.pageX-this.clickableBar.offset().left;if(this.isSingle())this.setPosition(this.pointers.last(),b,!0,!0);else{var c,d=Math.abs(parseFloat(this.pointers.first().css("left"),10)),e=this.pointers.first().width()/2,f=Math.abs(parseFloat(this.pointers.last().css("left"),10)),g=this.pointers.first().width()/2,h=Math.abs(d-b+e),i=Math.abs(f-b+g);c=h==i?b<d?this.pointers.first():this.pointers.last():h<i?this.pointers.first():this.pointers.last(),this.setPosition(c,b,!0,!0)}this.options.onbarclicked.call(this,this.options.value)}},onChange:function(a,b,c,d){var e,f;e=0,f=b.domNode.width(),b.isSingle()||(e=c.hasClass("high")?parseFloat(b.lowPointer.css("left"))+b.lowPointer.width()/2:0,f=c.hasClass("low")?parseFloat(b.highPointer.css("left"))+b.highPointer.width()/2:b.domNode.width());var g=Math.min(Math.max(d,e),f);b.setPosition(c,g,!0)},setPosition:function(a,b,c,d){var e,f=parseFloat(this.lowPointer.css("left")),g=parseFloat(this.highPointer.css("left"))||0,h=this.highPointer.width()/2;if(c||(b=this.prcToPx(b)),this.options.snap){var i=this.correctPositionForSnap(b);if(-1===i)return;b=i}a[0]===this.highPointer[0]?g=Math.round(b-h):f=Math.round(b-h),a[d?"animate":"css"]({left:Math.round(b-h)}),this.isSingle()?e=0:e=f+h;var j=Math.round(g+h-e);this.bar[d?"animate":"css"]({width:Math.abs(j),left:j>0?e:e+j}),this.showPointerValue(a,b,d),this.isReadonly()},correctPositionForSnap:function(a){var b=this.positionToValue(a)-this.options.from,c=this.options.width/(this.interval/this.options.step),d=b/this.options.step*c;return a<=d+c/2&&a>=d-c/2?d:-1},setValue:function(a){var b=a.toString().split(",");b[0]=Math.min(Math.max(b[0],this.options.from),this.options.to)+"",b.length>1&&(b[1]=Math.min(Math.max(b[1],this.options.from),this.options.to)+""),this.options.value=a;var c=this.valuesToPrc(2===b.length?b:[0,b[0]]);this.isSingle()?this.setPosition(this.highPointer,c[1]):(this.setPosition(this.lowPointer,c[0]),this.setPosition(this.highPointer,c[1]))},renderScale:function(){for(var b=this.options.scale||[this.options.from,this.options.to],c=Math.round(100/(b.length-1)*10)/10,d="",e=0;e<b.length;e++)d+='<span style="left: '+e*c+'%">'+("|"!=b[e]?"<ins>"+b[e]+"</ins>":"")+"</span>";this.scale.html(d),a("ins",this.scale).each(function(){a(this).css({marginLeft:-a(this).outerWidth()/2})})},getBarWidth:function(){var a=this.options.value.split(",");return a.length>1?parseFloat(a[1])-parseFloat(a[0]):parseFloat(a[0])},showPointerValue:function(b,c,e){var f,g=a(".pointer-label",this.domNode)[b.hasClass("low")?"first":"last"](),h=this.positionToValue(c);if(a.isFunction(this.options.format)){var i=this.isSingle()?d:b.hasClass("low")?"low":"high";f=this.options.format(h,i)}else f=this.options.format.replace("%s",h);var j=g.html(f).width(),k=c-j/2;k=Math.min(Math.max(k,0),this.options.width-j),g[e?"animate":"css"]({left:k}),this.setInputValue(b,h)},valuesToPrc:function(a){return[100*(parseFloat(a[0])-parseFloat(this.options.from))/this.interval,100*(parseFloat(a[1])-parseFloat(this.options.from))/this.interval]},prcToPx:function(a){return this.domNode.width()*a/100},isDecimal:function(){return-1!==(this.options.value+this.options.from+this.options.to+"").indexOf(".")},positionToValue:function(a){var b=a/this.domNode.width()*this.interval;if(b=parseFloat(b,10)+parseFloat(this.options.from,10),this.isDecimal()){var c=Math.round(Math.round(b/this.options.step)*this.options.step*100)/100;if(0!==c)for(c=""+c,-1===c.indexOf(".")&&(c+=".");c.length-c.indexOf(".")<3;)c+="0";else c="0.00";return c}return Math.round(b/this.options.step)*this.options.step},setInputValue:function(a,b){if(this.isSingle())this.options.value=b.toString();else{var c=this.options.value.split(",");a.hasClass("low")?this.options.value=b+","+c[1]:this.options.value=c[0]+","+b}this.inputNode.val()!==this.options.value&&(this.inputNode.val(this.options.value).trigger("change"),this.options.onstatechange.call(this,this.options.value))},getValue:function(){return this.options.value},getOptions:function(){return this.options},getRange:function(){return this.options.from+","+this.options.to},isReadonly:function(){this.domNode.toggleClass("slider-readonly",this.options.disable)},disable:function(){this.options.disable=!0,this.isReadonly()},enable:function(){this.options.disable=!1,this.isReadonly()},toggleDisable:function(){this.options.disable=!this.options.disable,this.isReadonly()},updateRange:function(a,b){var c=a.toString().split(",");this.interval=parseInt(c[1])-parseInt(c[0]),b?this.setValue(b):this.setValue(this.getValue())}};var f="jRange";a.fn[f]=function(c){var d,g=arguments;return this.each(function(){var h=a(this),i=a.data(this,"plugin_"+f),j="object"==typeof c&&c;i||(h.data("plugin_"+f,i=new e(this,j)),a(b).resize(function(){i.setValue(i.getValue())})),"string"==typeof c&&(d=i[c].apply(i,Array.prototype.slice.call(g,1)))}),d||this}}(jQuery,window,document),function(){"use strict";function a(a){this._value=a}function b(a){var b,c="";for(b=0;a>b;b++)c+="0";return c}function c(a,c){var d,e,f,g,h,i,j,k;return k=a.toString(),d=k.split("e")[0],g=k.split("e")[1],e=d.split(".")[0],f=d.split(".")[1]||"",+g>0?k=e+f+b(g-f.length):(h=0>+e?"-0":"0",c>0&&(h+="."),j=b(-1*g-1),i=(j+Math.abs(e)+f).substr(0,c),k=h+i),+g>0&&c>0&&(k+="."+b(c)),k}function d(a,b,d,e){var f,g,h=Math.pow(10,b);return a.toString().indexOf("e")>-1?(g=c(a,b),"-"===g.charAt(0)&&+g>=0&&(g=g.substr(1))):g=(d(a+"e+"+b)/h).toFixed(b),e&&(f=new RegExp("0{1,"+e+"}$"),g=g.replace(f,"")),g}function e(a,b,c){var d=b.replace(/\{[^\{\}]*\}/g,"");return d.indexOf("$")>-1?g(a,b,c):d.indexOf("%")>-1?h(a,b,c):d.indexOf(":")>-1?i(a,b):k(a._value,b,c)}function f(a,b){var c,d,e,f,g,h=b,i=["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],k=["KB","MB","GB","TB","PB","EB","ZB","YB"],l=!1;if(b.indexOf(":")>-1)a._value=j(b);else if(b===u)a._value=0;else{for("."!==r[t].delimiters.decimal&&(b=b.replace(/\./g,"").replace(r[t].delimiters.decimal,".")),c=new RegExp("[^a-zA-Z]"+r[t].abbreviations.thousand+"(?:\\)|(\\"+r[t].currency.symbol+")?(?:\\))?)?$"),d=new RegExp("[^a-zA-Z]"+r[t].abbreviations.million+"(?:\\)|(\\"+r[t].currency.symbol+")?(?:\\))?)?$"),e=new RegExp("[^a-zA-Z]"+r[t].abbreviations.billion+"(?:\\)|(\\"+r[t].currency.symbol+")?(?:\\))?)?$"),f=new RegExp("[^a-zA-Z]"+r[t].abbreviations.trillion+"(?:\\)|(\\"+r[t].currency.symbol+")?(?:\\))?)?$"),g=0;g<=i.length&&!l;g++)b.indexOf(i[g])>-1?l=Math.pow(1024,g+1):b.indexOf(k[g])>-1&&(l=Math.pow(1e3,g+1));a._value=(l||1)*(h.match(c)?Math.pow(10,3):1)*(h.match(d)?Math.pow(10,6):1)*(h.match(e)?Math.pow(10,9):1)*(h.match(f)?Math.pow(10,12):1)*(b.indexOf("%")>-1?.01:1)*((b.split("-").length+Math.min(b.split("(").length-1,b.split(")").length-1))%2?1:-1)*Number(b.replace(/[^0-9\.]+/g,"")),a._value=l?Math.ceil(a._value):a._value}return a._value}function g(a,b,c){var d,e,f=b,g=f.indexOf("$"),h=f.indexOf("("),i=f.indexOf("+"),j=f.indexOf("-"),l="",m="";if(-1===f.indexOf("$")?"infix"===r[t].currency.position?(m=r[t].currency.symbol,r[t].currency.spaceSeparated&&(m=" "+m+" ")):r[t].currency.spaceSeparated&&(l=" "):f.indexOf(" $")>-1?(l=" ",f=f.replace(" $","")):f.indexOf("$ ")>-1?(l=" ",f=f.replace("$ ","")):f=f.replace("$",""),e=k(a._value,f,c,m),-1===b.indexOf("$"))switch(r[t].currency.position){case"postfix":e.indexOf(")")>-1?(e=e.split(""),e.splice(-1,0,l+r[t].currency.symbol),e=e.join("")):e=e+l+r[t].currency.symbol;break;case"infix":break;case"prefix":e.indexOf("(")>-1||e.indexOf("-")>-1?(e=e.split(""),d=Math.max(h,j)+1,e.splice(d,0,r[t].currency.symbol+l),e=e.join("")):e=r[t].currency.symbol+l+e;break;default:throw Error('Currency position should be among ["prefix", "infix", "postfix"]')}else 1>=g?e.indexOf("(")>-1||e.indexOf("+")>-1||e.indexOf("-")>-1?(e=e.split(""),d=1,(h>g||i>g||j>g)&&(d=0),e.splice(d,0,r[t].currency.symbol+l),e=e.join("")):e=r[t].currency.symbol+l+e:e.indexOf(")")>-1?(e=e.split(""),e.splice(-1,0,l+r[t].currency.symbol),e=e.join("")):e=e+l+r[t].currency.symbol;return e}function h(a,b,c){var d,e="",f=100*a._value;return b.indexOf(" %")>-1?(e=" ",b=b.replace(" %","")):b=b.replace("%",""),d=k(f,b,c),d.indexOf(")")>-1?(d=d.split(""),d.splice(-1,0,e+"%"),d=d.join("")):d=d+e+"%",d}function i(a){var b=Math.floor(a._value/60/60),c=Math.floor((a._value-60*b*60)/60),d=Math.round(a._value-60*b*60-60*c);return b+":"+(10>c?"0"+c:c)+":"+(10>d?"0"+d:d)}function j(a){var b=a.split(":"),c=0;return 3===b.length?(c+=60*Number(b[0])*60,c+=60*Number(b[1]),c+=Number(b[2])):2===b.length&&(c+=60*Number(b[0]),c+=Number(b[1])),Number(c)}function k(a,b,c,e){var f,g,h,i,j,k,l,m,n,o,p,q,s,v,w,x,y,z,A=!1,B=!1,C=!1,D="",E=!1,F=!1,G=!1,H=!1,I=!1,J="",K="",L=Math.abs(a),M=["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],N=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],O="",P=!1,Q=!1,R="";if(0===a&&null!==u)return u;if(!isFinite(a))return""+a;if(0===b.indexOf("{")){var S=b.indexOf("}");if(-1===S)throw Error('Format should also contain a "}"');q=b.slice(1,S),b=b.slice(S+1)}else q="";if(b.indexOf("}")===b.length-1){var T=b.indexOf("{");if(-1===T)throw Error('Format should also contain a "{"');s=b.slice(T+1,-1),b=b.slice(0,T+1)}else s="";var U;if(U=-1===b.indexOf(".")?b.match(/([0-9]+).*/):b.match(/([0-9]+)\..*/),z=null===U?-1:U[1].length,-1!==b.indexOf("-")&&(P=!0),b.indexOf("(")>-1?(A=!0,b=b.slice(1,-1)):b.indexOf("+")>-1&&(B=!0,b=b.replace(/\+/g,"")),b.indexOf("a")>-1){if(o=b.split(".")[0].match(/[0-9]+/g)||["0"],o=parseInt(o[0],10),E=b.indexOf("aK")>=0,F=b.indexOf("aM")>=0,G=b.indexOf("aB")>=0,H=b.indexOf("aT")>=0,I=E||F||G||H,b.indexOf(" a")>-1?(D=" ",b=b.replace(" a","")):b=b.replace("a",""),j=Math.floor(Math.log(L)/Math.LN10)+1,l=j%3,l=0===l?3:l,o&&0!==L&&(k=Math.floor(Math.log(L)/Math.LN10)+1-o,m=3*~~((Math.min(o,j)-l)/3),L/=Math.pow(10,m),-1===b.indexOf(".")&&o>3))for(b+="[.]",x=0===k?0:3*~~(k/3)-k,x=0>x?x+3:x,f=0;x>f;f++)b+="0";Math.floor(Math.log(Math.abs(a))/Math.LN10)+1!==o&&(L>=Math.pow(10,12)&&!I||H?(D+=r[t].abbreviations.trillion,a/=Math.pow(10,12)):L<Math.pow(10,12)&&L>=Math.pow(10,9)&&!I||G?(D+=r[t].abbreviations.billion,a/=Math.pow(10,9)):L<Math.pow(10,9)&&L>=Math.pow(10,6)&&!I||F?(D+=r[t].abbreviations.million,a/=Math.pow(10,6)):(L<Math.pow(10,6)&&L>=Math.pow(10,3)&&!I||E)&&(D+=r[t].abbreviations.thousand,a/=Math.pow(10,3)))}if(b.indexOf("b")>-1)for(b.indexOf(" b")>-1?(J=" ",b=b.replace(" b","")):b=b.replace("b",""),i=0;i<=M.length;i++)if(g=Math.pow(1024,i),h=Math.pow(1024,i+1),a>=g&&h>a){J+=M[i],g>0&&(a/=g);break}if(b.indexOf("d")>-1)for(b.indexOf(" d")>-1?(J=" ",b=b.replace(" d","")):b=b.replace("d",""),i=0;i<=N.length;i++)if(g=Math.pow(1e3,i),h=Math.pow(1e3,i+1),a>=g&&h>a){J+=N[i],g>0&&(a/=g);break}if(b.indexOf("o")>-1&&(b.indexOf(" o")>-1?(K=" ",b=b.replace(" o","")):b=b.replace("o",""),r[t].ordinal&&(K+=r[t].ordinal(a))),b.indexOf("[.]")>-1&&(C=!0,b=b.replace("[.]",".")),n=a.toString().split(".")[0],p=b.split(".")[1],v=b.indexOf(","),p){if(-1!==p.indexOf("*")?O=d(a,a.toString().split(".")[1].length,c):p.indexOf("[")>-1?(p=p.replace("]",""),p=p.split("["),O=d(a,p[0].length+p[1].length,c,p[1].length)):O=d(a,p.length,c),n=O.split(".")[0],O.split(".")[1].length){O=(e?D+e:r[t].delimiters.decimal)+O.split(".")[1]}else O="";C&&0===Number(O.slice(1))&&(O="")}else n=d(a,0,c);return n.indexOf("-")>-1&&(n=n.slice(1),Q=!0),n.length<z&&(n=new Array(z-n.length+1).join("0")+n),v>-1&&(n=n.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+r[t].delimiters.thousands)),0===b.indexOf(".")&&(n=""),w=b.indexOf("("),y=b.indexOf("-"),R=y>w?(A&&Q?"(":"")+(P&&Q||!A&&Q?"-":""):(P&&Q||!A&&Q?"-":"")+(A&&Q?"(":""),q+R+(!Q&&B&&0!==a?"+":"")+n+O+(K||"")+(D&&!e?D:"")+(J||"")+(A&&Q?")":"")+s}function l(a,b){r[a]=b}function m(a){t=a;var b=r[a].defaults;b&&b.format&&q.defaultFormat(b.format),b&&b.currencyFormat&&q.defaultCurrencyFormat(b.currencyFormat)}function n(){return"undefined"!=typeof process&&void 0===process.browser&&("node"===process.title||"grunt"===process.title||"gulp"===process.title)&&"undefined"!=typeof require}function o(a){var b=a.toString().split(".");return b.length<2?1:Math.pow(10,b[1].length)}function p(){return Array.prototype.slice.call(arguments).reduce(function(a,b){var c=o(a),d=o(b);return c>d?c:d},-1/0)}var q,r={},s=r,t="en-US",u=null,v="0,0",w="0$",x="undefined"!=typeof module&&module.exports,y={delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(a){var b=a%10;return 1==~~(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th"},currency:{symbol:"$",position:"prefix"},defaults:{currencyFormat:",0000 a"},formats:{fourDigits:"0000 a",fullWithTwoDecimals:"$ ,0.00",fullWithTwoDecimalsNoCurrency:",0.00"}};q=function(b){return q.isNumbro(b)?b=b.value():0===b||void 0===b?b=0:Number(b)||(b=q.fn.unformat(b)),new a(Number(b))},q.version="1.7.1",q.isNumbro=function(b){return b instanceof a},q.setLanguage=function(a,b){console.warn("`setLanguage` is deprecated since version 1.6.0. Use `setCulture` instead");var c=a,d=a.split("-")[0],e=null;s[c]||(Object.keys(s).forEach(function(a){e||a.split("-")[0]!==d||(e=a)}),c=e||b||"en-US"),m(c)},q.setCulture=function(a,b){var c=a,d=a.split("-")[1],e=null;r[c]||(d&&Object.keys(r).forEach(function(a){e||a.split("-")[1]!==d||(e=a)}),c=e||b||"en-US"),m(c)},q.language=function(a,b){if(console.warn("`language` is deprecated since version 1.6.0. Use `culture` instead"),!a)return t;if(a&&!b){if(!s[a])throw new Error("Unknown language : "+a);m(a)}return!b&&s[a]||l(a,b),q},q.culture=function(a,b){if(!a)return t;if(a&&!b){if(!r[a])throw new Error("Unknown culture : "+a);m(a)}return!b&&r[a]||l(a,b),q},q.languageData=function(a){if(console.warn("`languageData` is deprecated since version 1.6.0. Use `cultureData` instead"),!a)return s[t];if(!s[a])throw new Error("Unknown language : "+a);return s[a]},q.cultureData=function(a){if(!a)return r[t];if(!r[a])throw new Error("Unknown culture : "+a);return r[a]},q.culture("en-US",y),q.languages=function(){return console.warn("`languages` is deprecated since version 1.6.0. Use `cultures` instead"),s},q.cultures=function(){return r},q.zeroFormat=function(a){u="string"==typeof a?a:null},q.defaultFormat=function(a){v="string"==typeof a?a:"0.0"},q.defaultCurrencyFormat=function(a){w="string"==typeof a?a:"0$"},q.validate=function(a,b){var c,d,e,f,g,h,i,j;if("string"!=typeof a&&(a+="",console.warn&&console.warn("Numbro.js: Value is not string. It has been co-erced to: ",a)),a=a.trim(),a.match(/^\d+$/))return!0;if(""===a)return!1;try{i=q.cultureData(b)}catch(a){i=q.cultureData(q.culture())}return e=i.currency.symbol,g=i.abbreviations,c=i.delimiters.decimal,d="."===i.delimiters.thousands?"\\.":i.delimiters.thousands,!(null!==(j=a.match(/^[^\d]+/))&&(a=a.substr(1),j[0]!==e)||null!==(j=a.match(/[^\d]+$/))&&(a=a.slice(0,-1),j[0]!==g.thousand&&j[0]!==g.million&&j[0]!==g.billion&&j[0]!==g.trillion)||(h=new RegExp(d+"{2}"),a.match(/[^\d.,]/g)||(f=a.split(c),f.length>2||(f.length<2?!f[0].match(/^\d+.*\d$/)||f[0].match(h):1===f[0].length?!f[0].match(/^\d+$/)||f[0].match(h)||!f[1].match(/^\d+$/):!f[0].match(/^\d+.*\d$/)||f[0].match(h)||!f[1].match(/^\d+$/)))))},q.loadLanguagesInNode=function(){console.warn("`loadLanguagesInNode` is deprecated since version 1.6.0. Use `loadCulturesInNode` instead"),q.loadCulturesInNode()},q.loadCulturesInNode=function(){var a=require("./languages");for(var b in a)b&&q.culture(b,a[b])},"function"!=typeof Array.prototype.reduce&&(Array.prototype.reduce=function(a,b){if(null===this||void 0===this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof a)throw new TypeError(a+" is not a function");var c,d,e=this.length>>>0,f=!1;for(1<arguments.length&&(d=b,f=!0),c=0;e>c;++c)this.hasOwnProperty(c)&&(f?d=a(d,this[c],c,this):(d=this[c],f=!0));if(!f)throw new TypeError("Reduce of empty array with no initial value");return d}),q.fn=a.prototype={clone:function(){return q(this)},format:function(a,b){return e(this,a||v,void 0!==b?b:Math.round)},formatCurrency:function(a,b){return g(this,a||w,void 0!==b?b:Math.round)},unformat:function(a){return"[object Number]"===Object.prototype.toString.call(a)?a:f(this,a||v)},value:function(){return this._value},valueOf:function(){return this._value},set:function(a){return this._value=Number(a),this},add:function(a){function b(a,b){return a+c*b}var c=p.call(null,this._value,a);return this._value=[this._value,a].reduce(b,0)/c,this},subtract:function(a){function b(a,b){return a-c*b}var c=p.call(null,this._value,a);return this._value=[a].reduce(b,this._value*c)/c,this},multiply:function(a){function b(a,b){var c=p(a,b),d=a*c;return d*=b*c,d/=c*c}return this._value=[this._value,a].reduce(b,1),this},divide:function(a){function b(a,b){var c=p(a,b);return a*c/(b*c)}return this._value=[this._value,a].reduce(b),this},difference:function(a){return Math.abs(q(this._value).subtract(a).value())}},n()&&q.loadCulturesInNode(),x?module.exports=q:("undefined"==typeof ender&&(this.numbro=q),"function"==typeof define&&define.amd&&define([],function(){return q}))}.call("undefined"==typeof window?this:window),window.webcon=function(a){"use strict";return(a.numbers=a.numbers||{}).NumberCommon=function(){function a(a,b){if(d(a))throw new Error(b+" is undefined or null")}function b(b,d,e){a(b,d),c(b,d,e)}function c(a,b,c){if($.type(a)!==c)throw new Error(b+" is not an object of type "+c)}function d(a){return void 0===a||null===a}return{checkNull:a,checkNullAndType:b,checkType:c,formats:{formatCurrentCulture:0,formatSpaceAndComma:1,formatCommaAndDot:2,formatThousandCurrentCulture:3,formatComma:4,formatDot:5},isNull:d}}(),a}(window.webcon||{}),window.webcon=function(a){"use strict";var b=a.numbers=a.numbers||{};return b.NumberFormatting=function(){function a(a){b.NumberCommon.isNull(a)||b.NumberCommon.checkType(a,"formatInfo","object"),c(a);var d=$.extend({},n,a);this._formatInfo=d}function c(a){if(!b.NumberCommon.isNull(a)){if(!b.NumberCommon.isNull(a.amountFormat)&&(b.NumberCommon.checkType(a.amountFormat,"formatInfo.amountFormat","number"),a.amountFormat!==b.NumberCommon.formats.formatThousandCurrentCulture&&a.amountFormat!==b.NumberCommon.formats.formatCurrentCulture&&a.amountFormat!==b.NumberCommon.formats.formatSpaceAndComma&&a.amountFormat!==b.NumberCommon.formats.formatCommaAndDot&&a.amountFormat!==b.NumberCommon.formats.formatDot&&a.amountFormat!==b.NumberCommon.formats.formatComma))throw new Error("formatInfo.amountFormat is out of range");if(b.NumberCommon.isNull(a.culture)||b.NumberCommon.checkType(a.culture,"formatInfo.culture","string"),b.NumberCommon.isNull(a.currencyCode)||b.NumberCommon.checkType(a.currencyCode,"formatInfo.currencyCode","string"),!b.NumberCommon.isNull(a.scale)&&(b.NumberCommon.checkType(a.scale,"formatInfo.scale","number"),!isFinite(a.scale)||a.scale<0||Math.floor(a.scale)!==a.scale))throw new Error("formatInfo.scale is out of range");b.NumberCommon.isNull(a.showCurrencyCode)||b.NumberCommon.checkType(a.showCurrencyCode,"formatInfo.showCurrencyCode","boolean")}}function d(a){b.NumberCommon.checkNullAndType(a,"value","number");var c=this._formatInfo,d={errorCode:b.NumberValidation.errorCodes.none,isNotANumber:!1,isValid:!0};return isNaN(a)?(d.isNotANumber=!0,d):new b.NumberValidation(c).validateDecimalPlaces(a)?d:(d.errorCode=b.NumberValidation.errorCodes.tooManyDecimalPlaces,d.isValid=!1,d)}function e(a){b.NumberCommon.checkNullAndType(a,"value","string");var c=this._formatInfo,d={errorCode:b.NumberValidation.errorCodes.none,formatted:"",isValid:!0};if(""===a||/^[\s\xA0]*$/gi.test(a))return d;var e=new b.NumberValidation(c),f=e.extractNumber(a);if(!f.isNumberFound)return d.errorCode=b.NumberValidation.errorCodes.noNumberFound,d.formatted=a,d.isValid=!1,d;var g=f.foundNumber,h=e.validateNumber(g);return h.isValid?(d.errorCode=b.NumberValidation.errorCodes.none,d.formatted=g,d.isValid=!0,d):(d.errorCode=h.errorCode,d.formatted=g,d.isValid=!1,d)}function f(a,c){b.NumberCommon.checkNullAndType(a,"formatInfo","object"),b.NumberCommon.checkNullAndType(c,"formatSettings","object");var d,e=a.amountFormat,f="",g=a.scale,h=c.target;if(e===b.NumberCommon.formats.formatCurrentCulture||e===b.NumberCommon.formats.formatDot||e===b.NumberCommon.formats.formatComma||"edit"===h?f+="0":e!==b.NumberCommon.formats.formatSpaceAndComma&&e!==b.NumberCommon.formats.formatCommaAndDot&&e!==b.NumberCommon.formats.formatThousandCurrentCulture||(f+="0,0"),g>=1)for(f+=".",d=0;d<g;d++)f+="0";return f}function g(a,c){if(b.NumberCommon.checkNull(a,"value"),"number"!==$.type(a)&&"string"!==$.type(a))throw new Error("value is not an object of type number or string");return b.NumberCommon.isNull(c,"formatSettings")||b.NumberCommon.checkType(c,"formatSettings","object"),h.call(this,a,c,!1)}function h(a,c,g){if(b.NumberCommon.checkNull(a,"value"),"number"!==$.type(a)&&"string"!==$.type(a))throw new Error("value is not an object of type number or string");b.NumberCommon.isNull(c,"formatSettings")||b.NumberCommon.checkType(c,"formatSettings","object"),b.NumberCommon.checkNullAndType(g,"checkDecimals","boolean");var h,i,k,l,m=this._formatInfo,n=$.extend({},o,c);if("number"===$.type(a)){if(l=d.call(this,a),l.isNotANumber)return{errorCode:b.NumberValidation.errorCodes.none,formatted:"",isValid:!0};if(!l.isValid&&g)return k=f.call(this,m,n),j.call(this),h=numbro(a).format(k+"[0000000000]"),{errorCode:l.errorCode,formatted:h,isValid:!1};i=parseFloat(a)}else if("string"===$.type(a)){if(l=e.call(this,a),!l.isValid)return{errorCode:l.errorCode,formatted:l.formatted,isValid:!1};if(""===l.formatted)return{errorCode:b.NumberValidation.errorCodes.none,formatted:"",isValid:!0};j.call(this),i=numbro().unformat(l.formatted)}k=f.call(this,m,n),j.call(this);var p=function(a){return numbro(a).format(k)};return h=i<0?"-"+p(-i):p(i),{errorCode:b.NumberValidation.errorCodes.none,formatted:h,isValid:!0}}function i(){var a,c=this._formatInfo;c.amountFormat===b.NumberCommon.formats.formatCurrentCulture||c.amountFormat===b.NumberCommon.formats.formatThousandCurrentCulture?a=c.culture:c.amountFormat===b.NumberCommon.formats.formatSpaceAndComma||c.amountFormat===b.NumberCommon.formats.formatComma?a="pl-PL":c.amountFormat!==b.NumberCommon.formats.formatCommaAndDot&&c.amountFormat!==b.NumberCommon.formats.formatDot||(a="en-US");var d=numbro.cultureData(a),e=d.delimiters.thousands;return{decimalSeparator:d.delimiters.decimal,groupSeparator:e}}function j(){var a=this._formatInfo;a.amountFormat===b.NumberCommon.formats.formatCurrentCulture||a.amountFormat===b.NumberCommon.formats.formatThousandCurrentCulture?numbro.setCulture(a.culture):a.amountFormat===b.NumberCommon.formats.formatSpaceAndComma||a.amountFormat===b.NumberCommon.formats.formatComma?numbro.setCulture("pl-PL"):a.amountFormat!==b.NumberCommon.formats.formatCommaAndDot&&a.amountFormat!==b.NumberCommon.formats.formatDot||numbro.setCulture("en-US")}function k(a){b.NumberCommon.checkNullAndType(a,"value","string");var c={errorCode:b.NumberValidation.errorCodes.none,isValid:!0,unformatted:NaN},d=e.call(this,a);if(!d.isValid){if(c.errorCode=d.errorCode,c.isValid=!1,d.errorCode===b.NumberValidation.errorCodes.tooManyDecimalPlaces){j.call(this);var f=numbro().unformat(d.formatted);c.unformatted=f}return c}if(""===d.formatted)return c.errorCode=b.NumberValidation.errorCodes.none,c.isValid=!0,c.unformatted=NaN,c;j.call(this);var g=numbro().unformat(d.formatted);return c.unformatted=g,c}function l(a){if(b.NumberCommon.checkNull(a,"value"),"number"!==$.type(a)&&"string"!==$.type(a))throw new Error("value is not an object of type number or string");if("number"===$.type(a))return a;var c=a.replace(/[\s\xA0]/gi,"");if(0===c.length)return NaN;var d=/^(-?\d+(?:[.,]\d+)?).*$/gi,e=d.exec(c);if(null!==e&&e.length>=2){var f=e[1],g=f.replace(",",".");return parseFloat(g)}return NaN}function m(a,c){if(b.NumberCommon.checkNull(a,"value"),"number"!==$.type(a)&&"string"!==$.type(a))throw new Error("value is not an object of type number or string");return b.NumberCommon.isNull(c,"formatSettings")||b.NumberCommon.checkType(c,"formatSettings","object"),h.call(this,a,c,!0)}var n={amountFormat:0,culture:"en-US",currencyCode:"",scale:5,showCurrencyCode:!1},o={target:"view"};return a.prototype={format:function(a){return g.call(this,a,{target:"view"})},formatEdit:function(a){return g.call(this,a,{target:"edit"})},formatView:function(a){return g.call(this,a,{target:"view"})},getSeparators:function(){return i.call(this)},unformat:function(a){return k.call(this,a)},unformatCompat:function(a){return l.call(this,a)},validate:function(a){return m.call(this,a,{target:"view"})},validateEdit:function(a){return m.call(this,a,{target:"edit"})},
validateView:function(a){return m.call(this,a,{target:"view"})}},a}(),a}(window.webcon||{}),window.webcon=function(a){"use strict";var b=a.numbers=a.numbers||{};return b.NumberKeyboard=function(){function a(a){b.NumberCommon.isNull(a)||b.NumberCommon.checkType(a,"separators","object"),d(a);var c=$.extend({},p,a);this._separators=c}function c(a,c){b.NumberCommon.checkNullAndType(a,"control","object"),b.NumberCommon.checkNullAndType(c,"e","object");var d,e=c.keyCode||0===c.keyCode?c:window.event,g=e.keyCode>=112&&e.keyCode<=123,m=!e.altKey&&(_.contains(k,e.keyCode)||!e.shiftKey&&_.contains(n,e.keyCode)||e.ctrlKey||e.metaKey);if(d=e.key&&"Unidentified"!==e.key?_.contains(l,e.key):!e.shiftKey&&_.contains(o,e.keyCode)||!e.shiftKey&&e.keyCode>=48&&e.keyCode<=57||e.keyCode>=96&&e.keyCode<=105,!(g||m||d))return h(e),!1;if(110===e.keyCode){h(e);var p=f(a),q=a.value,r=j(q,p),s=this._separators.decimalSeparator,t=r.after+s+r.before;a.value=t,$(a).one("blur.numberKeyboard",function(){$(a).trigger("change")}),i(a,p.start+1,p.start+1)}else d&&$(a).off("blur.numberKeyboard");return!0}function d(a){b.NumberCommon.isNull(a)||(b.NumberCommon.isNull(a.decimalSeparator)||b.NumberCommon.checkType(a.decimalSeparator,"separators.decimalSeparator","string"),b.NumberCommon.isNull(a.groupSeparator)||b.NumberCommon.checkType(a.groupSeparator,"separators.groupSeparator","string"))}function e(a){b.NumberCommon.checkNullAndType(a,"value","string");var c="";if(0===a.length)return a;for(var d=0;d<=a.length-1;d++){var e=a.charCodeAt(d);(e>=48&&e<=57||_.contains(m,e))&&(c+=a.charAt(d))}return c}function f(a){b.NumberCommon.checkNullAndType(a,"control","object");var c={};if("number"===$.type(a.selectionStart))c.start=a.selectionStart,c.end=a.selectionEnd;else{a.focus();var d=document.selection.createRange(),e=d.text.length;d.moveStart("character",-a.value.length),c.end=d.text.length,c.start=c.end-e}return c}function g(a,c,d,e){b.NumberCommon.checkNullAndType(a,"control","object"),b.NumberCommon.checkNullAndType(c,"oldValue","string"),b.NumberCommon.checkNullAndType(d,"newValue","string");var f=this;setTimeout(function(){var b=f._separators,d=f.getElementSelection(a),g=c.substr(0,d.start),h=g.match(new RegExp(b.groupSeparator,"gi")),i="array"===$.type(h)?h.length:0;"function"===$.type(e)&&e(),f.setElementSelection(a,d.start-i,d.end-i)},0)}function h(a){a.preventDefault?a.preventDefault():window.event&&(event.returnValue=!1)}function i(a,c,d){if(b.NumberCommon.checkNullAndType(a,"control","object"),b.NumberCommon.checkNullAndType(c,"start","number"),b.NumberCommon.checkNullAndType(d,"end","number"),"function"===$.type(a.setSelectionRange))a.setSelectionRange(c,d);else{var e=a.createTextRange();e.collapse(!0),e.moveEnd("character",d),e.moveStart("character",c),e.select()}}function j(a,b){var c=b.end,d=b.start;return{after:a.substr(0,d),before:a.substr(c)}}var k=[9,33,34,35,36,37,38,39,40],l=["0","1","2","3","4","5","6","7","8","9","-",".",","," ","","Decimal","Spacebar","Subtract"],m=["-".charCodeAt(0),".".charCodeAt(0),",".charCodeAt(0)," ".charCodeAt(0),"".charCodeAt(0)],n=[8,13,27,45,46],o=[109,110,173,188,189,190],p={decimalSeparator:".",groupSeparator:","};return a.prototype={checkKey:function(a,b){return c.call(this,a,b)},checkValue:function(a){return e.call(this,a)},getElementSelection:function(a){return f.call(this,a)},moveCaretAndSetValue:function(a,b,c,d){return g.call(this,a,b,c,d)},setElementSelection:function(a,b,c){return i.call(this,a,b,c)}},a}(),a}(window.webcon||{}),function(){"use strict";var a=[{code:["de","da","el","es","hr","is","it","mk","nl","pt","ro","sl","sq","tr","da-DK","de-DE","de-LI","de-LU","el-GR","es-AR","es-CO","es-ES","fr-BE","hr-HR","is-IS","it-IT","mk-MK","nl-NL","pt-BR","ro-RO","sl-SI","sq-AL","sr","tr-TR"],thousands:".",decimal:","},{code:["be","bg","cs","et","fi","fr","hu","lt","lv","nb","nl","nn","pl","pt","ru","sk","sv","uk","be-BY","bg-BG","cs-CZ","de-AT","de-CH","et-EE","fi-FI","fr-CA","fr-FR","fr-LU","fr-MC","hu-HU","lt-LT","lv-LV","nb-NO","nl-BE","nn-NO","pl-PL","pt-PT","ru-RU","ru-UA","sk-SK","sv-FI","sv-SE","uk-UA"],thousands:" ",decimal:","},{code:["fil","he","ja","th","zh","ko","en","en-US","en-AU","en-CA","en-GB","en-IE","en-NZ","en-ZA","fil-PH","he-IL","ja-JP","th-TH","zh-CN","ko-KR"],thousands:",",decimal:"."},{code:["fa","fa-IR"],thousands:"",decimal:"."},{code:["fr-CH","it-CH"],thousands:"'",decimal:"."}];_.chain(a).map(function(a){return _.map(a.code,function(b){return{cultureCode:b,delimiters:{thousands:a.thousands,decimal:a.decimal},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},currency:{symbol:"$",position:"postfix"}}})}).flatten().forEach(function(a){"undefined"!=typeof window&&window.numbro&&window.numbro.culture&&window.numbro.culture(a.cultureCode,a)})}.call("undefined"==typeof window?this:window),window.webcon=function(a){"use strict";var b=a.numbers=a.numbers||{};return b.NumberValidation=function(){function a(a){b.NumberCommon.checkNullAndType(a,"formatInfo","object"),this._formatInfo=a}function c(a){b.NumberCommon.checkNullAndType(a,"value","string");var c={isNumberFound:!1,foundNumber:""},d=/^[^.,\d]*?((-?\d+(?:(?:[ .,]\d+)*?))(?:([.,])(\d+))?)[^.,\d]*?$/gi,e=d.exec(a);return null!==e&&e.length>=2&&(c.isNumberFound=!0,c.foundNumber=e[1]),c}function d(a){b.NumberCommon.checkNullAndType(a,"value","string");var c,d=this._formatInfo,h={isValid:!0,errorCode:g.none};d.amountFormat===b.NumberCommon.formats.formatCurrentCulture?c=d.culture:d.amountFormat===b.NumberCommon.formats.formatSpaceAndComma?c="pl-PL":d.amountFormat===b.NumberCommon.formats.formatCommaAndDot&&(c="en-US");var i=numbro.cultureData(c),j=" "===i.delimiters.thousands?" ":i.delimiters.thousands,k=i.delimiters.decimal,l="^((-?\\d+(?:(?:[_group_]\\d{3})*?))(?:([_decimal_])(\\d+))?)$",m=l.replace("_group_",j).replace("_decimal_",k),n=new RegExp(m,"gi"),o=n.exec(a);if(null!==o&&o.length>=2){var p=o[2],q=o[4];f.call(this,p)||(h.isValid=!1,h.errorCode=g.tooLong);e.call(this,"."+q)||(h.isValid=!1,h.errorCode=g.tooManyDecimalPlaces)}else h.isValid=!1,h.errorCode=g.noNumberFound;return h}function e(a){if(b.NumberCommon.checkNull(a,"value"),"number"!==$.type(a)&&"string"!==$.type(a))throw new Error("value is not an object of type number or string");var c=this._formatInfo,d=/(?:\.([0-9]+?)(?:0*))?$/gi,e=0,f=d.exec(""+a);return f&&f.length>=2&&(e=Math.max(0,f[1]?f[1].length:0)),e<=c.scale}function f(a){if(b.NumberCommon.checkNull(a,"value"),"number"!==$.type(a)&&"string"!==$.type(a))throw new Error("value is not an object of type number or string");return(""+a).replace(/\D/gi,"").length<=h}var g={none:0,noNumberFound:1,invalidGroupSeparator:2,invalidDecimalSeparator:3,tooLong:4,tooManySeparators:5,tooManyDecimalPlaces:6},h=15;return a.errorCodes=g,a.prototype={extractNumber:c,validateDecimalPlaces:e,validateNumber:d},a}(),a}(window.webcon||{}),function(a,b){"object"==typeof exports&&"object"==typeof module?module.exports=b(require("React"),require("moment"),require("ReactDOM")):"function"==typeof define&&define.amd?define(["React","moment","ReactDOM"],b):"object"==typeof exports?exports.Datetime=b(require("React"),require("moment"),require("ReactDOM")):a.Datetime=b(a.React,a.moment,a.ReactDOM)}(this,function(a,b,c){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}([function(a,b,c){"use strict";var d=c(1),e=c(2),f=c(9),g=c(17),h=c(10),i=c(18),j=c(25).default,k=Object.freeze({YEARS:"years",MONTHS:"months",DAYS:"days",TIME:"time"}),l=e,m=f({displayName:"DateTime",propTypes:{onFocus:l.func,onBlur:l.func,onChange:l.func,onViewModeChange:l.func,onNavigateBack:l.func,onNavigateForward:l.func,locale:l.string,utc:l.bool,displayTimeZone:l.string,input:l.bool,inputProps:l.object,timeConstraints:l.object,viewMode:l.oneOf([k.YEARS,k.MONTHS,k.DAYS,k.TIME]),isValidDate:l.func,open:l.bool,strictParsing:l.bool,closeOnSelect:l.bool,closeOnTab:l.bool},getInitialState:function(){this.checkTZ(this.props);var a=this.getStateFromProps(this.props);return void 0===a.open&&(a.open=!this.props.input),a.currentView=this.props.dateFormat?this.props.viewMode||a.updateOn||k.DAYS:k.TIME,a},parseDate:function(a,b){var c;return a&&"string"==typeof a?c=this.localMoment(a,b.datetime):a&&(c=this.localMoment(a)),c&&!c.isValid()&&(c=null),c},getStateFromProps:function(a){var b,c,d,e,f=this.getFormats(a),g=a.value||a.defaultValue;return b=this.parseDate(g,f),c=this.parseDate(a.viewDate,f),c=b?b.clone().startOf("month"):c?c.clone().startOf("month"):this.localMoment().startOf("month"),d=this.getUpdateOn(f),e=b?b.format(f.datetime):g.isValid&&!g.isValid()?"":g||"",{updateOn:d,inputFormat:f.datetime,viewDate:c,selectedDate:b,inputValue:e,open:a.open}},getUpdateOn:function(a){return a.date.match(/[lLD]/)?k.DAYS:-1!==a.date.indexOf("M")?k.MONTHS:-1!==a.date.indexOf("Y")?k.YEARS:k.DAYS},getFormats:function(a){var b={date:a.dateFormat||"",time:a.timeFormat||""},c=this.localMoment(a.date,null,a).localeData();return!0===b.date?b.date=c.longDateFormat("L"):this.getUpdateOn(b)!==k.DAYS&&(b.time=""),!0===b.time&&(b.time=c.longDateFormat("LT")),b.datetime=b.date&&b.time?b.date+" "+b.time:b.date||b.time,b},componentWillReceiveProps:function(a){var b=this.getFormats(a),c={};if(a.value===this.props.value&&this.parseDate(a.value)===this.state.selectedDate&&b.datetime===this.getFormats(this.props).datetime||(c=this.getStateFromProps(a)),void 0===c.open&&(void 0!==a.open?c.open=a.open:this.props.closeOnSelect&&this.state.currentView!==k.TIME?c.open=!1:c.open=this.state.open),a.viewMode!==this.props.viewMode&&(c.currentView=a.viewMode),a.locale!==this.props.locale){if(this.state.viewDate){var d=this.state.viewDate.clone().locale(a.locale);c.viewDate=d}if(this.state.selectedDate){var e=this.state.selectedDate.clone().locale(a.locale);c.selectedDate=e,c.inputValue=e.format(b.datetime)}}a.utc===this.props.utc&&a.displayTimeZone===this.props.displayTimeZone||(a.utc?(this.state.viewDate&&(c.viewDate=this.state.viewDate.clone().utc()),this.state.selectedDate&&(c.selectedDate=this.state.selectedDate.clone().utc(),c.inputValue=c.selectedDate.format(b.datetime))):a.displayTimeZone?(this.state.viewDate&&(c.viewDate=this.state.viewDate.clone().tz(a.displayTimeZone)),this.state.selectedDate&&(c.selectedDate=this.state.selectedDate.clone().tz(a.displayTimeZone),c.inputValue=c.selectedDate.tz(a.displayTimeZone).format(b.datetime))):(this.state.viewDate&&(c.viewDate=this.state.viewDate.clone().local()),this.state.selectedDate&&(c.selectedDate=this.state.selectedDate.clone().local(),c.inputValue=c.selectedDate.format(b.datetime)))),a.viewDate!==this.props.viewDate&&(c.viewDate=g(a.viewDate)),this.checkTZ(a),this.setState(c)},onInputChange:function(a){var b=null===a.target||void 0===a.target?a:a.target.value,c=this.localMoment(b,this.state.inputFormat),d={inputValue:b};return c.isValid()&&!this.props.value?(d.selectedDate=c,d.viewDate=c.clone().startOf("month")):d.selectedDate=null,this.setState(d,function(){return this.props.onChange(c.isValid()?c:this.state.inputValue)})},onInputKey:function(a){9===a.which&&this.props.closeOnTab&&this.closeCalendar()},showView:function(a){var b=this;return function(){b.state.currentView!==a&&b.props.onViewModeChange(a),b.setState({currentView:a})}},setDate:function(a){var b=this,c={month:k.DAYS,year:k.MONTHS};return function(d){b.setState({viewDate:b.state.viewDate.clone()[a](parseInt(d.target.getAttribute("data-value"),10)).startOf(a),currentView:c[a]}),b.props.onViewModeChange(c[a])}},getToday:function(){var a=g();return this.props.dbTimeZoneOffset&&(a=g().subtract(g().utcOffset(),"m").add(this.props.dbTimeZoneOffset,"h")),a},setToday:function(){var a=this.getToday();this.setState({selectedDate:a,inputValue:a.format(this.state.inputFormat)},this.props.onChange(a))},subtractTime:function(a,b,c){var d=this;return function(){d.props.onNavigateBack(a,b),d.updateTime("subtract",a,b,c)}},addTime:function(a,b,c){var d=this;return function(){d.props.onNavigateForward(a,b),d.updateTime("add",a,b,c)}},updateTime:function(a,b,c,d){var e={},f=d?"selectedDate":"viewDate";e[f]=this.state[f].clone()[a](b,c),this.setState(e)},allowedSetTime:["hours","minutes","seconds","milliseconds"],setTime:function(a,b){var c,d=this.allowedSetTime.indexOf(a)+1,e=this.state,f=(e.selectedDate||e.viewDate).clone();for(f[a](b);d<this.allowedSetTime.length;d++)c=this.allowedSetTime[d],f[c](f[c]());this.props.value||this.setState({selectedDate:f,inputValue:f.format(e.inputFormat)}),this.props.onChange(f)},updateSelectedDate:function(a,b){var c,d=a.currentTarget,e=0,f=this.state.viewDate,g=this.state.selectedDate||f;if(-1!==d.className.indexOf("rdtDay")?(-1!==d.className.indexOf("rdtNew")?e=1:-1!==d.className.indexOf("rdtOld")&&(e=-1),c=f.clone().month(f.month()+e).date(parseInt(d.getAttribute("data-value"),10))):-1!==d.className.indexOf("rdtMonth")?c=f.clone().month(parseInt(d.getAttribute("data-value"),10)).date(g.date()):-1!==d.className.indexOf("rdtYear")&&(c=f.clone().month(g.month()).date(g.date()).year(parseInt(d.getAttribute("data-value"),10))),c.hours(g.hours()).minutes(g.minutes()).seconds(g.seconds()).milliseconds(g.milliseconds()),this.props.value)this.props.closeOnSelect&&b&&this.closeCalendar();else{var h=!(this.props.closeOnSelect&&b);h||this.props.onBlur(c),this.setState({selectedDate:c,viewDate:c.clone().startOf("month"),inputValue:c.format(this.state.inputFormat),open:h})}this.props.onChange(c)},openCalendar:function(a){this.state.open||this.setState({open:!0},function(){this.props.onFocus(a)})},closeCalendar:function(){this.setState({open:!1},function(){this.props.onBlur(this.state.selectedDate||this.state.inputValue)})},handleClickOutside:function(){this.props.input&&this.state.open&&void 0===this.props.open&&!this.props.disableCloseOnClickOutside&&this.setState({open:!1},function(){this.props.onBlur(this.state.selectedDate||this.state.inputValue)})},localMoment:function(a,b,c){c=c||this.props;var d=null;return d=c.utc?g.utc(a,b,c.strictParsing):c.displayTimeZone?g.tz(a,b,c.displayTimeZone):g(a,b,c.strictParsing),c.locale&&d.locale(c.locale),d},checkTZ:function(a){var b=console;!a.displayTimeZone||this.tzWarning||g.tz||(this.tzWarning=!0,b&&b.error('react-datetime: displayTimeZone prop with value "'+a.displayTimeZone+'" is used but moment.js timezone is not loaded.'))},componentProps:{fromProps:["value","isValidDate","renderDay","renderMonth","renderYear","timeConstraints"],fromState:["viewDate","selectedDate","updateOn"],fromThis:["setDate","setTime","showView","addTime","subtractTime","updateSelectedDate","localMoment","handleClickOutside"]},getComponentProps:function(){var a=this.getToday(),b=this,c=this.getFormats(this.props),d={dateFormat:c.date,timeFormat:c.time,today:a,setToday:this.setToday,closeCalendar:this.closeCalendar,localMoment:this.localMoment};return this.componentProps.fromProps.forEach(function(a){d[a]=b.props[a]}),this.componentProps.fromState.forEach(function(a){d[a]=b.state[a]}),this.componentProps.fromThis.forEach(function(a){d[a]=b[a]}),d},overrideEvent:function(a,b){if(this.overridenEvents||(this.overridenEvents={}),!this.overridenEvents[a]){var c=this;this.overridenEvents[a]=function(d){var e;c.props.inputProps&&c.props.inputProps[a]&&(e=c.props.inputProps[a](d)),!1!==e&&b(d)}}return this.overridenEvents[a]},render:function(){var a="rdt"+(this.props.className?Array.isArray(this.props.className)?" "+this.props.className.join(" "):" "+this.props.className:""),b=[];if(this.props.input){var c=d({type:"text",className:"form-control",value:this.state.inputValue},this.props.inputProps,{onClick:this.overrideEvent("onClick",this.openCalendar),onFocus:this.overrideEvent("onFocus",this.openCalendar),onChange:this.overrideEvent("onChange",this.onInputChange),onKeyDown:this.overrideEvent("onKeyDown",this.onInputKey)});b=this.props.renderInput?[h.createElement("div",{key:"i"},this.props.renderInput(c,this.openCalendar,this.closeCalendar))]:[h.createElement("input",d({key:"i"},c))]}else a+=" rdtStatic";return(this.props.open||void 0===this.props.open&&this.state.open)&&(a+=" rdtOpen"),h.createElement(n,{className:a,onClickOut:this.handleClickOutside},b.concat(h.createElement("div",{key:"dt",className:"rdtPicker"},h.createElement(i,{view:this.state.currentView,viewProps:this.getComponentProps()}))))}}),n=j(f({render:function(){return h.createElement("div",{className:this.props.className},this.props.children)},handleClickOutside:function(a){this.props.onClickOut(a)}}));m.defaultProps={className:"",defaultValue:"",inputProps:{},input:!0,onFocus:function(){},onBlur:function(){},onChange:function(){},onViewModeChange:function(){},onNavigateBack:function(){},onNavigateForward:function(){},timeFormat:!0,timeConstraints:{},dateFormat:!0,strictParsing:!0,closeOnSelect:!1,closeOnTab:!0,utc:!1},m.moment=g,a.exports=m},function(a,b){"use strict";function c(a){if(null==a)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(a)}function d(a){var b=Object.getOwnPropertyNames(a);return Object.getOwnPropertySymbols&&(b=b.concat(Object.getOwnPropertySymbols(a))),b.filter(function(b){return e.call(a,b)})}var e=Object.prototype.propertyIsEnumerable;a.exports=Object.assign||function(a,b){for(var e,f,g=c(a),h=1;h<arguments.length;h++){e=arguments[h],f=d(Object(e));for(var i=0;i<f.length;i++)g[f[i]]=e[f[i]]}return g}},function(a,b,c){(function(b){if("production"!==b.env.NODE_ENV){var d="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,e=function(a){return"object"==typeof a&&null!==a&&a.$$typeof===d};a.exports=c(4)(e,!0)}else a.exports=c(8)()}).call(b,c(3))},function(a,b){function c(){throw new Error("setTimeout has not been defined")}function d(){throw new Error("clearTimeout has not been defined")}function e(a){if(k===setTimeout)return setTimeout(a,0);if((k===c||!k)&&setTimeout)return k=setTimeout,setTimeout(a,0);try{return k(a,0)}catch(b){try{return k.call(null,a,0)}catch(b){return k.call(this,a,0)}}}function f(a){if(l===clearTimeout)return clearTimeout(a);if((l===d||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(a);try{return l(a)}catch(b){try{return l.call(null,a)}catch(b){return l.call(this,a)}}}function g(){p&&n&&(p=!1,n.length?o=n.concat(o):q=-1,o.length&&h())}function h(){if(!p){var a=e(g);p=!0;for(var b=o.length;b;){for(n=o,o=[];++q<b;)n&&n[q].run();q=-1,b=o.length}n=null,p=!1,f(a)}}function i(a,b){this.fun=a,this.array=b}function j(){}var k,l,m=a.exports={};!function(){try{k="function"==typeof setTimeout?setTimeout:c}catch(a){k=c}try{l="function"==typeof clearTimeout?clearTimeout:d}catch(a){l=d}}();var n,o=[],p=!1,q=-1;m.nextTick=function(a){var b=new Array(arguments.length-1);if(arguments.length>1)for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];o.push(new i(a,b)),1!==o.length||p||e(h)},i.prototype.run=function(){this.fun.apply(null,this.array)},m.title="browser",m.browser=!0,m.env={},m.argv=[],m.version="",m.versions={},m.on=j,m.addListener=j,m.once=j,m.off=j,m.removeListener=j,m.removeAllListeners=j,m.emit=j,m.prependListener=j,m.prependOnceListener=j,m.listeners=function(a){return[]},m.binding=function(a){throw new Error("process.binding is not supported")},m.cwd=function(){return"/"},m.chdir=function(a){throw new Error("process.chdir is not supported")},m.umask=function(){return 0}},function(a,b,c){(function(b){"use strict";function d(){return null}var e=c(5),f=c(6),g=c(7),h=function(){};"production"!==b.env.NODE_ENV&&(h=function(a){var b="Warning: "+a;"undefined"!=typeof console&&console.error(b);try{throw new Error(b)}catch(a){}}),a.exports=function(a,c){function i(a){var b=a&&(D&&a[D]||a[E]);if("function"==typeof b)return b}function j(a,b){return a===b?0!==a||1/a==1/b:a!==a&&b!==b}function k(a){this.message=a,this.stack=""}function l(a){function d(d,i,j,l,m,n,o){if(l=l||F,n=n||j,o!==f){if(c){var p=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw p.name="Invariant Violation",p}if("production"!==b.env.NODE_ENV&&"undefined"!=typeof console){var q=l+":"+j;!e[q]&&g<3&&(h("You are manually calling a React.PropTypes validation function for the `"+n+"` prop on `"+l+"`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details."),e[q]=!0,g++)}}return null==i[j]?d?new k(null===i[j]?"The "+m+" `"+n+"` is marked as required in `"+l+"`, but its value is `null`.":"The "+m+" `"+n+"` is marked as required in `"+l+"`, but its value is `undefined`."):null:a(i,j,l,m,n)}if("production"!==b.env.NODE_ENV)var e={},g=0;var i=d.bind(null,!1);return i.isRequired=d.bind(null,!0),i}function m(a){function b(b,c,d,e,f,g){var h=b[c];if(z(h)!==a)return new k("Invalid "+e+" `"+f+"` of type `"+A(h)+"` supplied to `"+d+"`, expected `"+a+"`.");return null}return l(b)}function n(){return l(d)}function o(a){function b(b,c,d,e,g){if("function"!=typeof a)return new k("Property `"+g+"` of component `"+d+"` has invalid PropType notation inside arrayOf.");var h=b[c];if(!Array.isArray(h)){return new k("Invalid "+e+" `"+g+"` of type `"+z(h)+"` supplied to `"+d+"`, expected an array.")}for(var i=0;i<h.length;i++){var j=a(h,i,d,e,g+"["+i+"]",f);if(j instanceof Error)return j}return null}return l(b)}function p(){function b(b,c,d,e,f){var g=b[c];if(!a(g)){return new k("Invalid "+e+" `"+f+"` of type `"+z(g)+"` supplied to `"+d+"`, expected a single ReactElement.")}return null}return l(b)}function q(a){function b(b,c,d,e,f){if(!(b[c]instanceof a)){var g=a.name||F;return new k("Invalid "+e+" `"+f+"` of type `"+C(b[c])+"` supplied to `"+d+"`, expected instance of `"+g+"`.")}return null}return l(b)}function r(a){function c(b,c,d,e,f){for(var g=b[c],h=0;h<a.length;h++)if(j(g,a[h]))return null;return new k("Invalid "+e+" `"+f+"` of value `"+g+"` supplied to `"+d+"`, expected one of "+JSON.stringify(a)+".")}return Array.isArray(a)?l(c):("production"!==b.env.NODE_ENV&&h("Invalid argument supplied to oneOf, expected an instance of array."),d)}function s(a){function b(b,c,d,e,g){if("function"!=typeof a)return new k("Property `"+g+"` of component `"+d+"` has invalid PropType notation inside objectOf.");var h=b[c],i=z(h);if("object"!==i)return new k("Invalid "+e+" `"+g+"` of type `"+i+"` supplied to `"+d+"`, expected an object.");for(var j in h)if(h.hasOwnProperty(j)){var l=a(h,j,d,e,g+"."+j,f);if(l instanceof Error)return l}return null}return l(b)}function t(a){function c(b,c,d,e,g){for(var h=0;h<a.length;h++){if(null==(0,a[h])(b,c,d,e,g,f))return null}return new k("Invalid "+e+" `"+g+"` supplied to `"+d+"`.")}if(!Array.isArray(a))return"production"!==b.env.NODE_ENV&&h("Invalid argument supplied to oneOfType, expected an instance of array."),d;for(var e=0;e<a.length;e++){var g=a[e];if("function"!=typeof g)return h("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+B(g)+" at index "+e+"."),d}return l(c)}function u(){function a(a,b,c,d,e){return x(a[b])?null:new k("Invalid "+d+" `"+e+"` supplied to `"+c+"`, expected a ReactNode.")}return l(a)}function v(a){function b(b,c,d,e,g){var h=b[c],i=z(h);if("object"!==i)return new k("Invalid "+e+" `"+g+"` of type `"+i+"` supplied to `"+d+"`, expected `object`.");for(var j in a){var l=a[j];if(l){var m=l(h,j,d,e,g+"."+j,f);if(m)return m}}return null}return l(b)}function w(a){function b(b,c,d,g,h){var i=b[c],j=z(i);if("object"!==j)return new k("Invalid "+g+" `"+h+"` of type `"+j+"` supplied to `"+d+"`, expected `object`.");var l=e({},b[c],a);for(var m in l){var n=a[m];if(!n)return new k("Invalid "+g+" `"+h+"` key `"+m+"` supplied to `"+d+"`.\nBad object: "+JSON.stringify(b[c],null,"  ")+"\nValid keys: "+JSON.stringify(Object.keys(a),null,"  "));var o=n(i,m,d,g,h+"."+m,f);if(o)return o}return null}return l(b)}function x(b){switch(typeof b){case"number":case"string":case"undefined":return!0;case"boolean":return!b;case"object":if(Array.isArray(b))return b.every(x);if(null===b||a(b))return!0;var c=i(b);if(!c)return!1;var d,e=c.call(b);if(c!==b.entries){for(;!(d=e.next()).done;)if(!x(d.value))return!1}else for(;!(d=e.next()).done;){var f=d.value;if(f&&!x(f[1]))return!1}return!0;default:return!1}}function y(a,b){return"symbol"===a||("Symbol"===b["@@toStringTag"]||"function"==typeof Symbol&&b instanceof Symbol)}function z(a){var b=typeof a;return Array.isArray(a)?"array":a instanceof RegExp?"object":y(b,a)?"symbol":b}function A(a){if(void 0===a||null===a)return""+a;var b=z(a);if("object"===b){if(a instanceof Date)return"date";if(a instanceof RegExp)return"regexp"}return b}function B(a){var b=A(a);switch(b){case"array":case"object":return"an "+b;case"boolean":case"date":case"regexp":return"a "+b;default:return b}}function C(a){return a.constructor&&a.constructor.name?a.constructor.name:F}var D="function"==typeof Symbol&&Symbol.iterator,E="@@iterator",F="<<anonymous>>",G={array:m("array"),bool:m("boolean"),func:m("function"),number:m("number"),object:m("object"),string:m("string"),symbol:m("symbol"),any:n(),arrayOf:o,element:p(),instanceOf:q,node:u(),objectOf:s,oneOf:r,oneOfType:t,shape:v,exact:w};return k.prototype=Error.prototype,G.checkPropTypes=g,G.PropTypes=G,G}}).call(b,c(3))},function(a,b){"use strict";function c(a){if(null===a||void 0===a)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(a)}function d(){try{if(!Object.assign)return!1;var a=new String("abc");if(a[5]="de","5"===Object.getOwnPropertyNames(a)[0])return!1;for(var b={},c=0;c<10;c++)b["_"+String.fromCharCode(c)]=c;if("0123456789"!==Object.getOwnPropertyNames(b).map(function(a){return b[a]}).join(""))return!1;var d={};return"abcdefghijklmnopqrst".split("").forEach(function(a){d[a]=a}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},d)).join("")}catch(a){return!1}}var e=Object.getOwnPropertySymbols,f=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable;a.exports=d()?Object.assign:function(a,b){for(var d,h,i=c(a),j=1;j<arguments.length;j++){d=Object(arguments[j]);for(var k in d)f.call(d,k)&&(i[k]=d[k]);if(e){h=e(d);for(var l=0;l<h.length;l++)g.call(d,h[l])&&(i[h[l]]=d[h[l]])}}return i}},function(a,b){"use strict";a.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(a,b,c){(function(b){"use strict";function d(a,c,d,h,i){if("production"!==b.env.NODE_ENV)for(var j in a)if(a.hasOwnProperty(j)){var k;try{if("function"!=typeof a[j]){var l=Error((h||"React class")+": "+d+" type `"+j+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof a[j]+"`.");throw l.name="Invariant Violation",l}k=a[j](c,j,h,d,null,f)}catch(a){k=a}if(!k||k instanceof Error||e((h||"React class")+": type specification of "+d+" `"+j+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+typeof k+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument)."),k instanceof Error&&!(k.message in g)){g[k.message]=!0;var m=i?i():"";e("Failed "+d+" type: "+k.message+(null!=m?m:""))}}}var e=function(){};if("production"!==b.env.NODE_ENV){var f=c(6),g={};e=function(a){var b="Warning: "+a;"undefined"!=typeof console&&console.error(b);try{throw new Error(b)}catch(a){}}}a.exports=d}).call(b,c(3))},function(a,b,c){"use strict";function d(){}var e=c(6);a.exports=function(){function a(a,b,c,d,f,g){if(g!==e){var h=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}}function b(){return a}a.isRequired=a;var c={array:a,bool:a,func:a,number:a,object:a,string:a,symbol:a,any:a,arrayOf:b,element:a,instanceOf:b,node:a,objectOf:b,oneOf:b,oneOfType:b,shape:b,exact:b};return c.checkPropTypes=d,c.PropTypes=c,c}},function(a,b,c){"use strict";var d=c(10),e=c(11);if(void 0===d)throw Error("create-react-class could not find the React object. If you are using script tags, make sure that React is being loaded before create-react-class.");var f=(new d.Component).updater;a.exports=e(d.Component,d.isValidElement,f)},function(b,c){b.exports=a},function(a,b,c){(function(b){"use strict";function d(a){return a}function e(a,c,e){function l(a,c,d){for(var e in c)c.hasOwnProperty(e)&&"production"!==b.env.NODE_ENV&&i("function"==typeof c[e],"%s: %s type `%s` is invalid; it must be a function, usually from React.PropTypes.",a.displayName||"ReactClass",j[d],e)}function m(a,b){var c=w.hasOwnProperty(b)?w[b]:null;B.hasOwnProperty(b)&&h("OVERRIDE_BASE"===c,"ReactClassInterface: You are attempting to override `%s` from your class specification. Ensure that your method names do not overlap with React methods.",b),a&&h("DEFINE_MANY"===c||"DEFINE_MANY_MERGED"===c,"ReactClassInterface: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",b)}function n(a,d){if(d){h("function"!=typeof d,"ReactClass: You're attempting to use a component class or function as a mixin. Instead, just use a regular object."),h(!c(d),"ReactClass: You're attempting to use a component as a mixin. Instead, just use a regular object.");var e=a.prototype,f=e.__reactAutoBindPairs;d.hasOwnProperty(k)&&y.mixins(a,d.mixins);for(var g in d)if(d.hasOwnProperty(g)&&g!==k){var j=d[g],l=e.hasOwnProperty(g);if(m(l,g),y.hasOwnProperty(g))y[g](a,j);else{var n=w.hasOwnProperty(g),o="function"==typeof j,p=o&&!n&&!l&&!1!==d.autobind;if(p)f.push(g,j),e[g]=j;else if(l){var s=w[g];h(n&&("DEFINE_MANY_MERGED"===s||"DEFINE_MANY"===s),"ReactClass: Unexpected spec policy %s for key %s when mixing in component specs.",s,g),"DEFINE_MANY_MERGED"===s?e[g]=q(e[g],j):"DEFINE_MANY"===s&&(e[g]=r(e[g],j))}else e[g]=j,"production"!==b.env.NODE_ENV&&"function"==typeof j&&d.displayName&&(e[g].displayName=d.displayName+"_"+g)}}}else if("production"!==b.env.NODE_ENV){var t=typeof d,u="object"===t&&null!==d;"production"!==b.env.NODE_ENV&&i(u,"%s: You're attempting to include a mixin that is either null or not an object. Check the mixins included by the component, as well as any mixins they include themselves. Expected object but got %s.",a.displayName||"ReactClass",null===d?null:t)}}function o(a,b){if(b)for(var c in b){var d=b[c];if(b.hasOwnProperty(c)){var e=c in y;h(!e,'ReactClass: You are attempting to define a reserved property, `%s`, that shouldn\'t be on the "statics" key. Define it as an instance property instead; it will still be accessible on the constructor.',c);var f=c in a;if(f){var g=x.hasOwnProperty(c)?x[c]:null;return h("DEFINE_MANY_MERGED"===g,"ReactClass: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",c),void(a[c]=q(a[c],d))}a[c]=d}}}function p(a,b){h(a&&b&&"object"==typeof a&&"object"==typeof b,"mergeIntoWithNoDuplicateKeys(): Cannot merge non-objects.");for(var c in b)b.hasOwnProperty(c)&&(h(void 0===a[c],"mergeIntoWithNoDuplicateKeys(): Tried to merge two objects with the same key: `%s`. This conflict may be due to a mixin; in particular, this may be caused by two getInitialState() or getDefaultProps() methods returning objects with clashing keys.",c),a[c]=b[c]);return a}function q(a,b){return function(){var c=a.apply(this,arguments),d=b.apply(this,arguments);if(null==c)return d;if(null==d)return c;var e={};return p(e,c),p(e,d),e}}function r(a,b){return function(){a.apply(this,arguments),b.apply(this,arguments)}}function s(a,c){var d=c.bind(a);if("production"!==b.env.NODE_ENV){d.__reactBoundContext=a,d.__reactBoundMethod=c,d.__reactBoundArguments=null;var e=a.constructor.displayName,f=d.bind;d.bind=function(g){
for(var h=arguments.length,j=Array(h>1?h-1:0),k=1;k<h;k++)j[k-1]=arguments[k];if(g!==a&&null!==g)"production"!==b.env.NODE_ENV&&i(!1,"bind(): React component methods may only be bound to the component instance. See %s",e);else if(!j.length)return"production"!==b.env.NODE_ENV&&i(!1,"bind(): You are binding a component method to the component. React does this for you automatically in a high-performance way, so you can safely remove this call. See %s",e),d;var l=f.apply(d,arguments);return l.__reactBoundContext=a,l.__reactBoundMethod=c,l.__reactBoundArguments=j,l}}return d}function t(a){for(var b=a.__reactAutoBindPairs,c=0;c<b.length;c+=2){var d=b[c],e=b[c+1];a[d]=s(a,e)}}function u(a){var c=d(function(a,d,f){"production"!==b.env.NODE_ENV&&i(this instanceof c,"Something is calling a React component directly. Use a factory or JSX instead. See: https://fb.me/react-legacyfactory"),this.__reactAutoBindPairs.length&&t(this),this.props=a,this.context=d,this.refs=g,this.updater=f||e,this.state=null;var j=this.getInitialState?this.getInitialState():null;"production"!==b.env.NODE_ENV&&void 0===j&&this.getInitialState._isMockFunction&&(j=null),h("object"==typeof j&&!Array.isArray(j),"%s.getInitialState(): must return an object or null",c.displayName||"ReactCompositeComponent"),this.state=j});c.prototype=new C,c.prototype.constructor=c,c.prototype.__reactAutoBindPairs=[],v.forEach(n.bind(null,c)),n(c,z),n(c,a),n(c,A),c.getDefaultProps&&(c.defaultProps=c.getDefaultProps()),"production"!==b.env.NODE_ENV&&(c.getDefaultProps&&(c.getDefaultProps.isReactClassApproved={}),c.prototype.getInitialState&&(c.prototype.getInitialState.isReactClassApproved={})),h(c.prototype.render,"createClass(...): Class specification must implement a `render` method."),"production"!==b.env.NODE_ENV&&(i(!c.prototype.componentShouldUpdate,"%s has a method called componentShouldUpdate(). Did you mean shouldComponentUpdate()? The name is phrased as a question because the function is expected to return a value.",a.displayName||"A component"),i(!c.prototype.componentWillRecieveProps,"%s has a method called componentWillRecieveProps(). Did you mean componentWillReceiveProps()?",a.displayName||"A component"),i(!c.prototype.UNSAFE_componentWillRecieveProps,"%s has a method called UNSAFE_componentWillRecieveProps(). Did you mean UNSAFE_componentWillReceiveProps()?",a.displayName||"A component"));for(var f in w)c.prototype[f]||(c.prototype[f]=null);return c}var v=[],w={mixins:"DEFINE_MANY",statics:"DEFINE_MANY",propTypes:"DEFINE_MANY",contextTypes:"DEFINE_MANY",childContextTypes:"DEFINE_MANY",getDefaultProps:"DEFINE_MANY_MERGED",getInitialState:"DEFINE_MANY_MERGED",getChildContext:"DEFINE_MANY_MERGED",render:"DEFINE_ONCE",componentWillMount:"DEFINE_MANY",componentDidMount:"DEFINE_MANY",componentWillReceiveProps:"DEFINE_MANY",shouldComponentUpdate:"DEFINE_ONCE",componentWillUpdate:"DEFINE_MANY",componentDidUpdate:"DEFINE_MANY",componentWillUnmount:"DEFINE_MANY",UNSAFE_componentWillMount:"DEFINE_MANY",UNSAFE_componentWillReceiveProps:"DEFINE_MANY",UNSAFE_componentWillUpdate:"DEFINE_MANY",updateComponent:"OVERRIDE_BASE"},x={getDerivedStateFromProps:"DEFINE_MANY_MERGED"},y={displayName:function(a,b){a.displayName=b},mixins:function(a,b){if(b)for(var c=0;c<b.length;c++)n(a,b[c])},childContextTypes:function(a,c){"production"!==b.env.NODE_ENV&&l(a,c,"childContext"),a.childContextTypes=f({},a.childContextTypes,c)},contextTypes:function(a,c){"production"!==b.env.NODE_ENV&&l(a,c,"context"),a.contextTypes=f({},a.contextTypes,c)},getDefaultProps:function(a,b){a.getDefaultProps?a.getDefaultProps=q(a.getDefaultProps,b):a.getDefaultProps=b},propTypes:function(a,c){"production"!==b.env.NODE_ENV&&l(a,c,"prop"),a.propTypes=f({},a.propTypes,c)},statics:function(a,b){o(a,b)},autobind:function(){}},z={componentDidMount:function(){this.__isMounted=!0}},A={componentWillUnmount:function(){this.__isMounted=!1}},B={replaceState:function(a,b){this.updater.enqueueReplaceState(this,a,b)},isMounted:function(){return"production"!==b.env.NODE_ENV&&(i(this.__didWarnIsMounted,"%s: isMounted is deprecated. Instead, make sure to clean up subscriptions and pending requests in componentWillUnmount to prevent memory leaks.",this.constructor&&this.constructor.displayName||this.name||"Component"),this.__didWarnIsMounted=!0),!!this.__isMounted}},C=function(){};return f(C.prototype,a.prototype,B),u}var f=c(12),g=c(13),h=c(14);if("production"!==b.env.NODE_ENV)var i=c(15);var j,k="mixins";j="production"!==b.env.NODE_ENV?{prop:"prop",context:"context",childContext:"child context"}:{},a.exports=e}).call(b,c(3))},function(a,b){"use strict";function c(a){if(null===a||void 0===a)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(a)}function d(){try{if(!Object.assign)return!1;var a=new String("abc");if(a[5]="de","5"===Object.getOwnPropertyNames(a)[0])return!1;for(var b={},c=0;c<10;c++)b["_"+String.fromCharCode(c)]=c;if("0123456789"!==Object.getOwnPropertyNames(b).map(function(a){return b[a]}).join(""))return!1;var d={};return"abcdefghijklmnopqrst".split("").forEach(function(a){d[a]=a}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},d)).join("")}catch(a){return!1}}var e=Object.getOwnPropertySymbols,f=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable;a.exports=d()?Object.assign:function(a,b){for(var d,h,i=c(a),j=1;j<arguments.length;j++){d=Object(arguments[j]);for(var k in d)f.call(d,k)&&(i[k]=d[k]);if(e){h=e(d);for(var l=0;l<h.length;l++)g.call(d,h[l])&&(i[h[l]]=d[h[l]])}}return i}},function(a,b,c){(function(b){"use strict";var c={};"production"!==b.env.NODE_ENV&&Object.freeze(c),a.exports=c}).call(b,c(3))},function(a,b,c){(function(b){"use strict";function c(a,b,c,e,f,g,h,i){if(d(b),!a){var j;if(void 0===b)j=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var k=[c,e,f,g,h,i],l=0;j=new Error(b.replace(/%s/g,function(){return k[l++]})),j.name="Invariant Violation"}throw j.framesToPop=1,j}}var d=function(a){};"production"!==b.env.NODE_ENV&&(d=function(a){if(void 0===a)throw new Error("invariant requires an error message argument")}),a.exports=c}).call(b,c(3))},function(a,b,c){(function(b){"use strict";var d=c(16),e=d;if("production"!==b.env.NODE_ENV){var f=function(a){for(var b=arguments.length,c=Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];var e=0,f="Warning: "+a.replace(/%s/g,function(){return c[e++]});"undefined"!=typeof console&&console.error(f);try{throw new Error(f)}catch(a){}};e=function(a,b){if(void 0===b)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");if(0!==b.indexOf("Failed Composite propType: ")&&!a){for(var c=arguments.length,d=Array(c>2?c-2:0),e=2;e<c;e++)d[e-2]=arguments[e];f.apply(void 0,[b].concat(d))}}}a.exports=e}).call(b,c(3))},function(a,b){"use strict";function c(a){return function(){return a}}var d=function(){};d.thatReturns=c,d.thatReturnsFalse=c(!1),d.thatReturnsTrue=c(!0),d.thatReturnsNull=c(null),d.thatReturnsThis=function(){return this},d.thatReturnsArgument=function(a){return a},a.exports=d},function(a,c){a.exports=b},function(a,b,c){"use strict";var d=c(10),e=c(9),f=c(19),g=c(22),h=c(23),i=c(24),j=e({viewComponents:{days:f,months:g,years:h,time:i},render:function(){return d.createElement(this.viewComponents[this.props.view],this.props.viewProps)}});a.exports=j},function(a,b,c){"use strict";var d=c(10),e=c(9),f=(c(17),c(20)),g=c(21),h=e({render:function(){var a,b=this.renderFooter(),c=this.props.viewDate,e=c.localeData();return a=[d.createElement("thead",{key:"th"},[d.createElement("tr",{key:"h"},[d.createElement("th",{key:"p",className:"rdtPrev",onClick:this.props.subtractTime(1,"months"),colSpan:5},d.createElement("span",{},"")),d.createElement("th",{key:"s",className:"rdtSwitch",onClick:this.props.showView("months"),colSpan:11,"data-value":this.props.viewDate.month()},e.months(c)+" "+c.year()),d.createElement("th",{key:"n",className:"rdtNext",onClick:this.props.addTime(1,"months"),colSpan:5},d.createElement("span",{},""))]),d.createElement("tr",{key:"d"},this.getDaysOfWeek(e).map(function(a,b){return d.createElement("th",{key:a+b,className:"dow",colSpan:3},a)}))]),d.createElement("tbody",{key:"tb"},this.renderDays())],b&&a.push(b),d.createElement("div",{className:"rdtDays"},d.createElement("table",{},a))},getDaysOfWeek:function(a){var b=a._weekdaysMin,c=a.firstDayOfWeek(),d=[],e=0;return b.forEach(function(a){d[(7+e++-c)%7]=a}),d},renderDays:function(){var a,b,c,e,f=this.props.viewDate,g=this.props.selectedDate&&this.props.selectedDate.clone(),h=f.clone().subtract(1,"months"),i=f.year(),j=f.month(),k=[],l=[],m=this.props.renderDay||this.renderDay,n=this.props.isValidDate||this.alwaysValidDate;h.date(h.daysInMonth()).startOf("week");for(var o=h.clone().add(42,"d");h.isBefore(o);)a="rdtDay",e=h.clone(),h.year()===i&&h.month()<j||h.year()<i?a+=" rdtOld":(h.year()===i&&h.month()>j||h.year()>i)&&(a+=" rdtNew"),g&&h.isSame(g,"day")&&(a+=" rdtActive"),h.isSame(this.props.today,"day")&&(a+=" rdtToday"),b=!n(e,g),b&&(a+=" rdtDisabled"),c={key:h.format("M_D"),"data-value":h.date(),className:a,colSpan:3},b||(c.onClick=this.updateSelectedDate),l.push(m(c,e,g)),7===l.length&&(k.push(d.createElement("tr",{key:h.format("M_D")},l)),l=[]),h.add(1,"d");return k},updateSelectedDate:function(a){this.props.updateSelectedDate(a,!0)},renderDay:function(a,b){return d.createElement("td",a,b.date())},renderFooter:function(){var a=[d.createElement("td",{key:"tfoot-buttons-td",colSpan:this.props.timeFormat?14:21},d.createElement("div",{className:"rdt-tfoot-buttons-container"},d.createElement(f,{key:"tfoot-today",setToday:this.props.setToday,close:this.props.closeCalendar,localMoment:this.props.localMoment}),d.createElement(g,{key:"tfoot-close",close:this.props.closeCalendar})))];if(this.props.timeFormat){var b=this.props.selectedDate||this.props.viewDate;a.unshift(d.createElement("td",{onClick:this.props.showView("time"),colSpan:7,className:"rdtTimeToggle"},b.format(this.props.timeFormat)))}return d.createElement("tfoot",{key:"tf"},[d.createElement("tr",{key:"tfoot-buttons-tr"},a)])},alwaysValidDate:function(){return 1}});a.exports=h},function(a,b,c){"use strict";var d=c(10),e=c(9),f=e({onClick:function(){this.props.setToday(),this.props.close()},render:function(){return d.createElement("div",{className:"rdt-today",onClick:this.onClick},window.webconLocale.cToday)}});a.exports=f},function(a,b,c){"use strict";var d=c(10),e=c(9),f=e({onClick:function(){this.props.close()},render:function(){return d.createElement("div",{className:"rdt-close",onClick:this.onClick},window.webconLocale.cClose)}});a.exports=f},function(a,b,c){"use strict";function d(a){return a.charAt(0).toUpperCase()+a.slice(1)}var e=c(10),f=c(9),g=f({render:function(){return e.createElement("div",{className:"rdtMonths"},[e.createElement("table",{key:"a"},e.createElement("thead",{},e.createElement("tr",{},[e.createElement("th",{key:"prev",className:"rdtPrev",onClick:this.props.subtractTime(1,"years")},e.createElement("span",{},"")),e.createElement("th",{key:"year",className:"rdtSwitch",onClick:this.props.showView("years"),colSpan:2,"data-value":this.props.viewDate.year()},this.props.viewDate.year()),e.createElement("th",{key:"next",className:"rdtNext",onClick:this.props.addTime(1,"years")},e.createElement("span",{},""))]))),e.createElement("table",{key:"months"},e.createElement("tbody",{key:"b"},this.renderMonths()))])},renderMonths:function(){for(var a,b,c,d,f,g,h,i=this.props.selectedDate,j=this.props.viewDate.month(),k=this.props.viewDate.year(),l=[],m=0,n=[],o=this.props.renderMonth||this.renderMonth,p=this.props.isValidDate||this.alwaysValidDate,q=1;m<12;)a="rdtMonth",c=this.props.viewDate.clone().set({year:k,month:m,date:q}),f=c.endOf("month").format("D"),g=Array.from({length:f},function(a,b){return b+1}),h=g.find(function(a){var b=c.clone().set("date",a);return p(b)}),d=void 0===h,d&&(a+=" rdtDisabled"),i&&m===i.month()&&k===i.year()&&(a+=" rdtActive"),b={key:m,"data-value":m,className:a},d||(b.onClick="months"===this.props.updateOn?this.updateSelectedMonth:this.props.setDate("month")),n.push(o(b,m,k,i&&i.clone())),4===n.length&&(l.push(e.createElement("tr",{key:j+"_"+l.length},n)),n=[]),m++;return l},updateSelectedMonth:function(a){this.props.updateSelectedDate(a)},renderMonth:function(a,b){var c=this.props.viewDate,f=c.localeData().monthsShort(c.month(b)),g=3,h=f.substring(0,g);return e.createElement("td",a,d(h))},alwaysValidDate:function(){return 1}});a.exports=g},function(a,b,c){"use strict";var d=c(10),e=c(9),f=e({render:function(){var a=10*parseInt(this.props.viewDate.year()/10,10);return d.createElement("div",{className:"rdtYears"},[d.createElement("table",{key:"a"},d.createElement("thead",{},d.createElement("tr",{},[d.createElement("th",{key:"prev",className:"rdtPrev",onClick:this.props.subtractTime(10,"years")},d.createElement("span",{},"")),d.createElement("th",{key:"year",className:"rdtSwitch",onClick:this.props.showView("years"),colSpan:2},a+"-"+(a+9)),d.createElement("th",{key:"next",className:"rdtNext",onClick:this.props.addTime(10,"years")},d.createElement("span",{},""))]))),d.createElement("table",{key:"years"},d.createElement("tbody",{},this.renderYears(a)))])},renderYears:function(a){var b,c,e,f,g,h,i,j=[],k=-1,l=[],m=this.props.renderYear||this.renderYear,n=this.props.selectedDate,o=this.props.isValidDate||this.alwaysValidDate;for(a--;k<11;)b="rdtYear",e=this.props.viewDate.clone().set({year:a,month:0,date:1}),g=e.endOf("year").format("DDD"),h=Array.from({length:g},function(a,b){return b+1}),i=h.find(function(a){var b=e.clone().dayOfYear(a);return o(b)}),f=void 0===i,f&&(b+=" rdtDisabled"),n&&n.year()===a&&(b+=" rdtActive"),c={key:a,"data-value":a,className:b},f||(c.onClick="years"===this.props.updateOn?this.updateSelectedYear:this.props.setDate("year")),j.push(m(c,a,n&&n.clone())),4===j.length&&(l.push(d.createElement("tr",{key:k},j)),j=[]),a++,k++;return l},updateSelectedYear:function(a){this.props.updateSelectedDate(a)},renderYear:function(a,b){return d.createElement("td",a,b)},alwaysValidDate:function(){return 1}});a.exports=f},function(a,b,c){"use strict";var d=c(10),e=c(9),f=c(1),g=e({getInitialState:function(){return this.calculateState(this.props)},calculateState:function(a){var b=a.selectedDate||a.viewDate,c=a.timeFormat,d=[];-1!==c.toLowerCase().indexOf("h")&&(d.push("hours"),-1!==c.indexOf("m")&&(d.push("minutes"),-1!==c.indexOf("s")&&d.push("seconds")));var e=b.format("H"),f=!1;return null!==this.state&&-1!==this.props.timeFormat.toLowerCase().indexOf(" a")&&(f=-1!==this.props.timeFormat.indexOf(" A")?e>=12?"PM":"AM":e>=12?"pm":"am"),{hours:e,minutes:b.format("mm"),seconds:b.format("ss"),milliseconds:b.format("SSS"),daypart:f,counters:d}},renderCounter:function(a){if("daypart"!==a){var b=this.state[a];return"hours"===a&&-1!==this.props.timeFormat.toLowerCase().indexOf(" a")&&0===(b=(b-1)%12+1)&&(b=12),d.createElement("div",{key:a,className:"rdtCounter"},[d.createElement("span",{key:"up",className:"rdtBtn",onMouseDown:this.onStartClicking("increase",a),onContextMenu:this.disableContextMenu},""),d.createElement("div",{key:"c",className:"rdtCount"},b),d.createElement("span",{key:"do",className:"rdtBtn",onMouseDown:this.onStartClicking("decrease",a),onContextMenu:this.disableContextMenu},"")])}return""},renderDayPart:function(){return d.createElement("div",{key:"dayPart",className:"rdtCounter"},[d.createElement("span",{key:"up",className:"rdtBtn",onMouseDown:this.onStartClicking("toggleDayPart","hours"),onContextMenu:this.disableContextMenu},""),d.createElement("div",{key:this.state.daypart,className:"rdtCount"},this.state.daypart),d.createElement("span",{key:"do",className:"rdtBtn",onMouseDown:this.onStartClicking("toggleDayPart","hours"),onContextMenu:this.disableContextMenu},"")])},render:function(){var a=this,b=[];return this.state.counters.forEach(function(c){b.length&&b.push(d.createElement("div",{key:"sep"+b.length,className:"rdtCounterSeparator"},":")),b.push(a.renderCounter(c))}),!1!==this.state.daypart&&b.push(a.renderDayPart()),3===this.state.counters.length&&-1!==this.props.timeFormat.indexOf("S")&&(b.push(d.createElement("div",{className:"rdtCounterSeparator",key:"sep5"},":")),b.push(d.createElement("div",{className:"rdtCounter rdtMilli",key:"m"},d.createElement("input",{value:this.state.milliseconds,type:"text",onChange:this.updateMilli})))),d.createElement("div",{className:"rdtTime"},d.createElement("table",{},[this.renderHeader(),d.createElement("tbody",{key:"b"},d.createElement("tr",{},d.createElement("td",{},d.createElement("div",{className:"rdtCounters"},b))))]))},componentWillMount:function(){var a=this;a.timeConstraints={hours:{min:0,max:23,step:1},minutes:{min:0,max:59,step:1},seconds:{min:0,max:59,step:1},milliseconds:{min:0,max:999,step:1}},["hours","minutes","seconds","milliseconds"].forEach(function(b){f(a.timeConstraints[b],a.props.timeConstraints[b])}),this.setState(this.calculateState(this.props))},componentWillReceiveProps:function(a){this.setState(this.calculateState(a))},updateMilli:function(a){var b=parseInt(a.target.value,10);b===a.target.value&&b>=0&&b<1e3&&(this.props.setTime("milliseconds",b),this.setState({milliseconds:b}))},renderHeader:function(){if(!this.props.dateFormat)return null;var a=this.props.selectedDate||this.props.viewDate;return d.createElement("thead",{key:"h"},d.createElement("tr",{},d.createElement("th",{className:"rdtSwitch",colSpan:4,onClick:this.props.showView("days")},a.format(this.props.dateFormat))))},onStartClicking:function(a,b){var c=this;return function(){var d={};d[b]=c[a](b),c.setState(d),c.timer=setTimeout(function(){c.increaseTimer=setInterval(function(){d[b]=c[a](b),c.setState(d)},70)},500),c.mouseUpListener=function(){clearTimeout(c.timer),clearInterval(c.increaseTimer),c.props.setTime(b,c.state[b]),document.body.removeEventListener("mouseup",c.mouseUpListener),document.body.removeEventListener("touchend",c.mouseUpListener)},document.body.addEventListener("mouseup",c.mouseUpListener),document.body.addEventListener("touchend",c.mouseUpListener)}},disableContextMenu:function(a){return a.preventDefault(),!1},padValues:{hours:1,minutes:2,seconds:2,milliseconds:3},toggleDayPart:function(a){var b=parseInt(this.state[a],10)+12;return b>this.timeConstraints[a].max&&(b=this.timeConstraints[a].min+(b-(this.timeConstraints[a].max+1))),this.pad(a,b)},increase:function(a){var b=parseInt(this.state[a],10)+this.timeConstraints[a].step;return b>this.timeConstraints[a].max&&(b=this.timeConstraints[a].min+(b-(this.timeConstraints[a].max+1))),this.pad(a,b)},decrease:function(a){var b=parseInt(this.state[a],10)-this.timeConstraints[a].step;return b<this.timeConstraints[a].min&&(b=this.timeConstraints[a].max+1-(this.timeConstraints[a].min-b)),this.pad(a,b)},pad:function(a,b){for(var c=b+"";c.length<this.padValues[a];)c="0"+c;return c}});a.exports=g},function(a,b,c){"use strict";function d(a,b){a.prototype=Object.create(b.prototype),a.prototype.constructor=a,a.__proto__=b}function e(a,b){if(null==a)return{};var c,d,e={},f=Object.keys(a);for(d=0;d<f.length;d++)c=f[d],b.indexOf(c)>=0||(e[c]=a[c]);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(a);for(d=0;d<g.length;d++)c=g[d],b.indexOf(c)>=0||Object.prototype.propertyIsEnumerable.call(a,c)&&(e[c]=a[c])}return e}function f(a,b,c){return a===b||(a.correspondingElement?a.correspondingElement.classList.contains(c):a.classList.contains(c))}function g(a,b,c){if(a===b)return!0;for(;a.parentNode;){if(f(a,b,c))return!0;a=a.parentNode}return a}function h(a){return document.documentElement.clientWidth<=a.clientX||document.documentElement.clientHeight<=a.clientY}function i(a){return void 0===a&&(a=0),function(){return++a}}function j(a,b){var c=null;return-1!==s.indexOf(b)&&l&&(c={passive:!a.props.preventDefault}),c}function k(a,b){var c,f;return f=c=function(c){function f(a){var b;return b=c.call(this,a)||this,b.__outsideClickHandler=function(a){if("function"==typeof b.__clickOutsideHandlerProp)return void b.__clickOutsideHandlerProp(a);var c=b.getInstance();if("function"==typeof c.props.handleClickOutside)return void c.props.handleClickOutside(a);if("function"==typeof c.handleClickOutside)return void c.handleClickOutside(a);throw new Error("WrappedComponent lacks a handleClickOutside(event) function for processing outside click events.")},b.enableOnClickOutside=function(){if("undefined"!=typeof document&&!r[b._uid]){void 0===l&&(l=o()),r[b._uid]=!0;var a=b.props.eventTypes;a.forEach||(a=[a]),q[b._uid]=function(a){if(!b.props.disableOnClickOutside&&null!==b.componentNode&&(b.props.preventDefault&&a.preventDefault(),b.props.stopPropagation&&a.stopPropagation(),!b.props.excludeScrollbar||!h(a))){g(a.target,b.componentNode,b.props.outsideClickIgnoreClass)===document&&b.__outsideClickHandler(a)}},a.forEach(function(a){document.addEventListener(a,q[b._uid],j(b,a))})}},b.disableOnClickOutside=function(){delete r[b._uid];var a=q[b._uid];if(a&&"undefined"!=typeof document){var c=b.props.eventTypes;c.forEach||(c=[c]),c.forEach(function(c){return document.removeEventListener(c,a,j(b,c))}),delete q[b._uid]}},b.getRef=function(a){return b.instanceRef=a},b._uid=p(),b}d(f,c);var i=f.prototype;return i.getInstance=function(){if(!a.prototype.isReactComponent)return this;var b=this.instanceRef;return b.getInstance?b.getInstance():b},i.componentDidMount=function(){if("undefined"!=typeof document&&document.createElement){var a=this.getInstance();if(b&&"function"==typeof b.handleClickOutside&&(this.__clickOutsideHandlerProp=b.handleClickOutside(a),"function"!=typeof this.__clickOutsideHandlerProp))throw new Error("WrappedComponent lacks a function for processing outside click events specified by the handleClickOutside config option.");this.componentNode=n.findDOMNode(this.getInstance()),this.enableOnClickOutside()}},i.componentDidUpdate=function(){this.componentNode=n.findDOMNode(this.getInstance())},i.componentWillUnmount=function(){this.disableOnClickOutside()},i.render=function(){var b=this.props,c=(b.excludeScrollbar,e(b,["excludeScrollbar"]));return a.prototype.isReactComponent?c.ref=this.getRef:c.wrappedRef=this.getRef,c.disableOnClickOutside=this.disableOnClickOutside,c.enableOnClickOutside=this.enableOnClickOutside,m.createElement(a,c)},f}(m.Component),c.displayName="OnClickOutside("+(a.displayName||a.name||"Component")+")",c.defaultProps={eventTypes:["mousedown","touchstart"],excludeScrollbar:b&&b.excludeScrollbar||!1,outsideClickIgnoreClass:t,preventDefault:!1,stopPropagation:!1},c.getClass=function(){return a.getClass?a.getClass():a},f}Object.defineProperty(b,"__esModule",{value:!0});var l,m=c(10),n=c(26),o=function(){if("undefined"!=typeof window&&"function"==typeof window.addEventListener){var a=!1,b=Object.defineProperty({},"passive",{get:function(){a=!0}}),c=function(){};return window.addEventListener("testPassiveEventSupport",c,b),window.removeEventListener("testPassiveEventSupport",c,b),a}},p=i(),q={},r={},s=["touchstart","touchmove"],t="ignore-react-onclickoutside";b.IGNORE_CLASS_NAME=t,b.default=k},function(a,b){a.exports=c}])}),function(){"use strict";function a(){for(var c=[],d=0;d<arguments.length;d++){var e=arguments[d];if(e){var f=typeof e;if("string"===f||"number"===f)c.push(e);else if(Array.isArray(e))c.push(a.apply(null,e));else if("object"===f)for(var g in e)b.call(e,g)&&e[g]&&c.push(g)}}return c.join(" ")}var b={}.hasOwnProperty;"undefined"!=typeof module&&module.exports?module.exports=a:"function"==typeof define&&"object"==typeof define.amd&&define.amd?define("classnames",[],function(){return a}):window.classNames=a}(),function(a){"use strict";function b(a){var c,e,f,g=this;if(!(g instanceof b))return new b(a);if(a instanceof b)return g.s=a.s,g.e=a.e,void(g.c=a.c.slice());for(0===a&&1/a<0?a="-0":k.test(a+="")||d(NaN),g.s="-"==a.charAt(0)?(a=a.slice(1),-1):1,(c=a.indexOf("."))>-1&&(a=a.replace(".","")),(e=a.search(/e/i))>0?(c<0&&(c=e),c+=+a.slice(e+1),a=a.substring(0,e)):c<0&&(c=a.length),e=0;"0"==a.charAt(e);e++);if(e==(f=a.length))g.c=[g.e=0];else{for(;"0"==a.charAt(--f););for(g.e=c-e-1,g.c=[],c=0;e<=f;g.c[c++]=+a.charAt(e++));}}function c(a,b,c,e){var f=a.c,g=a.e+b+1;if(1===c?e=f[g]>=5:2===c?e=f[g]>5||5==f[g]&&(e||g<0||null!=f[g+1]||1&f[g-1]):3===c?e=e||null!=f[g]||g<0:(e=!1,0!==c&&d("!Big.RM!")),g<1||!f[0])a.c=e?(a.e=-b,[1]):[a.e=0];else{if(f.length=g--,e)for(;++f[g]>9;)f[g]=0,g--||(++a.e,f.unshift(1));for(g=f.length;!f[--g];f.pop());}return a}function d(a){var b=new Error(a);throw b.name="BigError",b}function e(a,d,e){var f=d-(a=new b(a)).e,g=a.c;for(g.length>++d&&c(a,f,b.RM),f=g[0]?e?d:(g=a.c,a.e+f+1):f+1;g.length<f;g.push(0));return f=a.e,1==e||2==e&&(d<=f||f<=h)?(a.s<0&&g[0]?"-":"")+(g.length>1?(g.splice(1,0,"."),g.join("")):g[0])+(f<0?"e":"e+")+f:a.toString()}b.DP=20,b.RM=1;var f=1e6,g=1e6,h=-7,i=21,j=b.prototype,k=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,l=new b(1);j.abs=function(){var a=new b(this);return a.s=1,a},j.cmp=function(a){var c,d=this,e=d.c,f=(a=new b(a)).c,g=d.s,h=a.s,i=d.e,j=a.e;if(!e[0]||!f[0])return e[0]?g:f[0]?-h:0;if(g!=h)return g;if(c=g<0,i!=j)return i>j^c?1:-1;for(g=-1,h=(i=e.length)<(j=f.length)?i:j;++g<h;)if(e[g]!=f[g])return e[g]>f[g]^c?1:-1;return i==j?0:i>j^c?1:-1},j.div=function(a){var e=this,g=e.c,h=(a=new b(a)).c,i=e.s==a.s?1:-1,j=b.DP;if((j!==~~j||j<0||j>f)&&d("!Big.DP!"),!g[0]||!h[0])return g[0]==h[0]&&d(NaN),h[0]||d(i/0),new b(0*i);var k,m,n,o,p,q=h.slice(),r=k=h.length,s=g.length,t=g.slice(0,k),u=t.length,v=new b(l),w=v.c=[],x=0,y=j+(v.e=e.e-a.e)+1;for(v.s=i,i=y<0?0:y,q.unshift(0);u++<k;t.push(0));do{for(n=0;n<10;n++){if(k!=(u=t.length))o=k>u?1:-1;else for(p=-1,o=0;++p<k;)if(h[p]!=t[p]){o=h[p]>t[p]?1:-1;break}if(!(o<0))break;for(m=u==k?h:q;u;){if(t[--u]<m[u]){for(p=u;p&&!t[--p];t[p]=9);--t[p],t[u]+=10}t[u]-=m[u]}for(;!t[0];t.shift());}w[x++]=o?n:++n,t[0]&&o?t[u]=g[r]||0:t=[g[r]]}while((r++<s||null!=t[0])&&i--);return w[0]||1==x||(w.shift(),v.e--),x>y&&c(v,j,b.RM,null!=t[0]),v},j.eq=function(a){return!this.cmp(a)},j.gt=function(a){return this.cmp(a)>0},j.gte=function(a){return this.cmp(a)>-1},j.lt=function(a){return this.cmp(a)<0},j.lte=function(a){return this.cmp(a)<1},j.minus=function(a){var c,d,e,f,g=this,h=g.s,i=(a=new b(a)).s;if(h!=i)return a.s=-i,g.plus(a);var j=g.c.slice(),k=g.e,l=a.c,m=a.e;if(!j[0]||!l[0])return l[0]?(a.s=-i,a):new b(j[0]?g:0);if(h=k-m){for(c=(f=h<0)?(h=-h,j):(m=k,l),c.reverse(),i=h;i--;c.push(0));c.reverse()}else for(e=((f=j.length<l.length)?j:l).length,h=i=0;i<e;i++)if(j[i]!=l[i]){f=j[i]<l[i];break}if(f&&(c=j,j=l,l=c,a.s=-a.s),(i=-((e=j.length)-l.length))>0)for(;i--;j[e++]=0);for(i=l.length;i>h;){if(j[--i]<l[i]){for(d=i;d&&!j[--d];j[d]=9);--j[d],j[i]+=10}j[i]-=l[i]}for(;0==j[--e];j.pop());for(;0==j[0];j.shift(),--m);return j[0]||(a.s=1,j=[m=0]),a.c=j,a.e=m,a},j.mod=function(a){a=new b(a);var c,e=this,f=e.s,g=a.s;return a.c[0]||d(NaN),e.s=a.s=1,c=1==a.cmp(e),e.s=f,a.s=g,c?new b(e):(f=b.DP,g=b.RM,b.DP=b.RM=0,e=e.div(a),b.DP=f,b.RM=g,this.minus(e.times(a)))},j.plus=function(a){var c,d=this,e=d.s,f=(a=new b(a)).s;if(e!=f)return a.s=-f,d.minus(a);var g=d.e,h=d.c,i=a.e,j=a.c;if(!h[0]||!j[0])return j[0]?a:new b(h[0]?d:0*e);if(h=h.slice(),e=g-i){for(c=e>0?(i=g,j):(e=-e,h),c.reverse();e--;c.push(0));c.reverse()}for(h.length-j.length<0&&(c=j,j=h,h=c),e=j.length,f=0;e;f=(h[--e]=h[e]+j[e]+f)/10^0,h[e]%=10);for(f&&(h.unshift(f),++i),e=h.length;0==h[--e];h.pop());return a.c=h,a.e=i,a},j.pow=function(a){var c=a<0,e=new b(this),f=l;for((a!==~~a||a<-g||a>g)&&d("!pow!"),a=c?-a:a;1&a&&(f=f.times(e)),a>>=1;)e=e.times(e);return c?l.div(f):f},j.round=function(a,e){var g=new b(this);return null==a?a=0:(a!==~~a||a<0||a>f)&&d("!round!"),c(g,a,null==e?b.RM:e),g},j.sqrt=function(){var a,e,f,g=this,h=g.c,i=g.s,j=g.e,k=new b("0.5");if(!h[0])return new b(g);i<0&&d(NaN),i=Math.sqrt(g.toString()),0==i||i==1/0?(a=h.join(""),a.length+j&1||(a+="0"),e=new b(Math.sqrt(a).toString()),e.e=((j+1)/2|0)-(j<0||1&j)):e=new b(i.toString()),i=e.e+(b.DP+=4);do{f=e,e=k.times(f.plus(g.div(f)))}while(f.c.slice(0,i).join("")!==e.c.slice(0,i).join(""));return c(e,b.DP-=4,b.RM),e},j.times=function(a){var c,d=this,e=d.c,f=(a=new b(a)).c,g=e.length,h=f.length,i=d.e,j=a.e;if(a.s=d.s==a.s?1:-1,!e[0]||!f[0])return new b(0*a.s);for(a.e=i+j,g<h&&(c=e,e=f,f=c,j=g,g=h,h=j),j=g+h,c=[];j--;c.push(0));for(i=h-1;i>-1;i--){for(h=0,j=g+i;j>i;h=c[j]+f[i]*e[j-i-1]+h,c[j--]=h%10|0,h=h/10|0);h&&(c[j]=(c[j]+h)%10)}for(h&&++a.e,c[0]||c.shift(),j=c.length;!c[--j];c.pop());return a.c=c,a},j.toString=j.valueOf=function(){var a=this,b=a.e,c=a.c.join(""),d=c.length;if(b<=h||b>=i)c=c.charAt(0)+(d>1?"."+c.slice(1):"")+(b<0?"e":"e+")+b;else if(b<0){for(;++b;c="0"+c);c="0."+c}else if(b>0)if(++b>d)for(b-=d;b--;c+="0");else b<d&&(c=c.slice(0,b)+"."+c.slice(b));else d>1&&(c=c.charAt(0)+"."+c.slice(1));return a.s<0&&a.c[0]?"-"+c:c},j.toExponential=function(a){return null==a?a=this.c.length-1:(a!==~~a||a<0||a>f)&&d("!toExp!"),e(this,a,1)},j.toFixed=function(a){var b,c=this,g=h,j=i;return h=-(i=1/0),null==a?b=c.toString():a===~~a&&a>=0&&a<=f&&(b=e(c,c.e+a),c.s<0&&c.c[0]&&b.indexOf("-")<0&&(b="-"+b)),h=g,i=j,b||d("!toFix!"),b},j.toPrecision=function(a){return null==a?this.toString():((a!==~~a||a<1||a>f)&&d("!toPre!"),e(this,a-1,2))},"undefined"!=typeof module&&module.exports?module.exports=b:"function"==typeof define&&define.amd?define(function(){return b}):a.Big=b}(this),window.webcon=function(a){return a.businessRules=function(a){function b(a){try{return a instanceof Big?a:new Big(+a)}catch(a){return}}void 0===Function.prototype.name&&void 0!==Object.defineProperty&&Object.defineProperty(Function.prototype,"name",{get:function(){var a=/function\s([^(]{1,})\(/,b=a.exec(this.toString());return b&&b.length>1?b[1].trim():""},set:function(a){}});var c={undefined:"undefined",number:"number",boolean:"boolean",string:"string","[object Function]":"function","[object RegExp]":"regexp","[object Array]":"array","[object Date]":"date","[object Error]":"error",Empty:"empty"},d=Object.prototype.toString;a.Empty=function(){this.valueOf=function(){return 0},this.toString=function(){return""}};var e=1e3,f=function(b){return b instanceof a.Empty?c.Empty:b instanceof Big?c.number:c[typeof b]||c[d.call(b)]||void 0!=b&&c[b.constructor.name]||(b?"object":"null")},g=function(a,b){var c=f(a);if("number"===c||"bool"===c||"empty"===c)throw new Error("Incorrect operation. Value cannot be converted to date.");var d;if(d=void 0!==b?moment(a,b):moment(a),!d.isValid())throw new Error("Incorrect operation. Value cannot be converted to date.");return d},h=function(b,c){var d=Math.abs(c);return days=Math.floor(d),daysReminder=d%1,hours=Math.floor(24*daysReminder),hoursReminder=24*daysReminder%1,minutes=Math.floor(60*hoursReminder),minutesReminder=60*hoursReminder%1,seconds=Math.floor(60*minutesReminder),c>=0?a.addDate(a.addDate(a.addDate(a.addDate(b,seconds,"seconds"),minutes,"minutes"),hours,"hours"),days,"days"):a.subtractDate(a.subtractDate(a.subtractDate(a.subtractDate(b,seconds,"seconds"),minutes,"minutes"),hours,"hours"),days,"days")},i=function(a,b){return h(a,-b)};a.checkIfNotEmpty=function(b,c){return null===b||""===b||void 0===b||c&&"#"===b[0]?new a.Empty:b},a.sum=function(a,c){var d,e=f(a),g=f(c);if("date"===e&&"number"===g)return h(a,+c);if("number"===e&&"date"===g)return h(c,+a);if("date"===e&&"object"===g){if(d=Number(c),!isNaN(d))return h(a,d)}else if("object"===e&&"date"===g&&(d=Number(e),!isNaN(d)))return h(g,d);if("date"===e||"date"===g){var i=moment(a),j=moment(c),k=i.isValid()&&"date"===e?i.toISOString():a.toString(),l=j.isValid()&&"date"===g?j.toISOString():c.toString();return"empty"===e||"empty"===g?i.isValid()?a:c:k+l}if("string"===e&&"number"!==g||"string"===g&&"number"!==e)return a.toString()+c.toString();var m=b(a),n=b(c);if("object"==typeof m&&"object"==typeof n)return m.plus(n);throw new Error("Incompatible types")},a.difference=function(a,c){var d=f(a),e=f(c)
;if("date"===e)throw new Error("Incorrect operation. Date value cannot be used as subtrahend.");if("string"===d&&"number"!==e||"string"===e&&"number"!==d)throw new Error("Incorrect operation. String values cannot be subtracted.");if("date"===d){if("object"===e){var g=Number(c);if(!isNaN(g))return i(a,g)}else{if("number"===e)return i(a,+c);if("empty"===e)return a}throw new Error("Incorrect operation. For date subtraction subtrahend has to be of type number.")}var h=b(a),j=b(c);if("object"==typeof h&&"object"==typeof j)return h.minus(j);throw new Error("Incorrect operation. String values cannot be subtracted.")},a.multiplication=function(a,c){var d=f(a),e=f(c);if("date"===d||"date"===e)throw new Error("Incorrect operation. Date values cannot be multiplied.");if("string"===d&&"number"!==e||"string"===e&&"number"!==d)throw new Error("Incorrect operation. String values cannot be multiplied.");var g=b(a),h=b(c);if("object"==typeof g&&"object"==typeof h)return g.times(h);throw new Error("Incorrect operation. String values cannot be multiplied.")},a.division=function(a,c){var d=f(a),e=f(c);if("date"===d||"date"===e)throw new Error("Incorrect operation. Date values cannot be divided.");if("string"===d&&"number"!==e||"string"===e&&"number"!==d)throw new Error("Incorrect operation. String values cannot be divided.");var g=b(a),h=b(c);if("object"==typeof g&&"object"==typeof h){if(h.eq(new Big(0)))throw new Error("Incorrect operation. Cannot divide by zero.");return g.div(h)}throw new Error("Incorrect operation. String values cannot be divided.")};var j=function(b,c,d,e){var h=f(b),i=f(c);if("empty"===h&&"boolean"===i&&(b=!1,h="boolean"),"empty"===i&&"boolean"===h&&(c=!1,i="boolean"),"string"===h&&"string"===i&&d)throw new Error("Incorrect operation. String values cannot be compared.");if("empty"===h&&"empty"===i&&d)return e(0,0);if("date"===h&&"string"!==i||"string"!==h&&"date"===i){var j="date"===h?a.convertDateToNumber(b):Number(b),k="date"===i?a.convertDateToNumber(c):Number(c);if(!isNaN(j)&&!isNaN(k))return e(j,k)}if("number"===h||"number"===i){var l=Number(b),m=Number(c);if(!isNaN(l)&&!isNaN(m))return e(l,m)}if("date"===h||"date"===i){var n=g(b),o=g(c),p="date"===h?n.format("YYYY-MM-DD[T]HH:mm:ss"):b.toString(),q="date"===i?o.format("YYYY-MM-DD[T]HH:mm:ss"):c.toString();return e(p.toUpperCase(),q.toUpperCase())}if("boolean"===h||"boolean"===i){return e("boolean"===h?b:a.convertStringToBool(b,d),"boolean"===i?c:a.convertStringToBool(c,d))}return e(b.toString().toUpperCase(),c.toString().toUpperCase())};a.isEqual=function(a,b){var c=f(a),d=f(b);return("empty"!==c&&"empty"!==d||"number"!==c&&"number"!==d)&&j(a,b,!1,function(a,b){return a===b})},a.isNotEqual=function(a,b){var c=f(a),d=f(b);return!("empty"!==c&&"empty"!==d||"number"!==c&&"number"!==d)||j(a,b,!1,function(a,b){return a!==b})},a.isGreater=function(a,b){return j(a,b,!0,function(a,b){return a>b})},a.isLess=function(a,b){return j(a,b,!0,function(a,b){return a<b})},a.isGreaterOrEqual=function(a,b){return j(a,b,!0,function(a,b){return a>=b})},a.isLessOrEqual=function(a,b){return j(a,b,!0,function(a,b){return a<=b})},a.convertStringToBool=function(a,b){if("TRUE"===a.toUpperCase()||"1"===a)return!0;if("FALSE"===a.toUpperCase()||"0"===a)return!1;if(b)throw new Error("Incorrect operation. Value cannot be converted to boolean.");return!1},a.convertToBool=function(b){if(!b)return!1;var c=f(b);if("boolean"===c)return b;if("empty"===c)return!1;if("object"===c)return a.convertStringToBool(b.toString(),!1);if("string"===c)return a.convertStringToBool(b,!1);if("number"===c&&0==+b||1==+b)return!!+b;throw new Error("Incorrect operation. Value cannot be converted to boolean.")},a.convertToDecimal=function(b,c){var d=f(b);if(null!==b&&"number"===d)return+b;if("boolean"===d)return b?1:0;if("empty"===d)return 0;if(!b)throw new Error("Incorrect operation. Value cannot be converted to decimal.");if("date"===d)return a.convertDateToNumber(b);var e;switch(c){case",":if(k(b,",","."))throw new Error("Incorrect operation. Value cannot be converted to decimal.");e=n(b);break;case".":if(k(b,".",","))throw new Error("Incorrect operation. Value cannot be converted to decimal.");e=o(b);break;default:e=b}if(e=Number(e),isNaN(e))throw new Error("Incorrect operation. Value cannot be converted to decimal.");return e};var k=function(a,b,c){if(m(a,b)<=1&&0===m(a,c)&&0===m(a," "))return!1;var d=l(c,b),e=l(" ",b);return!0!==d.test(a)&&!0!==e.test(a)},l=function(a,b){var c="^[+-]?[0-9]{1,3}(\\"+a+"[0-9]{3})*(\\"+b+"[0-9]*)?$";return new RegExp(c)},m=function(a,b){return a.split(b).length-1},n=function(a){return a.replace(".","").replace(" ","").replace(",",".")},o=function(a){return a.replace(",","").replace(" ","")};a.convertToText=function(b){var c=f(b);return"string"===c?b:null!==b&&"number"===c?String(b):"boolean"===c?b?"true":"false":"date"===c?a.dateToText(b,"YYYY-MM-DD[T]HH:mm:ss"):b?String(b):b},a.convertDateToNumber=function(a){return 621355968e9+1e4*moment.utc(a).valueOf()},a.conjunction=function(b,c){var d=a.convertToBool(b),e=a.convertToBool(c);return d&&e},a.disjunction=function(b,c){var d=a.convertToBool(b),e=a.convertToBool(c);return d||e},a.negation=function(b){return!a.convertToBool(b)},a.round=function(b,c){var d=a.convertToDecimal(b),e=a.convertToDecimal(c),f=Number("1e"+e),g=d*f;if(g>=0)return Math.round(g)/f;g*=-1;var h=Math.round(g)/f;return 0===h?h:-1*h},a.subString=function(b,c,d){var e=a.convertToDecimal(c)-1,f=a.convertToDecimal(d),g=e+f;return String(b).substring(e,g)},a.like=function(b,c){var d=a.convertToText(b),e=a.convertToText(c);if(null===e||null===d)return!1;var f=0,g=!1,h=!1,i=0,j=0,k=null,l=!1,m=0;for(d=d.toUpperCase(),e=e.toUpperCase(),m=0;m<e.length;m++){if(m===e.length-1&&"%"===e[m])return!0;var n=!0;if("\\"===e[m]&&m!==e.length-1)m++;else{if("%"===e[m]){g=!0,h=!1,i=m,j=f+1;continue}if("_"===e[m]){if(f===d.length)return!1;f++;continue}if("["===e[m]){for(var o=e.indexOf("]",m);"\\"===e[o-1];)o=e.indexOf("]",o+1);if(k=e.substring(m+1,o),l=a.startsWith(k,"^"),l&&(k=k.slice(1,k.length)),k=k.replace("\\^","^"),n=!1,m=o,3===k.length&&"-"===k[1]){var p="",q=k[0],r=k[2];r<q&&(q=r,r=k[0]);for(var s=q.charCodeAt(0),t=r.charCodeAt(0);s<=t;)p+=String.fromCharCode(s),s++;k=p}if(-1===o)return!1}}for(var u=!1,v=!1;f<d.length;){if(n&&d[f]===e[m]){f++,u=!0,g&&(h=!0);break}if(null!==k){var w=-1!==k.indexOf(d[f]);if(l&&w||!l&&!w){if(g){f++;continue}return!1}f++,u=!0,g&&(h=!0),k=null;break}if(h){h=!1,m=i,f=j++,g=!0,v=!0;break}{if(!g)break;f++}}if(!v){if(!u)return!1;g=!1}}return!(f<d.length)},a.startsWith=function(b,c){if(void 0===b||null===b||void 0===c||null===c)return!1;var d=a.convertToText(b).toUpperCase(),e=a.convertToText(c).toUpperCase();return 0===d.lastIndexOf(e,0)},a.isIn=function(b,c){if(void 0===b||null===b||""===b)return!1;for(var d=a.getPairIDs(String(b),!0),e=a.getPairIDs(String(c),!0),f=0;f<d.length;f++){var g=d[f];if(e.indexOf(g)<0)return!1}return!0},a.getPairIDs=function(a,b){return a.split(";").map(function(a){return b?a.split("#")[0].toUpperCase():a.split("#")[0]})},a.getNames=function(a){return a.toString().split(";").map(function(a){var b=a.split("#");return b.length>1?b[1]:b[0]}).join(";")},a.getIds=function(b){return a.getPairIDs(b.toString()).join(";")},a.decimalToText=function(b,c,d){var e,f=a.convertToDecimal(b);if(void 0===d){var g=(""+f).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);e=g?Math.max(0,(g[1]?g[1].length:0)-(g[2]?+g[2]:0)):0}else e=a.convertToDecimal(d);return new window.webcon.numbers.NumberFormatting({amountFormat:c,culture:window.G_BROWSER_LANGUAGE,scale:e}).format(f).formatted},a.textToDecimal=function(b,c){return a.convertToDecimal(b,c)},a.textToDate=function(a,b){return g(a,b).toDate()},a.dateToText=function(a,b){return g(a).format(b)},a.addDate=function(b,c,d){var e=a.convertToDecimal(c);return g(b).add(e,d).toDate()},a.subtractDate=function(b,c,d){var e=a.convertToDecimal(c);return g(b).subtract(e,d).toDate()},a.dateDiff=function(a,b,c){var d=g(a),e=g(b);return d.diff(e,c)},a.datePart=function(a,b){var c=g(a),d={YEAR:0,MONTH:1,DAY:2,HOUR:3,MINUTE:4,SECOND:5};return"MONTH"===b?c.month()+1:c.toArray()[d[b]]};var p={12:"InvoiceSubElements",16:"SelectField",22:"SelectGrid",23:"AttributesGroup",28:"VacationChart",29:"VacationSummary",30:"GanttChart",32:"Chart",39:"Tab",40:"TabPanel"},q={12:"CalculatedText",11:"SelectColumn"},r={6:"Decimal",7:"DateTime",27:"DateTimeGlobal"},s={2:"Decimal",8:"DateTime",9:"CalculatedDecimal"};return a.setValue=function(a,b,c){if(void 0===p[b])return void 0!==r[b]?c instanceof Big?void SetTypedValue(a,{value:+c}):void SetTypedValue(a,{value:c}):void SetValue(a,c)},a.setSubValue=function(a,b,c,d,e){if(void 0===q[d])return void 0!==s[d]?e instanceof Big?void SetSubTypedValue(a,b,c,{value:+e}):void SetSubTypedValue(a,b,c,{value:e}):void SetSubValue(a,b,c,e)},a.showField=function(a,b,c){23===c?ShowGroup(a):32===c?ShowChart(a):12===c?ShowSubelementControl(a):16===c?ShowSqlRow(a):22===c?ShowSqlGrid(a):39===c?ShowTab(a):40===c?ShowTabPanel(a):ShowField(b)},a.hideField=function(a,b,c){23===c?HideGroup(a):32===c?HideChart(a):12===c?HideSubelementControl(a):16===c?HideSqlRow(a):22===c?HideSqlGrid(a):39===c?HideTab(a):40===c?HideTabPanel(a):HideField(b)},a.callUXRule=function(a,b,c){var d=window.webcon.businessRules.logger,f=void 0!==c?c.loggerContext:void 0,g=d.begin(a,f),h=g.index;try{if(c=c||{},c.loggerContext=g.childElements,"number"!=typeof c.iterationsCount&&(c.iterationsCount=0),++c.iterationsCount>=e)throw new Error("Maximum number of iterations exceeded");var i=window.eval.call(window,"(function (uxContext) {{return "+b+"}})")(c);return d.end(h,f),i}catch(a){throw d.error(h,a.message,f),a}},a.callInlineUxRuleWithoutException=function(b,c,d,e){try{a.callInlineUxRule(b,c,d,e)}catch(a){}},a.callInlineUxRule=function(a,b,c,d){var e=window.webcon.businessRules.logger,f="undefined"!=typeof uxContext?uxContext.loggerContext:void 0,g=window.webcon.businessRules.tracer;try{var h=e.begin(a,f);uxContext="undefined"!=typeof uxContext?uxContext:{},uxContext.loggerContext=h.childElements;var i=h.index;uxContext.currentRowNumber=void 0!==c?c:void 0,uxContext.currentAttributeId=void 0!==d?d:void 0,window.uxContextTemp=uxContext;var j=window.eval.call(window,"var uxContext = window.uxContextTemp;window.uxContextTemp = undefined;if (typeof uxContext.currentRowNumber !== 'undefined') { var currentRowNumber = uxContext.currentRowNumber; }if (typeof uxContext.currentAttributeId !== 'undefined') { var currentAttributeId = uxContext.currentAttributeId; }"+b);return e.end(i,f),g.redrawTrace(e.logs),j}catch(a){throw e.error(i,a.message,f),g.redrawTrace(e.logs),console.error(a,a.stack),a}},a}(a.businessRules||{}),a}(window.webcon||{}),function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):a.ResizeObserver=b()}(this,function(){"use strict";function a(a){return parseFloat(a)||0}function b(b){for(var c=[],d=arguments.length-1;d-- >0;)c[d]=arguments[d+1];return c.reduce(function(c,d){return c+a(b["border-"+d+"-width"])},0)}function c(b){for(var c=["top","right","bottom","left"],d={},e=0,f=c;e<f.length;e+=1){var g=f[e],h=b["padding-"+g];d[g]=a(h)}return d}function d(a){var b=a.getBBox();return i(0,0,b.width,b.height)}function e(d){var e=d.clientWidth,g=d.clientHeight;if(!e&&!g)return v;var h=u(d).getComputedStyle(d),j=c(h),k=j.left+j.right,l=j.top+j.bottom,m=a(h.width),n=a(h.height);if("border-box"===h.boxSizing&&(Math.round(m+k)!==e&&(m-=b(h,"left","right")+k),Math.round(n+l)!==g&&(n-=b(h,"top","bottom")+l)),!f(d)){var o=Math.round(m+k)-e,p=Math.round(n+l)-g;1!==Math.abs(o)&&(m-=o),1!==Math.abs(p)&&(n-=p)}return i(j.left,j.top,m,n)}function f(a){return a===u(a).document.documentElement}function g(a){return k?w(a)?d(a):e(a):v}function h(a){var b=a.x,c=a.y,d=a.width,e=a.height,f="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,g=Object.create(f.prototype);return t(g,{x:b,y:c,width:d,height:e,top:c,right:b+d,bottom:e+c,left:b}),g}function i(a,b,c,d){return{x:a,y:b,width:c,height:d}}var j=function(){function a(a,b){var c=-1;return a.some(function(a,d){return a[0]===b&&(c=d,!0)}),c}return"undefined"!=typeof Map?Map:function(){function b(){this.__entries__=[]}var c={size:{configurable:!0}};return c.size.get=function(){return this.__entries__.length},b.prototype.get=function(b){var c=a(this.__entries__,b),d=this.__entries__[c];return d&&d[1]},b.prototype.set=function(b,c){var d=a(this.__entries__,b);~d?this.__entries__[d][1]=c:this.__entries__.push([b,c])},b.prototype.delete=function(b){var c=this.__entries__,d=a(c,b);~d&&c.splice(d,1)},b.prototype.has=function(b){return!!~a(this.__entries__,b)},b.prototype.clear=function(){this.__entries__.splice(0)},b.prototype.forEach=function(a,b){var c=this;void 0===b&&(b=null);for(var d=0,e=c.__entries__;d<e.length;d+=1){var f=e[d];a.call(b,f[1],f[0])}},Object.defineProperties(b.prototype,c),b}()}(),k="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,l=function(){return"undefined"!=typeof global&&global.Math===Math?global:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")()}(),m=function(){return"function"==typeof requestAnimationFrame?requestAnimationFrame.bind(l):function(a){return setTimeout(function(){return a(Date.now())},1e3/60)}}(),n=2,o=function(a,b){function c(){f&&(f=!1,a()),g&&e()}function d(){m(c)}function e(){var a=Date.now();if(f){if(a-h<n)return;g=!0}else f=!0,g=!1,setTimeout(d,b);h=a}var f=!1,g=!1,h=0;return e},p=20,q=["top","right","bottom","left","width","height","size","weight"],r="undefined"!=typeof MutationObserver,s=function(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=o(this.refresh.bind(this),p)};s.prototype.addObserver=function(a){~this.observers_.indexOf(a)||this.observers_.push(a),this.connected_||this.connect_()},s.prototype.removeObserver=function(a){var b=this.observers_,c=b.indexOf(a);~c&&b.splice(c,1),!b.length&&this.connected_&&this.disconnect_()},s.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},s.prototype.updateObservers_=function(){var a=this.observers_.filter(function(a){return a.gatherActive(),a.hasActive()});return a.forEach(function(a){return a.broadcastActive()}),a.length>0},s.prototype.connect_=function(){k&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),r?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},s.prototype.disconnect_=function(){k&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},s.prototype.onTransitionEnd_=function(a){var b=a.propertyName;void 0===b&&(b=""),q.some(function(a){return!!~b.indexOf(a)})&&this.refresh()},s.getInstance=function(){return this.instance_||(this.instance_=new s),this.instance_},s.instance_=null;var t=function(a,b){for(var c=0,d=Object.keys(b);c<d.length;c+=1){var e=d[c];Object.defineProperty(a,e,{value:b[e],enumerable:!1,writable:!1,configurable:!0})}return a},u=function(a){return a&&a.ownerDocument&&a.ownerDocument.defaultView||l},v=i(0,0,0,0),w=function(){return"undefined"!=typeof SVGGraphicsElement?function(a){return a instanceof u(a).SVGGraphicsElement}:function(a){return a instanceof u(a).SVGElement&&"function"==typeof a.getBBox}}(),x=function(a){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=i(0,0,0,0),this.target=a};x.prototype.isActive=function(){var a=g(this.target);return this.contentRect_=a,a.width!==this.broadcastWidth||a.height!==this.broadcastHeight},x.prototype.broadcastRect=function(){var a=this.contentRect_;return this.broadcastWidth=a.width,this.broadcastHeight=a.height,a};var y=function(a,b){var c=h(b);t(this,{target:a,contentRect:c})},z=function(a,b,c){if(this.activeObservations_=[],this.observations_=new j,"function"!=typeof a)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=a,this.controller_=b,this.callbackCtx_=c};z.prototype.observe=function(a){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(a instanceof u(a).Element))throw new TypeError('parameter 1 is not of type "Element".');var b=this.observations_;b.has(a)||(b.set(a,new x(a)),this.controller_.addObserver(this),this.controller_.refresh())}},z.prototype.unobserve=function(a){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(a instanceof u(a).Element))throw new TypeError('parameter 1 is not of type "Element".');var b=this.observations_;b.has(a)&&(b.delete(a),b.size||this.controller_.removeObserver(this))}},z.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},z.prototype.gatherActive=function(){var a=this;this.clearActive(),this.observations_.forEach(function(b){b.isActive()&&a.activeObservations_.push(b)})},z.prototype.broadcastActive=function(){if(this.hasActive()){var a=this.callbackCtx_,b=this.activeObservations_.map(function(a){return new y(a.target,a.broadcastRect())});this.callback_.call(a,b,a),this.clearActive()}},z.prototype.clearActive=function(){this.activeObservations_.splice(0)},z.prototype.hasActive=function(){return this.activeObservations_.length>0};var A="undefined"!=typeof WeakMap?new WeakMap:new j,B=function(a){if(!(this instanceof B))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var b=s.getInstance(),c=new z(a,b,this);A.set(this,c)};return["observe","unobserve","disconnect"].forEach(function(a){B.prototype[a]=function(){return(b=A.get(this))[a].apply(b,arguments);var b}}),function(){return void 0!==l.ResizeObserver?l.ResizeObserver:(l.ResizeObserver=B,B)}()});var Injector=function(){var a={global:{},lite:{},mobile:{},outlook:{},massAction:{}},b={global:{},lite:{},mobile:{},outlook:{},massAction:{}},c={global:1,lite:2,mobile:3,outlook:4,massAction:5},d=function(d){var e,f;switch(d||(d=c.global),d){case c.lite:e=a.lite,f=b.lite;break;case c.mobile:e=a.mobile,f=b.mobile;break;case c.outlook:e=a.outlook,f=b.outlook;break;case c.massAction:e=a.massAction,f=b.massAction;break;default:e=a.global,f=b.global}return{envContainer:e,envCache:f}},e=function(c,e,f,g){f||(f=webcon.env);var h=d(f),i=h.envContainer,j=h.envCache;if(!i[c]&&!j[c]){if(i===a.global&&j===b.global||!b.global[c]&&!a.global[c])throw new Error("Not registered dependency : "+c);i=a.global,j=b.global}var k;return j[c]&&!g?k=j[c]:0===i[c].dependencies.length?(k=i[c].func(),"instance"===i[c].type&&(j[c]=k)):(k=e.resolve(i[c].dependencies,i[c].func,void 0,f),"instance"===i[c].type&&(j[c]=k)),k},f=function(a,b,c,d,f,g){for(var h=0;h<b.length;h++){var i,j=b[h];i=j.depName&&"object"==typeof j?e(j.depName,d,j.depEnv):e(j,d,g),c.push(i)}return a.apply(f||{},c)},g=function(a,b,c,e,f){if(!a||"string"!=typeof a)throw new Error("You must pass valid service name");if(!b||"[object Array]"!==Object.prototype.toString.call(b))throw new Error("You must pass valid service dependencies");if(!c||"function"!=typeof c)throw new Error("You must pass valid service creation function");d(f).envContainer[a]={func:c,dependencies:b,type:e}};return{factory:function(a,b,c,d){g(a,b,c,"factory",d)},instance:function(a,b,c,d){g(a,b,c,"instance",d)},configuration:function(a,b,c){if(!b)throw new Error("cannot register undefined configuration object: "+a);g(a,[],function(){return b},"configuration",c)},controller:function(a,b,c,d){g(a,b,c,"controller",d)},resolve:function(a,b,c,d){var e=[],g=this;if(c||(c={}),!a||"[object Array]"!==Object.prototype.toString.call(a))throw new Error("You must pass valid service dependencies");if(!b||"function"!=typeof b)throw new Error("You must pass valid service creation function");return f(b,a,e,g,c,d)},injectForTest:function(a,b){if(!a)throw new Error("name mustn't be undefined");return e(a,this,b,!0)},inject:function(a,b){if(!a)throw new Error("name mustn't be undefined");return e(a,this,b)},reset:function(){b={global:{},mobile:{},lite:{},outlook:{},massAction:{}}},registerForTest:function(a,b,c){d(c).envCache[a]=b},unregisterDependency:function(a,b){var c=d(b);delete c.envCache[a],delete c.envContainer[a]},env:c}}();Injector.controller("AttachmentActionsController",["AttachmentController","FormInfo","PortalElementInfoRefresher","ErrorDisplayService","DocumentController","ActionService","AttachmentsActionService","PopupController","RedirectService","BlockingPanelService","Store"],function(a,b,c,d,e,f,g,h,i,j,k){function l(a,d){if(a.wasFormSaved&&a.saveResult&&a.saveResult.isSuccess){c.refreshInfo(b.wfdId);var e=a.saveResult.responseDetails.urlsToRegister,g=!1;if(e&&e.length>0&&(g=f.openActionUrl(e[0])))return;g||i.reload()}d&&d(a)}function m(b,c,f,i){e.saveElement(function(e){j.disableAll(),k.dispatch(webcon.redux.AttachmentsActions.createExecActionRequestAction(b,c)),g.execAction(e,b,c,function(e){j.enableAll(),k.dispatch(webcon.redux.AttachmentsActions.createExecActionSuccessAction(b,c,e)),e.wasFormSaved&&!e.saveResult.isSuccess&&e.saveResult.message&&(e.saveResult.responseDetails&&e.saveResult.responseDetails.errors?_.each(e.saveResult.responseDetails.errors,function(a){d.displayErrorMessageOnTop(a.message,a.type)}):d.displayErrorMessageOnTop(e.saveResult.message,1)),e.actionSucceed?(e.wasFormSaved||(a.loadCurrentAttachments(),a.loadCurrentConversations()),e.showMessageInPopup&&e.actionResult.message?h.showWFAlert(e.actionName,e.actionResult.message,function(){l(e,f)}):l(e,f)):e.showMessageInPopup&&e.exceptionMessage?h.showWFAlert(e.actionName,e.exceptionMessage):l(e,f)},function(d){j.enableAll(),k.dispatch(webcon.redux.AttachmentsActions.createExecActionFailedAction(b,c,d)),a.handleAjaxError(d,i)})})}return{execAction:m}}),Injector.controller("AttachmentChangeController",["$Window"],function(a){function b(b,c,d){b=_.clone(b),b.name=c,b.description=d;var e=a.model.attachments.edited,f=_.find(e,function(a){return a.attId===b.attId});if(f){e[e.indexOf(f)]=b}else e.push(b)}function c(b){var c=a.model.attachments.edited;if(c){var d=_.find(c,function(a){return a.attId===b.attId});if(d){var e=c.indexOf(d);e>=0&&c.splice(e,1)}}}return{modifyAttachment:b,undoAttachmentChanges:c}}),Injector.controller("AttachmentController",["Ajax","logger","FormInfo","ModelController","ErrorDisplayService","$Window","AttachmentsAddOrOverwriteService","AttachmentsFinder","Store","TreeHelper","AttachmentsUsageService"],function(a,b,c,d,e,f,g,h,i,j,k){function l(){if(!c.isArchive){i.dispatch(webcon.redux.AttachmentsActions.createLoadRelatedRequestAction());var b=d.getDataModel(),f={model:JSON.stringify(b)};a.post("attachments/related",f,function(a){ReactRedux.batch(function(){i.dispatch(webcon.redux.AttachmentsActions.createLoadRelatedSuccessAction(a.items)),i.dispatch(webcon.redux.AttachmentsActions.createUpdateAttCountAction())})},function(a){i.dispatch(webcon.redux.AttachmentsActions.createLoadRelatedFailedAction()),e.displayErrorMessageOnTop(a,1)})}}function m(){if(!c.isArchive){i.dispatch(webcon.redux.AttachmentsActions.createLoadRelatedConversationsRequestAction());var b=d.getDataModel(),f={model:JSON.stringify(b)};a.post("attachments/relatedconversations",f,function(a){ReactRedux.batch(function(){i.dispatch(webcon.redux.AttachmentsActions.createLoadRelatedConversationsSuccessAction(a)),i.dispatch(webcon.redux.AttachmentsActions.createUpdateAttCountAction())})},function(a){i.dispatch(webcon.redux.AttachmentsActions.createLoadRelatedConversationsFailedAction()),e.displayErrorMessageOnTop(a,1)})}}function n(){i.dispatch(webcon.redux.AttachmentsActions.createLoadCurrentRequestAction());var b=d.getDataModel(),c={model:JSON.stringify(b)};a.post("attachments/current",c,function(a){ReactRedux.batch(function(){i.dispatch(webcon.redux.AttachmentsActions.createLoadCurrentSuccessAction(a)),i.dispatch(webcon.redux.AttachmentsActions.createUpdateAttCountAction())})},function(a){i.dispatch(webcon.redux.AttachmentsActions.createLoadCurrentFailedAction()),e.displayErrorMessageOnTop(a,1)})}function o(){i.dispatch(webcon.redux.AttachmentsActions.createLoadCurrentConversationsRequestAction()),Injector.resolve(["Ajax","ErrorDisplayService","ModelController"],function(a,b,c){var d=c.getDataModel(),e={model:JSON.stringify(d)};a.post("attachments/currentconversations",e,function(a){ReactRedux.batch(function(){i.dispatch(webcon.redux.AttachmentsActions.createLoadCurrentConversationsSuccessAction(a)),i.dispatch(webcon.redux.AttachmentsActions.createUpdateAttCountAction())})},function(a){i.dispatch(webcon.redux.AttachmentsActions.createLoadCurrentConversationsFailedAction()),b.displayErrorMessageOnTop(a,1)})})}function p(b,c,e,f,g){var h=d.getDataModel();a.post("GetRelativeAttachments",{model:JSON.stringify(h),subelementsFieldName:e,columnName:f,rowNumber:g},b,c)}function q(b,c,d,e){var f=e?"ResolveArchivedRelativeAttachmentsNames":"ResolveRelativeAttachmentsNames";a.post(f,d,b,c)}function r(c,f,g){if(Guard.onlyNumber(c,"attId"),b.log("DeleteAtt:"+c),k.isUsed(c))return void e.displayErrorMessageOnTop(webconLocale.cAttachmentIsUsed,0);var h=j.findNode(A(),function(a){return a.attId===c});i.dispatch(webcon.redux.AttachmentsActions.createDeleteAttachmentRequestAction(h)),a.post("attachments/delete",{attId:c,model:JSON.stringify(d.getDataModel())},function(){b.trace("DeletedAtt:"+c),ReactRedux.batch(function(){i.dispatch(webcon.redux.AttachmentsActions.createDeleteAttachmentSuccessAction(h)),i.dispatch(webcon.redux.AttachmentsActions.createUpdateAttCountAction())}),f()},function(a){D(a,g)})}function s(e,f,g,h){Guard.notNull(e,"att"),b.log("UpdateAtt:"+e.attId),h||i.dispatch(webcon.redux.AttachmentsActions.createSaveInfoRequestAction(e,e.name,e.description));var j=d.getDataModel(),k={attId:e.attId,name:e.name,categoryIdHashDefaultName:I(e.category),description:e.description,model:JSON.stringify(j)};0!==c.wfdId&&(k.wfdId=c.wfdId),a.post("attachments/UpdateAttachmentAttribute",k,function(a){b.trace("UpdatedAtt:"+e.attId),h?(a.isLastFileDone=!0,i.dispatch(webcon.redux.AttachmentsActions.createAddAttachmentSuccessAction(a,a.nodes[0]))):i.dispatch(webcon.redux.AttachmentsActions.createSaveInfoSuccessAction(e,a)),f&&f(a)},function(a){i.dispatch(webcon.redux.AttachmentsActions.createCancelInfoAction(e)),D(a,g)})}function t(a){Guard.notNull(a,"att"),i.dispatch(webcon.redux.AttachmentsActions.createChangeInfoAction(a))}function u(b){var e=i.getState(),f=h.getCurrentAttachmentsFlatList(e.attachments.attachments).filter(function(a){return a.isEdited});if(null!==f&&void 0!==f&&f.length>0){if(!v(f))return!1;var g=d.getDataModel(),j=f.map(function(a){var b={attId:a.attId,name:a.name,description:a.description,categoryIdHashDefaultName:I(a.category),model:JSON.stringify(g)};return 0!==c.wfdId&&(b.wfdId=c.wfdId),b});a.post("attachments/UpdateManyAttachments",j,b,function(a){D(a,null)})}else b();return!0}function v(a){var b=!0;return a.forEach(function(a){w(a.name,!0)||(b=!1)}),b}function w(a,b){if(""===a)return E(webconLocale.cFileNameMissing,null,b),!1;var c=a.lastIndexOf(".");if(0===c)return E(webconLocale.cFileNameMissing,null,b),!1;if(c===a.length-1||-1===c){return E(webconLocale.cFileHasNoExtension+"\n"+webconLocale.cParameterName+" "+a,null,b),!1}return!0}function x(a){if(""===a)return{isValid:!1,error:a+": "+webconLocale.cFileNameMissing};var b=a.lastIndexOf(".");if(0===b)return{isValid:!1,error:a+": "+webconLocale.cFileNameMissing};if(b===a.length-1||-1===b){return{isValid:!1,error:a+": "+webconLocale.cFileHasNoExtension}}return{isValid:!0}}function y(a){if(Guard.notNull(a,"uploadedAttachment"),!0===a.isSkipped)return void i.dispatch(webcon.redux.AttachmentsActions.createAddAttachmentSkippedAction(a));var b=A(),c=g.findCurrentAttachment(b,function(b){return b.attId===a.nodes[0].attId});c&&(a.nodes[0].category=c.category),c?i.dispatch(webcon.redux.AttachmentsActions.createSaveInfoSuccessAction(c,a)):i.dispatch(webcon.redux.AttachmentsActions.createAddAttachmentSuccessAction(a,a.nodes[0])),i.dispatch(webcon.redux.AttachmentsActions.createUpdateAttCountAction())}function z(a,b){Guard.notNull(a,"uploadedAttachment");var c=A(),d=g.findCurrentAttachment(c,function(b){return b.attId===a.attId});d&&(a.category=d.category),s(a,b,_.noop,!0),i.dispatch(webcon.redux.AttachmentsActions.createUpdateAttCountAction())}function A(){return i.getState().attachments.attachments}function B(c,e){var g=d.getDataModel();a.post("attachmentCategories",{model:JSON.stringify(g),queryString:JSON.stringify(f.location.href)},function(a){b.trace("getCategoriesFinish"),c&&c(a)},function(a){D(a,e)})}function C(c,e,g,h){var i=d.getDataModel();a.post("GetAttachmentColumnCategory",{model:JSON.stringify(i),subelementName:c,rowNumber:e,columnName:g,queryString:JSON.stringify(f.location.href)},function(a){b.trace("getSubsAttCategoryFinish"),h&&h(a)},function(a){D(a)})}function D(a,b){e.displayErrorMessageOnTop(webconLocale.cErrorWhileConnection,0),b&&b(a)}function E(a,b,c){c?e.displayErrorMessageOnTop(a,0):e.displayErrorMessageOnTopStandalone(a,0),b&&b(a)}function F(a){var b=/#(.+)/;return a.match(b)?a.split(b)[1]:a}function G(){var a=f.model.attachmentConfig;return a&&a.emptyCategoryName?a.emptyCategoryName:""}function H(a){return/^.*\.(emlx?|msg|oft|mbox|tnef)$/gi.test(a)}function I(a){var b=/\$\$/;return"string"==typeof a?a.match(b)?a.split(b)[0]:a:a&&a.databaseValue?a.databaseValue.match(b)?a.databaseValue.split(b)[0]:a.databaseValue:void 0}return{handleAjaxError:D,handleError:E,deleteAttachment:r,updateAttachment:s,updateManyAttachments:u,addAttachment:y,addAttachmentNative:z,getCategories:B,parseCategory:F,getEmptyCategoryName:G,validateFileName:w,validateFileNameNoModal:x,loadRelatedAttachments:l,loadRelatedConversations:m,loadCurrentAttachments:n,loadCurrentConversations:o,updateAttachmentMetadata:t,isMailAttachment:H,getCategoryForAttColumn:C,idHashDefaultName:I,fetchRelativeAttachmentsTree:p,resolveRelativeAttachmentsNames:q}}),Injector.factory("AttributeChangeController",["RedrawService","logger","ValidationService","ControlUpdateController","SaveRestrictionsService","ActivitiesWatcher","$Window","ChangeControllerCreator","PickerControllerFactory","SaveRestrictionsChecker","MassActionsService"],function(a,b,c,d,e,f,g,h,i,j,k){function l(a){var b=function(b){return b.fieldName===a.toString()};return _.find(g.model.controls,b)}function m(a,b,c){a[b]=$.extend({},a[b],{data:c})}function n(a,e,f){if(!g.model[a]){var n="NoControlNamed:"+a+" inModel";throw b.error(n),new Error(n)}var o=l(a),p={},q=!1,r=g.model[a].config;r&&r.setsOtherFields&&(p=i.forControl(g.model[a]),q=!0),h.create(g.model,m,c,j,d,o,p,q).change(a,e,f),k.saveAttributeValue(a,e)}return{change:n,checkSaveRestrictions:function(c,d){if(b.debug("CheckSaveRestrictions:"+c),!g.model[c]){var h="NoControlNamed:"+c+" inModel";throw b.error(h),new Error(h)}var i=g.model[c],j=l(c);e.validate(i,d),a.redraw(j.placeHolder),f.registerActivity()}}}),Injector.controller("AutocompleteController",["logger","PickerBaseController","$Window"],function(a,b,c){function d(a,c,d,e,f,g,h){Guard.notNull(a,"Value"),Guard.notNull(d,"Config"),Guard.notNull(e,"Callback");var i=j(a,c,d,g,h),k=function(a){e(a.elements)};b.executeCall(i,k,f)}
function e(a,c,d,e,f){g(a,c,d,f,function(a){b.setOtherColumnsWithData(a,d,e)})}function f(a,d,e){g(a,d,e,c.model[a].config,b.setOtherFieldsWithData)}function g(a,c,e,f,g){b.setOtherFieldsInternal(c,g,function(b){d(b.key,a,f,g,void 0,e)})}function h(a,c,d,e,f,g,h,j,k){Guard.notNull(a,"Value"),Guard.notNull(c,"Column"),Guard.notNull(e,"Config"),Guard.notNull(f,"Callback");var l=i(a,c,d,e,h,j,k);b.executeCall(l,f,g)}function i(a,c,d,e,f,g,h){var i="",j={form:{model:b.getJsonModel()},pickerValue:a,fieldName:d,context:f,sublementRowId:g,showMore:h};return"picker"===e.type?(j.pickerColumn=c,i={method:"SearchForAutocompleteMobile",requestData:j}):b.unsupportedPickerType(e.type),i}function j(a,c,d,e,f){var g="",h={form:{model:b.getJsonModel()},pickerValue:a,fieldName:c,sublementRowId:f};return e&&(h.context=e),"picker"===d.type.toLowerCase()?g={method:"ValidateAutocompleteMobile",requestData:h}:b.unsupportedPickerType(d.type),g}function k(a){return b.getPickerStringValue(a)}return{validate:d,search:h,setOtherFields:f,setOtherColumns:e,getPickerStringValue:k}}),Injector.factory("ChangeControllerCreator",["ComparerFactory","ScriptsRunner","ActivitiesWatcher","RedrawService","logger","Store"],function(a,b,c,d,e,f){function g(f,g,i,j,k,l,m,n,o){function p(q,r,s){if(e.debug("FieldHasChanged:"+q),!f[q]){var t="NoControlNamed:"+q+" inModel";throw e.error(t),new Error(t)}if(j.checkIsSavable(q)){var u=$.extend({},h,s);u.validate&&i.validate(q,r,!1);var v=a.forControl(f[q]).withOldValue(f[q].data);g(f,q,r);var w=p;if(Injector.resolve(["AttributeChangeController"],function(a){w=a.change}),v.isOldValueEqualTo(r)||(k.updateDependentControls(q,w),n&&u.setOtherFields&&m.setOtherFields(q,r)),void 0===o&&d.areMainPanelsRendered()&&d.redraw(l.placeHolder),!v.isOldValueEqualTo(r)){if(l&&l.scriptToRunOnChange&&u.runClientScript){var x=s?{currentRowNumber:s.currentRowNumber,currentAttributeId:s.currentAttributeId}:{};b.runClientScript(l.scriptToRunOnChange,x)}l&&l.postbackOnChange&&k.resetDefaultsOnPostback(w),k.propagateSummary&&k.propagateSummary(),k.runAfterCallbackScripts&&k.runAfterCallbackScripts()}c.registerActivity()}}return{change:p}}var h={validate:!0,setOtherFields:!0,calculateOtherFields:!0,runClientScript:!0};return{create:g}}),Injector.controller("ChartController",["Ajax","logger","ModelController","ErrorDisplayService"],function(a,b,c,d){function e(d,e,h,i){b.log("getChartData");var j=c.getDataModel(),k={formParameters:{model:JSON.stringify(j)},fieldName:e},l="GetMobileChart/"+d;a.post(l,k,function(a){a.IsSuccess?(b.trace("getChartDataFinish"),h&&h(a.ResponseDetails)):g(a.Message,i)},function(a){f(a,i)})}function f(a,b){d.displayErrorMessageOnTop(webconLocale.cErrorWhileConnection,0),b&&b(a)}function g(a,b){d.displayErrorMessageOnTop(a,0),b&&b(a)}return{getChartData:e}}),Injector.factory("CommentPanelController",["logger","$Window","ClientInfo"],function(a,b,c){function d(c,d){if(a.debug("AddingCommentTo:"+c),!b.model[c]){var e="NoObject:"+c+" inModel";throw a.error(e),new Error(e)}b.model[c].primary=d.primary}function e(){var a=c.userName,d=moment().toISOString(),e=b.model.comments;e.comments.unshift({author:a,date:d,content:e.primary}),e.primary=""}return{addComment:d,addCommentEntry:e}}),Injector.factory("ChooseComparer",[],function(){function a(a){Guard.notNullObject(a,"oldData");var b=$.extend(!0,{},a.selected);return{isOldValueEqualTo:function(a){Guard.notNullObject(a,"newData");var c=a.selected;return _.isEqual(c,b)}}}return{withOldValue:a}}),Injector.factory("ComparerFactory",[],function(){function a(a){Guard.notNull(a,"controlOrCell");var b,c=Injector;if(a.hasCustomModel)return b=c.inject("CustomControlComparer");switch(a.type){case"SingleRowText":case"Bool":b=c.inject("SimpleComparer");break;case"SurveyRating":b=c.inject("SurveyRatingComparer");break;case"Integer":b=c.inject("IntegerComparer");break;case"Choose":b=c.inject("ChooseComparer");break;case"MultiRowText":b=c.inject("MultiRowComparer");break;case"FloatingPoint":case"FloatingPointCalculated":b=c.inject("FloatComparer");break;case"Date":b=c.inject("DateComparer");break;case"Autocomplete":case"Picker":b=c.inject("PickerComparer");break;case"People":case"GoogleMap":case"SurveyChoose":case"ChoiceTree":case"LinkReadonly":case"LocalAttachments":case"RelativeAttachments":case"Email":case"Picture":case"HandwrittenSignature":case"ExternalCustomControl":b=c.inject("ObjectComparer");break;case"Link":b=c.inject("LinkComparer");break;case"Image":b=c.inject("ImageComparer");break;case"SqlGrid":case"SqlRow":case"Subelements":b=c.inject("NotAllowedComparer")}if(!b)throw new Error("UnknownType: "+a.type);return b}return{forControl:a}}),Injector.factory("CustomControlComparer",[],function(){function a(a){var b=a;return{isOldValueEqualTo:function(a){return _.isEqual(b,a)}}}return{withOldValue:a}}),Injector.factory("DateComparer",[],function(){function a(a){var b=void 0!==a&&null!==a&&"date"===$.type(a)?a.getTime():null;return{isOldValueEqualTo:function(a){return(void 0!==a&&null!==a&&"date"===$.type(a)?a.getTime():null)===b}}}return{withOldValue:a}}),Injector.factory("FloatComparer",[],function(){function a(a){Guard.notNull(a,"oldData");var b=a.value;return{isOldValueEqualTo:function(a){Guard.notNull(a,"newData");var c=a.value;return!(void 0!==c&&null!==c||void 0!==b&&null!==b)||c===b}}}return{withOldValue:a}}),Injector.factory("ImageComparer",[],function(){function a(a){Guard.notNullObject(a,"oldData");var b=$.extend(!0,{},a);return{isOldValueEqualTo:function(a){Guard.notNullObject(a,"newData");var c=b.imageUrl,d=b.displayName,e=a.imageUrl,f=a.displayName;return void 0===d&&""===f?c===e:c===e&&d===f}}}return{withOldValue:a}}),Injector.factory("IntegerComparer",[],function(){function a(a){var b=a;return{isOldValueEqualTo:function(a){var c=a;return!(void 0!==c&&null!==c||void 0!==b&&null!==b)||c===b}}}return{withOldValue:a}}),Injector.factory("LinkComparer",[],function(){function a(a){Guard.notNullObject(a,"oldData");var b=$.extend(!0,{},a.links);return{isOldValueEqualTo:function(a){Guard.notNullObject(a,"newData"),a=a.links[0];var c=b[0].url,d=b[0].displayName,e=a.url,f=a.displayName;return!(d||f||c||e)||c===e&&d===f}}}return{withOldValue:a}}),Injector.factory("MultiRowComparer",[],function(){function a(a){Guard.notNullObject(a,"oldData");var b=void 0!==a.primary&&null!==a.primary?a.primary:"";return{isOldValueEqualTo:function(a){return Guard.notNullObject(a,"newData"),(void 0!==a.primary&&null!==a.primary?a.primary:"")===b}}}return{withOldValue:a}}),Injector.factory("NotAllowedComparer",[],function(){function a(a){return Guard.notNull(a,"oldData"),{isOldValueEqualTo:function(a){return Guard.notNull(a,"newData"),!1}}}return{withOldValue:a}}),Injector.factory("ObjectComparer",[],function(){function a(a){Guard.notNullObject(a,"oldData");var b=$.extend(!0,{},a);return{isOldValueEqualTo:function(a){Guard.notNullObject(a,"newData");var c=a;return _.isEqual(c,b)}}}return{withOldValue:a}}),Injector.factory("PickerComparer",[],function(){function a(a){Guard.notNullObject(a,"oldData");var b=$.extend(!0,{},a,{rawValue:null});return{isOldValueEqualTo:function(c){if(Guard.notNullObject(c,"newData"),c.hasCustomValue)return c.customValue===a.customValue;c=$.extend(!0,{},c,{rawValue:null});var d=_.isEqual(c,b),e=c.pickerEntities,f=b.pickerEntities;if(e.length!==f.length||!1===d)return!1;var g=_.zip(f,e);for(var h in g){var i=g[h];if(i[0].key!==i[1].key||i[0].name!==i[1].name)return!1}return!0}}}return{withOldValue:a}}),Injector.factory("SimpleComparer",[],function(){function a(a){Guard.notNull(a,"oldData");var b=a;return{isOldValueEqualTo:function(a){return Guard.notNull(a,"newData"),a===b}}}return{withOldValue:a}}),Injector.factory("SurveyRatingComparer",[],function(){function a(a){Guard.notNull(a,"oldData");var b=a;return{isOldValueEqualTo:function(a){return Guard.notNull(a,"newData"),!(!isNaN(a)||!isNaN(b))||a===b}}}return{withOldValue:a}}),Injector.controller("ControlUpdateController",["Ajax","ControlUpdaterFactory","ErrorDisplayService","ModelController","EmptyValueValidator","RedrawService","$Window"],function(a,b,c,d,e,f,g){function h(a,c){var d=g.model[a].dependentControls;d&&d.length>0&&_.each(d,function(a){var d=g.model[a];b.forControl(d).update(a,c)})}function i(b){var d={model:m()};a.post("GetDefaultsToSetOnPostback",d,function(a){if(a.IsSuccess){var d=JSON.parse(a.ResponseDetails);j(d),k(d,b)}else c.displayErrorMessageOnTop(a.Message,0)},function(){l()})}function j(a){_.each(a.RequirednessByFieldName,function(a,b){var c=_.find(g.model.controls,function(a){return a.fieldName===b});c&&(c.required=a)}),f.redrawMainPanels()}function k(a,b){_.each(a.ViewModelsList,function(a,c){var d=g.model[c].data;a.type&&"Date"===a.type&&a.data&&(a.data=new Date(a.data)),e.isEmpty(a.type,d)&&b(c,a.data)})}function l(){c.displayErrorMessageOnTop(webconLocale.cErrorWhileConnection,0)}function m(){var a=d.getDataModel();return JSON.stringify(a)}return{updateDependentControls:h,resetDefaultsOnPostback:i}}),Injector.controller("DocumentController",["logger","ModelController","AttachmentController","WebServiceController","PopupController","RedirectService","ErrorDisplayService","ValidationService","RedrawService","ActionService","MoveNextStepService","DeletedElementService","FormInfo","SaveRestrictionsService","ScriptsRunner","Ajax","$Window","CheckoutService","PortalElementInfoRefresher","QuickPathService","TimeoutsController","BlockingPanelService","ExternalControlEventService"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){function x(){var c=b.getDataModel();a.debug("finishAllUsersTasks"),c.formInfo.isArchive||d.finishAllUsersTasks(function(){f.reload()},W)}function y(){a.debug("generateHtmlTemplate"),B("/generateHtmlTemplate")}function z(){a.debug("generateWordTemplate"),B("/generateDocTemplate")}function A(){a.debug("generateWordPrint"),B("/generateDocPrint")}function B(a){window.open(p.getUrlWithRunningAddress(a))}function C(e,f){if(r.pause(),Guard.onlyNumber(e,"pathId"),e<0)throw new Error("pathIdCannotBeNullOrNegative");g.clearErrors();var i=b.getDataModel();i.pathId=e,a.debug("WebserviceRequestGoPath"+e);var j=_.find(q.model.paths,function(a){return a.id===e}),k=!j||!j.omitValidation,l=!0;if(f&&j&&!j.isQuickPath)throw r.continue(),new Error(webconLocale.cTransitionFromUrlOnlyAvailableForQuickPaths);if(j&&j.submitJavascript){var m=o.runClientScriptWithReturn("(function() { return "+j.submitJavascript+" })();");m=void 0===m||m,l=Boolean(m)}j&&j.chooseAssignedPerson&&(i.additionalTasks=q.model.additionalTasks),q.model.showCcAssignmentControl&&(i.additionalCcTasks=q.model.additionalCcTasks);var p=n.validateModel(),s=!k||h.validateModel(!0,!1);return h.validateAttachments()||g.displayErrorMessageOnTop(webconLocale.cNoAttachment,0),w.willTraversePath().then(function(a){p&&s&&l&&a&&c.updateManyAttachments(function(){d.goToNextStep(i,function(a){T(a,e)},W)})||X()})}function D(a){g.clearErrors();var d=b.getDataModel();if(q.model.showCcAssignmentControl&&(d.additionalCcTasks=q.model.additionalCcTasks),!c.updateManyAttachments(function(){return E(d,a)}))return null}function E(b,c){a.debug("WebServiceRequestSaveElement");var e=n.validateModel();return w.willSave().then(function(a){e&&a?"function"==typeof c?c(b):d.saveElement(b,S,W):X()})}function F(a,b){a.IsSuccess?(s.refreshInfo(m.wfdId),m.rowVersion=a.ResponseDetails.rowVersion,b()):a.Message&&(a.ResponseDetails&&a.ResponseDetails.errors?_.each(a.ResponseDetails.errors,function(a){g.displayErrorWithInnersOnTop(a)}):g.displayErrorMessageOnTop(a.Message,1))}function G(a){g.clearErrors();var c=b.getDataModel();n.validateModel()&&d.saveElement(c,function(b){F(b,a)},W)}function H(){r.pause(),g.clearErrors();var c=b.getDataModel();a.debug("WebServiceRequestDeleteElement"),c.formInfo.isArchive?confirm(webconLocale.cElementDeleteConfirm)&&d.deleteElement(c,I,W):e.showWFConfirmAction(webconLocale.cDelete,webconLocale.cElementDeleteConfirm,function(){d.deleteElement(c,I,W)},function(){r.continue()})}function I(a){if(a.IsSuccess){var b=a.ResponseDetails;confirmMessage={title:webconLocale.cDocDeleted,elementSignature:b.elementSignature,elementId:b.elementId},l.onDeleteSuccess(confirmMessage)}else r.continue(),a.Message?g.displayErrorMessageOnTop(a.Message,1):g.displayErrorMessageOnTop(webconLocale.cUnknownDeleteError,1)}function J(){g.clearErrors();var c=b.getDataModel();a.debug("WebServiceRequestForwardElement"),e.showForwardPopup(function(a,b,e,f,g){d.forwardElement(c,a,b,e,f,g,L,W)})}function K(){g.clearErrors();var c=b.getDataModel();a.debug("WebServiceRequestTakeOverElement"),e.showForwardPopup(function(a,b,e,f,g){d.forwardElement(c,a,b,e,f,g,L,W)})}function L(a){a.IsSuccess?f.reload():g.displayErrorMessageOnTop(a.Message,1)}function M(){g.clearErrors(),a.debug("WebServiceRequestPrivileges"),e.showPrivilegesPopup()}function N(){g.clearErrors(),a.debug("WebServiceRequestTimeoutStats"),u.getTimeoutStatistics(function(a){e.showTimeoutStatisticsPopup(a)})}function O(a,c,e){g.clearErrors();var f=b.getDataModel();d.addPrivileges(f,a.pickerEntities,c,function(a){return P(a,e)},W)}function P(a,b){a.IsSuccess?b(a.ResponseDetails):g.displayErrorMessageOnTop(a.Message,1)}function Q(a,c){g.clearErrors();var e=b.getDataModel();d.removePrivileges(e,a,c,W)}function R(c){g.clearErrors();var f=b.getDataModel();a.debug("WebServiceRequestInvokeAction");var h=function(){d.invokeMenuAction(f,c,function(a){V(a,c)},W)};if(c.confirmBeforeExecution){var i=c.name;e.showWFConfirmAction(i,c.confirmBeforeExecutionMessage,h)}else h()}function S(a){if(a.IsSuccess){s.refreshInfo(m.wfdId);var b=a.ResponseDetails.urlsToRegister,c=!1;b&&b.length>0&&(c=j.openActionUrl(b[0])),c||f.reload()}else a.Message&&(a.ResponseDetails&&a.ResponseDetails.errors?_.each(a.ResponseDetails.errors,function(a){g.displayErrorWithInnersOnTop(a)}):g.displayErrorMessageOnTop(a.Message,1))}function T(a,b){var c=a.ResponseDetails;if(a.IsSuccess){var d=c.elementId,e=_.find(q.model.paths,function(a){return a.id===b}),f=e.stayInEditForm,i={transitionStatusMessage:c.trannsitionStatusMessage,elementSignature:c.elementSignature,transitionStatus:c.transitionStatus,showConfirm:e&&e.showConfirm},j=a.ResponseDetails.urlsToRegister;k.onMoveNextStep(d,f,i,j)}else r.continue(),c&&c.errors||!a.Message||g.displayErrorMessageOnTop(a.Message,1),c&&(c.errors&&_.each(c.errors,function(a){g.displayErrorWithInnersOnTop(a)}),c.validationErrors&&(_.each(c.validationErrors,function(a){h.addErrorMessage(a.fieldName,a.errorMessage),g.displayValidationError(a)}),X()))}function U(a,b,c,d){if(a){var e=_.find(q.model.paths,function(a){return a.id===c}),f=e.stayInEditForm,h={transitionStatusMessage:b.statusMessage,elementSignature:b.elementSignature,transitionStatus:b.transitionStatus,showConfirm:e&&e.showConfirm};k.onMoveNextStep(d,f,h,[]),q.postMessage({actionType:"ELEMENT_CHANGED"},q.location.origin)}else r.continue(),b&&b.errors||!b.errorMessage||g.displayErrorMessageOnTop(b.errorMessage,1),b&&(b.errors&&_.each(b.errors,function(a){g.displayErrorWithInnersOnTop(a)}),b.validationErrors&&(_.each(b.validationErrors,function(a){var b={errorMessage:a};g.displayValidationError(b)}),X()))}function V(a,b){a.IsSuccess?j.handleActionInvoke(a.ResponseDetails,b.name):a.ResponseDetails&&a.ResponseDetails.errors?_.each(a.ResponseDetails.errors,function(a){g.displayErrorWithInnersOnTop(a)}):g.displayErrorMessageOnTop(a.Message,1)}function W(a){g.displayErrorMessageOnTop(a,1)}function X(){i.redrawMainPanels()}function Y(b){if(r.pause(),!b||b<0)throw new Error("pathIdCannotBeNullOrNegative");Guard.onlyNumber(b,"pathId"),a.debug("WebserviceRequestGoPath"+b);var c=_.find(q.model.paths,function(a){return a.id===b}),d=!c||!c.omitValidation,e=!0;if(c&&c.submitJavascript){var f=o.runClientScriptWithReturn("(function() { return "+c.submitJavascript+" })();");f=void 0===f||f,e=Boolean(f)}var g=n.validateModel(),i=!d||h.validateModel(!0,!1),j=g&&i&&e,k=m.wfdId,l=q.model.comments;j&&(v.disableAll(),t.goQuickPath(k,b,m.rowVersion,l,function(a,c){v.enableAll(),U(a,c,b,k)}))}function Z(){r.forceReleaseElementCheckout(),f.reload()}return{generateHtmlTemplate:y,finishAllUsersTasks:x,goToNextStep:C,saveElement:D,saveComment:G,deleteElement:H,forwardElement:J,takeOverElement:K,invokeMenuAction:R,addPrivileges:O,showPrivileges:M,removePrivileges:Q,generateWordTemplate:z,generateWordPrint:A,goQuickPath:Y,adminEndUsersCheckout:Z,showTimeoutStatistics:N}}),Injector.controller("ExternalControlController",["JsApiController","$Window","ExternalControlEventService","AttachmentController","FormInfo"],function(a,b,c,d,e){function f(d){if("CUSTOM_FORM_MESSAGE"===d.data.type){var e,f=d.source,j={type:"CUSTOM_FORM_MESSAGE",action:d.data.action,key:d.data.key},k=d.data.params;switch(d.data.action){case n.ADD_ATTACHMENT:return void g(k);case n.SET_CONTROL_HEIGHT:var e=k[0],m=k[1];return void("function"==typeof l[e]&&("number"==typeof m||"string"==typeof m&&m.match(/^\d+(?:\.\d+)?(?:px)?$/))&&l[e](m));case n.JS_API_CALL:var p=k[0];k.shift();var q=a[p.function];j.value=q.apply(null,k);break;case n.GET_CONTROL_CONFIGURATION:e=k[0],j.value=i(e);break;case n.GET_SELF_CONFIGURATION:e=k[0],j.value=h(e);break;case n.GET_FORM_INFO:e=k[0];var r=b.initialModel.FormInfo,s=r.parentElement||{},t=r.stepsHistoryInfo.stepInfos.find(function(a){return 0===a.status}),u={formMetadata:{application:{name:r.application,id:r.applicationId},dbId:r.dbId,docType:{name:r.docType,id:r.docTypeId},process:{name:r.process,id:r.processId},stepForm:{id:r.stepFormId},subDocType:r.subDocTypesInfo.currentSubDocType,workflow:{name:r.workflow,id:r.workflowId},step:{name:t.stepName,id:t.stepId}},formState:{isInEditMode:r.editMode,isAdminMode:r.isAdminMode,isArchiveMode:r.isArchive,isNew:r.isNew},currentForm:{author:{userName:r.author.name,userLogin:r.author.email},modifier:{userName:r.author.name,userLogin:r.author.email},signature:r.signature,wfdId:r.wfdId,parentWfdId:s.id}};j.value=u;break;case n.GET_CONTEXT:e=k[0];var v=b.initialModel.ClientInfo,w={language:v.language,userLogin:v.userLogin,userName:v.userName};j.value=w;break;case n.REGISTER_EVENT:switch(d.data.eventType){case o.ON_SAVED_EVENT:c.registerOnSaved(f,d.origin,d.data.id);break;case o.ON_PATH_TRAVERSAL_EVENT:c.registerOnTraversal(f,d.origin,d.data.id)}break;default:return}f.postMessage(j,d.origin)}}function g(a){var b=a[0],c=a[1],f=a[2],g=a[3],h=new Blob([b],{type:f});h.name=c,e.areAttachmentCategories?d.getCategories(function(a){if(a.categories.length){var b=a.categories,c=a.defaultCategory.databaseValue,d=b.filter(function(a){return a.id===g}),e=d.length?d[0].databaseValue:c||b[0].databaseValue;$("#fileuploadexternal").fileupload().fileupload("add",{files:[h],category:e})}}):$("#fileuploadexternal").fileupload().fileupload("add",{files:[h]})}function h(a){var c=Object.keys(b.model),d=c.find(function(b){return b.startsWith(a)}),e=b.model[d].config,f=i(a);return f.config=e,f}function i(a){var c=Object.keys(b.model),d=c.find(function(b){return b.startsWith(a)}),e=b.model.controls.find(function(a){return a.fieldName===d}),f=e.fieldName.split("_")[0];return{metadata:{displayName:e.displayName,editMode:e.editMode,fieldName:f,id:e.id,isVisible:e.isVisible,isRequired:e.required}}}function j(a,b){l[a]=b,m||window.addEventListener("message",f),m+=1}function k(a){m-=1,m||window.removeEventListener("message",f),delete l[a]}var l={},m=0,n=Object.freeze({JS_API_CALL:"JS_API_CALL",SET_CONTROL_HEIGHT:"SET_CONTROL_HEIGHT",GET_CONTROL_CONFIGURATION:"GET_CONTROL_CONFIGURATION",GET_SELF_CONFIGURATION:"GET_SELF_CONFIGURATION",GET_FORM_INFO:"GET_FORM_INFO",GET_CONTEXT:"GET_CONTEXT",REGISTER_EVENT:"REGISTER_EVENT",ADD_ATTACHMENT:"ADD_ATTACHMENT"}),o=Object.freeze({ON_SAVED_EVENT:"ON_SAVED_EVENT",ON_PATH_TRAVERSAL_EVENT:"ON_PATH_TRAVERSAL_EVENT"});return{initialize:j,dispose:k}}),Injector.controller("FieldConfigurationController",["$Window"],function(a){function b(b){return a.model[b].config}return{getFieldConfiguration:b}}),Injector.controller("GlobalVariablesController",["logger","JsApiController","FormInfo","ClientInfo","ReturnHandler","OpenLinkHandler"],function(a,b,c,d,e,f){function g(c){c.SetValue=b.setValue,c.GetValue=b.getValue,c.SetSubValue=b.setSubValue,c.GetSubValue=b.getSubValue,c.SetSubTypedValue=b.setSubTypedValue,c.GetSubTypedValue=b.getSubTypedValue,c.SetTypedValue=b.setTypedValue,c.GetTypedValue=b.getTypedValue,c.GetMode=b.getMode,c.ShowField=b.showField,c.HideField=b.hideField,c.ShowPath=b.showPath,c.HidePath=b.hidePath,c.ShowOcrTrainButtons=b.showOcrTrainButtons,c.HideOcrTrainButtons=b.hideOcrTrainButtons,c.ShowTabPanel=b.showTabPanel,c.HideTabPanel=b.hideTabPanel,c.ShowTab=b.showTab,c.HideTab=b.hideTab,c.SelectTab=b.selectTab,c.HideSubelementControl=b.hideSubelementControl,c.ShowSubelementControl=b.showSubelementControl,c.HideSubelementColumn=b.hideSubelementColumn,c.ShowSubelementColumn=b.showSubelementColumn,c.HideSqlRow=b.hideSqlRow,c.HideSqlGrid=b.hideSqlGrid,c.ShowSqlRow=b.showSqlRow,c.ShowSqlGrid=b.showSqlGrid,c.EnableControl=b.enableControl,c.DisableControl=b.disableControl,c.HideGroup=b.hideGroup,c.ShowGroup=b.showGroup,c.ExpandGroup=b.expandGroup,c.CollapseGroup=b.collapseGroup,c.HideComment=b.hideComment,c.ShowComment=b.showComment,c.GetSubDocType=b.getSubDocType,c.CheckIfAttExists=b.checkIfAttExists,c.SubelementCountRows=b.subelementCountRows,c.SubelementHasRows=b.subelementHasRows,c.SubelementInitialization=b.subelementInitialization,c.SubelementDelete=b.subelementDelete,c.DeleteSubelementRows=b.deleteSubelementRows,c.EnableRootPanel=b.enableRootPanel,c.DisableRootPanel=b.disableRootPanel,c.ConvertStringToFloat=b.convertStringToFloat,c.ConvertFloatToString=b.convertFloatToString,c.StringToDate=b.stringToDate,c.DateToString=b.dateToString,c.GetPairName=b.getPairName,c.GetPairID=b.getPairID,c.IsFormFieldVisible=b.isFormFieldVisible,c.FindControlLike=b.findControlLike,c.GetPrefix=b.getPrefix,c.ShowChart=b.showChart,c.HideChart=b.hideChart,c.SetControlStyle=b.setControlStyle,c.SetControlContainerStyle=b.setControlStyle,c.SetLabelStyle=b.setLabelStyle,c.ShowSecurities=b.showSecurities,c.InvokeMenuAction=b.invokeMenuAction,e.registerBackFunction(),f.registerGlobalOpen(),a.debug("JsApiRegistered")}function h(b){b.G_APP=j(c.applicationId,c.application),b.G_PROC=j(c.processId,c.process),b.G_WF=j(c.workflowId,c.workflow),b.G_DOCTYPE=j(c.docTypeId,c.docType);var e=_.find(c.stepsHistoryInfo.stepInfos,function(a){return 0===a.status});e&&(b.G_WFSTEP=j(e.stepId,e.stepName)),b.G_COM=j(c.companiesInfo.currentCompany.id,c.companiesInfo.currentCompany.name),b.G_WFSTEPFORMID=c.stepFormId,b.pageStartupCount=c.startupCount,b.G_WFELEM=j(c.wfdId,c.signature),b.G_WFELEM_PARENT=c.parentElement?j(c.parentElement.id,c.parentElement.signature):null,b.G_CURUSER=j(d.userLogin,d.userName),b.G_ATTCOUNT=c.attachmentsCount,b.G_ADMINMODE=c.isAdminMode,b.G_EDITMODE=c.isNew||b.initialModel.Toolbar&&(b.initialModel.Toolbar.editButton||b.initialModel.Toolbar.endEditButton),b.G_EDITVIEW=c.editMode,b.G_ISCHECKOUT=c.editMode,b.G_BROWSER_LANGUAGE=d.language,b.G_ISMOBILE=i(b),a.debug("BackwardCompatibilityVariablesRegistered")}function i(a){return!!a.webcon&&(!a.webcon.env||a.webcon.env===Injector.env.mobile)}function j(a,b){return a.toString()+"#"+b}return{setUpJsApi:g,setGlobalInfoVariables:h}}),Injector.controller("GroupExpandController",["$Window"],function(a){function b(b){var c=function(a){return a.fieldName===b};return _.find(a.model.controls,c)}function c(a,b){a&&(a.isExpanded=b)}function d(a){a&&c(a,!a.isExpanded)}function e(a){d(b(a))}function f(a,d){c(b(a),d)}return{toggleGroup:e,setGroupState:f}}),Injector.controller("JsApiController",["logger","ApiProviderFactory","RedrawService","GroupExpandController","FormInfo","FieldNameValidator","AttributeChangeController","AttachmentsApiProvider","SubelementsApiProvider","RootPanelApiProvider","SystemFunctionsApiProvider","UnsupportedSystemFunctionsApiProvider","AttributeEditabilityValidator","$Window","SubelementCellEditabilityValidator","DocumentController","Store","SubelementsControllerCreator","SubelementEditabilityValidator","SubelementsStoreController"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){function u(b,c,d){Guard.notNullOrEmpty(b,"SubelementsControlId"),Guard.notNullOrEmpty(c,"ColumnName"),Guard.notNull(d,"Visibility");var e=f.validateFieldNameForSubelement(b);if(e){var g=t.findSubelementsControlById(b);if(!g)throw new Error("ControlIsNotSubelement");_.find(g.control.config.columns,function(a){return a.fieldName===c})?q.dispatch(Ra.createChangeSubelementsColumnVisibilityActions(e,c,d)):a.warning("ColumnNameKeyNotFound",c)}}function v(a){var b;a=a.toString();var c=["SEL_SQLRow","SEL_SQLGrid","SEL_Chart","SubElems"],d=_.some(c,function(b){return a.startsWith(b)});b=d?a:a+"_";var e=function(a){return a.fieldName.startsWith(b)};return _.find(n.model.controls,e)}function w(a){var b=function(b){return b.id===a};return _.find(n.model.controls,b)}function x(a){var b=function(b){return b.fieldName===a};return _.find(n.model.controls,b)}function y(a,c){if(a=f.validateFieldName(a)){var d=v(a).fieldName,e=n.model[d];c=Object.assign({},c,{noPostbackScripts:!0});var h=b.getFieldProvider(e);return h.controlOrCellModel=e,h.changeCallback=function(a){g.change(d,a,c)},h.fieldName=d,h}}function z(a,c,d){var e=F(a,c,d);if(!e)return null;e.config=e.config||{},e.row.cells[d].config=e.config;var f=function(a,b,c){q.dispatch(Ra.createChangeActions(c,b,a,e.context))},g=b.getFieldProvider(e.cell);return g.context=e.context,g.rowId=e.rowId,g.controlOrCellModel=$.extend(!0,{},e.cell),g.changeCallback=function(b){r.createForControl(e.context,f,null,null,null,e.columns,e.controlConfig,a,function(a,b,c){q.dispatch(Qa.SubelementsActions.createApplyRowRecalculateAction(a,b,c))}).createForRow(e.row).change(d,b)},g.fieldName=d,g}function A(a){var b=function(b){return b.id===a};return _.find(n.model.quickPaths,b)}function B(a){var b=function(b){return b.id===a};return _.find(n.model.paths,b)}function C(b,c,d){if(Guard.notNullOrEmpty(b,"FieldName"),D(b,d))a.error("SetValueNotAllowedOnReadOnly");else{var e=y(b,d);if(!e)return;e.setValue.call(e,c,d)}}function D(a,b){var c=m.isReadonly(a);return!(!!b&&b.forceOnReadonly)&&!0===c}function E(a,b){var c=y(a);if(c)return c.getValue.call(c,b)}function F(a,b,c){var d=f.validateFieldNameForSubelement(a);if(d){var e=q.getState(),g=e.subelements.filter(function(a){return a.info.fieldName===d})[0],h=g.control;if("Subelements"!==h.type)throw new Error("ControlIsNotSubelement");var i=h.data.rows[b];if(!i)throw new Error("RowIdKeyNotFound");var j=i.cells[c];if(!j)throw new Error("ColumnNameKeyNotFound");return{row:i,cell:j,columns:h.config.columns,config:h.config.columnsConfiguration[c].config,context:d,controlConfig:h.config}}}function G(b,c,d,e,f){Guard.notNullOrEmpty(b,"SubelementsControlId"),Guard.notNullOrEmpty(c,"RowNumber"),Guard.notNullOrEmpty(d,"ColumnName");var g=c-1;if(H(b,d,f))a.error("SetValueNotAllowedOnReadOnly");else{var h=z(b,g,d);h&&h.setValue.call(h,e)}}function H(a,b,c){var d=s.isReadonly(a),e=o.isReadonly(a,b);return!(c||!0!==d&&!0!==e)}function I(a,b,c){Guard.notNullOrEmpty(a,"SubelementsControlId"),Guard.notNullOrEmpty(b,"RowNumber"),Guard.notNullOrEmpty(c,"ColumnName");var d=b-1,e=z(a,d,c);if(e)return e.getValue.call(e)}function J(b,c,d,e){if(Guard.notNull(e,"Value"),Guard.notNullOrEmpty(b,"SubelementsControlId"),Guard.notNullOrEmpty(c,"RowNumber"),Guard.notNullOrEmpty(d,"ColumnName"),H(b,d))a.error("SetValueNotAllowedOnReadOnly");else{var f=c-1,g=z(b,f,d);if(g){if(!g.setTypedValue)throw new Error("SetTypedValueNotAllowed");g.setTypedValue.call(g,e)}}}function K(a,b,c){Guard.notNullOrEmpty(a,"SubelementsControlId"),Guard.notNullOrEmpty(b,"RowNumber"),Guard.notNullOrEmpty(c,"ColumnName");var d=b-1,e=z(a,d,c);if(e){if(e.getTypedValue)return e.getTypedValue.call(e);throw new Error("GetTypedValueNotAllowed")}}function L(a){a=f.validateFieldName(a);var b=v(a).fieldName;return n.model[b].data.hasCustomValue?"Custom":"Standard"}function M(b){if(Guard.notNullOrEmpty(b,"FieldName"),"number"===$.type(b)){if(!(b=f.validateFieldId(b)))return;a.trace("showField:"+b);w(b).isVisible=!0}else if("string"===$.type(b)){if(!(b=f.validateFieldName(b)))return;a.trace("showField:"+b),v(b).isVisible=!0}Sa()}function N(b){if(Guard.notNullOrEmpty(b,"FieldName"),"number"===$.type(b)){if(!(b=f.validateFieldId(b)))return;a.trace("hideField:"+b);w(b).isVisible=!1}else if("string"===$.type(b)){if(!(b=f.validateFieldName(b)))return;a.trace("hideField:"+b),v(b).isVisible=!1}Sa()}function O(a){Q(a,!0)}function P(a){Q(a,!1)}function Q(a,b){var d=B(a),e=A(a);d&&(d.isVisible=b),e&&(e.isVisible=b),(d||e)&&c.redraw("PathPanel")}function R(){n.model.ocrTrainButtonsHidden=!1,Sa()}function S(){n.model.ocrTrainButtonsHidden=!0,Sa()}function T(a){var b=w(a);if(b){if("TabPanel"!==n.model[b.fieldName].type)throw new Error("ControlIsNotATabPanel");Y("TabPanel",a)}}function U(a){var b=w(a);if(b){if("TabPanel"!==n.model[b.fieldName].type)throw new Error("ControlIsNotATabPanel");Z("TabPanel",a)}}function V(a){var b=w(a);if(b){if("Tab"!==n.model[b.fieldName].type)throw new Error("ControlIsNotATab");Injector.resolve(["TabPanelController"],function(a){a.getVisibleTab(b.groupName)||a.setActiveTabId(b.groupName,b.id)}),Y("Tab",a)}}function W(a){var b=w(a);if(b){if("Tab"!==n.model[b.fieldName].type)throw new Error("ControlIsNotATab");Z("Tab",a),Injector.resolve(["TabPanelController"],function(a){if(a.getActiveTabId(b.groupName)===b.id){var c=a.getVisibleTab(b.groupName);c?a.setActiveTabId(b.groupName,c.id):a.setActiveTabId(b.groupName,-1)}}),Sa()}}function X(b){if(Guard.onlyNumber(b,"Id"),b=f.validateFieldId(b)){a.trace("selectTab:"+b);var c=w(b);if("Tab"!==n.model[c.fieldName].type)throw new Error("ControlIsNotATab");c.isVisible&&(Injector.resolve(["TabPanelController"],function(a){a.setActiveTabId(c.groupName,c.id)}),Sa())}}function Y(a,b){Guard.onlyNumber(b,"Id");var c=f.validateFieldNameForNotUniqueField(a,b);c&&(x(c).isVisible=!0,Sa())}function Z(a,b){Guard.onlyNumber(b,"Id");var c=f.validateFieldNameForNotUniqueField(a,b);c&&(x(c).isVisible=!1,Sa())}function aa(a,b){Guard.onlyNumber(a,"Id");var c=f.validateFieldNameForNotUniqueField("Group",a);c&&(d.setGroupState(c,b),Sa())}function ba(a,b){u(a,b,!0)}function ca(a){Y("SubElems",a)}function da(a){Y("SEL_SQLGrid",a)}function ea(a){Y("SEL_SQLRow",a)}function fa(a){Z("SEL_SQLGrid",a)}function ga(a){Z("SEL_SQLRow",a)}function ha(a,b){u(a,b,!1)}function ia(a){Z("SubElems",a)}function ja(b){b=f.validateFieldName(b),a.trace("enableControl:"+b),v(b).isDisabled=!1,Sa()}function ka(b){b=f.validateFieldName(b),a.trace("disableControl:"+b),v(b).isDisabled=!0,Sa()}function la(a){Z("Group",a)}function ma(a){Y("Group",a)}function na(){N("SEL_SystemComments")}function oa(){M("SEL_SystemComments")}function pa(a){aa(a,!0)}function qa(a){aa(a,!1)}function ra(){return e.subDocTypesInfo.currentSubDocType&&e.subDocTypesInfo.currentSubDocType.id?e.subDocTypesInfo.currentSubDocType.id:""}function sa(b,c,d){if(Guard.notNull(c,"Value"),D(b,d))a.error("SetValueNotAllowedOnReadOnly");else{var e=y(b);if(!e)return;if(!e.setTypedValue)throw new Error("SetTypedValueNotAllowed");e.setTypedValue.call(e,c,d)}}function ta(a,b){var c=y(a);if(!c)return{value:void 0};if(c.getTypedValue)return c.getTypedValue.call(c,b);throw new Error("GetTypedValueNotAllowed")}function ua(a){return h.checkIfAttExists(a)}function va(a){return i.subelementCountRows(a)}function wa(a){return i.subelementHasRows(a)}function xa(a){var b=t.findSubelementsControlById(a),c=function(a){q.dispatch(Ra.createRestoreDefaultsAction(b.info.fieldName,a))},d=function(a,b){q.dispatch(Qa.SubelementsActions.createApplyRecalculateAction(a,b))};r.createForControl(b.info.fieldName,null,null,null,null,b.control.config.columns,b.control.config,a,d).restoreDefaultRows(c)}function ya(a,b){i.subelementDelete(a,b)}function za(a,b){i.deleteSubelementRows(a,b)}function Aa(){j.enableRootPanel()}function Ba(){j.disableRootPanel()}function Ca(a){
return k.convertStringToFloat(a)}function Da(a,b){return k.convertFloatToString(a,b)}function Ea(a){return k.stringToDate(a)}function Fa(a,b){return k.dateToString(a,b)}function Ga(){return l.findControlLike()}function Ha(){return l.getPrefix()}function Ia(a){Y("SEL_Chart",a)}function Ja(a){Z("SEL_Chart",a)}function Ka(a){return k.getPairName(a)}function La(a){return k.getPairID(a)}function Ma(a,b){Guard.notNullOrEmpty(a,"FieldName");var c;return b&&(c=x(a+"_"+b)),c||(c=v(a)),k.isFormFieldVisible(c)}function Na(a,b,c){var d=v(a);if(d){var e=n.model[d.fieldName];"string"==typeof b&&Injector.resolve(["StyleStringHelper"],function(a){b=a.convertStyleStringToStyleObject(b)});var f=e.style[c];e.style[c]=Object.assign({},f,b),Sa()}}function Oa(){p.showPrivileges()}function Pa(a){var b=n.model.menuActions.find(function(b){return b.id===a});b&&p.invokeMenuAction(b)}var Qa=n.webcon||{};Qa=Qa.redux||{};var Ra=Qa.SubelementsActions||{},Sa=_.throttle(function(){c.redrawMainPanels()},50);return{setValue:C,getValue:E,setSubValue:G,getSubValue:I,setSubTypedValue:J,getSubTypedValue:K,getMode:L,hideField:N,showField:M,hidePath:P,showPath:O,hideTabPanel:U,showTabPanel:T,hideTab:W,showTab:V,selectTab:X,hideSubelementColumn:ha,showSubelementColumn:ba,hideSubelementControl:ia,showSubelementControl:ca,showSqlGrid:da,showSqlRow:ea,hideSqlGrid:fa,hideSqlRow:ga,enableControl:ja,disableControl:ka,hideGroup:la,showGroup:ma,expandGroup:pa,collapseGroup:qa,getSubDocType:ra,getTypedValue:ta,setTypedValue:sa,hideComment:na,showComment:oa,checkIfAttExists:ua,subelementCountRows:va,subelementHasRows:wa,subelementInitialization:xa,subelementDelete:ya,deleteSubelementRows:za,enableRootPanel:Aa,disableRootPanel:Ba,convertStringToFloat:Ca,convertFloatToString:Da,stringToDate:Ea,dateToString:Fa,findControlLike:Ga,getPrefix:Ha,showChart:Ia,hideChart:Ja,getPairID:La,getPairName:Ka,isFormFieldVisible:Ma,setControlStyle:function(a,b){Na(a,b,"control")},setLabelStyle:function(a,b){Na(a,b,"label")},showSecurities:Oa,showOcrTrainButtons:R,hideOcrTrainButtons:S,invokeMenuAction:Pa}}),Injector.controller("LocalAttachmentsController",["Store","AttachmentsFileUploadHandler","AttachmentController","FormInfo"],function(a,b,c,d){function e(a,b,c){return!(!a&&(b>0||c>0))}function f(a,e,f,h){return d.areAttachmentCategories?g(e,f,h).then(function(d){a.category=c.idHashDefaultName(d),b.handleUploadAdd(a)}):b.handleUploadAdd(a)}function g(b,d,e){return new Promise(function(f){if(b){var g=a.getState().attachments.categories.defaultCategory;g?f(g):c.getCategories(function(a){f(a.defaultCategory)})}else c.getCategoryForAttColumn(d.context,d.rowId,e,function(a){f(a)})})}return{canAddAttachment:e,handleUploadAdd:f,getLocalAttachmentCategory:g}}),Injector.controller("MassActionStarter",["logger","InitialModelFormer","MassActionRenderService","Store","ErrorDisplayService","ValidationService","MassActionsService","$Window","Localization"],function(a,b,c,d,e,f,g,h,i){function j(){try{g.registerAttributes(_.filter(h.initialModel.Controls,function(a){return"SystemComments"!==h.initialModel.ViewModelsList[a.fieldName].type}).map(function(a){return console.log(a.fieldName),{fieldName:a.fieldName,isRequired:a.required}})),e.clearErrors(),e.clearValidationErrors();var a=b.createMassActionModel(),j=h.initialModel.ViewModelsList;for(var l in j)if(j.hasOwnProperty(l)){var m=j[l];"SystemComments"!==m.type&&g.saveAttributeValue(l,m.data)}d.saveStore(a),f.validateModel(!1,!0),c.render(a,!0),i.initializeGlobalMoment()}catch(a){k(a)}}function k(b){a.error(b.message),e.addError(b),e.displayPendingErrors()}return{bootstrap:j}}),Injector.instance("MassActionsService",[],function(){function a(){}function b(){}function c(){}function d(){}return{saveAttributeValue:b,saveCommentValue:c,registerAttributes:a,setValidationResult:d}}),Injector.controller("ModelController",["logger","FormInfo","$Window","ControlModelParser","ModelMapper","Store","TreeHelper"],function(a,b,c,d,e,f,g){function h(){var a=[],b=[],c=f.getState().attachments.attachments,d=_.find(c,function(a){return e.isCurrent(a)});d&&(a=g.flattenNode(d,function(a){return a.nodeType===e.attachmentNodeType.file||a.nodeType===e.attachmentNodeType.message}));var h=_.find(c,function(a){return e.isConversations(a)});if(h&&h.nodes&&h.nodes.length>0){var i=_.find(h.nodes,function(a){return e.isCurrent(a)});i&&(b=g.flattenNode(i,function(a){return a.nodeType===e.attachmentNodeType.file||a.nodeType===e.attachmentNodeType.message}))}return _.union(a,b)}function i(){var a=c.model,e={controls:[],formInfo:b,comments:a.comments,sessionId:a.sessionId,attachments:_.map(h(),function(a){return a.attId})};return _.each(a.controls,function(a){var b=c.model[a.fieldName];"Subelements"===b.type&&(b=_.filter(f.getState().subelements,function(b){return a.fieldName===b.info.fieldName})[0].control),e.controls.push({fieldName:a.fieldName,type:b.type,model:d.getModelForControl(b),ocrData:b.ocrData})}),e}function j(a){Guard.notNullOrEmpty(a,"FieldName");var b=c.model.controls;return Guard.notNull(b,"Controls"),_.find(b,function(b){return b.fieldName===a})}function k(a){var b=a.type;return"Picker"===b||"People"===b||"Autocomplete"===b}function l(a,b){if(Guard.notNullOrEmpty(a,"FieldName"),b){var d=c.model[b];return _.find(d.config.columns,function(b){return b.fieldName===a}).displayName}return j(a).displayName}return{getDataModel:i,findControlByFieldName:j,isPicker:k,getDistplayName:l}}),Injector.controller("PickerBaseController",["logger","ModelController","Ajax","ErrorDisplayService","$Window"],function(a,b,c,d,e){function f(a,b,d){c.post(a.method,a.requestData,function(a){a.IsSuccess?b&&b(a.ResponseDetails):g(a.Message,d)},function(a){g(a,d)})}function g(a,b){d.displayErrorMessageOnTop(a),b&&b(a)}function h(){var a=b.getDataModel();return JSON.stringify(a)}function i(a){var b="";return a&&(a.pickerEntities&&(b+=_.map(a.pickerEntities,function(a){return a.key+"#"+a.name}).join(";")),a.rawValue&&(b&&(b+=";"),b+=a.rawValue)),b}function j(a,b,c){var d=_.find(e.model.controls,function(a){return a.fieldName===b});d&&m(a,function(a,b){e.SetSubValue(d.id,c+1,a,b)})}function k(a,b,c){if(Guard.notNull(a,"Value"),a.pickerEntities&&1===a.pickerEntities.length){var d=a.pickerEntities[0];d.hasDataToPropagate?b(a.pickerEntities):c(d)}}function l(a){m(a,function(a,b){e.SetValue(a,b,{forceOnReadonly:!0})})}function m(a,b){if(a&&1===a.length){var c=a[0];c.hasDataToPropagate&&_.each(c.dataToPropagate.datas,function(a){a.viewModel?b(a.fieldName,a.viewModel.toString()):b(a.fieldName,"")})}}function n(a){throw new Error("NotSupportedPickerType:"+a)}return{executeCall:f,getJsonModel:h,getPickerStringValue:i,setOtherColumnsWithData:j,setOtherFieldsInternal:k,setOtherFieldsWithData:l,unsupportedPickerType:n}}),Injector.controller("PickerController",["logger","PickerBaseController","$Window"],function(a,b,c){function d(a,c,d,e,f,g,h){Guard.notNull(a,"Value"),Guard.notNull(d,"Config"),Guard.notNull(e,"Callback");var i=l(a,c,d,g,h);b.executeCall(i,e,f)}function e(a,c,d,e,f){Guard.notNull(c,"Config"),Guard.notNull(d,"Callback");var g=j(a,c,f);b.executeCall(g,d,e)}function f(a,b,c,d,e,f,g){h(a,b,c,e,function(c){f(g,a,{hasCustomValue:b.hasCustomValue,pickerEntities:c.map(function(a){return Object.assign({},{dataToPropagate:a.dataToPropagate,hasDataToPropagate:a.hasDataToPropagate,isResolved:a.isResolved,key:a.key,name:a.name})})})},d)}function g(a,d,e){h(a,d,e,c.model[a].config,b.setOtherFieldsWithData)}function h(a,c,e,f,g,h){b.setOtherFieldsInternal(c,g,function(b){d(b.key,a,f,g,void 0,e,h)})}function i(a,c,d,e,f,g,h,i){Guard.notNull(a,"Value"),Guard.notNull(c,"Column"),Guard.notNull(e,"Config"),Guard.notNull(f,"Callback");var j=k(a,c,d,e,h,i);b.executeCall(j,f,g)}function j(a,c,d){var e="";return a&&"picker"==c.type?e={method:"PickerSearchableColumns",requestData:{form:{model:b.getJsonModel()},fieldName:a,context:d}}:"people"==c.type?e={method:"PeoplePickerColumns",requestData:{form:{model:b.getJsonModel()},selectedGroupId:c.selectedGroupId,choiceMode:c.choiceMode,fieldName:a,context:d}}:b.unsupportedPickerType(c.type),e}function k(a,c,d,e,f,g){var h="",i={form:{model:b.getJsonModel()},pickerValue:a,fieldName:d,context:f,sublementRowId:g};return"picker"===e.type?(i.pickerColumn=c,h={method:"PickerSearch",requestData:i}):"people"===e.type?(i.selectedGroupId=e.selectedGroupId,i.choiceMode=e.choiceMode,h={method:"PeoplePickerSearch",requestData:i}):b.unsupportedPickerType(e.type),h}function l(a,c,d,e,f){var g="",h={form:{model:b.getJsonModel()},pickerValue:a,fieldName:c,sublementRowId:f};return e&&(h.context=e),"picker"===d.type.toLowerCase()?g={method:"PickerValidate",requestData:h}:"people"===d.type.toLowerCase()?(h.selectedGroupId=d.selectedGroupId,h.choiceMode=d.choiceMode,g={method:"PeoplePickerValidate",requestData:h}):b.unsupportedPickerType(d.type),g}function m(a){return b.getPickerStringValue(a)}return{validate:d,search:i,getSearchableColumns:e,setOtherFields:g,setOtherColumns:f,getPickerStringValue:m}}),Injector.factory("PickerControllerFactory",[],function(){function a(a){Guard.notNull(a,"controlOrCell");var b,c=Injector;switch(a.type){case"Autocomplete":b=c.inject("AutocompleteController");break;case"People":case"Picker":b=c.inject("PickerController");break;default:throw new Error("UnknownType: "+a.type)}return b}return{forControl:a}}),Injector.controller("PictureController",["PopupController","DeviceInfo","$Window"],function(a,b,c){function d(a){return{fitWidth:a===j.adjustToWidth,fixedHeight:a===j.fixedHeight,originalDimensions:a===j.original}}function e(){var a=b.isMobile(c.navigator);return b.isBrowserIE()?webconLocale.cDropPicture:a?"":webconLocale.cDropOrPastePicture}function f(){var a;window.webcon.env;Injector.resolve(["DeviceInfo"],function(b){a=b.isModern()});var d=b.isBrowserIE();return a?d?c.model.applicationColor:c.model.applicationColor+"65":""}function g(b,c){var d=b.size/i,e=c.sizeLimit,f=b.type,g=d<=e,j=f.startsWith(h);if(g)j||a.showWFAlert(webconLocale.cPictureUploadError,webconLocale.cWrongPictureFileMessage);else{var k=_.template(webconLocale.cPictureTooBigMessage)({size:e});a.showWFAlert(webconLocale.cPictureUploadError,k)}return g&&j}var h="image/",i=1024,j={adjustToWidth:0,original:1,fixedHeight:2};return{getEmptyControlMessage:e,getBorderColor:f,validateFile:g,getSizeSettings:d}}),Injector.controller("PopupController",["logger","DeviceInfo","FormInfo","QueryStringParamsService","PopupRenderService","PopupClosingFunctionsService","$Window"],function(a,b,c,d,e,f,g){function h(c,d,h,i,j,k,l){if(a.trace("injectingWFConfirmControlIntoPopupWindow"),!d||d<0)throw new Error("timeoutCannotBeNullOrNegative");var m=g.navigator;$("#popupContainer").append('<div id="PopupPanelWFConfirm"></div>');var n=function(){var a={params:{}};e.renderWFConfirm(a)},o=function(){h&&h(),n(),f.pop()},p={controlName:"WFConfirm",params:{isVisible:!0,signature:webconLocale.cSignature+": ["+j+"]",mediaHeading:i,timeout:d,onTimeoutCallback:c,closePopup:o,isMobileDevice:b.isMobile(m),elementId:k,extraMessage:l}};e.renderWFConfirm(p),f.push(o)}function i(b,c,d,g){a.trace("injectingWFAlertControlIntoPopupWindow"),"string"==typeof c&&c.length>600?$("#popupContainer").append('<div id="PopupPanelWFAlertLarge"></div>'):$("#popupContainer").append('<div id="PopupPanelWFAlert"></div>');var h=function(){var a={params:{isVisible:!1,message:c}};e.renderWFAlert(a),d&&d()},i={controlName:"WFAlert",params:{isVisible:!0,closePopup:function(){h(),f.pop()},message:c,title:b,contentComponent:g}};e.renderWFAlert(i),f.push(h)}function j(b,d,h,i){a.trace("injectingWFAddAttachmentWithCategoryControlIntoPopupWindow"),$("#popupContainer").append('<div id="PopupPanelWFAddAttWithCategory"></div>');var j=function(){var a={params:{isVisible:!1}};e.renderWFAddAttWithCategory(a)},k=g.webcon.env===Injector.env.mobile,l={controlName:"WFAddAttWithCategory",params:{isVisible:!0,closePopup:function(){j(),f.pop()},addCallback:b,uploadAdd:i,uploadStart:d,uploadFail:h,mediaHeading:webconLocale.cChooseCategory,isMobileDevice:k,chooseCategory:c.areAttachmentCategories}};e.renderWFAddAttWithCategory(l),f.push(j)}function k(d,h){a.trace("injectingWFSelectAttCategoryIntoPopupWindow");var i=g.navigator;$("#popupContainer").append('<div id="PopupPanelWFSelectAttCategory"></div>');var j=function(){k(),f.pop()},k=function(){var a={params:{isVisible:!1}};e.renderWFSelectAttCategory(a)},l={controlName:"WFSelectAttCategory",params:{isVisible:!0,addCallback:function(a){d(a),j()},cancelCallback:function(){h(),j()},mediaHeading:webconLocale.cChooseCategory,isMobileDevice:b.isMobile(i),chooseCategory:c.areAttachmentCategories}};e.renderWFSelectAttCategory(l),f.push(k)}function l(c,d,h,i){a.trace("injectingWFOverwriteAttControlIntoPopupWindow");var j=g.navigator;$("#popupContainer").append('<div id="PopupPanelWFOverwriteAtt"></div>');var k=function(){var a={params:{isVisible:!1}};e.renderWFOverwriteAtt(a)},l={controlName:"WFOverwriteAtt",params:{isVisible:!0,closePopup:function(){k(),f.pop()},addCallback:d,uploadStart:h,uploadFail:i,attachment:c,mediaHeading:webconLocale.cAttControlOverwriteAttachment,isMobileDevice:b.isMobile(j)}};e.renderWFOverwriteAtt(l),f.push(k)}function m(b,c,d,g){a.trace("injectingWFOverwriteOrAddNewAttachmentControlIntoPopupWindow"),$("#popupContainer").append('<div id="PopupPanelWFOverwriteOrAddNewAttachment"></div>');var h=function(){var a={params:{isVisible:!1}};e.renderWFOverwriteOrAddNewAttachment(a)},i=function(){h(),f.pop()},j={controlName:"WFOverwriteOrAddNewAttachment",params:{isVisible:!0,overwriteCallback:b,addCallback:c,existingAttachment:d,cancelCallback:function(){i(),g&&g()}}};e.renderWFOverwriteOrAddNewAttachment(j),f.push(h)}function n(a,b,c){$("#popupContainer").append('<div id="PopupPanelWFOverwriteOrAddManyAttachments"></div>');var d=function(){var a={params:{isVisible:!1}};e.renderWFOverwriteOrAddManyAttachments(a)},g=function(){d(),f.pop()},h={controlName:"WFOverwriteOrAddNewAttachment",params:{isVisible:!0,files:a,okCallback:function(a){b(a),g()},cancelCallback:function(){c(),g()}}};e.renderWFOverwriteOrAddManyAttachments(h),f.push(d)}function o(d,h,i,j){a.trace("injectingWFAddAttachmentWithCategoryInNativeControlIntoPopupWindow");var k=g.navigator;void 0===j&&(j=!0),$("#popupContainer").append('<div id="PopupPanelWFAddAttWithCategoryInNative"></div>');var l=function(){var a={params:{isVisible:!1}};e.renderWFAddAttWithCategoryInNative(a)},m={controlName:"WFAddAttWithCategoryInNative",params:{isVisible:!0,closePopup:function(){l(),f.pop()},addCallbackNative:d,uploadStart:h,uploadFail:i,isMobileDevice:b.isMobile(k),chooseCategory:c.areAttachmentCategories&&j}};e.renderWFAddAttWithCategoryInNative(m),f.push(l)}function p(c,d,h,i){a.trace("injectingAttachLocalAttachmentsToSubelementControlIntoPopupWindow");var j=g.navigator;$("#popupContainer").append('<div id="PopupPanelAttachLocalAttachmentsToSubelement"></div>');var k=function(){var a={params:{isVisible:!1}};e.renderAttachLocalAttachmentsToSubelement(a)},l={controlName:"AttachLocalAttachmentsToSubelement",params:{isVisible:!0,closePopup:function(){k(),f.pop()},confirmPopup:function(a){h(a),k(),f.pop()},isMobileDevice:b.isMobile(j),attachments:c,selectedAttachmentIds:d,config:i}};e.renderAttachLocalAttachmentsToSubelement(l),f.push(k)}function q(c,d,h,i,j,k){a.trace("injectingAttachRelativeAttachmentsToSubelementControlIntoPopupWindow");var l=g.navigator;$("#popupContainer").append('<div id="PopupPanelAttachRelativeAttachmentsToSubelement"></div>');var m=function(){var a={params:{isVisible:!1}};e.renderAttachRelativeAttachmentsToSubelement(a)},n={controlName:"AttachRelativeAttachmentsToSubelement",params:{isVisible:!0,closePopup:function(){m(),f.pop()},confirmPopup:function(a){j(a),m(),f.pop()},isMobileDevice:b.isMobile(l),subelementsFieldName:c,columnName:d,rowNumber:h,selectedAttachmentIds:i,config:k}};e.renderAttachRelativeAttachmentsToSubelement(n),f.push(m)}function r(c,d,h,i){a.trace("injectingWFConfirmActionControlIntoPopupWindow",d);var j=g.navigator;d.length>600?$("#popupContainer").append('<div id="PopupPanelWFConfirmActionLarge"></div>'):$("#popupContainer").append('<div id="PopupPanelWFConfirmAction"></div>');var k=function(){var a={params:{isVisible:!1,message:d}};e.renderWFConfirmAction(a)},l={controlName:"WFConfirmAction",params:{title:c,message:d,isVisible:!0,noCallback:function(){k(),f.pop(),i&&i()},yesCallback:function(){k(),f.pop(),h&&h()},isMobileDevice:b.isMobile(j),closePopup:function(){k(),f.pop()}}};e.renderWFConfirmAction(l),f.push(k)}function s(c){a.trace("injectingWFForwardElementPopupWindow");var d=g.navigator;$("#popupContainer").append('<div id="PopupPanelWFForwardElement"></div>');var h=function(){var a={params:{isVisible:!1}};e.renderWFForwardElement(a)},i={controlName:"WFForwardElement",params:{isVisible:!0,forwardCallback:function(a,b,d,e,g){h(),f.pop(),c(a,b,d,e,g)},closePopup:function(){h(),f.pop()},isMobileDevice:b.isMobile(d)}};e.renderWFForwardElement(i),f.push(h)}function t(){a.trace("injectingWFPrivilegesPopupWindow");var c=g.navigator;$("#popupContainer").append('<div id="PopupPanelWFPrivileges"></div>');var d=function(){var a={params:{isVisible:!1}};e.renderWFPrivileges(a)},h={controlName:"WFPrivileges",params:{isVisible:!0,closePopup:function(){d(),f.pop()},isMobileDevice:b.isMobile(c)}};e.renderWFPrivileges(h),f.push(d)}function u(c){a.trace("injectingWTimeoutStatisticsWindow");var d=g.navigator;$("#popupContainer").append('<div id="TimeoutStatistics"></div>');var h=function(){var a={params:{isVisible:!1}};e.renderTimeoutStatistics(a)},i={controlName:"TimeoutStats",params:{isVisible:!0,closePopup:function(){h(),f.pop()},isMobileDevice:b.isMobile(d),stats:c}};e.renderTimeoutStatistics(i),f.push(h)}function v(a,c,d,h,i,j,k){var l=g.navigator;$("#popupContainer").append('<div id="PopupPanelPickerSelectPopup"></div>');var m=function(){var a={params:{isVisible:!1}};e.renderPickerSelectPopup(a)},n=function(){m(),f.pop()},o={controlName:"PickerSelectPopup",params:{isVisible:!0,value:d,title:a,pickerName:c,config:i,closePopup:n,confirmCallback:function(a){n(),h(a)},isMobileDevice:b.isMobile(l),context:j,rowId:k}};e.renderPickerSelectPopup(o),f.push(m)}function w(a,c,d,h,i,j,k){var l=g.navigator;$("#popupContainer").append('<div id="PopupPanelPickerSingleValueSelectPopup"></div>');var m=function(){var a={params:{isVisible:!1}};e.renderPickerSingleValueSelectPopup(a)},n=function(){m(),f.pop()},o={controlName:"PickerSingleValueSelectPopup",params:{isVisible:!0,value:d,title:a,pickerName:c,config:i,closePopup:n,confirmCallback:function(a){n(),h(a)},isMobileDevice:b.isMobile(l),context:j,rowId:k}};e.renderPickerSingleValueSelectPopup(o),f.push(m)}function x(a,b,c,d){if(0===$("#ErrorPopupAlert").length){$("#popupContainer").append('<div id="ErrorPopupAlert"></div>');var g=function(){var a={commands:{},params:{isVisible:!1}};e.renderErrorPopupAlert(a)},h=c;(!h||"array"!==$.type(h)||"array"===$.type(h)&&0===h.length)&&(h=[{displayName:webconLocale.cPopupControllerOkButton,callback:function(){},result:null}]);var i={controlName:"ErrorPopupAlert",commands:h,params:{isVisible:!0,errors:a,validationErrors:b,closePopup:function(){g(),d&&d(),f.pop()}}};e.renderErrorPopupAlert(i),f.push(g)}}function y(a){$("#popupContainer").append('<div id="AttachmentsPreviewPopup"></div>');var b=function(){var a={params:{isVisible:!1}};e.renderAttachmentsPreview(a)},c={controlName:"AttachmentsPreview",params:{isVisible:!0,att:a,closePopup:function(){b(),f.pop()}}};e.renderAttachmentsPreview(c),f.push(b)}function z(a,b,c,d,g,h){$("#popupContainer").append('<div id="TreePopup"></div>');var i=function(){var a={params:{isVisible:!1}};e.showTreePopup(a)},j={displayName:a,controlName:b,value:c,config:d,controller:g,params:{isVisible:!0,closePopup:function(){i(),f.pop()},successCallback:h}};e.showTreePopup(j),f.push(i)}function A(a,b,c,d,g,h,i,j,k){$("#popupContainer").append('<div id="SubelementsEditView"></div>');var l=this,m={params:{isVisible:!0,fieldName:a,controller:g,isDisabled:c,rowId:k,internalRowId:b,title:d,save:h,silentClose:function(){i(),f.pop()},removeOnSilentClose:j,closePopup:function(){l.hideSubelementsEditView(),f.pop()}}};e.showSubelementsEditView(m),j?f.push(function(){i(!0)}):f.push(i)}function B(){var a={params:{isVisible:!1}};e.showSubelementsEditView(a)}function C(a,b){a.Errors.length>0?$("#popupContainer").append('<div id="PopupPanelSubelementsImportResultHasErrors"></div>'):$("#popupContainer").append('<div id="PopupPanelSubelementsImportResultNoErrors"></div>');var c=function(){var c={params:{isVisible:!1,errorsCount:a.Errors.length}};e.renderSubelementsImportResult(c),b&&b()},d={params:{isVisible:!0,allImported:a.RowsFound,justImported:a.ImportedRows,errorsCount:a.Errors.length,errors:a.Errors,closePopup:function(){c(),f.pop()}}};e.renderSubelementsImportResult(d),f.push(c)}return{showWFConfirmControl:h,showAddAttachmentWithCategory:j,showOverwriteAtt:l,showOverwriteOrAddNewAttachment:m,showOverwriteOrAddManyAttachments:n,showWFConfirmAction:r,showAddAttachmentWithCategoryInNative:o,showSelectAttachmentCategory:k,showForwardPopup:s,showPickerSelectPopup:v,showWFAlert:i,showErrorPopupAlert:x,showAttachmentsPreview:y,showTreePopup:z,showSubelementsEditView:A,hideSubelementsEditView:B,showPickerSingleValueSelectPopup:w,showPrivilegesPopup:t,showAttachLocalAttachmentsToSubelement:p,showAttachRelativeAttachmentsToSubelement:q,showSubelementsImportResult:C,showTimeoutStatisticsPopup:u}}),Injector.controller("SqlAttributeController",["Ajax","logger","ModelController","ErrorDisplayService","$Window"],function(a,b,c,d,e){function f(d,e,f,g,h){b.log("getSqlGridData");var i=c.getDataModel(),k={formParameters:{model:JSON.stringify(i)},fieldName:e,pageIndex:f},l="sqlgrid/"+d;a.post(l,k,function(a){a.IsSuccess?(b.trace("getSqlGridDataFinish"),g&&g(a.ResponseDetails)):j(a.Message,h)},function(a){j(a.body.message,h)})}function g(d,e,f,g){b.log("getSqlRowData");var h=c.getDataModel(),i={formParameters:{model:JSON.stringify(h)},fieldName:e},k="sqlrow/"+d;a.post(k,i,function(a){a.IsSuccess?(b.trace("getSqlGridDataFinish"),f&&f(a.ResponseDetails)):j(a.Message,g)},function(a){j(a.body.message,g)})}function h(a){d.displayErrorMessageOnTop(a,1)}function i(b,d){var f=c.getDataModel();console.log(f),Injector.resolve(["WebServiceController"],function(c){c.doSqlExport(f,d,function(b){var c=JSON.parse(b.responseDetails),d=e.initModel.runningAddress?e.initModel.runningAddress:"",f=encodeURIComponent(c.SqlGridDisplayName);e.location=d+a.getUrl("SqlGridGetExcel/"+c.ExportId)+"&suggestedName="+f},h,b)})}function j(a,b){a=a||webconLocale.cErrorWhileConnection,d.displayErrorMessageOnTop(a,0),b&&b(a)}return{getSqlGridData:f,getSqlRowData:g,doSqlGridExport:i}}),Injector.controller("StartupController",["logger","InitialModelFormer","InitialRenderService","CheckoutService","ErrorDisplayService","Swipe","ScriptsRunner","PanelOrderService","RedrawService","ValidationService","SignatureService","Store","$Window","SubelementsStartup","DocumentController","QueryStringParamsService","Localization"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){function r(){var a;if(Injector.resolve(["DeviceInfo"],function(b){a=b.isMobile(m.navigator)}),a){var b=m.matchMedia("(max-width: 991px)"),c=m.matchMedia("(max-width: 767px)");$("body").swipe({swipeRight:function(){b.matches&&f.right()},swipeLeft:function(){(c.matches||b.matches&&f.active.status)&&f.left()},threshold:100})}$(".backBlock").on("tap click",function(){f.clear()}).on("touchmove mousedown",function(a){a.preventDefault()}),$("#StatusPanelButton").click(function(){f.right()}),$("#ToolBoxPanelButton").click(function(){f.left()}),h.setProperlyBottomPanel(),$(m).resize(function(){h.setProperlyBottomPanelOnWidthChange()})}function s(){j.validateModelOnStart()||i.redrawMainPanels()}function t(b){a.error(b.message),console.log(b),e.addError(b),e.showErrorAlert()}function u(){var a=parseInt(p.getQueryStringParams(!0).path_id);try{if(a)return o.goToNextStep(a,!0),!0}catch(a){t(a)}return!1}function v(){try{e.clearErrors(),e.clearValidationErrors(),r(),c.renderErrorPanel();var f=b.createModel();l.saveStore(f),k.setDocumentSignature(),c.render(f),e.displayPendingErrors(),d.start(),u()||(g.runOnLoadScripts(),s(),n.startup(f.getState().subelements),a.log("appStarted")),q.initializeGlobalMoment()}catch(a){t(a)}}return{bootstrap:v}}),Injector.controller("SubelementModelController",[],function(){function a(a){var c={rows:[],wasInitializationCalled:a.wasInitializationCalled};return _.each(a.rows,function(a){c.rows.push(b(a))}),c}function b(a){var b={id:a.id,hash:a.hash,cells:[]};for(var c in a.cells)if(a.cells.hasOwnProperty(c)){var d;d="string"==typeof a.cells[c].data||a.cells[c].data instanceof String?a.cells[c].data:JSON.stringify(a.cells[c].data),b.cells.push({fieldName:c,type:a.cells[c].type,model:d})}return b}return{mapSubelementsModel:a}}),Injector.controller("SubelementsControllerCreator",["SaveRestrictionsService","logger","ChangeControllerCreator","SubelementsValidationWrapper","$Window","SubelementsPickerControllerWrapper","ModelController","WebServiceController","WCFTools","ErrorDisplayService","ColumnSumService","PopupController","RedrawService","ScriptsRunner","SubelementsStoreController","Ajax","ActivitiesWatcher","SubelementsSaveRestrictionsCheckerCreator","SubelementSaveRestrictionsService","SubelementsQueueService"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){function u(u,w,x,y,z,A,B,C,D){function E(a){j.displayErrorMessageOnTop(a,1)}function F(a){var b=function(b){return b.fieldName===a.toString()};return _.find(A,b)}function G(a,b){var c=g.getDataModel();h.initializeSubelements(c,u,function(b){if(b.IsSuccess){var c=JSON.parse(b.ResponseDetails);a(c),k.propagateSummaries(u),O(),q.registerActivity()}else b.Message&&j.displayErrorMessageOnTop(b.Message,1)},E,b)}function H(a){var b=g.getDataModel();h.doSubelementsExport(b,u,function(a){var b=JSON.parse(a.responseDetails),c=e.initModel.runningAddress?e.initModel.runningAddress:"",d=encodeURIComponent(b.SubelementsDisplayName);e.location=c+p.getUrl("SubelementsGetExcel/"+b.ExportId)+"&suggestedName="+d},E,a)}function I(a,b,c){var d=g.getDataModel();h.doSubelementsImport(d,u,a,function(a){var b=JSON.parse(a.responseDetails);c(b.Model),O(),q.registerActivity(),k.propagateSummaries(u),J(b)},E,b)}function J(a){l.showSubelementsImportResult(a)}function K(g,h){function i(){return o.findSubelementsControlByFieldName(u).control.data.rows.findIndex(function(a){return a.id===g.id})}function j(a,b,c){w(b,c,i());for(var d in c.pickerEntities)if(c.pickerEntities.hasOwnProperty(d)&&d&&c.pickerEntities[d].dataToPropagate)for(var e in c.pickerEntities[d].dataToPropagate.datas)if(c.pickerEntities[d].dataToPropagate.datas[e]){var f=c.pickerEntities[d].dataToPropagate.datas[e];a[f.fieldName]&&window.SetSubValue(C,i()+1,f.fieldName,f.viewModel)}}function n(a,b,l){var m=v(h),n={updateDependentControls:function(){var b=e.model[u],c=b.config.columns.find(function(b){return b.fieldName===a}),d=Injector.inject("SubelementsDependencyService").getDeepDependants(c.fieldName,b);c.dependantColumns&&D&&(m(!0),Injector.inject("SubelementsQueueService").queueRecalculateRow(u,g.id,d,function(a){D(u,a,d)},function(){m(!1)}))},resetDefaultsOnPostback:function(){},propagateSummary:function(){k.propagateSummary(u,a)},runAfterCallbackScripts:function(){_.find(e.model[u].config.columns,function(b){return b.fieldName===a}).generatesCallback&&O()}};l=l||{},l.currentRowNumber=i()+1,l.currentAttributeId=C;var o=d.createValidator(A,g,B.columnsConfiguration,u),p=e.model[u].config.columnsConfiguration[a],q={},s=!1;p&&p.config&&p.config.setsOtherFields&&(q=f.createController(u,i(),p.config,j,g.cells),s=!0);var t=r.create(u,g.id);c.create(g.cells,j,o,t,n,F(a),q,s,i()).change(a,b,l)}function p(c,d){function e(a){g.cells[c].saveRestrictions.isSavable!==a.isSavable&&z(a.isSavable,a.invalidValue,c,g.id,u,a.message)}if(b.debug("CheckSaveRestrictions:"+c),!g.cells[c]){var f="NoCellNamed:"+c+"inRow";throw b.error(f),new Error(f)}var h=B.columnsConfiguration[c].config,i=$.extend({},g.cells[c],{config:h});a.validateSubelementsCell(i,d,e,g,u,c)}function q(a,b,c,d){var f=$.extend(!0,{},g),h=$.extend(!0,{},e.model),j=$.extend(!0,{},A),k=_.find(e.model.controls,function(b){return b.fieldName===a});if(!t(g))throw new Error("rowIsNotEditable");l.showSubelementsEditView(a,g.id,b,k.displayName,{change:function(b,c){n(b,c);var d=o.findSubelementsControlByFieldName(a);g=d.control.data.rows[i()]},context:a,rowId:i(),checkSaveRestrictions:function(b,c){p(b,c);var d=o.findSubelementsControlByFieldName(a);g=d.control.data.rows[i()]},removeAllErrors:y},function(){l.hideSubelementsEditView()},function(){x(h),l.hideSubelementsEditView(),c(a,i(),f,j),m.redrawMainPanels(),m.redraw("PathPanel")},d,i())}function t(a){return"Edit"===a.editMode}function x(a){a.controls.forEach(function(b){e.model[b.fieldName]=a[b.fieldName]}),a.controls.forEach(function(a,b){for(var c in a)a.hasOwnProperty(c)&&(e.model.controls[b][c]=a[c])}),a.paths.forEach(function(a,b){for(var c in a)a.hasOwnProperty(c)&&(e.model.paths[b][c]=a[c])})}function y(a){s.removeAllErrors(a,g,u)}return{change:n,checkSaveRestrictions:p,editRow:q,context:u,rowId:i(),removeAllErrors:y}}function L(a){var b=e.model[u].config;return k.calculateSums(b,a)}function M(a,b){var c=v(a);c(!0);var d=g.getDataModel();t.queueAddNewSubelementRow(d,u,function(a){if(a.IsSuccess){var c=JSON.parse(a.ResponseDetails,i.dateTimeReviver),d=c.rows.reduce(function(a,b){return b.id<a.id?b:a});x(c),k.propagateSummaries(u),O(),q.registerActivity(),b(d)}else a.Message&&j.displayErrorMessageOnTop(a.Message,1)},E,c)}function N(a,b){var c=v(b);c(!0);var d=g.getDataModel();h.cloneSubelementRow(d,u,a,function(a){if(a.IsSuccess){var b=JSON.parse(a.ResponseDetails,i.dateTimeReviver);y(b),k.propagateSummaries(u),O(),q.registerActivity()}else a.Message&&j.displayErrorMessageOnTop(a.Message,1)},E,c)}function O(){var a=e.model[u].config,b=a.afterCallbackScripts;_.each(b,function(a){n.runClientScript(a,{})})}return{createForRow:K,addRow:M,cloneRow:N,getColumnSums:L,restoreDefaultRows:G,doSubelementsExport:H,doSubelementsImport:I,runAfterCallbackScripts:O}}function v(a){return a?_.debounce(a,75):function(){}}return{createForControl:u}}),Injector.factory("SubelementsPickerControllerWrapper",["PickerController"],function(a){function b(b,c,d,e,f){return{setOtherFields:function(g,h){return a.setOtherColumns(g,h,b,c,d,e,f)}}}return{createController:b}}),Injector.controller("TabPanelController",["FormInfo","$Window"],function(a,b){function c(a){return Guard.notNull(a,"tabPanelFieldName"),e(a).activeTabId}function d(b){Guard.notNull(b,"tabPanelFieldName");var c,d=k(h(a,b));return d&&(c=parseInt(d))&&!isNaN(c)?c:null}function e(a){return _.find(b.model.controls,function(b){return b.fieldName===a})}function f(a){Guard.notNull(a,"tabPanelFieldName");var c=_.map(b.model[a].config.members,function(a){return _.find(b.model.controls,function(b){return b.fieldName===a})});return _.find(c,function(a){return a.isVisible})}function g(b,c){Guard.notNull(b,"tabPanelFieldName"),Guard.notNull(c,"id"),e(b).activeTabId=c,j(h(a,b),c)}function h(a,b){return a.wfdId+"_"+a.stepFormId+"_"+b}function i(a){try{var c=b[a],d="__storage_test__";return c.setItem(d,d),c.removeItem(d),!0}catch(a){return!1}}function j(c,d){!a.isNew&&i("sessionStorage")&&b.sessionStorage.setItem(c,d)}function k(a){return i("sessionStorage")?b.sessionStorage.getItem(a):null}return{getActiveTabId:c,getActiveTabIdFromStorage:d,getVisibleTab:f,setActiveTabId:g}}),Injector.controller("TaskPanelController",["FormInfo","Ajax"],function(a,b){function c(a){if([1,2,3].indexOf(a)<0)throw new Error("invalidFlagValue");b.put("flag/"+a)}function d(b){var d=a.taskDetailsInfo;Guard.notNull(d,"taskDetailsInfo"),c(b),d.userFlag=b}return{setUserFlag:d}}),Injector.instance("TimeoutsController",["Ajax","ErrorDisplayService"],function(a,b){function c(a){return"/timeout/"+a}
function d(d){var e=c("stats");a.get(e,d,function(a){b.displayErrorMessageOnTop(a,1)})}function e(d,e){var f=c(d+"/resetExecution");a.put(f,e,function(a){b.displayErrorMessageOnTop(a,1)})}function f(d,e){var f=c(d+"/resetErrorExecution");a.put(f,e,function(a){b.displayErrorMessageOnTop(a,1)})}return{getTimeoutStatistics:d,resetExecutions:e,resetErrorExecutions:f}}),Injector.controller("AttachmentsUpdater",["FormInfo"],function(a){function b(){a.categoriesChanged=!0}return{update:b}}),Injector.controller("AttributeDataUpdater",["Ajax","ModelController","ErrorDisplayService","logger","UpdateAttBlockingPanelService"],function(a,b,c,d,e){function f(b,c){var d={form:{model:i()},fieldName:b};e.block(),a.post("attribute/model",d,function(a){if(a.IsSuccess){var d=JSON.parse(a.ResponseDetails);c(b,d.value.data),e.unblock()}else h(a.Message,a.DiagnosticMessage)},function(a){g(a)})}function g(a){d.log(a),c.displayErrorMessageOnTop(webconLocale.cErrorWhileConnection,0)}function h(a,b){d.error(b),c.displayErrorMessageOnTop(a,0),e.unblock()}function i(){var a=b.getDataModel();return JSON.stringify(a)}return{update:f}}),Injector.factory("ControlUpdaterFactory",[],function(){function a(a){Guard.notNull(a,"control");var b,c=Injector;switch(a.type){case"Choose":case"Email":case"FloatingPoint":case"GoogleMap":b=c.inject("AttributeDataUpdater");break;case"SqlGrid":case"SqlRow":b=c.inject("SqlGridUpdater");break;case"SystemAttachments":b=c.inject("AttachmentsUpdater");break;case"Subelements":b={update:c.inject("SubelementsQueueService").queueUpdateSubelements};break;default:b=c.inject("EmptyUpdater")}return b}return{forControl:a}}),Injector.factory("EmptyUpdater",[],function(){function a(){}return{update:a}}),Injector.controller("SqlGridUpdater",["ComponentContainerService","$Window"],function(a,b){function c(c){var d=_.find(b.model.controls,function(a){return a.fieldName===c.toString()});if(d&&d.isVisible&&a.isRegistered(c)){var e=a.getComponent(c);_.each(e,function(a){a.getGridData(1)})}}return{update:c}}),Injector.controller("SubelementsUpdater",["Ajax","ModelController","ErrorDisplayService","logger","Store"],function(a,b,c,d,e){function f(b,c){var d={form:{model:j()},fieldName:b};a.post("attribute/recalculate",d,function(a){if(a.IsSuccess){var d=JSON.parse(a.ResponseDetails);e.dispatch(webcon.redux.SubelementsActions.createApplyRecalculateAction(b,d)),c()}else i(a.Message,a.DiagnosticMessage)},function(a){h(a)})}function g(b,c,d,e){var f={formParameters:{model:j()},fieldName:b,affectedColumns:d,id:c};a.post("attribute/recalculateRow",f,function(a){if(a.IsSuccess){var b=JSON.parse(a.ResponseDetails);e(b)}else i(a.Message,a.DiagnosticMessage)},function(a){h(a)})}function h(a){d.log(a),c.displayErrorMessageOnTop(webconLocale.cErrorWhileConnection,0)}function i(a,b){d.error(b),c.displayErrorMessageOnTop(a,0)}function j(){var a=b.getDataModel();return JSON.stringify(a)}return{update:f,updateSingleRow:g}}),Injector.controller("WebServiceController",["Ajax","logger","BlockingPanelService","WaitingPanelService"],function(a,b,c,d){function e(b,d){c.disableAll(),a.put("finishAllUsersTasks",function(a){r(a,b)},function(a){r(a,d)})}function f(b,d){c.disableAll(),a.get("analysis",function(a){r(a,b)},function(a){r(a,d)})}function g(a,b,c){Guard.notNull(a,"Model"),s("GoToNextStep",{model:JSON.stringify(a)},b,c)}function h(a,b,c){Guard.notNull(a,"Model"),s("SaveElement",{model:JSON.stringify(a)},b,c)}function i(a,b,c){Guard.notNull(a,"Model"),s("delete",{model:JSON.stringify(a)},b,c)}function j(a,b,c,d,e,f,g,h){Guard.notNull(a,"Model"),s("ForwardElement",{form:{model:JSON.stringify(a)},taskIds:e,sendEmail:b,additionalInformation:c,taskDescription:d,peoplePickerResult:f},g,h)}function k(a,b,c,d,e){Guard.notNull(a,"Model"),s("WFPrivilegesAdd",{form:{model:JSON.stringify(a)},peopleToAddPrivileges:b,addPrivilegesType:c,elementId:a.formInfo.wfdId,companyId:a.formInfo.companiesInfo.currentCompany.id},d,e)}function l(a,b,c,d){Guard.notNull(a,"Model"),s("WFPrivilegesRemove",{form:{model:JSON.stringify(a)},privilegeIdentifier:b,elementId:a.formInfo.wfdId},c,d)}function m(a,b,c,d){Guard.notNull(a,"Model"),Guard.notNull(b,"Action"),s("InvokeMenuAction",{form:{model:JSON.stringify(a)},id:b.id},c,d)}function n(a,b,c,d,e){Guard.notNull(a,"model"),Guard.notNull(b,"fieldName"),s("GetNewRow",{formParameters:{model:JSON.stringify(a)},fieldName:b},c,d,e)}function o(a,b,c,d,e,f){Guard.notNull(a,"model"),Guard.notNull(b,"fieldName"),Guard.notNull(c,"sourceCloneRowId"),s("CloneRow",{formParameters:{model:JSON.stringify(a)},fieldName:b,cloneSourceRowId:c},d,e,f)}function p(a,b,c,d,e){Guard.notNull(a,"model"),Guard.notNull(b,"fieldName"),s("Initialize",{formParameters:{model:JSON.stringify(a)},fieldName:b},c,d,e)}function q(a,b,c,d,e){Guard.notNull(a,"model"),Guard.notNull(b,"fieldName"),s("Recalculate",{formParameters:{model:JSON.stringify(a)},fieldName:b},c,d,e)}function r(a,b,e){e&&d.hideLoadingPanel(e),c.enableAll(),b&&b(a)}function s(b,e,f,g,h){h?d.showLoadingPanel(h):c.disableAll(),a.post(b,e,function(a){r(a,f,h)},function(a){r(a,g,h)})}function t(a,b,c,d,e){Guard.notNull(a,"model"),Guard.notNull(b,"fieldName"),s("ExportToExcel",{formParameters:{model:JSON.stringify(a)},fieldName:b},c,d,e)}function u(a,b,c,d,e){Guard.notNull(a,"model"),Guard.notNull(b,"fieldName"),s("SqlGridExportToExcel",{formParameters:{model:JSON.stringify(a)},fieldName:b,pageIndex:0},c,d,e)}function v(a,b,c,d,e,f){Guard.notNull(a,"model"),Guard.notNull(b,"fieldName"),s("ImportFromExcel/"+c,{formParameters:{model:JSON.stringify(a)},fieldName:b},d,e,f)}return{finishAllUsersTasks:e,goToNextStep:g,saveElement:h,deleteElement:i,forwardElement:j,invokeMenuAction:m,addNewSubelementRow:n,cloneSubelementRow:o,initializeSubelements:p,performSubelementsCallback:q,addPrivileges:k,removePrivileges:l,getElementAnalysis:f,doSqlExport:u,doSubelementsExport:t,doSubelementsImport:v}}),window.webcon=function(a){return(a.mixins=a.mixins||{}).AttachmentItemLogic={clickSave:function(){var a=this;Injector.resolve(["AttachmentController","WaitingPanelService"],function(b,c){var d=a.state.item;d.name=a.state.editName,d.description=a.state.editDescription,c.showLoadingPanel(a.waitingPanelCallback),b.updateAttachment(d,function(){var b=a.getImageUrl(d.name,d.attId,d.version,d.isWithoutContent);a.setState({isInEdit:!a.state.isInEdit,item:d,imageUrl:b}),c.hideLoadingPanel(a.waitingPanelCallback)},function(){c.hideLoadingPanel(a.waitingPanelCallback)})})},deleteCommand:function(){var a=this;Injector.resolve(["AttachmentController","WaitingPanelService","PopupController"],function(b,c,d){d.showWFConfirmAction(webconLocale.cDelete,webconLocale.cDeleteConfirm,function(){c.showLoadingPanel(a.waitingPanelCallback),b.deleteAttachment(a.state.item.attId,function(){c.hideLoadingPanel(a.waitingPanelCallback),a.props.removeAttachment()},function(){c.hideLoadingPanel(a.waitingPanelCallback)})})})},waitingPanelCallback:function(a){this.setState({isLoading:a})}},a}(window.webcon||{}),window.webcon=function(a){return(a.mixins=a.mixins||{}).AttachmentItemsSorter={sortAttachments:function(a,b){if(0===b)return a;var c;switch(b){case 1:c=function(a){return a.name};break;case 2:c=function(a){return a.description};break;case 3:case 4:c=function(a){return a.date};break;default:throw new Error("NotSupportedAttachmentSortingType:"+b)}return a=_.sortBy(a,c),4==b&&(a=a.reverse()),a}},a}(window.webcon||{}),window.webcon=function(a){return(a.mixins=a.mixins||{}).AttachmentsFormatter={shouldCreateTab:function(a){if(0===a.tabId)return!0;for(var b=0;b<a.groups.length;b++)if(0!==a.groups[b].items.length)return!0;return!1},shouldCreateGroup:function(a){return 0!==a.items.length},shouldShowGroups:function(a){return!!a&&(1===a.length?!this.containsDefaultGroup(a):2!==a.length||!(this.containsDefaultGroup(a)&&this.containsEmailGroup(a)))},containsDefaultGroup:function(a){return _.findWhere(a,{name:""})},containsEmailGroup:function(a){var b=this;return _.filter(a,function(a){return b.isConversationGroup(a.name)}).length>0},componentDidMount:function(){Injector.resolve(["DataPairHelper","FormInfo"],function(a,b){this.dataPairHelper=a,this.categories=b.areAttachmentCategories},this)},sortGroups:function(a){var b=this,c=_.find(a,function(a){return b.isConversationGroup(a.name)});return a=_.without(a,c),a=_.sortBy(a,function(a){return a.name}),c&&a.push(c),a},isConversationGroup:function(a){return-1!==a.indexOf("emailgroup#")}},a}(window.webcon||{}),window.webcon=function(a){return(a.mixins=a.mixins||{}).WFUploadAttachmentLogic={getInitialState:function(){return{categories:[]}},componentDidMount:function(){this.registerUploadPlugin(),this.props.params.chooseCategory&&this.loadCategories()},addAttachmentFromUploadPlugin:function(a){this.props.params.addCallback(a)},addPictureFromNative:function(){var a=this;Injector.resolve(["ErrorDisplayService"],function(b){var c={};Camera.takePicture(function(b){c=b,c.attId=c.id,c.date=new Date,c.category={translatedName:"",databaseValue:"",id:""},c.version||(c.version=0),a.props.params.chooseCategory&&(c.category=a.state.selected),a.props.params.uploadStart(),a.props.params.addCallbackNative(c),a.props.params.closePopup()},function(c){a.props.params.uploadFail(!0),a.props.params.closePopup(),c&&"canceled"!==c.toLowerCase()&&"cancelled"!==c.toLowerCase()&&"cancelled."!==c.toLowerCase()&&b.displayErrorMessageOnTop(c,0)})})},addRecordFromNative:function(){var a=this;Injector.resolve(["ErrorDisplayService"],function(b){var c={};Recorder.recordSound(function(b){c=b,c.attId=c.id,c.date=new Date,c.category={translatedName:"",databaseValue:"",id:""},c.version||(c.version=0),a.props.params.chooseCategory&&(c.category=a.state.selected),a.props.params.uploadStart(),a.props.params.addCallbackNative(c),a.props.params.closePopup()},function(c){a.props.params.uploadFail(!0),a.props.params.closePopup(),b.displayErrorMessageOnTop(c,0)})})},registerUploadPlugin:function(){var a=this;Injector.resolve(["AttachmentsUploadService","AttachmentController"],function(b,c){var d=function(){a.props.params.uploadStart()},e=function(b){a.props.params.uploadFail(b)},f=function(b){a.props.params.chooseCategory&&(b.category=c.idHashDefaultName(a.state.selected)),b.isLastFile&&a.props.params.closePopup(),a.props.params.uploadAdd(b)};b.registerUpload(a.fileupload,a.addAttachmentFromUploadPlugin,d,e,f)})},loadCategories:function(){var a=this;Injector.resolve(["AttachmentController","BlockingPanelService"],function(b,c){c.disableAll(),b.getCategories(function(b){a.setState({categories:b.categories,selected:b.defaultCategory}),c.enableAll()},function(){c.enableAll(),a.props.params.closePopup()})})},prepareCategories:function(){var a=this.state.categories.map(function(a){return{name:a.translatedName,value:a}});return{categories:a,selectedItem:this.state.selected?this.state.selected:a.length>0?a[0].value:""}},change:function(a){this.setState({selected:a})},cancel:function(){this.props.params.closePopup()}},a}(window.webcon||{}),window.webcon=function(a){return(a.mixins=a.mixins||{}).ChartCreator={drawChart:function(a,b,c){$(b).attr("align","center"),$(b).children().remove(),$(b).parent().find(".chart-title").empty(),this.drawCorrectChart(a,b,c)},parseDecimalValue:function(a){var b;return Injector.resolve(["ClientInfo"],function(a){b=a.language},this),parseFloat(a).toLocaleString(b,{minimumFractionDigits:2})},drawCorrectChart:function(a,b,c){if(0===a.dataParts.length){$(b).parent().find(".chart-title").append(a.chartTitle);var d=$("<div>").css({height:c,"font-size":"18px","font-weight":"bold"}),e=$("<span>").css({position:"relative",top:"50%"}).append("undefined"!=typeof webconLocale?webconLocale.cNoDataFound:G_NODATAAVAILABLE);return d.append(e),void $(b).append(d)}switch(a.chartType){case 1:$(b).append("<svg>"),this.drawMultilineChart(a,b,c);break;case 2:$(b).append("<svg>"),this.drawBarChartChart(a,b,c);break;case 3:case 4:this.drawPieChartChart(a,b,c)}$(b).css("height","100%")},drawBarChartChart:function(a,b,c){var d=this;nv.addGraph(function(){var e,f=a.dataParts,g=d.getColor(a),h=d.getSectionColors(g,a),i=0,j=[];e=f.length>0?f[0].values.map(function(a){return{key:a.Key,values:f.map(function(b){return j[i++]=b.label,{x:b.label,y:d.getValueFromDictionary(b.values,a.Key)}}),color:d.getSectionColor(h,a.Key)}}):[];var k=e.length>1,l=$(b).parents("[id=HeaderPanel],[id=LeftPanel],[id=RightPanel],[id=BottomPanel]").width(),m=d.getMaxLabelLength(j),n=1===a.labelsDisplayMode?0:-60,o=1===a.labelsDisplayMode?c:c-4.2*m,p=2===a.labelsDisplayMode,q=nv.models.multiBarChart(a).showControls(k).groupSpacing(.1).height(o).width(l);return q.legend.margin({top:5,bottom:35}),q.legend.rightAlign(!1),q.xAxis.tickFormat(function(b){if(a.formatXAxisAsDecimal)return d.parseDecimalValue(b);var c=b;return p&&c.length>20?c.substring(0,20)+"...":c}).axisLabel(a.xAxisCaption).rotateLabels(n).showMaxMin(!1),q.yAxis.tickFormat(function(b){return a.formatYAxisAsDecimal?d.parseDecimalValue(b):b}),q.tooltip.valueFormatter(function(b){return a.formatYAxisAsDecimal?d.parseDecimalValue(b):b}),q.tooltip.headerFormatter(function(b){return a.formatXAxisAsDecimal?d.parseDecimalValue(b):b}),0===n?q.xAxis.axisLabelDistance(5):q.xAxis.axisLabelDistance(4*m),q.yAxis.axisLabel(a.yAxisCaption).axisLabelDistance(0),d.addTitleToChart(b,a.chartTitle),window.addEventListener("scroll",function(){q.tooltip.hidden(!0)}),document.addEventListener("touchmove",function(){q.tooltip.hidden(!0)},!0),d3.select("#"+b.id+" svg").datum(e).call(q),d.setChartMargin(q,a.yAxisCaption),$("#"+b.id+" svg").css({height:c}),$("#"+b.id+" svg").css({display:"inline"}),nv.utils.windowResize(function(){if(document.getElementById(b.id)){var a=$(b).parents("[id=HeaderPanel],[id=LeftPanel],[id=RightPanel],[id=BottomPanel]").width();q.width(a),q.update()}}),q})},drawPieChartChart:function(a,b,c){var d,e=this,f=$(b).parents("[id=HeaderPanel],[id=LeftPanel],[id=RightPanel],[id=BottomPanel]").width(),g=a.dataParts,h=[],i=e.getColor(a);2==i.length?(d=new KolorWheel(i[0]).abs(i[1],a.dataParts.length+1).resultList,d.splice(0,1)):d=new KolorWheel(i).rel(360,25,40,a.dataParts.length/3).rel(0,0,[-10,0,10]).resultList;for(var j=0;j<g.length;j++)h[j]={label:g[j].label,value:g[j].values[0].Value,color:d[j].getHex()};var k=4===a.chartType?"50%":"0%",l=new d3pie(b.id,{size:{canvasHeight:c,canvasWidth:f,pieOuterRadius:"90%",pieInnerRadius:k},data:{content:h},tooltips:{enabled:!0,type:"placeholder",string:"{label}: {value}({percentage}%)",styles:{backgroundOpacity:.8,fadeInSpeed:0,color:"#ffffff"},placeholderParser:function(b,c){a.formatYAxisAsDecimal&&(c.value=e.parseDecimalValue(c.value)),a.formatXAxisAsDecimal&&(c.label=e.parseDecimalValue(c.label))}},labels:{outer:{pieDistance:10},inner:{hideWhenLessThanPercentage:3},mainLabel:{fontSize:"8pt"},percentage:{color:"#ffffff",decimalPlaces:0},value:{color:"#adadad",fontSize:"8pt"},lines:{enabled:!0},truncation:{enabled:!0},formatter:function(b){return"percentage"!==b.part?a.formatXAxisAsDecimal?e.parseDecimalValue(b.label):b.label:b.label+"%"}},effects:{pullOutSegmentOnClick:{effect:"linear",speed:400,size:8}},misc:{gradient:{enabled:!0,percentage:100}}});e.addTitleToChart(b,a.chartTitle);var m=function(){var a=$(b).parents("[id=HeaderPanel],[id=LeftPanel],[id=RightPanel],[id=BottomPanel]").width();l.options.size.canvasWidth!==a&&(l.options.size.canvasWidth=a,l.destroy(),l.redraw())};return $(window).resize(_.debounce(m,100)),l},drawMultilineChart:function(a,b,c){var d=this;nv.addGraph(function(){var e,f=a.dataParts,g=d.getColor(a),h=d.getSectionColors(g,a),i=[];e=f.length>0?f[0].values.map(function(a){return{key:a.Key,values:f.map(function(b,c){return{x:d.getLabelValues(b,c,i),y:d.getValueFromDictionary(b.values,a.Key)}}),color:d.getSectionColor(h,a.Key)}}):[];var j=d.getMaxLabelLength(i),k=$(b).parents("[id=HeaderPanel],[id=LeftPanel],[id=RightPanel],[id=BottomPanel]").width(),l=1===a.labelsDisplayMode?0:-60,m=1===a.labelsDisplayMode?c:c-4.5*j,n=2===a.labelsDisplayMode,o=nv.models.lineChart().height(m).width(k);return o.xAxis.tickFormat(function(b){if(a.formatXAxisAsDecimal)return d.parseDecimalValue(i[b]);var c=i[b];return n&&c.length>20?c.substring(0,20)+"...":c}).axisLabel(a.xAxisCaption).rotateLabels(l).showMaxMin(!1),o.yAxis.tickFormat(function(b){return a.formatYAxisAsDecimal?d.parseDecimalValue(b):b}),o.tooltip.valueFormatter(function(b){return a.formatYAxisAsDecimal?d.parseDecimalValue(b):b}),o.tooltip.headerFormatter(function(b){return a.formatXAxisAsDecimal?d.parseDecimalValue(i[b]):i[b]}),0===l?o.xAxis.axisLabelDistance(-10):o.xAxis.axisLabelDistance(4.5*j),o.yAxis.axisLabel(a.yAxisCaption),d.addTitleToChart(b,a.chartTitle),window.addEventListener("scroll",function(){o.tooltip.hidden(!0)}),document.addEventListener("touchmove",function(){o.tooltip.hidden(!0)},!0),d3.select("#"+b.id+" svg").datum(e).transition().duration(500).call(o),d.setChartMargin(o,a.yAxisCaption),$("#"+b.id+" svg").css({height:c}),$("#"+b.id+" svg").css({display:"inline"}),nv.utils.windowResize(function(){if(document.getElementById(b.id)){var a=$(b).parents("[id=HeaderPanel],[id=LeftPanel],[id=RightPanel],[id=BottomPanel]").width();o.width(a),o.update()}}),o})},setChartMargin:function(a,b){var c=0,d=Math.max.apply(Math,a.yAxis.scale().domain());d=this.parseDecimalValue(d);var e=d.toString().length;a.yAxis.axisLabelDistance(6*e-50),b&&(c=20),a.margin({left:6*e+c,right:60}),a.update&&"function"==typeof a.update&&a.update()},addTitleToChart:function(a,b){b&&($(a).find("svg").css({"padding-top":"5px"}),$(a).parent().find(".chart-title").append(b))},getMaxLabelLength:function(a){for(var b=0,c=0;c<a.length;c++)a[c].length>b&&(b=a[c].length);return b>20?23:b},getValueFromDictionary:function(a,b){for(var c=0;c<a.length;c++)if(a[c].Key==b)return a[c].Value;return 0},getSectionColor:function(a,b){for(var c=0;c<a.length;c++)if(a[c].Key==b)return a[c].Value},getContrastingColor:function(a){return a.r>128&&a.g>128||a.r>128&&a.b>128||a.g>128&&a.b>128?"#000000":"#FFFFFF"},hexToRgb:function(a){var b=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a);return b?{r:parseInt(b[1],16),g:parseInt(b[2],16),b:parseInt(b[3],16)}:null},getColor:function(a){switch(a.chartColorOptions){case 1:return"#475465";case 2:var b="#F5F5F5";return[b,this.getContrastingColor(this.hexToRgb(b))];case 3:return a.colorHex;case 4:return null}},getHueValues:function(a){for(var b=[],c=0;c<18;c++)b[c]=a,a=a+20>360?360-a+20:a+20;return b},getSectionColors:function(a,b){if(0===b.dataParts.length)return null;var c;if(a){var d,e=b.dataParts[0].values.length;if(2==a.length){var f=new KolorWheel(a[0]);d=f.abs(a[1],e+1).resultList,d.splice(0,1)}else{var g=new KolorWheel(a);d=g.abs(this.getHueValues(g.h),-1,-1,e).resultList}c=b.dataParts[0].values.map(function(a,b){return{Value:d[b].getHex(),Key:a.Key}})}else c=b.sectionColors;return c},getLabelValues:function(a,b,c){return c[b]||(c[b]=a.label),b}},a}(window.webcon||{}),window.webcon=function(a){return(a.mixins=a.mixins||{}).DropdownOutsideClick={displayName:"DropdownOutsideClick",componentWillMount:function(){var a=this;document.addEventListener("click",a.closeMenu),document.addEventListener("touchend",a.closeMenu)},componentWillUnmount:function(){var a=this;document.removeEventListener("click",a.closeMenu),document.removeEventListener("touchend",a.closeMenu)},closeMenu:function(a){var b=this.dropdown;b&&!b.contains(a.target)&&b.classList.remove("open")}},a}(window.webcon||{}),window.webcon=function(a){return(a.mixins=a.mixins||{}).EmailBase={displayName:"EmailBase",propTypes:{name:PropTypes.string.isRequired,value:PropTypes.object.isRequired,config:PropTypes.object.isRequired},getInitialState:function(){return this.props.value},componentWillMount:function(){Injector.resolve(["EmailAttributeService"],function(a){this.emailAttributeService=a},this)},componentWillReceiveProps:function(a){this.setState(a.value)},getHref:function(){return this.emailAttributeService.getHref(this.state.value)},sendEmail:function(a){this.emailAttributeService.sendEmail(this),a.stopPropagation(),a.preventDefault()}},a}(window.webcon||{}),window.webcon=function(a){return(a.mixins=a.mixins||{}).FloatingPointBase={displayName:"FloatingPoint",propTypes:{name:PropTypes.string.isRequired,disabled:PropTypes.bool.isRequired,value:PropTypes.object.isRequired,controller:PropTypes.object.isRequired,config:PropTypes.object.isRequired,registerFocus:PropTypes.func},getInitialState:function(){Injector.resolve(["NumbersService"],function(a){this.number=a.getNumberFormat(this.props.config),this.keyboard=a.getNumberKeyboard(this.number.getSeparators()),this.validationErrorCodes=a.numberValidation.errorCodes},this),this.config=this.props.config,this.mode="view";var a=this.props.value.saveRestrictions;if(a&&!1===a.isSavable)return{formattedValue:{formatted:a.invalidValue}};var b=this.props.value.data.value;return b||0===b||(b=""),{formattedValue:this.number.validate(b)}},componentWillReceiveProps:function(a){if(!_.isEqual(_.omit(this.props,"controller"),_.omit(a,"controller"))){var b=a.value.saveRestrictions;if(b&&!b.isSavable){var c=Object.assign({},this.state.formattedValue,{formatted:b.invalidValue});return void this.setState({formattedValue:c})}var d=a.value.data,e=d?d.value:null;e||0===e||(e="");var f=this.number.validate(e);d&&void 0!==d.overridenCurrencyCode&&d.overridenCurrencyCode!==this.state.overridenCurrencyCode?this.setState({formattedValue:f,overridenCurrencyCode:d.overridenCurrencyCode}):this.setState({formattedValue:f})}},endEdit:function(a){var b=this,c=this.props;if(b.setState({isFocused:!1}),"edit"===b.mode){b.mode="view",c.controller.checkSaveRestrictions(c.name,a.target.value);var d=b.number.unformat(a.target.value),e=c.value;if(!e&&a.target.value||e&&d.unformatted!==e.value){var f=!d.isValid&&d.errorCode!==b.validationErrorCodes.tooManyDecimalPlaces||isNaN(d.unformatted)?null:d.unformatted;c.controller.change(c.name,{value:f})}var g=b.number.formatView(a.target.value);b.setState({formattedValue:g,showTooltip:!1})}},hasFocus:function(){var a=this;a.mode="edit";var b=this.props.registerFocus;b&&b(),a.setState({isFocused:!0});var c=a.state.formattedValue;if(c.formatted){var d=a.number.formatEdit(c.formatted);if(0!==a.number._formatInfo.amountFormat&&""!==c.formatted&&d.isValid){var e=a.input;a.keyboard.moveCaretAndSetValue(e,c.formatted,d.formatted,function(){a.setState({formattedValue:d})})}else a.setState({formattedValue:d})}},getCurrencyCode:function(a){return a||(a=this.props),this.state.overridenCurrencyCode?this.state.overridenCurrencyCode:a.config.currencyCode}},a}(window.webcon||{}),window.webcon=function(a){return(a.mixins=a.mixins||{}).GoogleMapBase={mapCenter:function(a){var b=this.state;void 0!==b.address?(new google.maps.Geocoder).geocode({address:b.address},function(c,d){a(d==google.maps.GeocoderStatus.OK?c[0].geometry.location:new google.maps.LatLng(b.latitude||0,b.longitude||0))}):a(new google.maps.LatLng(b.latitude,b.longitude))},mapType:{0:"roadmap",1:"satellite",2:"hybrid",3:"terrain"},getInitialState:function(){var a=this,b=this.props.value;return a.config=a.props.config,0===a.config.locationType?(a.prevState={latitude:b.latitude,longitude:b.longitude},{latitude:b.latitude,longitude:b.longitude}):(a.prevState={address:b.address},{address:b.address})},componentWillMount:function(){this.style={width:"100%",height:this.config.height+"px"}},componentWillReceiveProps:function(a){var b,c=a.value,d=this;b=0===d.config.locationType?{latitude:c.latitude,longitude:c.longitude}:{address:c.address},d.setState(b,function(){_.isEqual(d.prevState,b)||(d.prevState=$.extend(!0,{},b),d.mapCenter(function(a){d.state.marker.setPosition(a),d.state.map.panTo(a)}))})},initMap:function(a){var b=this;b.mapCenter(function(c){var d={center:c,zoom:12,mapTypeControl:!1,mapTypeId:b.mapType[b.config.mapType],opened:!1},e=b.map,f=new google.maps.Map(e,d),g=new google.maps.Marker({position:c,map:f,title:""});a&&google.maps.event.addListener(f,"click",function(a){b.handleMapClick(a.latLng)}),$(e).on("shown.webcon.maps",function(){var a=f.getCenter();google.maps.event.trigger(f,"resize"),f.setCenter(a)}),b.setState({map:f,marker:g})})}},a}(window.webcon||{}),window.webcon=function(a){return(a.mixins=a.mixins||{}).IntegerFormatter={CheckIfNumberAndFix:function(a){var b=!1,c="";if(0===a.length)return a;0===a.indexOf("-")&&(b=!0);for(var d=0;d<=a.length-1;d++){var e=a.charCodeAt(d);e>=48&&e<=57&&(c+=a.charAt(d))}for(;c.length>1&&"0"==c.charAt(0);)c=c.slice(1);return b&&"0"!=c.charAt(0)?"-"+c:c}},a}(window.webcon||{}),window.webcon=function(a){return(a.mixins=a.mixins||{}).PickerBase={assignPickerValues:function(a,b){for(var c=0;c<b.length;++c){var d={isResolved:b[c].isResolved,key:b[c].key,name:b[c].name,databaseValue:b[c].databaseValue,dataToPropagate:b[c].dataToPropagate,hasDataToPropagate:b[c].hasDataToPropagate,elementId:b[c].elementId,showAsALink:b[c].showAsALink};this.isItemSelected(a,d)||a.push(d)}},componentWillReceiveProps:function(a){if(!_.isEqual(this.props,a)){var b={pickerEntities:[]};(this.props.name||this.props.isValuesBind)&&(b=a.value,this.setState({isInCustomValueMode:b.hasCustomValue,value:Object.assign({},b)}))}},getContent:function(a){return{__html:a}},getInitialState:function(){var a,b=this.props,c={pickerEntities:[]};return b.isValuesBind&&(c=b.value,a=b.config),b.name&&(c=b.value,a=b.config),a||(a={allowMultiValue:!0,usePeopleDataSource:!0,choiceMode:7,selectedGroupId:-1}),b.type&&(a.type=b.type),{isInCustomValueMode:c.hasCustomValue,value:Object.assign({},c),config:Object.assign({},a)}},handleBlurCustomValue:function(){this.updateModel(this.state.value)},handleChangeCustomValue:function(a,b){var c=Object.assign({},this.state.value);c.customValue=b,this.setState({value:c})},handleChangeModeClick:function(){var a=this,b=!this.state.isInCustomValueMode,c=Object.assign({},this.state.value);c.hasCustomValue=b,this.updateModel(c),this.setState({isInCustomValueMode:b,value:c},function(){b&&a.refCustomValueControl&&a.refCustomValueControl.focus()}),this.state.config.javaScriptOnModeChange&&Injector.resolve(["ScriptsRunner"],function(b){b.runClientScript(a.state.config.javaScriptOnModeChange)}),this.state.config.enableFieldsOnModeChange&&Injector.resolve(["JsApiController"],function(c){var d=b?c.enableControl:c.disableControl;_.each(a.state.config.otherFields,function(a){d(a)})})},replaceValue:function(a,b){this.setValue(a,b,!0)},setValue:function(a,b,c){b||(b="");var d=this.state.value,e=$.extend({},d);e.pickerEntities=$.merge([],d.pickerEntities),e.rawValue=b,e.valueNotValid=!!b,c&&(e.pickerEntities.length=0),this.assignPickerValues(e.pickerEntities,a),this.props.updatePickerValueCallback&&this.props.updatePickerValueCallback(e),this.props.name&&this.props.controller.checkSaveRestrictions(this.props.name,e),this.updateModel(e),this.setState({value:e})},updateModel:function(a){this.props.name&&this.props.controller.change(this.props.name,a)}},a}(window.webcon||{}),window.webcon=function(a){return(a.mixins=a.mixins||{}).PickerLogic={isItemSelected:function(a,b){for(var c=a.length;c--;)if(a[c].key===b.key)return!0;return!1}},a}(window.webcon||{}),window.webcon=function(a){return(a.mixins=a.mixins||{}).PickerPopupLogic={getInitialState:function(){var a=this,b=this.props.params,c=b.config;setTimeout(function(){Injector.resolve(["PickerController"],function(d){d.getSearchableColumns(b.pickerName,c,function(b){a.setState({columns:b})},a.errorSearchCallback,b.context)},a)},0);var d=c.usePeopleDataSource;return void 0!==d&&(d=!d),{showSearchCol:d,columns:[],items:[],searching:!1,searchFinished:!1,selectedItems:b.value.pickerEntities,value:b.value}},handleLinkClick:function(a){var b=this;Injector.resolve(["OpenLinkHandler"],function(a){a.open(b.props.params.config.addNewElementLink,2)}),a.preventDefault(),a.stopPropagation()},setSearchResult:function(a){this.setState({items:a.elements,searching:!1,searchFinished:!0,hasMoreResults:a.isMoreElements})},errorSearchCallback:function(a){this.setState({searching:!1,searchFinished:!0}),console.log(a)},close:function(){this.props.params.closePopup()},confirm:function(){this.props.params.confirmCallback(this.state.selectedItems)},searchExecute:function(a,b){var c=this;this.setState({searchFinished:!1,searching:!0}),Injector.resolve(["PickerController"],function(d){d.search(b,a,c.props.params.pickerName,c.props.params.config,c.setSearchResult,c.errorSearchCallback,c.props.params.context,c.props.params.rowId)},this)}},a}(window.webcon||{}),window.webcon=function(a){return(a.mixins=a.mixins||{}).PureControl={shouldComponentUpdate:function(a,b){return!_.isEqual(this.props,a)||!_.isEqual(this.state,b)}},a}(window.webcon||{}),window.webcon=function(a){return(a.mixins=a.mixins||{}).RegistrableControl={propTypes:{name:PropTypes.string.isRequired},componentDidMount:function(){Injector.resolve(["ComponentContainerService"],function(a){a.registerComponent(this.props.name,this)},this)},componentWillUnmount:function(){Injector.resolve(["ComponentContainerService"],function(a){a.unregisterComponent(this.props.name,this)},this)}},a}(window.webcon||{}),window.webcon=function(a){return(a.mixins=a.mixins||{}).SubelementCell={propTypes:{subelemsName:PropTypes.string.isRequired,columnIndex:PropTypes.number.isRequired,rowIndex:PropTypes.number.isRequired},componentWillMount:function(){Injector.resolve(["$Window"],function(a){var b=a.model[this.props.subelemsName].data,c=b.columns[this.props.columnIndex],d=b.rows[this.props.rowIndex];this.cellStringValue=d.rowValues[c.name]},this)}},a}(window.webcon||{}),window.webcon=function(a){return(a.mixins=a.mixins||{}).SubelementsColumnCalculator={calculateColumnsWidth:function(a,b,c,d,e){function f(a,b,c){function d(){var b=a.columnType,d=c[a.fieldName].config;switch(b){case"Bool":return 55;case"FloatingPoint":case"FloatingPointCalculated":return d&&d.showCurrencyCode?130:100;case"SingleRowText":case"LinkReadonly":return 110;case"Date":return d&&d.includeTime?190:135;case"Choose":case"Email":return 140;case"Autocomplete":case"ChoiceTree":return 180;case"Picker":return 225;case"MultiRowText":return 250;default:return 130}}function e(){switch(a.columnType){case"Bool":return 55;case"Date":var b=c[a.fieldName].config;return b&&b.includeTime?125:70;case"Email":return 140;case"MultiRowText":return 220;case"FloatingPoint":case"FloatingPointCalculated":return b&&b.showCurrencyCode?120:100;case"SingleRowText":case"LinkReadonly":case"Autocomplete":case"ChoiceTree":case"Choose":case"Picker":default:return 110}}return b?d():e()}function g(){var a,d=!1;Injector.resolve(["DeviceInfo"],function(b){b.isModern()?a=41:(a=48,d=!0)});var f=0;return b.isActionsColumnVisible&&c?f=(b.allowCloneRows?a:0)+(b.allowRemoveRows?a:0)+(b.singleRowEditMode&&!e||d?a:0):b.singleRowEditMode&&!e&&(f=a),f}function h(){var a=0;return b&&b.isOrdinalColumnVisible&&(a=30),a}function i(a){return/^\d+\.?\d*%$/.test(a)}function j(a){return/^\d+\.?\d*px$/.test(a)}function k(a){return/^\d+\.?\d*$/.test(a)}function l(a){return a.match(/^(\d+\.?\d*)px$/)[1]}function m(a){return a.match(/^(\d+\.?\d*)%$/)[1]}var n=g(),o=h(),p=d-(o+n),q=!0;Injector.resolve(["FormInfo"],function(a){q=a.editMode});var r=_.partition(a,function(a){return a.width&&(j(a.width)||k(a.width))}),s=r[0],t=r[1];r=_.partition(t,function(a){return a.width&&i(a.width)});var u=r[0];t=r[1];var v=6,w=0,x=s.map(function(a){var b;return a.width&&j(a.width)?(b=parseInt(l(a.width),10),w+=b+v):a.width&&k(a.width)&&(b=parseInt(a.width,10),w+=b+v),{fieldName:a.fieldName,width:b}}),y=t.reduce(function(a,c){return a+f(c,q,b.columnsConfiguration)+v},0),z=0,A=u.map(function(a){var c,d=f(a,q,b.columnsConfiguration);if(a.width&&i(a.width)){var e=parseInt(m(a.width),10)/100*(p-w-y)-v;c=e>d?e:d,z+=c}return{fieldName:a.fieldName,width:c}}),B=p-(w+z+y);B<0&&(B=0);var C=t.map(function(a){return{fieldName:a.fieldName}});return{availableWidth:p,remainingWidth:B,ordinalColumnWidth:o,actionsColumnWidth:n,fixedWidthColumns:s,nonFixedWidthColumns:t,
columnsWidthValues:x.concat(C).concat(A)}}},a}(window.webcon||{}),window.webcon=function(a){return(a.views=a.views||{}).AttributeErrorPanel=createReactClass({displayName:"AttributeErrorPanel",highestErrorAmount:0,componentWillReceiveProps:function(a){a.data.messages&&a.data.messages.length>this.highestErrorAmount&&(this.highestErrorAmount=a.data.messages.length)},getEmptyLeftoverErrorPlaceholders:function(){var a=[];if(this.props.data.messages&&this.props.data.messages.length<this.highestErrorAmount)for(var b=this.highestErrorAmount;b>this.props.data.messages.length;b--)a.push(b);return a},render:function(){var a=this.props.data.message?"":"attributeErrorPanelHidden";return React.createElement("ul",{className:a},this.props.data.messages.map(function(a){return React.createElement("li",{key:a},a)}),this.getEmptyLeftoverErrorPlaceholders().map(function(a){return React.createElement("li",{key:"placeholder-"+a})}))}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{};return b.BPSLinkWrapper=createReactClass({displayName:"BPSLinkWrapper",propTypes:{urlData:PropTypes.object.isRequired,className:PropTypes.string,title:PropTypes.string},componentWillMount:function(){Injector.resolve(["FormInfo","SidebarContextService","Store"],function(a,b,c){this.dbId=a.dbId,this.appId=a.applicationId,this.isInSidebar=b.isInSidebar(),this.isInIframe=b.isInIframe(),this.viewport=c.getStore().getState().environment.viewport},this)},linkClick:function(a,b){return Injector.resolve(["OpenLinkHandler"],function(c){return c.openLinkEvent(b,function(){c.openUrlDataByUserClick(a)})},this)},render:function(){var a=this.props.className,c=this.props.title,d=this.props.urlData;return React.createElement(b.JsApp.BPSLinkWrapper,{urlData:d,className:a,title:c,onLinkClick:this.linkClick,showInIFrame:!this.isInSidebar,isInSidebar:this.isInSidebar,isInIframe:this.isInIframe,dbId:this.dbId,appId:this.appId,useStandardLink:!0,viewport:this.viewport},this.props.children)}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{},c=a.mixins;return b.CcTasksControl=createReactClass({displayName:"CcTasksControl",propTypes:{controller:PropTypes.object.isRequired,visible:PropTypes.object.isRequired},mixins:[c.RegistrableControl],componentWillMount:function(){Injector.resolve(["$Window","PickerController"],function(a,b){this.win=a,this.pickerController=b},this)},updateCcTasksCallback:function(a){this.win.model.additionalCcTasks=this.pickerController.getPickerStringValue(a)},render:function(){return React.createElement("div",{className:"wfBottomSide Menu cc-task-picker"},React.createElement("div",{className:"ms-promotedActionButton-text wfPathPanelCaption th-frm-group "},window.webconLocale.cCcTask),React.createElement(b.Picker,{type:"people",updatePickerValueCallback:this.updateCcTasksCallback,controller:this.props.controller,popupTitle:window.webconLocale.cCcTask}))}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{},c=a.mixins;return b.CommentPanel=createReactClass({displayName:"CommentPanel",propTypes:{name:PropTypes.string.isRequired},mixins:[c.RegistrableControl],getInitialState:function(){Injector.resolve(["$Window"],function(a){this.win=a},this);var a=this.win.model[this.props.name],b=this;return Injector.resolve(["CommentsSortService"],function(c){b.comments=c.sortCommentsByDate(a.comments)}),{value:a.primary}},componentWillMount:function(){Injector.resolve(["ImagesUrlProvider"],function(a){this.getImage=a.getWebcon},this)},change:function(a){this.setState({value:a.target.value})},componentWillReceiveProps:function(){this.setState({value:this.win.model[this.props.name].primary})},endEdit:function(a){var b={primary:a.target.value};Injector.resolve(["CommentPanelController"],function(a){a.addComment(this.props.name,b)},this)},render:function(){var a=this;return React.createElement("div",{id:"commentPanel"},React.createElement(b.VisibilityPanel,{isVisible:this.props.isVisible},React.createElement("div",{className:"ms-formlabel wfUpsideControlDisplayName"},webconLocale.cComment),React.createElement("table",{className:"comment-line-separator single-border-table"},React.createElement("tr",null,React.createElement("td",{className:"ms-formline"}))),React.createElement("div",{className:"media"},React.createElement("div",{className:"media-left ms-storefront-appiconspan media-img-background"},React.createElement("img",{className:"media-object",src:a.getImage("LTDISC_48.png"),alt:".."})),React.createElement("div",{className:"media-body"},React.createElement("textarea",{className:"wfFormControl form-control",disabled:this.props.isReadOnly,value:this.state.value,onChange:this.change,rows:"5",cols:"20",onBlur:this.endEdit}))),React.createElement(b.JsApp.CommentsEntries,{comments:this.comments})))}}),a}(window.webcon||{}),window.webcon=function(a){return(a.views=a.views||{}).AttributeLabel=createReactClass({displayName:"AttributeLabel",propTypes:{displayName:PropTypes.string.isRequired,orientation:PropTypes.oneOf(["Beside","Upside"]).isRequired,isRequired:PropTypes.bool.isRequired,enableHtmlTags:PropTypes.bool},render:function(){var a;return a=this.props.enableHtmlTags?React.createElement("span",{className:"attributeLabelDisplayName",dangerouslySetInnerHTML:{__html:this.props.displayName}}):React.createElement("span",{className:"attributeLabelDisplayName"},this.props.displayName),a=React.createElement("div",{className:classNames("attributeLabelRequirednessWrapper",{requiredAttribute:this.props.isRequired})},a)}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{},c=a.mixins;return b.Autocomplete=createReactClass({displayName:"Autocomplete",propTypes:{name:PropTypes.string.isRequired,disabled:PropTypes.bool.isRequired,value:PropTypes.object.isRequired,controller:PropTypes.object.isRequired,config:PropTypes.object.isRequired,registerFocus:PropTypes.func,popup:PropTypes.bool},mixins:[c.PickerBase,c.PickerLogic],getInitialState:function(){return{columns:[],isLoading:!1,isLoadingMore:!1,isMoreAvailable:!1,isShowingMoreItems:!1,firstTimeLoaded:!1,dropdownItems:[],dropdownSelectedItem:null,callbackExecutor:this.getNewCallbackExecutor()}},componentWillMount:function(){this.getColumnsAndEntitiesDebounced=_.debounce(function(a,b){return this.getColumnsAndEntities(a,b)},300)},getNewCallbackExecutor:function(){return Injector.inject("AutocompleteCallbackExecutor")},closeDropdown:function(){this.state.isLoading&&this.state.callbackExecutor.cancel(),this.setState({isLoading:!1,isLoadingMore:!1,isMoreAvailable:!1,isShowingMoreItems:!1,firstTimeLoaded:!1,dropdownItems:[],dropdownSelectedItem:null})},addItem:function(a){var b=this.state.value.pickerEntities;if(!_.find(b,function(b){return b.key===a.key})){var c={isResolved:a.isResolved,key:a.key,name:a.name,databaseValue:a.databaseValue,dataToPropagate:a.dataToPropagate,hasDataToPropagate:a.hasDataToPropagate,elementId:a.elementId,showAsALink:a.showAsALink},d=!this.state.config.allowMultiValue;this.setValue([c],"",d)}this.closeDropdown()},getColumnsAndEntities:function(a,b,c){0===this.state.columns.length?this.getColumns(a,b,c):this.getEntities(a,b,c)},getColumns:function(a,b,c){var d=this;this.setState({isLoading:!0,isLoadingMore:b}),Injector.resolve(["PickerController"],function(e){e.getSearchableColumns(this.props.name,this.state.config,function(e){d.state.callbackExecutor.execute(function(e,f){!e&&d.state.isLoading&&d.getColumnsCallback(f,a,b,c)},e,function(){d.closeDropdown(),d.setState({callbackExecutor:d.getNewCallbackExecutor()})})},function(a){d.getErrorCallback(a)},this.props.controller.context)},this)},getColumnsCallback:function(a,b,c,d){this.setState({columns:a}),this.getEntities(b,c,d)},getEntities:function(a,b,c){var d=this;a=a||"",d.state.callbackExecutor.isCancelled()||this.setState({isLoading:!0,isLoadingMore:b}),Injector.resolve(["AutocompleteController"],function(e){e.search(a,"",this.props.name,this.state.config,function(a){d.state.callbackExecutor.execute(function(a,e){!a&&d.state.isLoading&&d.getEntitiesCallback(e,b,c)},a,function(){d.closeDropdown(),d.setState({callbackExecutor:d.getNewCallbackExecutor()})})},function(a){d.getErrorCallback(a)},this.props.controller.context,this.props.controller.rowId,b)},this)},getEntitiesCallback:function(a,b,c){var d=a.elements;this.setState({isLoading:!1,isLoadingMore:!1,isShowingMoreItems:b,isMoreAvailable:a.isMoreElements,firstTimeLoaded:!0,dropdownItems:d,dropdownSelectedItem:c?d[c]:d.length>0?d[0]:null})},getEntity:function(a){var b=this;a=a||"",this.setState({isLoading:!0,isLoadingMore:!1}),Injector.resolve(["AutocompleteController"],function(c){c.validate(a,this.props.name,this.state.config,function(c){b.getEntityCallback(a,c)},function(a){b.getErrorCallback(a)},this.props.controller.context,this.props.controller.rowId)},this)},getEntityCallback:function(a,b){var c=this,d=!0;_.each(b,function(a){a.isResolved?c.addItem(a):d=!1}),d?(this.state.callbackExecutor.cancel(),this.closeDropdown(),this.setState({callbackExecutor:this.getNewCallbackExecutor()})):this.getColumnsAndEntities(a,!1)},getErrorCallback:function(){this.setState({isLoading:!1,isLoadingMore:!1,firstTimeLoaded:!1})},handleLoadFirst:function(){this.getColumnsAndEntities(this.state.value.rawValue,!1)},handleLoadMore:function(){this.getColumnsAndEntities(this.state.value.rawValue,!0)},handleAddItem:function(a){var b=_.find(this.state.dropdownItems,function(b){return b.key===a});b&&this.addItem(b)},handleRemoveItem:function(a){var b=this.state.value,c=$.extend({},b);c.pickerEntities=_.filter(b.pickerEntities,function(b){return b.key!==a}),c.rawValue=b.rawValue,this.updateModel(c),this.setState({value:c})},handleInputChange:function(a,b){var c=this,d=this.state.value,e=Object.assign({},d,{rawValue:a});if(d.rawValue!==a){e.rawValue=a;var f=this.props.controller,g=this.props.name;e.valueNotValid=!1,f&&g&&f.change(g,e)}this.setState({value:e,dropdownItems:null,dropdownSelectedItem:null},function(){b?c.getEntity(a):a&&0!==a.length?a.length>=(c.state.config.autocompleteSearchChars||3)&&c.getColumnsAndEntities(a,!1):c.getErrorCallback()})},getDropdownItems:function(){var a=this,b=a.state.firstTimeLoaded,c=a.state.columns,d=a.state.dropdownItems;return b&&c&&d?_.map(d,function(b){var c=_.map(a.state.columns,function(a){var c=_.find(b.data,function(b){return b.Key===a.value});return Object.assign({},a,{value:c?c.Value:null})});return Object.assign({},b,{columns:c})}):null},render:function(){var a=this,c=this.state,d=c.config,e="",f=this.props.value.valueNotValid;return f&&!c.isInCustomValueMode&&(e=React.createElement("div",{className:"picker-error-message"},webconLocale.cPickerValidateFalied," ",c.value.rawValue,".")),React.createElement("div",{className:"picker-container"},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-xs-12"},React.createElement(b.CustomValueWrapper,{allowAddingCustomValue:d.allowAddingCustomValue,isDisabled:this.props.disabled,isInCustomValueMode:c.isInCustomValueMode,onChangeModeClick:this.handleChangeModeClick,customValueComponent:React.createElement(b.CustomValueControl,{inputValue:c.value.customValue,isDisabled:this.props.disabled,isMulti:d.allowMultiValue,isUnresolved:f,ref:function(b){a.refCustomValueControl=b},onBlur:this.handleBlurCustomValue,onChange:this.handleChangeCustomValue}),sourceValueComponent:React.createElement(b.JsApp.Autocomplete,{dropdownItems:this.getDropdownItems(),isLoading:c.isLoading,isLoadingMore:c.isLoadingMore,isMoreAvailable:c.isMoreAvailable,isShowingMoreItems:c.isShowingMoreItems,values:c.value.pickerEntities,inputValue:c.value.rawValue,onLoadFirst:this.handleLoadFirst,onLoadMore:this.handleLoadMore,onDropdownClose:this.closeDropdown,onAddItem:this.handleAddItem,onRemoveItem:this.handleRemoveItem,onInputChange:this.handleInputChange,addNewElementLink:d.addNewElementLink,boundariesSelector:this.props.popup?".wfPopupPanelControl":"#formContainer",allowMultipleValues:d.allowMultiValue,disabled:this.props.disabled,unresolved:f,debounce:300,onInputFocus:this.props.registerFocus})}))),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-xs-12"},e)))}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{};return b.AutocompleteControl=createReactClass({displayName:"AutocompleteControl",propTypes:{addNewElementLink:PropTypes.string,inputValue:PropTypes.string,isDisabled:PropTypes.bool,isMulti:PropTypes.bool.isRequired,isUnresolved:PropTypes.bool,items:PropTypes.arrayOf(PropTypes.shape({data:PropTypes.arrayOf(PropTypes.shape({Key:PropTypes.string.isRequired,Value:PropTypes.string.isRequired})).isRequired,key:PropTypes.string.isRequired,name:PropTypes.string.isRequired})).isRequired,onAddItem:PropTypes.func.isRequired,onChange:PropTypes.func.isRequired,onGetColumns:PropTypes.func.isRequired,onGetEntities:PropTypes.func.isRequired,onRemoveItem:PropTypes.func.isRequired},getInitialState:function(){var a=this.props.inputValue||"";return{columns:[],inputValue:a,isFocused:!1,isLoading:!1,isLoadingMore:!1,isMoreAvailable:!1,isOpen:!1,isShowingMoreItems:!1,popupHeight:null,popupItems:[],popupSelectedItem:null,selectedItem:null,width:this.calcWidth(a),parentBottom:0,callbackExecutor:this.getNewCallbackExecutor()}},componentWillMount:function(){this.getColumnsAndEntitiesDebounced=_.debounce(function(a,b){return this.getColumnsAndEntities(a,b)},300)},componentDidMount:function(){document.addEventListener("click",this.handleOutsideClick),document.addEventListener("touchend",this.handleOutsideClick);var a=this.findSubelementTable();a&&a.addEventListener("scroll",this.handleOutsideClick)},componentWillReceiveProps:function(a){var b=a.inputValue||"";this.setState({inputValue:b,width:this.calcWidth(b)})},componentDidUpdate:function(){this.left=this.calculateLeft(),this.popupWidth=this.calculatePopupWidth(),this.popupMaxWidth=this.calculatePopupMaxWidth()},componentWillUnmount:function(){document.removeEventListener("click",this.handleOutsideClick),document.removeEventListener("touchend",this.handleOutsideClick);var a=this.findSubelementTable();a&&a.removeEventListener("scroll",this.handleOutsideClick)},findSubelementTable:function(){if(this.refContainer){var a=ReactDOM.findDOMNode(this.refContainer),b="";return Injector.resolve(["DomService"],function(c){b=c.getClosest(a,".tableLite")},this),b}},getNewCallbackExecutor:function(){return Injector.inject("AutocompleteCallbackExecutor")},handleArrowKey:function(a,b){this.state.isOpen?this.state.isLoading||this.selectNextItem(b):this.getColumnsAndEntities(this.state.inputValue,!1),a.preventDefault()},handleBackspaceKey:function(a){var b=this.props.items,c=this.state.inputValue||"";b&&b.length>=1&&0===c.length&&(this.removeItem(b.length-1),a.preventDefault())},handleBlur:function(){this.setState({isFocused:!1}),this.isAboutToOpen&&!this.state.isOpen&&(this.isAboutToOpen=!1,this.setState({inputValue:"",width:0}),this.props.onChange(null,""))},handleCardClick:function(a){this.addItem(a),this.closePopup()},handleChange:function(a){if(this.props.isDisabled||!this.props.isMulti&&this.props.items.length>0)return void a.preventDefault();var b=a.target.value||"";this.setState({inputValue:b,width:this.calcWidth(b)}),b?(this.isAboutToOpen=!0,b.length>=3?this.getColumnsAndEntitiesDebounced(b,!1):this.setState({isOpen:!1}),this.props.isUnresolved&&this.props.onChange(a,b)):this.closePopup()},handleClick:function(){this.props.isDisabled||this.focus()},handleFocus:function(){this.setState({isFocused:!0})},handleEnterKey:function(a){var b=this.state.popupSelectedItem;if(this.state.isOpen&&b)this.addItem(b),this.closePopup(),a.preventDefault();else{if(this.props.isDisabled||!this.props.isMulti&&this.props.items.length>0)return void a.preventDefault();var c=this.state.inputValue||"";c&&(this.getEntity(c),this.props.isUnresolved&&this.props.onChange(a,c))}},handleEscapeKey:function(a){this.state.isOpen&&(this.closePopup(),a.preventDefault())},handleKeyDown:function(a){if(!this.props.isDisabled&&!a.defaultPrevented)switch(a.key){case"ArrowDown":this.handleArrowKey(a,!0);break;case"ArrowUp":this.handleArrowKey(a,!1);break;case"Backspace":this.handleBackspaceKey(a);break;case"Enter":this.handleEnterKey(a);break;case"Escape":this.handleEscapeKey(a);break;case"Tab":this.handleTabKey(a);break;default:return}},handleLoadMoreClick:function(){Injector.resolve(["DeviceInfo"],function(a){a.isNativeMobileApp()||this.focus()},this),this.getColumnsAndEntities(this.state.inputValue,!0)},handleMenuDownClick:function(a){if(this.props.isDisabled)return a.preventDefault(),void a.stopPropagation();this.state.isOpen?this.closePopup():(Injector.resolve(["DeviceInfo"],function(a){a.isNativeMobileApp()||a.isMobile(window.navigator)||this.focus()},this),this.getColumnsAndEntities(this.state.inputValue,!1)),a.preventDefault(),a.stopPropagation()},handleRemoveItem:function(a){this.removeItem(a)},handleTabKey:function(){this.state.isOpen&&this.closePopup()},handleOutsideClick:function(a){this.refContainer&&!ReactDOM.findDOMNode(this.refContainer).contains(a.target)&&this.state.isOpen&&this.closePopup()},addItem:function(a){this.props.onAddItem(a)},calcWidth:function(a){var b=0,c=0,d=0;if(!this.props.isMulti)return 0;if(Injector.resolve(["CalculateTextWidthService"],function(c){b=c.calc(a)},this),d=b+2,this.refInputParent){var e=ReactDOM.findDOMNode(this.refInputParent);Injector.resolve(["DomService"],function(a){c=a.getWidthWithoutPadding(e)},this),d>c&&(d=c)}return d},calculateLeft:function(){var a=!1;if(Injector.resolve(["DeviceInfo"],function(b){b.isNativeMobileApp()&&(a=!0)},this),a)return"0px";var b,c="";if(this.refContainer){var d=ReactDOM.findDOMNode(this.refContainer);return Injector.resolve(["DomService"],function(a){b=a.getClosest(d,"td"),c=a.getClosest(d,".tableLite")},this),c&&b?-c.scrollLeft:"0px"}},calculatePopupWidth:function(){if(this.refContainer){return ReactDOM.findDOMNode(this.refContainer).offsetWidth+"px"}},calculatePopupMaxWidth:function(){if(this.refContainer){var a=ReactDOM.findDOMNode(this.refContainer);return document.body.clientWidth-a.getBoundingClientRect().left-30+"px"}},closePopup:function(){this.isAboutToOpen=!1,this.setState({inputValue:"",isFocused:!1,isLoading:!1,isLoadingMore:!1,isMoreAvailable:!1,isOpen:!1,isShowingMoreItems:!1,popupHeight:null,popupItems:[],popupSelectedItem:null,parentBottom:0,width:0},function(){Injector.resolve(["DomService"],function(a){if(this.refInput){var b=a.getClosest(ReactDOM.findDOMNode(this.refInput),".picker-container");a.isElementInViewport(b)||a.scrollToY(a.getScrollY(b)-6)}},this)}),this.props.onChange(null,"")},getColumns:function(a,b,c){var d=this;this.setState({isLoading:!0,isLoadingMore:b}),this.props.onGetColumns(function(e){d.state.callbackExecutor.execute(function(e){d.getColumnsCallback(e,a,b,c)},e,function(){d.closePopup(),d.setState({callbackExecutor:d.getNewCallbackExecutor()})})},function(a){d.getEntitiesErrorCallback(a)})},getColumnsCallback:function(a,b,c,d){this.setState({columns:a}),this.getEntities(b,c,d)},getColumnsAndEntities:function(a,b,c){this.refPopUp&&b&&this.refPopUp.saveHeight(),0===this.state.columns.length?this.getColumns(a,b,c):this.getEntities(a,b,c)},getEntities:function(a,b,c){var d=this;a=a||"",d.state.callbackExecutor.isCancelled()||this.setState({isLoading:!0,isLoadingMore:b,isOpen:!0}),this.props.onGetEntities(a,"",b,function(a){d.state.callbackExecutor.execute(function(a){d.getEntitiesCallback(a,b,c)},a,function(){d.closePopup(),d.setState({callbackExecutor:d.getNewCallbackExecutor()})})},function(a){d.getEntitiesErrorCallback(a)})},getEntitiesCallback:function(a,b,c){var d=a.elements,e=a.isMoreElements,f=this.refContainer.getBoundingClientRect();this.setState({isLoading:!1,isLoadingMore:!1,isShowingMoreItems:b,isMoreAvailable:e,popupHeight:this.state.isLoadingMore?this.refPopUp.popupHeight:null,parentBottom:f.bottom,popupItems:d,popupSelectedItem:c?d[c]:d.length>0?d[0]:null})},getEntitiesErrorCallback:function(){this.setState({isLoading:!1,isLoadingMore:!1})},getEntity:function(a){var b=this;a=a||"",this.setState({isLoading:!0,isLoadingMore:!1,isOpen:!0}),this.props.onGetEntity(a,function(c){b.getEntityCallback(a,c)},function(a){b.getEntityErrorCallback(a)})},getEntityCallback:function(a,b){var c=this,d=!0;_.each(b,function(a){a.isResolved?c.addItem(a):d=!1}),d?(this.state.callbackExecutor.cancel(),this.closePopup()):(this.setState({valueNotValid:!0}),this.getColumnsAndEntities(a,!1))},getEntityErrorCallback:function(){this.setState({isLoading:!1,isLoadingMore:!1})},focus:function(){this.refInput&&this.refInput.focus()},removeItem:function(a){this.props.onRemoveItem(a)},selectNextItem:function(a){var b=this.state.popupItems,c=this.state.popupSelectedItem,d=_.indexOf(b,c),e=0;if(d>=0)if(a){if(d===b.length-1&&this.state.isMoreAvailable)return void this.getColumnsAndEntities(this.state.inputValue,!0,d+1);e=d+1,e=e>b.length-1?0:e}else e=d-1,e=e>=0?e:b.length-1;var f=b[e];this.setState({popupSelectedItem:f})},shouldComponentUpdate:function(a,b){return!_.isEqual(this.props,a)||!_.isEqual(this.state,b)},render:function(){var c=this,d=c.props,e=d.showAsALink,f="",g="",h=c.state;return Injector.resolve([{depName:"IconRepository",depEnv:a.env}],function(a){g=a.getArrowDownIcon()}),!d.isMulti&&d.items&&(f=d.items.map(function(a,f){return React.createElement(b.AutocompleteItem,{item:a,itemIndex:f,isDisabled:d.isDisabled,key:a.key,onRemoveItem:c.handleRemoveItem,showAsALink:e})})),React.createElement("div",{className:"ac-container",ref:function(a){c.refContainer=a}},React.createElement("div",{className:classNames("ac","ac-auto",{"ac-multi":d.isMulti},{open:h.isOpen},{disabled:d.isDisabled}),onClick:c.handleClick},React.createElement("div",{className:classNames("form-control",{disabled:d.isDisabled,focused:h.isFocused}),ref:function(a){c.refInputParent=a}},d.isMulti?React.createElement(b.AutocompleteInput,{isDisabled:d.isDisabled,isUnresolved:d.isUnresolved,ref:function(a){c.refInput=a},onBlur:c.handleBlur,onChange:c.handleChange,onKeyDown:c.handleKeyDown,onFocus:c.handleFocus,value:h.inputValue,isMulti:d.isMulti,width:h.width}):React.createElement("ul",null,f,React.createElement("li",null,React.createElement(b.AutocompleteInput,{isDisabled:d.isDisabled,isUnresolved:d.isUnresolved,isHidden:!d.isMulti&&f.length>0,ref:function(a){c.refInput=a},onBlur:c.handleBlur,onChange:c.handleChange,onKeyDown:c.handleKeyDown,onFocus:c.handleFocus,value:h.inputValue,isMulti:d.isMulti,width:h.width})))),React.createElement("div",{className:"ac-group-btn"},React.createElement("button",{className:"ac-btn",disabled:d.isDisabled,onClick:c.handleMenuDownClick,type:"button"},g))),React.createElement(b.AutocompletePopup,{addNewElementLink:d.addNewElementLink,columns:h.columns,height:h.popupHeight,left:this.left,popupWidth:this.popupWidth,popupMaxWidth:this.popupMaxWidth,isOpen:h.isOpen,isLoading:h.isLoading,isLoadingMore:h.isLoadingMore,isMoreAvailable:h.isMoreAvailable,isShowingMoreItems:h.isShowingMoreItems,items:h.popupItems,parentBottom:h.parentBottom,ref:function(a){c.refPopUp=a},selectedItem:h.popupSelectedItem,onLoadMoreClick:c.handleLoadMoreClick,onCardClick:c.handleCardClick}))}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{};return b.AutocompleteInput=createReactClass({displayName:"AutocompleteInput",propTypes:{isDisabled:PropTypes.bool,isUnresolved:PropTypes.bool,onBlur:PropTypes.func,onChange:PropTypes.func,onKeyDown:PropTypes.func,onFocus:PropTypes.func,value:PropTypes.string.isRequired,width:PropTypes.number},shouldComponentUpdate:function(a,b){return!_.isEqual(this.props,a)||!_.isEqual(this.state,b)},handleBlur:function(a){this.props.onBlur(a)},handleChange:function(a){this.props.onChange(a)},handleFocus:function(a){this.props.onFocus(a)},handleKeyDown:function(a){this.props.onKeyDown(a)},focus:function(){var a=this;if(a.refInput){var b=ReactDOM.findDOMNode(a.refInput);if(b===document.activeElement)return;b.focus(),setTimeout(function(){var c=(a.props.value||"").length;if("function"==typeof b.setSelectionRange)b.setSelectionRange(c,c);else{var d=b.createTextRange();d.collapse(!0),d.moveEnd("character",c),d.moveStart("character",c),d.select()}},0)}},render:function(){var a=this,b={maxWidth:"100%",minWidth:"5px"};return this.props.isHidden?b.display="none":this.props.isMulti&&(b.width=this.props.width+"px"),React.createElement("div",{className:classNames("ac-input-wrapper",{unresolved:this.props.isUnresolved})},React.createElement("input",{type:"text",autoComplete:"off",value:this.props.value,className:"ac-input",disabled:this.props.isDisabled,readOnly:this.props.isDisabled,ref:function(b){a.refInput=b},spellCheck:!1,style:b,onBlur:this.handleBlur,onChange:this.handleChange,onKeyDown:this.handleKeyDown,onFocus:this.handleFocus}))}}),b.AutocompleteInput.defaultProps={isDisabled:!1,isUnresolved:!1,onBlur:function(){},onChange:function(){},onKeyDown:function(){},onFocus:function(){},value:"",width:0},a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{};return b.AutocompleteItem=createReactClass({displayName:"AutocompleteItem",propTypes:{item:PropTypes.shape({data:PropTypes.arrayOf(PropTypes.shape({Key:PropTypes.string.isRequired,Value:PropTypes.string.isRequired})).isRequired,key:PropTypes.string.isRequired,name:PropTypes.string.isRequired}),itemIndex:PropTypes.number.isRequired,isDisabled:PropTypes.bool,onRemoveItem:PropTypes.func.isRequired,showAsALink:PropTypes.bool},getInitialState:function(){return{isSelected:!1}},getContent:function(a){return{__html:a}},handleBlur:function(){this.setState({isSelected:!1})},handleClick:function(a){this.props.isDisabled||this.setState({isSelected:!0}),a.preventDefault(),a.stopPropagation()},handleFocus:function(){this.props.isDisabled||this.setState({isSelected:!0})},handleKeyDown:function(a){if(!a.defaultPrevented){switch(a.key){case"Backspace":case"Delete":!this.props.isDisabled&&this.state.isSelected&&this.props.onRemoveItem(this.props.itemIndex);break;default:return}a.preventDefault(),a.stopPropagation()}},handleRemoveClick:function(){this.props.isDisabled||this.props.onRemoveItem(this.props.itemIndex)},shouldComponentUpdate:function(a,b){return!_.isEqual(this.props,a)||!_.isEqual(this.state,b)},render:function(){var c="",d=this.props,e=d.item,f=e.databaseValue,g=d.showAsALink;Injector.resolve([{depName:"IconRepository",depEnv:a.env}],function(a){c=a.getPickerRemoveItemImage()});var h=React.createElement("span",{className:"ac-item","data-name":f,dangerouslySetInnerHTML:this.getContent(e.name)});if(g){var i={showAsALink:e.showAsALink,elementId:e.elementId};h=React.createElement(b.BPSDataSourceHyperlink,{linkData:i},h)}return React.createElement("li",null,React.createElement("div",{className:classNames("ac-item","label","label-default",{selected:this.state.isSelected}),onBlur:!g&&this.handleBlur,onClick:!g&&this.handleClick,onFocus:!g&&this.handleFocus,onKeyDown:!g&&this.handleKeyDown,tabIndex:-1},React.createElement("div",{className:"ac-item-content"},h),d.isDisabled||React.createElement("div",{className:"ac-item-remove"},React.createElement("button",{className:"ac-item-remove-button",onClick:this.handleRemoveClick,type:"button"},c))))}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{};return b.AutocompletePopup=createReactClass({displayName:"AutocompletePopup",propTypes:{addNewElementLink:PropTypes.string,columns:PropTypes.arrayOf(PropTypes.shape({dialogDisplay:PropTypes.bool.isRequired,name:PropTypes.string.isRequired,searchColumn:PropTypes.bool.isRequired,value:PropTypes.string.isRequired})).isRequired,height:PropTypes.string,left:PropTypes.string,popupWidth:PropTypes.string,popupMaxWidth:PropTypes.string,isLoading:PropTypes.bool.isRequired,isLoadingMore:PropTypes.bool.isRequired,isMoreAvailable:PropTypes.bool.isRequired,isShowingMoreItems:PropTypes.bool.isRequired,items:PropTypes.arrayOf(PropTypes.shape({data:PropTypes.array.isRequired,key:PropTypes.string.isRequired,name:PropTypes.string.isRequired})).isRequired,selectedItem:PropTypes.shape({data:PropTypes.array.isRequired,key:PropTypes.string.isRequired,name:PropTypes.string.isRequired}),isOpen:PropTypes.bool.isRequired,onLoadMoreClick:PropTypes.func.isRequired,onCardClick:PropTypes.func.isRequired},componentDidMount:function(){this.refLink&&ReactDOM.findDOMNode(this.refLink).addEventListener("auxclick",this.handleLinkClick)},componentDidUpdate:function(a,b){if(this.props.isOpen){var c=this.props.items,d=this.props.selectedItem;if(c&&d&&c===a.items&&d!==a.selectedItem){var e=ReactDOM.findDOMNode(this.refPopUp),f=e.querySelector("div.ac-popup-scroll"),g=f.querySelector('li[data-card-key="'+d.key.replace("\\","\\\\")+'"]'),h=g.offsetTop,i=g.offsetHeight,j=f.offsetHeight,k=h-j+3*i;k=k>h?h:k,f.scrollTop=k}}var l=!1;if(Injector.resolve(["$Window"],function(a){a.webcon.env===Injector.env.mobile&&(l=!0)},this),!l){var m=document.getElementById("formContainer"),n=m.getBoundingClientRect(),o=this.refPopUp.getBoundingClientRect();this.props.parentBottom-n.top+o.height>=n.height?this.setState({openUp:!0}):this.setState({openUp:!1})}},componentWillUnmount:function(){this.refLink&&ReactDOM.findDOMNode(this.refLink).removeEventListener("auxclick",this.handleLinkClick)},shouldComponentUpdate:function(a,b){return!_.isEqual(this.props,a)||!_.isEqual(this.state,b)},handleCardClick:function(a,b){this.props.onCardClick(b),a.preventDefault(),a.stopPropagation()},handleLinkClick:function(a){var b=this;Injector.resolve(["OpenLinkHandler"],function(a){a.open(b.props.addNewElementLink,2)}),a.preventDefault(),a.stopPropagation()},handleLoadMoreClick:function(a){this.props.onLoadMoreClick(a),a.preventDefault(),a.stopPropagation()},saveHeight:function(){if(this.refPopUp){var a=ReactDOM.findDOMNode(this.refPopUp).offsetHeight+"px";this.popupHeight=a}},render:function(){var a=this,c="";this.props.isOpen&&(!this.props.isLoading||this.props.isLoading&&this.props.isLoadingMore)&&this.props.items&&(c=this.props.items.map(function(c){var d=c===a.props.selectedItem;return React.createElement(b.AutocompletePopupCard,{columns:a.props.columns,isSelected:d,item:c,key:c.key,onClick:a.handleCardClick})}));var d=a.props.isLoading&&!a.props.isLoadingMore,e=a.props.isLoading&&a.props.isLoadingMore,f=!a.props.isLoading&&a.props.items&&0===a.props.items.length,g=a.props.isMoreAvailable&&a.props.isShowingMoreItems,h=!a.props.isLoading&&a.props.isMoreAvailable&&!a.props.isShowingMoreItems,i=(d||f)&&a.props.addNewElementLink,j=!i&&a.props.addNewElementLink,k=h||e||g||j,l=d||f||i;return React.createElement("div",{className:"ac-popup-container"},React.createElement("div",{className:classNames("ac-popup",{open:a.props.isOpen},{"has-more":a.props.isMoreAvailable},"dropdown-menu",{"open-up":a.state&&a.state.openUp}),ref:function(b){a.refPopUp=b},style:{height:a.props.height||"auto",maxHeight:a.props.height||"none",left:a.props.left,minWidth:a.props.popupWidth,width:"auto",maxWidth:a.props.popupMaxWidth}},React.createElement("div",{className:"ac-popup-scroll"},React.createElement("div",{className:classNames("ac-popup-header","clearfix",{hidden:!l})},React.createElement("div",{className:classNames("ac-popup-link",{hidden:!d})},webconLocale.cAcLoading),React.createElement("div",{className:classNames("ac-popup-link",{hidden:!f})},webconLocale.cAcNotFound),React.createElement("div",{className:classNames("ac-popup-add-new",{hidden:!i})},React.createElement("a",{href:"#",onClick:a.handleLinkClick},webconLocale.cAcAddNewItemLink))),React.createElement("ul",null,c),React.createElement("div",{className:classNames("ac-popup-footer","clearfix",{hidden:!k})},React.createElement("div",{className:classNames("ac-popup-link",{hidden:!h})},React.createElement("a",{href:"#",onClick:a.handleLoadMoreClick},webconLocale.cAcLoadMore)),React.createElement("div",{className:classNames("ac-popup-link",{hidden:!e})},webconLocale.cAcLoading),React.createElement("div",{className:classNames("ac-popup-link",{hidden:!g
})},webconLocale.cAcMaxNumberOfResults),React.createElement("div",{className:classNames("ac-popup-add-new",{hidden:!j})},React.createElement("a",{href:"#",ref:function(b){a.refLink=b},onClick:a.handleLinkClick},webconLocale.cAcAddNewItemLink))))))}}),a}(window.webcon||{}),window.webcon=function(a){return(a.views=a.views||{}).AutocompletePopupCard=createReactClass({displayName:"AutocompletePopupCard",propTypes:{columns:PropTypes.arrayOf(PropTypes.shape({dialogDisplay:PropTypes.bool.isRequired,name:PropTypes.string.isRequired,searchColumn:PropTypes.bool.isRequired,value:PropTypes.string.isRequired})).isRequired,isSelected:PropTypes.bool.isRequired,item:PropTypes.shape({data:PropTypes.arrayOf(PropTypes.shape({Key:PropTypes.string.isRequired,Value:PropTypes.string.isRequired})).isRequired,key:PropTypes.string.isRequired,name:PropTypes.string.isRequired}),onClick:PropTypes.func.isRequired},shouldComponentUpdate:function(a,b){return!_.isEqual(this.props,a)||!_.isEqual(this.state,b)},handleClick:function(a){this.props.onClick(a,this.props.item)},render:function(){var a=this,b=_.reduce(a.props.columns,function(b,c){return c.dialogDisplay&&b.push({key:c.name,value:_.find(a.props.item.data,function(a){return a.Key===c.value}).Value}),b},[]),c=b.map(function(a,b){return React.createElement("tr",{className:"ac-card-row",key:b},React.createElement("td",null,a.key),React.createElement("td",null,a.value))});return React.createElement("li",{className:classNames("ac-card",{active:a.props.isSelected}),"data-card-key":a.props.item.key,onClick:a.handleClick},React.createElement("div",{className:"ac-card-row"},React.createElement("div",{className:"ac-card-header"},a.props.item.name)),c.length>1?React.createElement("table",null,c):null)}}),a}(window.webcon||{}),window.webcon=function(a){return(a.views=a.views||{}).CustomValueControl=createReactClass({displayName:"CustomValueControl",propTypes:{inputValue:PropTypes.string,isDisabled:PropTypes.bool,onChange:PropTypes.func.isRequired},handleBlur:function(a){this.props.onBlur(a)},handleChange:function(a){if(this.props.isDisabled)return void a.preventDefault();var b=a.target.value||"";this.props.onChange(a,b)},shouldComponentUpdate:function(a,b){return!_.isEqual(this.props,a)||!_.isEqual(this.state,b)},focus:function(){var a=this;a.refInput&&setTimeout(function(){var b=(a.props.inputValue||"").length,c=ReactDOM.findDOMNode(a.refInput);if(c!==document.activeElement)if(c.focus(),"function"==typeof c.setSelectionRange)c.setSelectionRange(b,b);else{var d=c.createTextRange();d.collapse(!0),d.moveEnd("character",b),d.moveStart("character",b),d.select()}},0)},render:function(){var a=this;return React.createElement("div",null,React.createElement("input",{type:"text",autoComplete:"off",value:this.props.inputValue,className:"custom-value-input form-control",disabled:this.props.isDisabled,readOnly:this.props.isDisabled,ref:function(b){a.refInput=b},spellCheck:!0,onBlur:this.handleBlur,onChange:this.handleChange}))}}),a}(window.webcon||{}),window.webcon=function(a){return(a.views=a.views||{}).CustomValueWrapper=createReactClass({displayName:"CustomValueWrapper",propTypes:{allowAddingCustomValue:PropTypes.bool,customValueComponent:PropTypes.element.isRequired,isDisabled:PropTypes.bool,isInCustomValueMode:PropTypes.bool,sourceValueComponent:PropTypes.element.isRequired},render:function(){var b="",c="";return Injector.resolve([{depName:"IconRepository",depEnv:a.env}],function(a){b=a.getCustomModeIcon(),c=a.getSourceModeIcon()}),React.createElement("div",null,this.props.allowAddingCustomValue?React.createElement("div",{className:"custom-value-group"},React.createElement("div",{className:"custom-value-control"},this.props.isInCustomValueMode?this.props.customValueComponent:this.props.sourceValueComponent),React.createElement("div",{className:"custom-value-group-btn"},React.createElement("button",{type:"button",className:"btn btn-default fix-width-button custom-value-switch-mode-button",disabled:this.props.isDisabled,onClick:this.props.onChangeModeClick},this.props.isInCustomValueMode?c:b))):this.props.sourceValueComponent)}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{};return b.PickerControl=createReactClass({displayName:"PickerControl",propTypes:{inputValue:PropTypes.string,isDisabled:PropTypes.bool,isMulti:PropTypes.bool.isRequired,items:PropTypes.arrayOf(PropTypes.shape({data:PropTypes.arrayOf(PropTypes.shape({Key:PropTypes.string.isRequired,Value:PropTypes.string.isRequired})).isRequired,key:PropTypes.string.isRequired,name:PropTypes.string.isRequired})).isRequired,onChange:PropTypes.func.isRequired,onCheck:PropTypes.func.isRequired,onSearch:PropTypes.func.isRequired,onRemoveItem:PropTypes.func.isRequired,showAsALink:PropTypes.bool,registerFocus:PropTypes.func},getInitialState:function(){return{inputValue:this.props.inputValue||"",isFocused:!1,selectedItem:null}},componentWillReceiveProps:function(a){var b=a.inputValue||"";this.setState({inputValue:b})},handleBackspaceKey:function(a){var b=this.props.items,c=this.state.inputValue+"";b&&b.length>=1&&0===c.length&&(this.removeItem(b[b.length-1].key),a.preventDefault())},handleBlur:function(){this.setState({isFocused:!1}),this.props.onChange(this.state.inputValue)},handleChange:function(a){this.setState({inputValue:a}),this.props.isUnresolved&&this.props.onChange(a)},handleCheckClick:function(a){this.props.onCheck(this.state.inputValue),a.preventDefault(),a.stopPropagation()},handleClick:function(){this.props.isDisabled||this.focus()},handleFocus:function(){this.setState({isFocused:!0}),this.props.registerFocus()},handleEnterKey:function(a){this.props.onCheck(this.state.inputValue),a.preventDefault(),a.stopPropagation()},handleKeyDown:function(a){if(!this.props.isDisabled&&!a.defaultPrevented)switch(a.key){case"Backspace":this.handleBackspaceKey(a);break;case"Enter":this.handleEnterKey(a);break;default:return}},handleRemoveItem:function(a){this.removeItem(a)},handleSearchClick:function(a){this.props.onSearch(a,this.state.inputValue),a.preventDefault(),a.stopPropagation()},focus:function(){this.refInput&&this.refInput.focus()},removeItem:function(a){this.props.onRemoveItem(a)},shouldComponentUpdate:function(a,b){return!_.isEqual(this.props,a)||!_.isEqual(this.state,b)},render:function(){var a=this,c=this.props,d=React.createElement(b.JsApp.AutocompleteItems,{disabled:c.isDisabled,items:c.items,onRemove:a.handleRemoveItem}),e=void 0,f=void 0;return Injector.resolve(["IconRepository"],function(a){e=a.getOkImage(),f=a.getListIcon()},this),React.createElement("div",{className:"ac-container",ref:function(b){a.refContainer=b}},React.createElement("div",{className:classNames("ac",{"ac-multi":c.isMulti},"input-group"),onClick:this.handleClick},React.createElement("div",{className:classNames("form-control picker-control",{disabled:c.isDisabled,focused:this.state.isFocused}),disabled:c.isDisabled,ref:function(b){a.refInputParent=b}},a.props.items&&a.props.items.length>0?d:null,a.props.isMulti||!a.props.items||0===a.props.items.length?React.createElement(b.JsApp.AutocompleteInput,{disabled:c.isDisabled,unresolved:c.isUnresolved,ref:function(b){a.refInput=b},onBlur:this.handleBlur,onChange:this.handleChange,onKeyDown:this.handleKeyDown,onFocus:this.handleFocus,value:this.state.inputValue}):null),React.createElement("div",{className:classNames("input-group-btn","picker-buttons",{disabled:c.isDisabled})},React.createElement("div",{className:"picker-buttons-container"},React.createElement("button",{type:"button",className:"btn btn-default fix-width-button picker-check-button",disabled:c.isDisabled,onClick:this.handleCheckClick},e),React.createElement("button",{type:"button",className:"btn btn-default fix-width-button picker-search-button",disabled:c.isDisabled,onClick:this.handleSearchClick},f)))))}}),b.PickerControl.defaultProps={registerFocus:function(){}},a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{};return b.BesidePanel=createReactClass({displayName:"BesidePanel",propTypes:{isRequired:PropTypes.bool.isRequired,isEditable:PropTypes.bool.isRequired,style:PropTypes.object.isRequired,showColumnCaption:PropTypes.bool,description:PropTypes.string},getInitialState:function(){return{tooltipVisible:!1}},showTooltip:function(){this.setState({tooltipVisible:!0})},hideTooltip:function(){this.setState({tooltipVisible:!1})},render:function(){var a=this.props,c=this.state,d="row wfContentRow row-same-height row-full-height";return a.isEditable&&(d+=" editable"),a.showColumnCaption?React.createElement("div",{className:d},React.createElement("div",{className:"col-sm-5 col-xs-12 wfBesideLeft col-xs-height col-full-height ms-formlabel",onMouseEnter:this.showTooltip,onMouseLeave:this.hideTooltip},React.createElement(b.StylePanel,{className:"attributeLabelStylePanel",style:a.style,inlineStyle:a.inlineStyle},React.createElement(b.AttributeLabel,{displayName:a.displayName,orientation:"Beside",isRequired:a.isRequired,enableHtmlTags:a.enableHtmlTags}),React.createElement(b.JsApp.Tooltip,{placement:"bottom-end",content:a.description,delay:500,showArrowCentered:!1,followCursor:!0,tooltipShown:c.tooltipVisible},React.createElement("div",{className:"descriptionTooltipIconPlaceholder"})),a.description?React.createElement("i",{className:"icon ms-Icon ms-Icon--Info descriptionTooltipIcon"}):null)),React.createElement("div",{className:"col-sm-7 col-xs-12 ms-formbody ms-featurealtrow wfBesideRight col-xs-height col-full-height th-frm-bg1"},a.children)):React.createElement("div",{className:d},React.createElement("div",{className:"col-sm-12 col-xs-12 ms-formbody ms-featurealtrow wfBesideRight col-xs-height col-full-height th-frm-bg1"},a.children))}}),b.BesidePanel.defaultProps={showColumnCaption:!0,description:null},a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{},c=a.mixins;return b.BlockingPanel=createReactClass({displayName:"BlockingPanel",propTypes:{isVisible:PropTypes.bool},getInitialState:function(){return{isVisible:!1}},componentWillMount:function(){Injector.resolve(["ImagesUrlProvider"],function(a){this.getImage=a.getWebcon},this)},mixins:[c.RegistrableControl],updateProps:function(a){this.setState({isVisible:a.isVisible})},render:function(){var a=this.props.isVisible||this.state.isVisible?"":"loading-panel-hidden";return React.createElement("span",{className:a},React.createElement("div",{className:"waiting-panel"}),React.createElement("div",{className:"waiting-panel-inner"},React.createElement("img",{src:this.getImage("spinner.png"),className:"spinner"})))}}),a}(window.webcon||{}),window.webcon=function(a){return(a.views=a.views||{}).BlurredOverlay=createReactClass({displayName:"BlurredOverlay",propTypes:{isVisible:PropTypes.bool.isRequired,isOpaque:PropTypes.bool},mixins:[a.mixins.PureControl],render:function(){return React.createElement("div",{className:classNames("spinner-container",{"spinner-hidden":!this.props.isVisible,"spinner-container--opaque":this.props.isOpaque})},React.createElement("div",{className:"spinner-overlay"}),React.createElement("div",{className:"spinner-image-container"},this.props.children))}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{},c=PropTypes;return b.Bool=createReactClass({displayName:"Bool",propTypes:{name:c.string.isRequired,disabled:c.bool.isRequired,value:c.bool,controller:c.object.isRequired},render:function(){var a=this.props,b=a.value?"bool-yes":"bool-no",c=a.disabled?" bool-disabled":"",d="bool-container "+b+c;return React.createElement("div",{className:"checkbox noSwipe"},React.createElement("div",{className:"bool-wrapper",onClick:this.handleClick},React.createElement("div",{className:d},React.createElement("span",{className:"bool-text bool-text-yes"},webconLocale.cYes),React.createElement("span",{className:"bool-label"},""),React.createElement("span",{className:"bool-text bool-text-no"},webconLocale.cNo))))},handleClick:function(){var a=this.props;a.disabled||a.controller.change(a.name,!a.value)}}),a}(window.webcon||{}),window.webcon=function(a){return(a.views=a.views||{}).CalculatedText=createReactClass({displayName:"CalculatedText",propTypes:{name:PropTypes.string.isRequired,value:PropTypes.object.isRequired},componentWillMount:function(){Injector.resolve(["SqlRowCellsFactory"],function(a){this.cellsFactory=a},this)},render:function(){var a=this.props.config.sqlSelectMode,b=this.props.value,c="Text";switch(a){case 1:c="Percent";break;case 2:c="Indicator";break;case 3:c="Bold"}var d={value:b.value};return this.cellsFactory.createDataCell(c,this.props.name,b.dataType,d,null,!1)}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{},c=a.mixins;return b.Chart=createReactClass({displayName:"Chart",mixins:[c.ChartCreator],propTypes:{name:PropTypes.string.isRequired,disabled:PropTypes.bool.isRequired,value:PropTypes.object.isRequired,height:PropTypes.number.isRequired,id:PropTypes.number.isRequired},getInitialState:function(){return{chartLoading:!1}},componentWillMount:function(){Injector.resolve([{depName:"IconRepository"}],function(a){this.reloadIcon=a.getReloadImage()},this)},componentDidMount:function(){this.renderChart()},renderChart:function(){var a=this;this.setState({chartLoading:!0});var b=function(b){a.drawChart(b,a.chartPlaceholder,a.props.height),a.setState({chartLoading:!1})};Injector.resolve(["ChartController"],function(c){c.getChartData(a.props.id,a.props.name,b)})},updateChart:function(){this.renderChart()},render:function(){var a=this;return React.createElement("div",null,React.createElement("div",{className:"chart-header"},React.createElement("span",{className:"chart-title"}),React.createElement("button",{type:"button",className:"btn btn-default fix-width-button chart-header--right chart-header-refresh",onClick:this.updateChart},this.reloadIcon)),React.createElement(b.WaitingPanel,{isVisible:this.state.chartLoading}),React.createElement("div",{id:this.props.name+"-chart-placeholder",ref:function(b){a.chartPlaceholder=b},style:{height:this.props.height+25}}))}}),a}(window.webcon||{}),window.webcon=function(a){return(a.views=a.views||{}).ChoiceTree=createReactClass({displayName:"ChoiceTree",propTypes:{name:PropTypes.string.isRequired,disabled:PropTypes.bool.isRequired,value:PropTypes.object.isRequired,config:PropTypes.object.isRequired,controller:PropTypes.object.isRequired},getInitialState:function(){return{value:this.props.value}},componentWillReceiveProps:function(a){this.setState({value:a.value})},click:function(){Injector.resolve(["PopupController","ModelController"],function(a,b){a.showTreePopup(b.getDistplayName(this.props.name,this.props.controller.context),this.props.name,this.state.value,this.props.config,this.props.controller,this.setValue)},this)},setValue:function(a){this.setState({value:a})},clearTree:function(){var a={id:"",name:""};this.props.controller.change(this.props.name,a),this.setValue(a)},render:function(){var a,b;return Injector.resolve(["IconRepository"],function(c){a=c.getChoiceTreeIcon(),b=c.getClearButton()}),React.createElement("div",{className:"input-group tree-control"},React.createElement("input",{readOnly:!0,type:"text",className:"wfFormControl form-control",value:this.state.value.name,disabled:this.props.disabled}),React.createElement("span",{className:"input-group-btn input-group-addon"},React.createElement("button",{disabled:this.props.disabled,type:"button",className:"btn btn-default fix-width-button",onClick:this.clearTree},b),React.createElement("button",{disabled:this.props.disabled,type:"button",className:"btn btn-default fix-width-button",onClick:this.click},a)))}}),a}(window.webcon||{}),Injector.instance("ConnectedExternalCustomControl",[],function(){function a(a){return{addAttachmentRequest:function(c){a(b.AttachmentsActions.createAddAttachmentRequestAction(c))},addAttachmentFailed:function(c){a(b.AttachmentsActions.createAddAttachmentFailedAction(c))}}}var b=webcon.redux=webcon.redux||{};return ReactRedux.connect(null,a)(webcon.views.ExternalCustomControl)}),window.webcon=function(a){var b=a.views=a.views||{};return b.DateTime=createReactClass({displayName:"DateTime",propTypes:{name:PropTypes.string.isRequired,disabled:PropTypes.bool.isRequired,controller:PropTypes.object.isRequired,config:PropTypes.object.isRequired,registerFocus:PropTypes.func,value:PropTypes.string},componentDidMount:function(){var a;Injector.resolve(["DomService"],function(b){if(this.datePicker){var c=ReactDOM.findDOMNode(this.datePicker);a=b.getElementTopPos(c)}},this),$(document).height()<a+260&&this.setState({dropOnBot:!0})},componentWillReceiveProps:function(a){if(this.props!=a){var b=this.getNewValue(a.value);this.setState(b)}},componentWillMount:function(){Injector.resolve(["FormInfo"],function(a){this.dbTimeZoneOffset=a.dbTimeZoneOffset},this)},getNewValue:function(a){var b=a?moment(a):a;return{value:b&&b._isValid?b:a}},getInitialState:function(){return this.getNewValue(this.props.value)},endEdit:function(a){this.props.controller.checkSaveRestrictions(this.props.name,a),Number(this.props.value)!==Number(a)&&this.props.controller.change(this.props.name,a)},onCalendarSelected:function(a){if(a._isAMomentObject){var b=a.toDate();this.endEdit(b)}},toggleOpenCalendar:function(){var a=!1,b=this;if(Injector.resolve(["$Window"],function(b){b.webcon.env===Injector.env.mobile&&(a=!0)},this),this.state.shouldCloseCalendar)return void this.closeCalendar();var c=function(){var a=b.datePicker;null===a||b.props.disabled||(b.calculateLeft(),a.openCalendar())};if(a)c();else{var d=document.getElementById("formContainer"),e=d.getBoundingClientRect();this.datePickerContainer.getBoundingClientRect().bottom-e.top+252>=e.height?this.setState({openUp:!0},c):this.setState({openUp:!1},c)}},closeCalendarOnTab:function(a){null===this.datePicker||this.props.disabled||"Tab"!==a.key||this.closeCalendar()},preserveCalendarOpenState:function(){var a=this.datePicker;null!==a&&!this.props.disabled&&a.state.open&&this.setState({shouldCloseCalendar:!0})},closeCalendar:function(){this.datePicker.closeCalendar(),this.setState({shouldCloseCalendar:!1})},calculateLeft:function(){var a,b,c,d="",e=0;if(this.datePicker){var f=ReactDOM.findDOMNode(this.datePicker);if(Injector.resolve(["DomService"],function(e){a=e.getClosest(f,".rdt-container"),b=e.getClosest(f,"td"),c=e.getClosest(f,".tableLite"),d=f.querySelector(".rdtPicker")},this),a){var g=a.offsetWidth,h=250;e=a.offsetLeft+g-h,e+h>=a.getBoundingClientRect().right&&(e-=a.offsetLeft)}c&&b&&a&&(e=e+b.offsetLeft+c.offsetLeft-c.scrollLeft),d&&(e<0&&(e=0),d.style.left=e+"px")}},render:function(){var a=this.props.disabled?"btn btn-default fix-width-button button-disabled":"btn btn-default fix-width-button",b=classNames("input-group rdt-container",{"drop-on-bot":this.state.dropOnBot},{"open-up":this.state.openUp}),c=this,d={disabled:this.props.disabled,onClick:function(){return!1},onFocus:function(){return c.props.registerFocus(),!1},onBlur:function(a){var b=a.target.value;if(b||c.props.value){var d=void 0;Injector.resolve(["DateTimeFormatter"],function(a){d=c.props.config.includeTime?a.getMomentForDateTime:a.getMomentForDate});var e=b?d(b).toDate():b;c.endEdit(e)}}},e=!this.props.config.includeTime,f=this.props.config.incudeTimeZone?null:this.dbTimeZoneOffset,g=classNames("input-group-btn input-group-addon",{"cell-is-required-date":this.props.isMarkedRequired});return React.createElement("div",{className:b,ref:function(a){c.datePickerContainer=a}},React.createElement(Datetime,{ref:function(a){c.datePicker=a},closeOnSelect:e,timeFormat:this.props.config.includeTime,onChange:this.onCalendarSelected,value:this.state.value,inputProps:d,dbTimeZoneOffset:f}),React.createElement("span",{className:g},React.createElement("button",{type:"button",className:a,disabled:this.props.disabled,onClick:this.toggleOpenCalendar,onMouseDown:this.preserveCalendarOpenState,onTouchStart:this.preserveCalendarOpenState,onKeyDown:this.closeCalendarOnTab,onFocus:c.props.registerFocus},React.createElement("i",{className:"icon ms-Icon ms-Icon--Calendar"}))))}}),b.DateTime.defaultProps={registerFocus:function(){},value:""},a}(window.webcon||{}),window.webcon=function(a){return(a.mixins=a.mixins||{}).DropDownBase={propTypes:{disabled:PropTypes.bool.isRequired},mixins:[a.mixins.DropdownOutsideClick],render:function(){var b=this,c=this.state.items.map(function(c,d){return React.createElement(a.views.DropdownItem,{onChange:b.change,onBlur:b.endEdit,item:c,key:d})}.bind(this)),d="";return Injector.resolve([{depName:"IconRepository",depEnv:a.env}],function(a){d=a.getDropImage()}),React.createElement("div",{className:"dropdown",ref:function(a){b.dropdown=a}},React.createElement("button",{className:"btn btn-default btn-block dropdown-toggle form-control",type:"button",disabled:this.props.disabled||this.state.disabled,"data-toggle":"dropdown"},React.createElement("div",{className:"dropdown-name"},this.state.selected?this.state.selected.name:""),React.createElement("div",{className:"dropdown-arrow"},d)),React.createElement("ul",{className:"dropdown-menu",role:"menu"},c))}},a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{},c=a.mixins;return b.DropdownItem=createReactClass({displayName:"DropdownItem",onChange:function(a){var b=this.props;b.onChange(a),b.onBlur(a)},render:function(){var a=this.props;return React.createElement("li",{role:"presentation"},React.createElement("a",{role:"menuitem",onClick:this.onChange.bind(this,a.item),tabIndex:"-1"},a.item.name))}}),b.Dropdown=createReactClass({displayName:"Dropdown",propTypes:{name:PropTypes.string.isRequired,value:PropTypes.object.isRequired,controller:PropTypes.object.isRequired},mixins:[c.DropDownBase],change:function(a){this.setState({selected:a})},getInitialState:function(){var a=this.props.value;return{selected:a.selected,items:a.availableValues}},componentWillReceiveProps:function(a){var b=a.value;this.setState({selected:b.selected,items:b.availableValues})},endEdit:function(a){var b=this.props.value;if(b.selected.value!==a.value||b.selected.name!==a.name){var c=$.extend({},b);c.selected=a,this.props.controller.change(this.props.name,c)}}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{},c=a.mixins;return b.Email=createReactClass({displayName:"Email",propTypes:{name:PropTypes.string.isRequired,disabled:PropTypes.bool.isRequired,value:PropTypes.string,controller:PropTypes.object.isRequired,registerFocus:PropTypes.func},mixins:[c.EmailBase],change:function(a){this.setState({value:a.target.value})},endEdit:function(a){var b=this,c=a.target.value.trim();if(b.props.value.value!==b.state.value){this.props.controller.checkSaveRestrictions(this.props.name,a.target.value);var d=$.extend({},b.state,{value:c});this.props.controller.change(this.props.name,d)}},render:function(){var b=this,c="";return Injector.resolve([{depName:"IconRepository",depEnv:a.env}],function(a){c=a.getMailImage()}),React.createElement("div",{className:"input-group email-attribute"},React.createElement("input",{type:"email",className:"form-control",disabled:b.props.disabled,value:b.state.value,onChange:b.change,onFocus:this.props.registerFocus,onBlur:b.endEdit}),React.createElement("a",{className:"input-group-addon btn-default",href:b.getHref(),onClick:b.sendEmail},c))}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{};return b.ExternalCustomControl=createReactClass({displayName:"ExternalCustomControl",componentWillMount:function(){Injector.resolve(["FormInfo","DeviceInfo","ClientInfo"],function(a,b,c){this.editMode=a.editMode&&a.allowAddAndDeleteAttachments,this.areAttachmentCategories=a.areAttachmentCategories,this.isNative=b.isNativeMobileApp(),this.isIE=b.isBrowserIE(),this.locale=c.language},this)},addAttachment:function(a){if(a.isLastFileDone){var b=_.chain(a.queue).filter(function(a){return console.log(a),a.isSkipped}).map(function(a){return a.fileName}).value();b.length>0&&Injector.resolve(["PopupController"],function(a){a.showWFAlert(webconLocale.cAddingMessagesTitle,webconLocale.cAddingMessagesFollowingMessagesHaveNotBeedAdded+" \r\n"+_.map(b,function(a){return" "+a}).join(", \r\n"))})}if(a.isSkipped)return void Injector.resolve(["AttachmentController"],function(b){b.addAttachment(a)});Injector.resolve(["AttachmentController","ModelMapper"],function(b,c){b.addAttachment(a)})},handleUploadAdd:function(a){Injector.resolve(["AttachmentsFileUploadHandler"],function(b){b.handleUploadAdd(a)})},handleUploadStart:function(a){this.props.addAttachmentRequest(a)},handleUploadFailed:function(a){this.props.addAttachmentFailed(a)},componentDidMount:function(){var a=this;a.editMode&&!a.isNative&&Injector.resolve(["AttachmentsUploadService"],function(b){b.registerUpload(a.fileupload,a.addAttachment,a.handleUploadStart,a.handleUploadFailed,a.handleUploadAdd)},a)},render:function(){var a=this;return React.createElement("div",{className:"external-custom-control-wrapper"},React.createElement("input",{ref:function(b){a.fileupload=b},id:"fileuploadexternal",type:"file",name:"file",multiple:!0,className:"external-custom-control-input"}),React.createElement(b.JsApp.ExternalCustomControl,{data:a.props.data,isMobileNative:a.props.isMobileNative,externalControlController:a.props.externalControlController,fieldName:a.props.fieldName}))}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{},c=a.mixins;return b.FloatingPoint=createReactClass({displayName:"FloatingPoint",mixins:[c.FloatingPointBase],change:function(a){if(a.target.value!==this.state.formattedValue.formatted){var b=this.keyboard.checkValue(a.target.value);this.setState({formattedValue:{formatted:b}})}},keyDown:function(a){var b=this.input,c=!this.keyboard.checkKey(b,a);this.setState({showTooltip:c})},render:function(){var a=this,c=this.getCurrencyCode();return React.createElement("div",{className:classNames("floating-point wfFormControl form-control",{focused:a.state.isFocused})},React.createElement(b.JsApp.Tooltip,{trigger:"none",content:webconLocale.cFloatingPointInputWarning,tooltipShown:this.state.showTooltip,placement:"bottom"},React.createElement("div",{className:"floating-point__control"},React.createElement("input",{type:"text",autoComplete:"off",disabled:this.props.disabled,onBlur:this.endEdit,onChange:this.change,onFocus:this.hasFocus,onKeyDown:this.keyDown,ref:function(b){a.input=b},value:this.state.formattedValue.formatted}),React.createElement("div",{className:"currency-code"}," ",c," "))))}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{},c=a.mixins;return b.GoogleMap=createReactClass({displayName:"GoogleMap",propTypes:{name:PropTypes.string.isRequired,disabled:PropTypes.bool.isRequired,value:PropTypes.object.isRequired,controller:PropTypes.object.isRequired,config:PropTypes.object.isRequired,registerFocus:PropTypes.func},mixins:[c.GoogleMapBase],componentDidMount:function(){this.initMap(!0)},handleMapClick:function(a){if(!this.props.disabled){var b=this.state,c=this;if(void 0!==b.address){(new google.maps.Geocoder).geocode({location:a},function(a,b){b==google.maps.GeocoderStatus.OK&&c.setState({address:a[0].formatted_address},function(){c.endEdit(!1)})})}else this.setState({latitude:a.lat(),longitude:a.lng()},function(){c.endEdit(!1)});this.endEdit(!1)}},addressChange:function(a){this.setState({address:a.target.value})},latChange:function(a){this.setState({latitude:a.target.value})},longChange:function(a){this.setState({longitude:a.target.value})},endEdit:function(a){var b,c=this,d=c.config;b=0===d.locationType?{latitude:c.state.latitude,longitude:c.state.longitude}:{address:c.state.address},c.props.controller.change(c.props.name,b),c.mapCenter(function(b){c.state.marker.setPosition(b),a&&c.state.map.panTo(b)})},getCoordsControls:function(){var a=this.props.disabled,b=this;return React.createElement("div",null,React.createElement("div",{className:"input-group"},React.createElement("div",{className:"input-group-addon"},webconLocale.cLatitude),React.createElement("input",{type:"text",value:b.state.latitude,onChange:b.latChange,disabled:a,onBlur:b.endEdit.bind(b,!0),className:"form-control",onFocus:this.props.registerFocus})),React.createElement("div",{className:"input-group"},React.createElement("div",{className:"input-group-addon"},webconLocale.cLongitude),React.createElement("input",{type:"text",value:b.state.longitude,onChange:b.longChange,disabled:a,onFocus:this.props.registerFocus,onBlur:b.endEdit.bind(b,!0),className:"form-control"})))},getAddressControls:function(){var a=this;return React.createElement("div",null,React.createElement("div",{className:"input-group"},React.createElement("div",{className:"input-group-addon"},webconLocale.cAddress),React.createElement("input",{type:"text",value:a.state.address,onChange:a.addressChange,disabled:a.props.disabled,onFocus:this.props.registerFocus,onBlur:a.endEdit.bind(a,!0),className:"form-control"})))},render:function(){var a=this;return React.createElement("div",{className:"wfGoogleMap"},React.createElement("div",{className:"map noSwipe",ref:function(b){a.map=b},style:a.style}),0===a.config.locationType?a.getCoordsControls():1===a.config.locationType?a.getAddressControls():"")}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{},c=PropTypes;return b.GroupPanel=createReactClass({displayName:"GroupPanel",propTypes:{control:c.object.isRequired,controller:c.object.isRequired,displayName:c.string.isRequired,initiallyExpanded:c.bool.isRequired,fieldName:c.string.isRequired,members:c.arrayOf(PropTypes.object),orientation:c.oneOf(["Beside","Upside"]).isRequired},getInitialState:function(){return this.isCollapsable()?{expanded:this.props.initiallyExpanded}:{expanded:!0}},componentWillMount:function(){var a=this;a.toggle=_.throttle(a.toggleInternal,500),Injector.resolve(["$Window","ShouldRenderService"],function(b,c){a.win=b,a.shouldRenderService=c},a)},componentWillReceiveProps:function(){this.isCollapsable()&&this.setState({expanded:this.props.control.isExpanded})},getControlsToRender:function(a,b){var c=this.shouldRenderService;return _.chain(a.controls).filter(function(a){return!a.isInGroup||b&&a.groupName&&b.fieldName===a.groupName}).filter(function(b){var d=a[b.fieldName];return c.checkIfShouldRender(d)}).value()},toggleInternal:function(){if(this.isCollapsable()){var a=this.props.control,b=a.isExpanded;a.isExpanded=!b,this.setState({expanded:!b})}},isCollapsable:function(){return"NotCollapsable"!==this.props.config.activityMode},render:function(){var a,c=this.props,d=this.state,e=this.win,f="groupContainer "+(d.expanded?"wfGroupPanelVisible":"wfGroupPanelInvisible"),g="row wfContentRow "+("NotCollapsable"===c.config.activityMode?"":"groupCollapsable"),h="glyphicon glyphicon-menu-up wfGroupIcon pull-right "+(d.expanded?"":"wfGroupPanelInvisible"),i={minHeight:c.config.height},j={controls:c.members};Injector.resolve(["DeviceInfo"],function(b){a=b.isModern()});var k=a?{color:e.model.applicationColor}:{},l={};Injector.resolve(["StyleStringHelper"],function(a){l=a.convertStyleStringToReactStyleObject(c.control.labelStyle||"")}),l=Object.assign(k,l),_.each(j.controls,function(a){j[a.fieldName]=e.model[a.fieldName]});var m=c.control&&c.control.description?c.control.description:null;return React.createElement("div",{className:"wfGroupPanel groupHeader"},React.createElement("div",{className:g,style:i,onClick:this.toggle},React.createElement("div",{className:"col-xs-10 ms-formlabel wfBesideLeft"},React.createElement(b.JsApp.Tooltip,{trigger:"hover",content:m},React.createElement("a",{className:"ms-link th-frm-group",style:l},c.config.isEmptyDisplay?"":c.displayName))),React.createElement("div",{className:"pull-right wfGroupIconHolder"},React.createElement("div",null,this.isCollapsable()?React.createElement("span",{className:h,style:k}):React.createElement("span",null)))),React.createElement("div",null,React.createElement("hr",{className:"ms-formline"})),React.createElement("div",{className:f,id:c.fieldName+"children"
},React.createElement(b.MainPanel,{addMetaData:!1,controller:c.controller,data:j,key:"GroupPanel_"+c.control.id,name:"GroupPanel_"+c.control.id,members:this.getControlsToRender(j,c.control),orientation:c.orientation})))}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{};return b.HandwrittenSignature=createReactClass({displayName:"HandwrittenSignature",propTypes:{disabled:PropTypes.bool.isRequired,value:PropTypes.object.isRequired,controller:PropTypes.object.isRequired,config:PropTypes.object.isRequired,name:PropTypes.string.isRequired},render:function(){return React.createElement(b.JsApp.HandwrittenSignature,{name:this.props.name,disabled:this.props.disabled,height:this.props.config.height,value:this.props.value.value,controller:this.props.controller})}}),a}(window.webcon||{}),window.webcon=function(a){return(a.views=a.views||{}).Image=createReactClass({displayName:"Image",propTypes:{name:PropTypes.string.isRequired,value:PropTypes.object.isRequired,controller:PropTypes.object.isRequired,registerFocus:PropTypes.func},getInitialState:function(){var a=this.props.value;return{imageUrl:a.imageUrl,displayName:a.displayName}},componentWillReceiveProps:function(a){var b=a.value;this.setState({imageUrl:b.imageUrl,displayName:b.displayName})},urlChange:function(a){this.setState({imageUrl:a.target.value})},displayNameChange:function(a){this.setState({displayName:a.target.value})},endEdit:function(){var a={imageUrl:this.state.imageUrl,displayName:this.state.displayName};this.props.value.imageUrl===a.imageUrl&&this.props.value.displayName===a.displayName||this.props.controller.change(this.props.name,a)},render:function(){return React.createElement("div",{className:"linkAttribute"},React.createElement("div",{className:"input-group"},React.createElement("div",{className:"input-group-addon"},webconLocale.cAddress),React.createElement("input",{type:"text",disabled:this.props.disabled,value:this.state.imageUrl,onChange:this.urlChange,onFocus:this.props.registerFocus,onBlur:this.endEdit,className:"form-control"})),React.createElement("div",{className:"input-group"},React.createElement("div",{className:"input-group-addon"},webconLocale.cName),React.createElement("input",{type:"text",disabled:this.props.disabled,value:this.state.displayName,onChange:this.displayNameChange,onFocus:this.props.registerFocus,onBlur:this.endEdit,className:"form-control"})))}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{},c=PropTypes;return b.Indicator=createReactClass({displayName:"Indicator",propTypes:{value:c.number.isRequired,linkData:c.object.isRequired},render:function(){var a="",c=this.props;return Injector.resolve(["ImageRepository"],function(b){a=c.value>1?b.getGreenIndicator():c.value<1?b.getRedIndicator():b.getYellowIndicator()},this),React.createElement(b.BPSDataSourceHyperlink,{linkData:c.linkData},React.createElement("span",{className:"form-control-readonly"},React.createElement("img",{"data-value":c.value,src:a})))}}),a}(window.webcon||{}),window.webcon=function(a){return(a.views=a.views||{}).InspiniaSpinner=createReactClass({displayName:"InspiniaSpinner",propTypes:{isVisible:PropTypes.bool.isRequired},mixins:[a.mixins.PureControl],render:function(){return React.createElement("div",{className:classNames("sk-spinner",{"sk-spinner-small":this.props.isSmall},"sk-spinner-three-bounce","insp-spinner","baseColor")},React.createElement("div",{className:"sk-bounce1"}),React.createElement("div",{className:"sk-bounce2"}),React.createElement("div",{className:"sk-bounce3"}))}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{},c=a.mixins;return b.Integer=createReactClass({displayName:"Integer",mixins:[c.IntegerFormatter],propTypes:{name:PropTypes.string.isRequired,disabled:PropTypes.bool.isRequired,value:PropTypes.number,controller:PropTypes.object.isRequired,registerFocus:PropTypes.func},getInitialState:function(){return{value:this.props.value,showTooltip:!1}},change:function(a){var b=this.CheckIfNumberAndFix(a.target.value);this.setState({value:b})},componentDidMount:function(){Injector.resolve(["NumbersService"],function(a){this.keyboard=a.getNumberKeyboard({decimalSeparator:"",groupSeparator:""})},this)},componentWillReceiveProps:function(a){this.setState({value:a.value})},endEdit:function(a){var b=this,c=b.CheckIfNumberAndFix(a.target.value);c=c?parseInt(c):null,c!==b.props.value&&b.props.controller.change(b.props.name,c),b.setState({showTooltip:!1})},keyDown:function(a){var b=!0,c=this.input;switch(a.key){case",":case".":case" ":b=!1;break;default:b=this.keyboard.checkKey(c,a)}this.setState({showTooltip:!b})},render:function(){var a=this;return React.createElement("div",{className:"row"},React.createElement(b.JsApp.Tooltip,{trigger:"none",content:webconLocale.cIntegerInputWarning,tooltipShown:this.state.showTooltip,delay:500,placement:"bottom"},React.createElement("div",{className:"col-lg-12 col-sm-12 integer-control"},React.createElement("input",{type:"text",className:"wfFormControl form-control",value:this.state.value,disabled:this.props.disabled,ref:function(b){a.input=b},onChange:this.change,onBlur:this.endEdit,onKeyDown:this.keyDown,onFocus:this.props.registerFocus}))))}}),a}(window.webcon||{}),window.webcon=function(a){return(a.views=a.views||{}).JsDropDown=createReactClass({displayName:"JsDropDown",propTypes:{name:PropTypes.string.isRequired,selectedValue:PropTypes.string.isRequired,items:PropTypes.arrayOf(PropTypes.object).isRequired,onChange:PropTypes.func},mixins:[a.mixins.DropdownOutsideClick],getInitialState:function(){return{selectedValue:this.props.selectedValue}},componentWillReceiveProps:function(a){this.setState({selectedValue:a.selectedValue})},change:function(a){this.setState({selectedValue:a.value}),this.props.onChange&&this.props.onChange(a.value)},render:function(){var b=this.state.selectedValue,c=_.find(this.props.items,function(a){return a.value===b}),d="";Injector.resolve([{depName:"IconRepository",depEnv:a.env}],function(a){d=a.getArrowDownIcon()}),!c&&this.props.items.length>0&&(c=this.props.items[0]);var e=this.props.name,f="";c&&(f=c.name);var g=this.props.items,h=this;return React.createElement("div",{className:"dropdown jsDropDown",ref:function(a){h.dropdown=a}},React.createElement("button",{className:"btn btn-default dropdown-toggle",type:"button",id:e,"data-toggle":"dropdown","aria-expanded":"true"},f,"",d),React.createElement("div",{className:"dropdown-container"},React.createElement("ul",{className:"dropdown-menu",role:"menu","aria-labelledby":e},_.map(g,function(a){return React.createElement("li",{role:"presentation",key:a.name},React.createElement("a",{role:"menuitem",className:"dropdown-menuitem","data-key":a.name,onClick:h.change.bind(h,a),tabIndex:"-1"},a.name))}))))}}),a}(window.webcon||{}),window.webcon=function(a){return(a.views=a.views||{}).Link=createReactClass({displayName:"Link",propTypes:{name:PropTypes.string.isRequired,value:PropTypes.object.isRequired,controller:PropTypes.object.isRequired,registerFocus:PropTypes.func},getInitialState:function(){var a=this.props.value.links[0];return{url:a.url,displayName:a.displayName}},componentWillReceiveProps:function(a){var b=a.value.links[0];this.setState({url:b.url,displayName:b.displayName})},urlChange:function(a){this.setState({url:a.target.value})},displayNameChange:function(a){this.setState({displayName:a.target.value})},endEdit:function(){var a={links:[{url:this.state.url,displayName:this.state.displayName}]};JSON.stringify(a)!==JSON.stringify(this.props.value)&&this.props.controller.change(this.props.name,a)},render:function(){return React.createElement("div",{className:"linkAttribute"},React.createElement("div",{className:"input-group"},React.createElement("div",{className:"input-group-addon"},webconLocale.cAddress),React.createElement("input",{type:"text",disabled:this.props.disabled,value:this.state.url,onChange:this.urlChange,onBlur:this.endEdit,className:"form-control linkAttribute__address",onFocus:this.props.registerFocus})),React.createElement("div",{className:"input-group"},React.createElement("div",{className:"input-group-addon"},webconLocale.cName),React.createElement("input",{type:"text",disabled:this.props.disabled,value:this.state.displayName,onChange:this.displayNameChange,onFocus:this.props.registerFocus,onBlur:this.endEdit,className:"form-control linkAttribute__display-name"})))}}),a}(window.webcon||{}),window.webcon=function(a){return(a.views.lite=a.views.lite||{}).Bool=createReactClass({displayName:"Bool",propTypes:{name:PropTypes.string.isRequired,disabled:PropTypes.bool.isRequired,value:PropTypes.object.isRequired,controller:PropTypes.object.isRequired},getInitialState:function(){return{isChecked:this.props.value}},componentWillReceiveProps:function(a){var b=a.value;this.setState({isChecked:b})},change:function(){var a=this.props;if(!a.disabled){var b=!this.state.isChecked;this.setState({isChecked:b}),a.controller.change(a.name,b)}},render:function(){return React.createElement("div",{className:"checkbox__wrapper"},React.createElement("input",{type:"checkbox",className:"checkbox-control",checked:this.state.isChecked,onClick:this.change,disabled:this.props.disabled}))}}),a}(window.webcon||{}),window.webcon=function(a){return(a.views.lite=a.views.lite||{}).Dropdown=createReactClass({displayName:"Dropdown",propTypes:{name:PropTypes.string.isRequired,items:PropTypes.arrayOf(PropTypes.object).isRequired,onChange:PropTypes.func},getInitialState:function(){return{selectedValue:this.props.value.selected.value}},getSelectedOption:function(a){var b=a[a.selectedIndex],c=_.find(this.props.value.availableValues,function(a){return a.value===b.value}),d=$.extend({},this.props.value);return d.selected={name:c.name,value:c.value,databaseValue:c.databaseValue},d},change:function(a){var b=this.getSelectedOption(a.target);this.setState({selectedValue:b.selected.value}),this.props.controller.change(this.props.name,b)},componentWillReceiveProps:function(a){var b=a.value.selected.value;this.state.selectedValue!==b&&this.setState({selectedValue:b})},render:function(){var a=this.props.value.availableValues,b=this;return React.createElement("select",{name:this.props.name,onChange:this.change.bind(),disabled:this.props.disabled,className:"dropdown form-control",value:this.state.selectedValue},_.map(a,function(a,c){return React.createElement("option",{key:c,value:a.value},b.props.disabled&&""===a.databaseValue?"":a.name)}))}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{},c=a.views.lite=a.views.lite||{},d=a.mixins;return c.FloatingPoint=createReactClass({displayName:"FloatingPoint",mixins:[d.FloatingPointBase],change:function(a){var b=Object.assign({},this.state.formattedValue,{formatted:a.target.value});this.setState({formattedValue:b})},keyDown:function(a){var b=this.input,c=!this.keyboard.checkKey(b,a);this.setState({showTooltip:c})},render:function(){var a=this,c=this.getCurrencyCode();return React.createElement("div",{className:classNames("floating-point wfFormControl form-control",{focused:a.state.isFocused}),disabled:this.props.disabled},React.createElement(b.JsApp.Tooltip,{trigger:"none",content:webconLocale.cFloatingPointInputWarning,tooltipShown:this.state.showTooltip,placement:"bottom"},React.createElement("div",{className:"floating-point__control"},React.createElement("input",{type:"text",autoComplete:"off",disabled:this.props.disabled,onBlur:this.endEdit,onChange:this.change,onFocus:this.hasFocus,onKeyDown:this.keyDown,ref:function(b){a.input=b},value:this.state.formattedValue.formatted}),c&&React.createElement("div",{className:"currency-code"}," ",c," "))))}}),a}(window.webcon||{}),window.webcon=function(a){return(a.views=a.views||{}).PaginationControlLite=createReactClass({displayName:"PaginationControlLite",click:function(a){a<=this.props.buttonsCount&&a>0&&a!=this.props.currentPageIndex&&(this.props.currentPageIndex=a,this.props.getData(a))},getPagination:function(a){var b=[];_(this.props.buttonsCount).times(function(a){b.push(a)});var c,d=a<4?6:1,e=this.props.buttonsCount-a<4?6:1,f=_.first(b,d),g=_.last(b,e),h=_.reject(b,function(b){return Math.abs(b-(a-1))>2}),i=function(a,b){return a-b},j=_.uniq(_.union(f,h,g)).sort(i),k=[];for(c=0;c<j.length-1;c++)k.push(j[c]),j[c]+1!==j[c+1]&&k.push("...");return k.push(_.last(j)),k},render:function(){var a=this,b=!1,c=1===a.props.currentPageIndex?"":webconLocale.cPreviousPage,d=a.props.currentPageIndex===a.props.buttonsCount?"":webconLocale.cNextPage;return React.createElement("nav",null,React.createElement("ul",{className:"page pagesList"},this.getPagination(a.props.currentPageIndex).map(function(c,d){var e="";c+1===a.props.currentPageIndex&&(e+="active");var f=b&&!isNaN(c)?React.createElement("li",{key:2*d,className:"separator"},"|"):"";return b=!isNaN(c),[f,React.createElement("li",{key:2*d+1,className:e},isNaN(c)?React.createElement("span",{className:"pageControl ms-core-defaultFont"},c):React.createElement("a",{className:"pageControl",onClick:a.click.bind(a,c+1)},c+1))]})),React.createElement("ul",{className:"page pageNavigation"},React.createElement("li",{className:""},React.createElement("a",{className:"pageControl pagePrevious",onClick:a.click.bind(a,a.props.currentPageIndex-1),"aria-label":"Previous"},React.createElement("span",{"aria-hidden":"true"},c))),React.createElement("li",null,React.createElement("span",null,"[",this.props.currentPageIndex,"/",this.props.buttonsCount,"]")),React.createElement("li",{className:""},React.createElement("a",{className:"pageControl pageNext",onClick:a.click.bind(a,a.props.currentPageIndex+1),"aria-label":"Next"},React.createElement("span",{"aria-hidden":"true"},d)))))}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views.lite=a.views.lite||{},c=a.views=a.views||{};return b.RichText=createReactClass({displayName:"RichText",propTypes:{name:PropTypes.string.isRequired,disabled:PropTypes.bool.isRequired,value:PropTypes.object.isRequired,controller:PropTypes.object.isRequired,registerFocus:PropTypes.func},getInitialState:function(){var a=this;return Injector.resolve(["CommentsSortService"],function(b){a.comments=b.sortCommentsByDate(a.props.value.comments)}),{editorState:{}}},componentWillMount:function(){var a=window.Draft;this.EditorState=a.EditorState,this.Editor=window.reactDraftWysiwyg.Editor,this.ContentState=a.ContentState,this.convertToRaw=a.convertToRaw,this.convertFromHtml=window.htmlToDraftjs.default,this.convertToHtml=window.draftjsToHtml,this.setState({editorState:this.buildEditorState(this.props.value.primary)}),this.editorHeight=this.calculateEditorHeight(),this.fillToolbars()},getHtmlValue:function(){var a,b,c=this.state.editorState,d=c.getCurrentContent();return d.hasText()?(a=this.convertToRaw(d),b=this.convertToHtml(a)):b="",b},componentWillReceiveProps:function(a){(this.state.editorState?this.getHtmlValue():"")!==a.value.primary&&this.setState({editorState:this.buildEditorState(a.value.primary)})},fillToolbars:function(){this.standardToolbar={},this.customToolbar=[],Injector.resolve(["RichTextToolbarService"],function(a){this.standardToolbar=a.getToolbar(this.props.config.toolbarOptions)},this),this.props.config.toolbarOptions.clear&&this.customToolbar.push(React.createElement(b.ClearToolbarButton,{editorState:this.state.editorState,onChange:this.onEditorStateChange}))},calculateEditorHeight:function(){var a=this.props.config.lines;return{height:"calc("+2*Number(a)+"em + 12px)"}},buildEditorState:function(a){if(!a)return this.EditorState.createEmpty();var b=this.convertFromHtml(a),c=this.ContentState.createFromBlockArray(b.contentBlocks,b.entityMap);return this.EditorState.createWithContent(c)},onEditorStateChange:function(a){var b,c;this.editorReference&&(c=this.editorReference.editor),c&&c!==document.activeElement&&(b=this.endEdit),this.setState({editorState:a},b)},endEdit:function(){var a=this.props,b=this.getHtmlValue();a.value.primary!==b&&a.controller.change(a.name,{comments:this.comments,primary:b})},setEditorReference:function(a){this.editorReference=a},noOpFalse:function(){return!1},render:function(){return React.createElement("div",null,React.createElement(this.Editor,{editorState:this.state.editorState,spellCheck:!0,readOnly:this.props.disabled,toolbarHidden:this.props.disabled,editorRef:this.setEditorReference,toolbarCustomButtons:this.customToolbar,onEditorStateChange:this.onEditorStateChange,onBlur:this.endEdit,onFocus:this.props.registerFocus,toolbar:this.standardToolbar,handlePastedText:this.noOpFalse,wrapperClassName:classNames("textEditor-wrapper",{"textEditor-readonly":this.props.disabled}),editorClassName:"textEditor",editorStyle:this.editorHeight}),React.createElement(c.JsApp.CommentsEntries,{comments:this.comments,richEditMode:!0}))}}),a}(window.webcon||{}),window.webcon=function(a){return(a.views.lite=a.views.lite||{}).ClearToolbarButton=createReactClass({displayName:"ClearToolbarButton",propTypes:{onChange:PropTypes.func,editorState:PropTypes.object},componentWillMount:function(){this.EditorState=window.Draft.EditorState,this.ContentState=window.Draft.ContentState},clearDocument:function(){var a=this.props.editorState;(0,this.props.onChange)(this.EditorState.push(a,this.ContentState.createFromText(""),"remove-range"))},render:function(){return React.createElement("div",{className:"rdw-clear-wrapper"},React.createElement("div",{className:"rdw-option-wrapper",onClick:this.clearDocument},React.createElement("i",{className:"icon ms-Icon ms-Icon--Page","aria-hidden":"true"})))}}),a}(window.webcon||{}),window.webcon=function(a){return(a.views.lite=a.views.lite||{}).SimpleDropdown=createReactClass({displayName:"SimpleDropdown",propTypes:{items:PropTypes.arrayOf(PropTypes.object).isRequired,onChange:PropTypes.func},getInitialState:function(){return{selectedValue:this.props.value.selected.value}},getSelectedOption:function(a){var b=a[a.selectedIndex],c=this.props.value;return c.selected={value:b.value},c},change:function(a){var b=this.getSelectedOption(a.target);this.setState({selectedValue:b.selected.value}),this.props.onChange(b.selected)},shouldBeSelected:function(a){return a.value===this.state.selectedValue},render:function(){var a=this.props.value.availableValues,b=this;return React.createElement("select",{onChange:this.change.bind(),className:"dropdown"},_.map(a,function(a){return React.createElement("option",{key:a.value,value:a.value,selected:b.shouldBeSelected(a)},a.name)}))}}),a}(window.webcon||{}),Injector.factory("SqlGridComponentsFactory",[],function(){function a(a,b,d){return React.createElement(c.PaginationControlLite,{buttonsCount:a,getData:d,currentPageIndex:b})}function b(a,b,c,d,e){var f;return a&&b.summationType&&("Sum"===b.summationType?f=webconLocale.cSum:"Avarage"===b.summationType&&(f=webconLocale.cAverage),e={value:e}),React.createElement("td",{key:c,className:"ms-vb2",title:f,"data-column":b.columnName},d.createTableCell(b,e))}var c=webcon.views;return{getPaginationComponent:a,getSummary:b}},Injector.env.global),Injector.factory("SubelementCellStyleFactory",["SubelementColumnStyleFactory"],function(a){function b(b,c){var d,e=a.getColumnStyle(b,c);return Injector.resolve(["FormInfo"],function(a){d=a.editMode}),e+=" subelem-base-cell subelem-cell",e+=d?" subelem-edit-cell":" subelem-readonly-cell"}return{getCellStyle:b}},Injector.env.lite),Injector.factory("SubelementColumnStyleFactory",[],function(){function a(a,b){var c="";switch(a.columnType){case"SingleRowText":c="subelem-singleRowText-cell";break;case"CalculatedTextSelect":case"CalculatedText":c="subelem-nowrap-cell subelem-floatingPoint";break;case"FloatingPoint":case"FloatingPointCalculated":c=b.config.showCurrencyCode?"subelem-nowrap-cell subelem-amount":"subelem-nowrap-cell subelem-floatingPoint";break;case"Bool":c="subelem-center-cell subelem-bool-cell";break;case"Picker":c="subelem-picker-cell";break;case"Autocomplete":case"ChoiceTree":c="subelem-picker-small-cell";break;case"Date":c=b.config.includeTime?"subelem-date-with-time-cell":"subelem-date-cell";break;case"Choose":c="subelem-choose-cell";break;case"Email":c="subelem-email-cell";break;case"MultiRowText":c="subelem-multiRowText-cell";break;case"LocalAttachments":case"RelativeAttachments":c="subelem-attachments-cell"}return c}return{getColumnStyle:a}}),window.webcon=function(a){var b=a.views.lite=a.views.lite||{},c=a.views;return b.SurveyRating=createReactClass({displayName:"SurveyRating",propTypes:{name:PropTypes.string.isRequired,disabled:PropTypes.bool.isRequired,value:PropTypes.object.isRequired,controller:PropTypes.object.isRequired,config:PropTypes.object.isRequired},getInitialState:function(){return{selectedValue:this.props.value}},componentWillMount:function(){var a=this.props.config;this.titlePlacement=a.titlePlacement,this.scaleMax=a.scaleMax,this.scaleMin=a.scaleMin,this.question=a.question,this.selectedValue=this.props.value,this.maxValueDescription=a.max?a.max:"Max",this.minValueDescription=a.min?a.min:"Min"},componentWillReceiveProps:function(a){var b=a.value;this.setState({selectedValue:b})},change:function(a){this.props.disabled||(this.setState({selectedValue:a}),Injector.resolve(["AttributeChangeController","RedrawService"],function(b,c){this.props.controller.change(this.props.name,parseInt(a))},this))},render:function(){for(var a="",b="surveyControlWrapper row",d=[],e=this.scaleMin;e<=this.scaleMax;e++)d.push(e);"Upside"===this.titlePlacement&&(a=React.createElement(c.Tooltip,{tooltip:this.props.description},React.createElement("div",{className:"surveyRatingQuestion",dangerouslySetInnerHTML:{__html:this.question}})),b+=" ms-featurealtrow");var f=this,g=this.state;return React.createElement("div",null,a,React.createElement("div",{className:b},React.createElement("div",{className:"surveyRatingRadioRow row"},React.createElement("div",{className:"surveyColumn surveyRatingDescription ms-RadioText"},React.createElement("span",null,this.minValueDescription)),React.createElement("div",{className:"surveyColumn surveyRatingOptions"},d.map(function(a,b){var c=g.selectedValue===a;return React.createElement("div",{key:b,className:"surveyRatingOptionWrapper"},React.createElement("div",{className:"surveyRatingOption"},React.createElement("input",{type:"radio",className:"",disabled:f.props.disabled,checked:c,onClick:f.change.bind(f,a),"data-value":a})),React.createElement("div",{className:"surveyRatingLabel ms-gridCol"}," ",a," "))})),React.createElement("div",{className:"surveyColumn surveyRatingDescription ms-RadioText"},React.createElement("span",null,this.maxValueDescription)))))}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{};return b.LoadingPanel=createReactClass({displayName:"LoadingPanel",propTypes:{isVisible:PropTypes.bool.isRequired,isOpaque:PropTypes.bool},mixins:[a.mixins.PureControl],render:function(){return React.createElement("div",{className:"lite-spinner-wrapper"},this.props.isVisible&&React.createElement(b.BlurredOverlay,{isVisible:this.props.isVisible,isOpaque:this.props.isOpaque},React.createElement(b.InspiniaSpinner,null)),this.props.children)}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{};return b.LoadingPanelDelayedWrapper=createReactClass({displayName:"LoadingPanelDelayedWrapper",propTypes:{isVisible:PropTypes.bool.isRequired,delay:PropTypes.number.isRequired},mixins:[a.mixins.PureControl],getInitialState:function(){return{isShown:!1}},componentDidUpdate:function(a){if(!a.isVisible&&this.props.isVisible){var b=this;this.setState({isShown:!1},function(){return setTimeout(function(){return b.show()},b.props.delay)})}},show:function(){this.setState({isShown:!0})},render:function(){return React.createElement(b.LoadingPanel,{isVisible:this.props.isVisible,isOpaque:!this.state.isShown},this.props.children)}}),a}(window.webcon||{});var _extends=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a};window.webcon=function(a){var b=a.views=a.views||{},c=createReactClass({displayName:"LocalAttachments",getInitialState:function(){return{isLoading:!1}},componentWillMount:function(){var a=this;Injector.resolve(["FormInfo","DeviceInfo","WaitingPanelService","LocalAttachmentsController"],function(b,c,d,e){a.editMode=b.editMode,a.areAttachmentCategories=b.areAttachmentCategories,a.isNative=c.isNativeMobileApp(),a.waitingPanelService=d,a.localAttachmentsController=e},a)},componentDidMount:function(){var a=!1===this.editMode||this.props.isReadOnly;this.isNative||a||this.registerFileUpload()},componentDidUpdate:function(a){a.isReadOnly&&!this.props.isReadOnly&&this.registerFileUpload()},registerFileUpload:function(){var a=this;Injector.resolve(["AttachmentsUploadService"],function(b){b.registerUpload(a,a.addAttachment,a.handleUploadStart,a.handleUploadFailed,a.handleUploadAdd)},a)},waitingPanelCallback:function(a){this.setState({isLoading:a})},getAttachmentActions:function(){var a=this;return{previewAtt:function(b){Injector.resolve(["AttachmentsPreviewService"],function(c){c.preview(b,void 0,void 0,void 0,a.props.insidePopup?"IN_MODAL":"IN_PLACE")})},previewAttInNewWindow:function(a){Injector.resolve(["AttachmentsPreviewService"],function(b){b.previewInNewWindow(a)})},downloadAtt:function(a){Injector.resolve(["AttachmentsDownloadService"],function(b){b.download(a.attId,a.version)})},overwriteAtt:function(b){Injector.resolve(["PopupController"],function(c){c.showOverwriteAtt(b,function(b){a.addAttachment(b)},a.handleUploadStart,a.handleUploadFailed)})},detachAtt:function(b){a.removeAttachmentFromState(b.attId)},editAtt:function(a){Injector.resolve(["AttachmentsDownloadService"],function(b){b.edit(a.attId)})}}},attachExistingAttachmentClick:function(){var a=this;Injector.resolve(["PopupController"],function(b){b.showAttachLocalAttachmentsToSubelement(a.props.allAttachments,a.props.attachmentIds,a.updateAttachments,a.props.config)},a)},addAttachment:function(a){var b=this;Injector.resolve(["AttachmentController"],function(c){b.isNative?(c.addAttachmentNative(a),b.addAttachmentToState(a.attId)):(c.addAttachment(a),b.addAttachmentToState(a.nodes[0].attId))})},handleAddAttachmentClickInNative:function(){var a=this;a.isNative&&Injector.resolve(["PopupController"],function(b){b.showAddAttachmentWithCategoryInNative(a.addAttachment,a.handleUploadStart,a.handleUploadFailed,a.handleUploadAdd,!1)})},handleUploadStart:function(a){this.props.addAttachmentRequest(a)},handleUploadFailed:function(a){this.props.addAttachmentFailed(a)},handleUploadAdd:function(a){this.localAttachmentsController.handleUploadAdd(a,this.props.config.addToDefaultCategory,this.props.controller,this.props.name)},addAttachmentToState:function(a){var b=this.props.attachmentIds;b=b?$.extend(!0,[],b):[],b.push(a),this.updateAttachments(b)},removeAttachmentFromState:function(a){var b=_.without(this.props.attachmentIds,a);this.updateAttachments(b)},updateAttachments:function(a){this.props.controller.change(this.props.name,{attachmentIds:a},{validate:!1})},handleAttachmentIconClick:function(a,b){var c=this;2!==b.button&&(b.ctrlKey||1===b.button?Injector.resolve(["AttachmentsPreviewService"],function(b){b.previewInNewWindow(a)}):Injector.resolve(["AttachmentIconActionService"],function(b){b.handleIconClick(a,void 0,void 0,void 0,c.props.insidePopup?"IN_MODAL":"IN_PLACE")}))},showLoadingPanel:function(){this.waitingPanelService.showLoadingPanel(this.waitingPanelCallback)},hideLoadingPanel:function(){this.waitingPanelService.hideLoadingPanel(this.waitingPanelCallback)},getImageTitleForAtt:function(a){var b=null;return Injector.resolve(["AttachmentActionsAvailabilityService"],function(c){b=c.isPreviewAvailable(a)?webconLocale.cAttMenuPreview:webconLocale.cAttMenuDownload}),b},getImageUrlForAtt:function(a){var b=void 0;return Injector.resolve(["AttachmentsIconService"],function(c){b=c.getSmallIcon(a)}),b},getAttachmentMenuButtons:function(a){var c=this.getAttachmentActions(),d=this;return React.createElement(b.AttachmentMenuButton,{actions:c,className:"table-tree-button-wrapper",node:a,disabled:d.props.disabled,tab:"all",isAttachmentColumnMenu:!0,modifiers:{preventOverflow:{enabled:!0,priority:["left","right"]}}})},getDeletedAttachmentMenuButtons:function(a){var c=this,d={detachAtt:function(a){c.props.controller.removeAllErrors(c.props.name),c.removeAttachmentFromState(a)}};return React.createElement(b.AttachmentMenuButton,{actions:d,className:"table-tree-button-wrapper",disabled:c.props.disabled,node:a,tab:"all",deleted:!0,isAttachmentColumnMenu:!0,modifiers:{preventOverflow:{enabled:!0,priority:["left","right"]}}})},getAddLocalAttachmentIcon:function(){return Injector.resolve([{depName:"IconRepository",depEnv:a.env}],function(a){return a.getAddLocalAttachmentIcon()})},getAttachExistingLocalAttachmentIcon:function(){return Injector.resolve([{depName:"IconRepository",depEnv:a.env}],function(a){return a.getAttachExistingLocalAttachmentIcon()})},getColumnEditModeButtons:function(){var a=this,b=a.props.disabled||!a.localAttachmentsController.canAddAttachment(a.props.config.allowManyAttachments,a.props.selectedAttachments.length,a.props.deletedAttachments.length);return React.createElement("div",null,React.createElement("div",{className:"add-attachment-button"},!a.isNative&&React.createElement("input",{disabled:b,ref:"fileupload",id:"fileupload-local",type:"file",name:"file"}),React.createElement("button",{onClick:a.handleAddAttachmentClickInNative,disabled:b,type:"button",className:classNames("btn btn-default",{"add-disabled":b}),title:webconLocale.cAddAttachment},this.getAddLocalAttachmentIcon())),React.createElement("button",{onClick:a.attachExistingAttachmentClick,disabled:a.props.disabled,type:"button",className:"btn btn-default attach-attachment-button",title:webconLocale.cAttachExisting},this.getAttachExistingLocalAttachmentIcon()))},render:function(){var a=this,c=a.props.selectedAttachments,d=webconLocale.cDeletedAttachment,e=a.props.deletedAttachments,f=!1===this.editMode||this.props.isReadOnly;return React.createElement("div",{className:classNames("local-attachments",{"form-attachment-control-readonly":f})},React.createElement(b.WaitingPanel,{isVisible:a.state.isLoading}),c.map(function(b){return React.createElement("div",{key:b.attId,className:"table-tree"},React.createElement("div",{className:"table-tree-row"},React.createElement("div",{className:"table-tree-column attachment-name-column"},React.createElement("div",{className:"table-tree-icon",onMouseDown:a.handleAttachmentIconClick.bind(a,b)},React.createElement("img",{src:a.getImageUrlForAtt(b),title:a.getImageTitleForAtt(b),alt:a.getImageTitleForAtt(b)})),React.createElement("div",{className:"attachment-name-wrapper",onMouseDown:a.handleAttachmentIconClick.bind(a,b)},React.createElement("div",{className:"attachment-name",title:b.name},b.name))),React.createElement("div",{className:"table-tree-column attachment-actions-column"},a.getAttachmentMenuButtons(b))))}),e.map(function(b){return React.createElement("div",{key:b.attId,className:"table-tree"},React.createElement("div",{className:"table-tree-row"},React.createElement("div",{className:"table-tree-column attachment-name-column"},React.createElement("div",{className:"attachment-name-wrapper"},React.createElement("div",{className:"attachment-name deleted",title:d},d))),!f&&React.createElement("div",{className:"table-tree-column attachment-actions-column"},a.getDeletedAttachmentMenuButtons(b))))}),React.createElement("div",{className:"table-tree-column attachment-buttons-column"},f?null:a.getColumnEditModeButtons()))}});return c.propTypes={allAttachments:PropTypes.array.isRequired,attachmentIds:PropTypes.array.isRequired,deletedAttachments:PropTypes.array.isRequired,selectedAttachments:PropTypes.array.isRequired,controller:PropTypes.object.isRequired,config:PropTypes.object.isRequired,name:PropTypes.string.isRequired,statuses:PropTypes.object,disabled:PropTypes.bool,isReadOnly:PropTypes.bool,
insidePopup:PropTypes.bool},b.LocalAttachments=createReactClass({displayName:"LocalAttachments",render:function(){var a=this.props;return React.createElement(b.PopupContext.Consumer,null,function(b){return React.createElement(c,_extends({insidePopup:b},a))})}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{},c=a.mixins;return b.MetaDataDropDown=createReactClass({displayName:"MetaDataDropDown",propTypes:{availableValues:PropTypes.object.isRequired,currentValue:PropTypes.object,disabled:PropTypes.bool.isRequired,callback:PropTypes.func.isRequired,confirmationTitle:PropTypes.string.isRequired,confirmationMessage:PropTypes.string.isRequired},mixins:[c.DropDownBase],change:function(a){var b=this;Injector.resolve(["PopupController"],function(c){c.showWFConfirmAction(b.props.confirmationTitle,b.props.confirmationMessage,function(){b.props.callback(a.id)})})},getInitialState:function(){return{selected:this.props.currentValue,items:this.props.availableValues}},componentWillReceiveProps:function(a){this.setState({selected:a.currentValue,items:a.availableValues})},endEdit:function(a){}}),a}(window.webcon||{}),Injector.factory("SubelementCellStyleFactory",[],function(){function a(a){var b="";switch(a.columnType){case"FloatingPoint":case"FloatingPointCalculated":case"CalculatedTextSelect":case"CalculatedText":b="subelem-nowrap-cell subelem-floatingPoint"}return b+=" subelem-cell"}return{getCellStyle:a}},Injector.env.mobile),window.webcon=function(a){var b=a.views=a.views||{};return b.MultiRow=createReactClass({displayName:"MultiRow",propTypes:{name:PropTypes.string.isRequired,disabled:PropTypes.bool.isRequired,value:PropTypes.object.isRequired,controller:PropTypes.object.isRequired,config:PropTypes.object.isRequired,registerFocus:PropTypes.func},getInitialState:function(){var a=this.props.value,b=this;return this.linesLimit=this.props.config.lines,Injector.resolve(["CommentsSortService"],function(c){b.comments=c.sortCommentsByDate(a.comments)}),{value:a.primary}},change:function(a){this.setState({value:a.target.value})},componentWillReceiveProps:function(a){this.setState({value:a.value.primary})},endEdit:function(a){var b=this.props;b.value.primary!==a.target.value&&b.controller.change(b.name,{comments:this.comments,primary:a.target.value})},render:function(){return React.createElement("div",null,React.createElement("textarea",{className:"wfFormControl form-control",value:this.state.value,disabled:this.isDisabled(),readOnly:this.isReadonly(),onChange:this.change,rows:this.linesLimit,onBlur:this.endEdit,onFocus:this.props.registerFocus}),React.createElement(b.JsApp.CommentsEntries,{comments:this.comments}))},isDisabled:function(){return this.props.disabled&&a.env!==Injector.env.lite},isReadonly:function(){return this.props.disabled&&a.env===Injector.env.lite}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{},c=PropTypes;return b.PercentageDisplay=createReactClass({displayName:"PercentageDisplay",propTypes:{value:c.number.isRequired,linkData:c.object.isRequired},render:function(){var a=this.props,c=a.value>100?100:a.value;c=c<0?0:c,c=Math.round(c);var d={minWidth:"2em",width:c+"%"};return React.createElement(b.BPSDataSourceHyperlink,{linkData:a.linkData},React.createElement("div",{className:"progress"},React.createElement("div",{className:"progress-bar",role:"progressbar","aria-valuenow":c,"aria-valuemin":"0","aria-valuemax":"100",style:d},c,"%")))}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{},c=a.mixins;return b.Picker=createReactClass({displayName:"Picker",propTypes:{name:PropTypes.string.isRequired,disabled:PropTypes.bool.isRequired,value:PropTypes.object.isRequired,controller:PropTypes.object.isRequired,config:PropTypes.object.isRequired,isValuesBind:PropTypes.bool,initialValue:PropTypes.string,registerFocus:PropTypes.func},mixins:[c.PickerBase,c.PickerLogic],componentDidMount:function(){var a=this.props.initialValue;a&&this.checkValue(a)},handleChange:function(a){var b=this.state.value;if(b.rawValue!==a){b.rawValue=a;var c=this.props.controller,d=this.props.name;b.valueNotValid=!1,c&&d&&c.change(d,b),this.setState({value:b})}},handleCheck:function(a){this.checkValue(a)},handleRemoveItem:function(a){var b=this.state.value,c=$.extend({},b);c.pickerEntities=_.filter(b.pickerEntities,function(b){return b.key!==a}),c.rawValue=b.rawValue,this.props.isValuesBind&&this.props.updatePickerValueCallback&&this.props.updatePickerValueCallback(c),this.updateModel(c),this.setState({value:c})},handleSearch:function(a,b){this.showSelectPopupValue(b)},checkValue:function(a){var b=this,c=a;this.handleChange(a),c&&Injector.resolve(["PickerController"],function(d){d.validate(c,b.props.name,this.state.config,function(c){b.checkValueCallback(a,c)},void 0,b.props.controller.context,b.props.controller.rowId)},this)},checkValueCallback:function(a,b){var c=!0,d=[],e=[];if(_.each(b,function(a){a.isResolved?d.push(a):(c=!1,e.push(a.key))}),c)this.setValue(d,e.join(","));else{var f=this.props.controller,g=this.props.name,h=this.state.value;h.valueNotValid=!0,f&&g&&f.change(g,h),this.showSelectPopupValue(a)}},showSelectPopupValue:function(a){var b=this,c={rawValue:a,pickerEntities:this.state.value.pickerEntities.slice()};Injector.resolve(["PopupController"],function(a){b.state.config.allowMultiValue?a.showPickerSelectPopup(b.props.popupTitle,b.props.name,c,b.replaceValue,b.state.config,b.props.controller.context,b.props.controller.rowId):a.showPickerSingleValueSelectPopup(b.props.popupTitle,b.props.name,c,b.replaceValue,b.state.config,b.props.controller.context,b.props.controller.rowId)})},render:function(){var a=this,c=a.state,d=c.config,e=this.props.value,f=e.valueNotValid&&!c.isInCustomValueMode?React.createElement("div",{className:"picker-error-message"},webconLocale.cPickerValidateFalied," ",c.value.rawValue,"."):null;return React.createElement("div",{className:"picker-container"},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-xs-12"},React.createElement(b.CustomValueWrapper,{allowAddingCustomValue:d.allowAddingCustomValue,isDisabled:this.props.disabled,isInCustomValueMode:c.isInCustomValueMode,onChangeModeClick:this.handleChangeModeClick,customValueComponent:React.createElement(b.CustomValueControl,{inputValue:c.value.customValue,isDisabled:this.props.disabled,isMulti:d.allowMultiValue,isUnresolved:e.valueNotValid,ref:function(b){a.refCustomValueControl=b},onBlur:this.handleBlurCustomValue,onChange:this.handleChangeCustomValue}),sourceValueComponent:React.createElement(b.PickerControl,{inputValue:c.value.rawValue,isDisabled:this.props.disabled,isMulti:d.allowMultiValue,isUnresolved:e.valueNotValid,items:c.value.pickerEntities,onChange:this.handleChange,onCheck:this.handleCheck,onSearch:this.handleSearch,onRemoveItem:this.handleRemoveItem,showAsALink:d.showLinkForSelectedElements,registerFocus:this.props.registerFocus})}))),React.createElement("div",{className:classNames("row","picker-error-row",{hidden:!f})},React.createElement("div",{className:"col-xs-12"},f)))}}),b.Picker.defaultProps={value:{}},a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{};return b.Picture=createReactClass({displayName:"Picture",propTypes:{name:PropTypes.string.isRequired,disabled:PropTypes.bool.isRequired,value:PropTypes.object.isRequired,controller:PropTypes.object.isRequired,config:PropTypes.object.isRequired,emptyControlMessage:PropTypes.string.isRequired,borderColor:PropTypes.string.isRequired},getInitialState:function(){return{value:this.props.value.value}},componentDidUpdate:function(a){var b=this.props.value;b.value!==a.value.value&&this.setState({value:b.value})},componentDidMount:function(){window.document.addEventListener("dragenter",this.handleDragEnter),window.document.addEventListener("dragleave",this.handleDragLeave),window.document.addEventListener("dragover",this.handleDragOver,!0),window.document.addEventListener("drop",this.handleDrop),window.document.addEventListener("touchend",this.handleTouchEnd)},componentWillUnmount:function(){window.document.removeEventListener("dragenter",this.handleDragEnter),window.document.removeEventListener("dragleave",this.handleDragLeave),window.document.removeEventListener("dragover",this.handleDragOver,!0),window.document.removeEventListener("drop",this.handleDrop),window.document.removeEventListener("touchend",this.handleTouchEnd)},handleDragEnter:function(a){if(!this.props.disabled&&(this.eventTarget=a.target,this.dropZone)){var b=ReactDOM.findDOMNode(this.dropZone);b.style["border-color"]=""+this.props.borderColor,b.classList.add("drop-zone"),b.contains(a.target)?b.classList.add("over"):b.classList.remove("over")}},handleDragLeave:function(a){if(!this.props.disabled&&this.dropZone){var b=ReactDOM.findDOMNode(this.dropZone);this.eventTarget===a.target&&(b.classList.remove("over"),b.classList.remove("drop-zone"),b.style["border-color"]="")}},handleDragOver:function(a){if(a.preventDefault(),a.dataTransfer&&!this.props.disabled){ReactDOM.findDOMNode(this.dropZone).contains(a.target)&&(a.dataTransfer.dropEffect="copy",a.stopPropagation())}},handleDrop:function(a){if(!this.props.disabled&&(a.preventDefault(),this.dropZone)){var b=ReactDOM.findDOMNode(this.dropZone);if(b.style["border-color"]="",b.classList.remove("drop-zone"),b.classList.remove("over"),b.contains(a.target)){var c=a.dataTransfer;if(c&&c.files.length>0){var d=c.files;this.handleUpload(d[0])}}}},handleFileSelected:function(){if(0!==this.fileUpload.files.length){var a=this.fileUpload.files[0];this.handleUpload(a),this.uploadForm.reset()}},handlePaste:function(a){if(!this.props.disabled){var b=!1;Injector.resolve(["DeviceInfo"],function(a){b=a.isBrowserEdge()});var c=b?a.clipboardData.items[0].getAsFile():(a.clipboardData||a.originalEvent.clipboardData).files[0];c&&this.handleUpload(c)}},handleUpload:function(a){var b=this,c=new FileReader,d=!0;Injector.resolve(["PictureController"],function(c){d=c.validateFile(a,b.props.config)}),d&&(c.addEventListener("loadend",function(){b.endEdit(c)}),c.readAsDataURL(a))},endEdit:function(a){var b=a.result;this.setState({value:b});var c=this.props.value;b&&b!==c.value&&this.props.controller.change(this.props.name,{value:b})},handleRemoveClick:function(){this.setState({value:""}),""!==this.props.value.value&&this.props.controller.change(this.props.name,{value:""}),this.focusControl()},handleTouchEnd:function(a){this.props.disabled||(this.dropZone&&this.dropZone.contains(a.target)?this.handleFocusIn():this.handleFocusOut())},handleFocusIn:function(){this.props.disabled||this.setState({focused:!0})},handleFocusOut:function(){this.props.disabled||this.setState({focused:!1})},focusControl:function(){if(this.dropZone){ReactDOM.findDOMNode(this.dropZone).focus()}},setContainerRefCallback:function(a){this.dropZone=a},render:function(){var a=this,c=this.state.value,d=!c,e=this.props.disabled,f=this.props.config,g=this.props.sizeSettings,h=g.fitWidth,i=g.fixedHeight,j=g.originalDimensions,k={};i&&(k={height:f.height});var l=[React.createElement("div",{className:"picture-upload"},React.createElement("button",{type:"button",className:"btn btn-default",disabled:e},React.createElement("i",{className:"icon ms-Icon ms-Icon--Upload"}),React.createElement("div",null,webconLocale.cUpload)),React.createElement("form",{ref:function(b){a.uploadForm=b}},React.createElement("input",{type:"file",name:"pictureFile",disabled:e,accept:"image/*",ref:function(b){a.fileUpload=b},onChange:this.handleFileSelected,onClick:this.focusControl}))),React.createElement("button",{type:"button",onClick:this.handleRemoveClick,className:"btn btn-default",disabled:e},React.createElement("i",{className:"icon ms-Icon ms-Icon--Clear"}),React.createElement("div",null,webconLocale.cRemove))];return React.createElement(b.JsApp.PictureContainer,{className:classNames({"upload-disabled":e,focused:this.state.focused}),buttons:l,onPaste:this.handlePaste.bind(this),onFocus:this.handleFocusIn.bind(this),onBlur:this.handleFocusOut.bind(this),setContainerRef:this.setContainerRefCallback.bind(this),focusable:!0},React.createElement("div",{className:"picture-control th-frm-bg1"},React.createElement("div",{className:"picture-control-overlay"}),React.createElement("div",{className:classNames("picture",{empty:d})},d?this.props.emptyControlMessage:React.createElement("img",{src:c,alt:name,title:name,style:k,className:classNames({"fit-width":!!h,"original-size":!!j})}))))}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{};return b.BPSDataSourceHyperlink=createReactClass({displayName:"BPSDataSourceHyperlink",propTypes:{linkData:PropTypes.object.isRequired,title:PropTypes.string},getUrlData:function(){var a=this.props.linkData.elementId;return Injector.resolve(["BPSDataSourceLinkService","HyperLinkFormatter"],function(b,c){return{url:b.createUrl(a).url,embedViewUrl:b.createEmbedViewUrl(a).url,isBpsElement:!0,elementId:a,queryParams:"",openMode:c.openModeEnum.sameWindow}},this)},shouldComponentUpdate:function(a){var b=this.props.linkData;return!(!b||!a.linkData||b.elementId===a.linkData.elementId)},render:function(){var a=this,c=a.props,d=c.children,e="";if(d?e=d:c.title&&(e=React.createElement(b.RenderAsHtmlReadOnly,null,c.title)),e&&c.linkData.showAsALink){var f=this.getUrlData();e=React.createElement(b.BPSLinkWrapper,{urlData:f,className:"bpsDataSourceLink"},e)}return e}}),a}(window.webcon||{}),window.webcon=function(a){return(a.views=a.views||{}).ChooseReadOnly=createReactClass({displayName:"ChooseReadOnly",propTypes:{name:PropTypes.string.isRequired,value:PropTypes.object.isRequired},render:function(){var a=this.props.value,b=a&&a.selected&&void 0!==a.selected.value&&null!==a.selected.value?a.selected.name:"";return React.createElement("span",{className:"form-control-readonly"},b)}}),a}(window.webcon||{}),window.webcon=function(a){return(a.views=a.views||{}).DateTimeReadOnly=createReactClass({displayName:"DateTimeReadOnly",propTypes:{name:PropTypes.string.isRequired,value:PropTypes.object.isRequired,config:PropTypes.object.isRequired},componentWillMount:function(){var a=this;Injector.resolve(["DateTimeFormatter"],function(b){a.props.config.includeTime?a.formatter=b.formatDateWithTime:a.formatter=b.formatDate})},render:function(){var a="",b=this.props.value;return b&&(a=this.formatter(b)||b),React.createElement("div",{className:"row "},React.createElement("div",{className:"col-lg-12 col-sm-12"},React.createElement("span",{className:"form-control-readonly"},a)))}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{},c=a.mixins;return b.EmailReadOnly=createReactClass({displayName:"EmailReadOnly",mixins:[c.EmailBase],propTypes:{name:PropTypes.string.isRequired,value:PropTypes.string},render:function(){return React.createElement("span",{className:"form-control-readonly"},React.createElement("a",{href:this.getHref(),onClick:this.sendEmail},this.state.value))}}),a}(window.webcon||{}),window.webcon=function(a){return(a.views=a.views||{}).FloatingPointReadOnly=createReactClass({displayName:"FloatingPointReadOnly",propTypes:{name:PropTypes.string.isRequired,value:PropTypes.object.isRequired,config:PropTypes.object.isRequired},componentWillMount:function(){Injector.resolve(["Localization","NumbersService"],function(a,b){this.number=b.getNumberFormat(this.props.config)},this)},getCurrencyCode:function(){var a=this.props.value.data;return a&&a.overridenCurrencyCode?a.overridenCurrencyCode:this.props.config.currencyCode},render:function(){var a,b=this.props.value;if(b.saveRestrictions&&!1===b.saveRestrictions.isSavable)a=b.saveRestrictions.invalidValue;else{var c=b.data.value;a=c||0===c?this.number.validate(c).formatted:""}var d=a?a+" "+this.getCurrencyCode():"";return React.createElement("span",{type:"text",className:"wfFormControl form-control-readonly form-control-readonly-float"},d)}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{},c=a.mixins;return b.GoogleMapReadOnly=createReactClass({displayName:"GoogleMapReadOnly",mixins:[c.GoogleMapBase],componentDidMount:function(){this.initMap(!1)},render:function(){var a=this;return React.createElement("div",{className:"wfGoogleMap"},React.createElement("div",{className:"map noSwipe",ref:function(b){a.map=b},style:this.style}))}}),a}(window.webcon||{}),window.webcon=function(a){return(a.views=a.views||{}).HandwrittenSignatureReadOnly=createReactClass({displayName:"HandwrittenSignatureReadOnly",propTypes:{name:PropTypes.string.isRequired,value:PropTypes.object.isRequired,config:PropTypes.object.isRequired},render:function(){var a=this.props.value,b=this.props.name,c={"max-height":this.props.config.height};return React.createElement("div",{className:"form-control-readonly handwritten-signature-read-only"},a&&a.value?React.createElement("img",{src:a.value,style:c,alt:b,title:b}):null)}}),a}(window.webcon||{}),window.webcon=function(a){return(a.views=a.views||{}).ImageReadOnly=createReactClass({displayName:"ImageReadOnly",propTypes:{name:PropTypes.string.isRequired,value:PropTypes.object.isRequired},getInitialState:function(){return{value:this.props.value}},render:function(){var a=this.state.value,b=a.imageUrl,c=a.displayName?a.displayName:b;return React.createElement("img",{src:b,alt:c,title:c})}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{};return b.LinkReadOnly=createReactClass({displayName:"LinkReadOnly",propTypes:{name:PropTypes.string.isRequired,value:PropTypes.object.isRequired},getInitialState:function(){var a=this.props;return{value:this.getUrlsData(a.value,a.config.openInNewWindow)}},getUrlsData:function(a,b){return{links:Injector.resolve(["HyperLinkFormatter"],function(c){return _.map(a.links,function(a){return c.getUrlDataForAttribute(a,b)})},this)}},componentWillReceiveProps:function(a){this.setState({value:this.getUrlsData(a.value,a.config.openInNewWindow)})},render:function(){var a=this.state.value;if(null===a||null===a.links)return null;return React.createElement("div",{className:"link-cell-wrapper"},a.links.map(function(a,c){return React.createElement("span",{className:"form-control-readonly",key:c},React.createElement(b.BPSLinkWrapper,{urlData:a,className:"subelem-linkReadOnly",title:a.displayName},a.displayName))}))}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{};return b.MultiRowReadOnly=createReactClass({displayName:"MultiRowReadOnly",componentWillMount:function(){},getContent:function(a){return{__html:a||""}},render:function(){return React.createElement("span",{className:"form-control-readonly"},this.props.config.richEditMode?React.createElement("div",{className:"multi-row-text",dangerouslySetInnerHTML:this.getContent(this.props.value.primary)}):React.createElement("div",{className:"multi-row-text"},this.props.value.primary),React.createElement(b.CommentsControlTemplate,{comments:this.props.value.comments}))}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{};return b.PickerReadOnly=createReactClass({displayName:"PickerReadOnly",propTypes:{name:PropTypes.string.isRequired,config:PropTypes.object.isRequired},getInitialState:function(){return{value:this.props.value}},componentWillReceiveProps:function(a){this.setState({value:a.value})},getAllData:function(a){var b=this.state.value.customValue;if(this.state.value.hasCustomValue&&b){return b.split(";").filter(function(a){return!!a}).join(", ")}for(var c=this.state.value.rawValue,d=this.state.value.pickerEntities,e="",f=0;f<d.length-1;)e+=a(d[f])+", ",f++;return f<d.length&&(e+=a(d[f])),c&&(e&&(e+=", "),e+=c),e},getAllDataAsValuesString:function(){return this.getAllData(function(a){return a.key+"#"+a.name})},getAllDataAsDisplayString:function(){return this.getAllData(function(a){return a.name})},render:function(){var a=this,c=a.state.value.hasCustomValue&&a.state.value.customValue;if(a.props.config.showLinkForSelectedElements&&!c){var d=a.state.value.pickerEntities,e=[],f=d.length-1;return d.forEach(function(a,c){var d={showAsALink:a.showAsALink,elementId:a.elementId},g=a.name;g&&e.push(React.createElement(b.BPSDataSourceHyperlink,{key:a.elementId,linkData:d,title:g},g)),c<f&&e.push(", ")}),React.createElement("div",{className:"form-control-readonly"},e)}return React.createElement("div",{className:"row"},React.createElement("div",{className:"col-lg-12 col-sm-12"},React.createElement("span",{className:"form-control-readonly","data-name":this.getAllDataAsValuesString()},this.getAllDataAsDisplayString())))}}),a}(window.webcon||{}),window.webcon=function(a){return(a.views=a.views||{}).PictureReadOnly=createReactClass({displayName:"PictureReadOnly",propTypes:{name:PropTypes.string.isRequired,value:PropTypes.object.isRequired,config:PropTypes.object.isRequired},render:function(){var a=this.props.value,b=this.props.config,c={},d={};return Injector.resolve(["PictureController"],function(a){c=a.getSizeSettings(b.pictureSizeMode)}),c.fixedHeight&&(d={height:b.height}),React.createElement("div",{className:"picture-control-readonly form-control-readonly"},a&&a.value?React.createElement("img",{className:classNames({"fit-width":!!c.fitWidth,"original-size":!!c.originalDimensions}),src:a.value,alt:name,title:name,style:d}):null)}}),a}(window.webcon||{}),window.webcon=function(a){return(a.views=a.views||{}).RenderAsHtmlReadOnly=createReactClass({displayName:"RenderAsHtmlReadOnly",render:function(){var a=this.props.children;return void 0!==a&&null!==a||(a=""),React.createElement("span",{dangerouslySetInnerHTML:{__html:a}})}}),a}(window.webcon||{}),window.webcon=function(a){return(a.views=a.views||{}).SingleRowReadOnly=createReactClass({displayName:"SingleRowReadOnly",render:function(){var a={};return a["form-control-readonly"]=!0,a[this.props.className]=!!this.props.className,React.createElement("span",{className:classNames(a)},this.props.value)}}),a}(window.webcon||{}),window.webcon=function(a){return(a.views=a.views||{}).SurveyChooseReadOnly=createReactClass({displayName:"SurveyChooseReadOnly",componentWillMount:function(){var a=this.props.config,b=this.props.value;this.numbering=a.numbering,this.selectedValues=b.selectedValues||{},this.optionalText=a.optionalText||"",this.custom=b.custom||""},getOptionalAnswer:function(){return React.createElement("label",null,this.optionalText,": ",this.custom)},render:function(){var a=1==this.numbering?"listLatin":"listNumeric",b=this;return a+=" listReadOnly",React.createElement("div",null,React.createElement("ul",{className:a},_.map(this.selectedValues,function(a,c){return-1==c?React.createElement("li",null,b.getOptionalAnswer()):React.createElement("li",null,React.createElement("label",null,c,". ",a))})))}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{},c=PropTypes;return b.DateTimeCell=createReactClass({displayName:"DateTimeCell",propTypes:{cellStringValue:c.string.isRequired,linkData:c.object.isRequired,hideTime:c.bool},componentWillMount:function(){var a=this;Injector.resolve(["DateTimeFormatter"],function(b){a.props.hideTime?a.getFormatDate=b.formatDate:a.getFormatDate=b.formatDateWithTime})},render:function(){var a=this.props,c=a.cellStringValue,d=this.getFormatDate(c)||c;return React.createElement(b.BPSDataSourceHyperlink,{linkData:a.linkData},React.createElement("span",{className:"dateTimeCell"},d))}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{},c=PropTypes;return b.DecimalCell=createReactClass({displayName:"DecimalCell",propTypes:{cellStringValue:c.string,linkData:c.object.isRequired},componentWillMount:function(){Injector.resolve(["ClientInfo"],function(a){this.language=a.language},this),this.props.config&&Injector.resolve(["NumbersService"],function(a){this.number=a.getNumberFormat(this.props.config)},this)},getCurrencyCode:function(){return this.props.config.currencyCode},render:function(){var a=this.props,c=a.cellStringValue;if(void 0!==c&&null!==c&&""!==c){var d=parseFloat(c);isNaN(d)||(a.config?(c=this.number.validate(d).formatted,a.config.showCurrencyCode&&(c=c+" "+this.getCurrencyCode())):c=d.toLocaleString(this.language,{maximumFractionDigits:2}))}return React.createElement("span",{className:"integerCell"},React.createElement(b.BPSDataSourceHyperlink,{linkData:a.linkData},c))}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{};return b.HyperLinkCell=createReactClass({displayName:"HyperLinkCell",propTypes:{cellStringValue:PropTypes.string},render:function(){var a=Injector.resolve(["HyperLinkFormatter"],function(a){return a.parseRawLinkData(this.props.cellStringValue)},this);return React.createElement(b.BPSLinkWrapper,{urlData:a},React.createElement(b.RenderAsHtmlReadOnly,null,a.displayName))}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{},c=PropTypes;return b.IndicatorCell=createReactClass({displayName:"IndicatorCell",propTypes:{linkData:c.object.isRequired,cellStringValue:c.string},render:function(){var c=a.extensions.isBlank,d=this.props,e=d.cellStringValue,f=parseFloat(e);return e=e||"",c(e)||isNaN(f)?React.createElement("span",null):React.createElement(b.Indicator,{linkData:d.linkData,value:f})}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{},c=PropTypes;return b.IntegerCell=createReactClass({displayName:"IntegerCell",propTypes:{cellStringValue:c.string,linkData:c.object.isRequired},render:function(){var a=this.props;return React.createElement("span",{className:"integerCell"},React.createElement(b.BPSDataSourceHyperlink,{linkData:a.linkData},a.cellStringValue))}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{},c=PropTypes;return b.PercentageCell=createReactClass({displayName:"PercentageCell",propTypes:{linkData:c.object.isRequired},render:function(){var c=a.extensions.isBlank,d=this.props,e=d.cellStringValue||"";e&&(e=e.replace(",","."));var f=parseFloat(e);return c(e)||isNaN(f)?React.createElement("span",null):React.createElement(b.PercentageDisplay,{linkData:d.linkData,value:f})}}),a}(window.webcon||{}),Injector.factory("SqlRowCellsFactory",["logger","TableCellsFactory","BPSDataSourceLinkService"],function(a,b,c){function d(d,e,f,g,h,i){var j,k=webcon.views,l=g.value,m=c.createShowAsALinkData(i,g);switch(d){case"Indicator":j=React.createElement(k.IndicatorCell,{linkData:m,cellStringValue:l});break;case"Percent":j=React.createElement(k.PercentageCell,{linkData:m,cellStringValue:l});break;case"Bold":case"Text":case"Boolean":var n="Bold"===d,o=b.createRowCell(f,e,g,i,h,!1);j=React.createElement(k.WrappedTextCell,{bolded:n},o)}return j||a.error("UnknownCellType: "+d+", for column:"+e),j}return{createDataCell:d}}),Injector.factory("TableCellsFactory",["logger","BPSDataSourceLinkService","HyperLinkParser"],function(a,b,c){function d(a,b,c,d,f,g){return e({columnType:a,columnName:b,showAsALink:d,decimalConfigModel:f},c,g)}function e(d,e,g){var h,i=e.value,j=b.createShowAsALinkData(d.showAsALink,e);switch(d.columnType){case"Boolean":case"Text":h=React.createElement(f.TextCell,{linkData:j,cellStringValue:i});break;case"Date":h=React.createElement(f.DateTimeCell,{linkData:j,cellStringValue:i,hideTime:!0});break;case"DateTime":h=React.createElement(f.DateTimeCell,{linkData:j,cellStringValue:i});break;case"Integer":h=React.createElement(f.IntegerCell,{linkData:j,cellStringValue:i});break;case"Decimal":h=React.createElement(f.DecimalCell,{linkData:j,cellStringValue:i,config:d.decimalConfigModel});break;case"Hyperlink":h=i&&c.isHyperLink(i)||g?React.createElement(f.HyperLinkCell,{cellStringValue:i}):React.createElement(f.TextCell,{linkData:j,cellStringValue:i});break;case"Indicator":h=React.createElement(f.IndicatorCell,{linkData:j,cellStringValue:i})}return h||a.error("UnknownCellType: "+d.columnType+", for column:"+d.columnName),h}var f=webcon.views;return{createTableCell:e,createRowCell:d}}),window.webcon=function(a){var b=a.views=a.views||{},c=PropTypes;return b.TextCell=createReactClass({displayName:"TextCell",propTypes:{cellStringValue:c.string,linkData:c.object.isRequired},render:function(){var a=this.props;return React.createElement("div",{className:classNames("textCell","th-link")},React.createElement(b.BPSDataSourceHyperlink,{linkData:a.linkData},React.createElement(b.RenderAsHtmlReadOnly,null,a.cellStringValue)))}}),a}(window.webcon||{}),window.webcon=function(a){return(a.views=a.views||{}).WrappedTextCell=createReactClass({displayName:"WrappedTextCell",propTypes:{bolded:PropTypes.bool},render:function(){var a=this.props;return React.createElement("span",{className:"form-control-readonly"},React.createElement("div",{className:"textCell th-link "+(a.bolded?"boldTextCell":"")},a.children))}}),a}(window.webcon||{}),window.webcon=function(a){return(a.views=a.views||{}).PaginationControl=createReactClass({displayName:"PaginationControl",click:function(a){a<=this.props.buttonsCount&&a>0&&a!=this.props.currentPageIndex&&(this.props.currentPageIndex=a,this.props.getData(a))},getPagination:function(a){var b=[];_(this.props.buttonsCount).times(function(a){b.push(a)});var c,d=_.first(b,3),e=_.last(b,3),f=_.reject(b,function(b){return Math.abs(b-(a-1))>2}),g=function(a,b){return a-b},h=_.uniq(_.union(d,f,e)).sort(g),i=[];for(c=0;c<h.length-1;c++)i.push(h[c]),h[c]+1!==h[c+1]&&i.push("...");return i.push(_.last(h)),i},render:function(){var a=this;return React.createElement("nav",null,React.createElement("ul",{className:"page pagination"},React.createElement("li",{key:"PreviousPage",className:"ms-promlink-button-inner ms-ContentAccent1-fontColor"},React.createElement("a",{className:"pageControl ms-link ",onClick:a.click.bind(a,a.props.currentPageIndex-1),"aria-label":"Previous"},React.createElement("span",{"aria-hidden":"true"},""))),this.getPagination(a.props.currentPageIndex).map(function(b){var c="ms-promlink-button-inner ms-ContentAccent1-fontColor ";b+1===a.props.currentPageIndex&&(c+="active");var d=b+"Page";return React.createElement("li",{key:d,className:c},isNaN(b)?React.createElement("span",{className:"pageControl ms-core-defaultFont"},b):React.createElement("a",{className:"pageControl ms-link",onClick:a.click.bind(a,b+1)},b+1))}),React.createElement("li",{key:"NextPage",className:"ms-promlink-button-inner ms-ContentAccent1-fontColor"},React.createElement("a",{className:"pageControl ms-link",onClick:a.click.bind(a,a.props.currentPageIndex+1),"aria-label":"Next"},React.createElement("span",{"aria-hidden":"true"},"")))))}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{},c=a.mixins;return b.SqlExportButton=createReactClass({displayName:"SqlExportButton",propTypes:{doExport:PropTypes.func.isRequired},mixins:[c.RegistrableControl],render:function(){var b="";return Injector.resolve([{depName:"IconRepository",depEnv:a.env}],function(a){b=a.getExportImage()}),React.createElement("button",{type:"button",className:"btn btn-default sql-grid-table-actions__export-to-excel",onClick:this.props.doExport},b,React.createElement("span",null," ",webconLocale.cExportSubelementsRows))}}),a}(window.webcon||{}),Injector.factory("SqlGridComponentsFactory",[],function(){function a(a,b,d){return React.createElement(c.PaginationControl,{buttonsCount:a,getData:d,currentPageIndex:b})}function b(a,b,c,d,e){return a&&b.summationType&&"Sum"===b.summationType||"Avarage"===b.summationType?(e={value:e},React.createElement("td",{key:c,className:"ms-vb2 sql-grid-summary"},d.createTableCell(b,e))):React.createElement("td",{key:c,className:"ms-vb2"},d.createTableCell(b,e))}var c=webcon.views;return{getPaginationComponent:a,getSummary:b}},Injector.env.mobile),window.webcon=function(a){var b=a.views=a.views||{},c=a.mixins;return b.SqlGridReadonly=createReactClass({displayName:"SqlGridReadonly",propTypes:{name:PropTypes.string.isRequired,config:PropTypes.object.isRequired},mixins:[c.RegistrableControl],getInitialState:function(){return{tableRows:[],tableColumns:[],paginationButtonsCount:0,shouldPaginate:this.props.config.paging&&!this.props.config.lazyLoading,
currentPageIndex:1,summingRow:null,isLoading:!this.props.config.lazyLoading,loaded:!1,isExportable:this.props.config.excelExport}},componentWillMount:function(){this.pageSize=this.props.config.pageSize,Injector.resolve(["TableCellsFactory"],function(a){this.cellsFactory=a},this)},componentDidMount:function(){this.props.config.lazyLoading||this.getGridData(1)},getGridData:function(a){var b=this;this.setState({loaded:!1,isLoading:!0}),Injector.resolve(["SqlAttributeController","WaitingPanelService"],function(c,d){d.showLoadingPanel(b.waitingPanelCallback),c.getSqlGridData(b.props.id,b.props.name,a,function(c){var e=c.rows,f=c.summingRow;f&&(f.isSummary=!0,e.push(f)),b.setState({tableRows:e,tableColumns:c.columns,paginationButtonsCount:Math.ceil(c.totalRowsCount/b.pageSize),summingRow:f,errorMessage:c.errorMessage,currentPageIndex:a,shouldPaginate:b.props.config.paging}),d.hideLoadingPanel(b.waitingPanelCallback)},function(){d.hideLoadingPanel(b.waitingPanelCallback)})})},waitingPanelCallback:function(a){this.state.isLoading!==a&&this.setState({isLoading:a,loaded:!a})},createStandardRow:function(b,c){var d=b.isSummary?"tableLiteRow table-summary-row":"tableLiteRow table-hoverable";b.isSummary&&a.env===Injector.env.mobile&&(d+=" warning");var e=this.cellsFactory,f=this,g=f.state;return React.createElement("tr",{key:c,className:d,"data-index":c},this.state.tableColumns.map(function(a,c){var d=g.tableColumns[c],f=b[c].Value,h="";return Injector.resolve(["SqlGridComponentsFactory"],function(a){h=a.getSummary(b.isSummary,d,c,e,f)}),h}))},shouldComponentUpdate:function(a,b){return JSON.stringify(this.props)!==JSON.stringify(a)||JSON.stringify(this.state)!==JSON.stringify(b)},reloadButtonClick:function(){this.waitingPanelCallback(!0),this.getGridData(1)},doExport:function(){var a=this;Injector.resolve(["SqlAttributeController","WaitingPanelService"],function(b,c){b.doSqlGridExport(this.waitingPanelCallback,a.props.name)})},render:function(){var c,d,e,f,g,h=this,i=this.state,j=this.props.config.showColumnCaption,k=i.loaded&&0===this.state.tableRows.length,l=this.props.config.showAttributeName,m=i.loaded&&!k;Injector.resolve(["DeviceInfo","FormInfo"],function(a,b){f=a.isModern(),g=b.editMode});var n=" ";Injector.resolve([{depName:"IconRepository",depEnv:a.env}],function(a){n=a.getExportImage()}),m&&(d=React.createElement(b.TableControlTemplate,{isModern:f},j&&React.createElement(b.TableHeaderTemplate,{tableColumns:i.tableColumns}),React.createElement("tbody",null,i.tableRows.map(h.createStandardRow))),i.shouldPaginate&&i.paginationButtonsCount>1&&Injector.resolve(["SqlGridComponentsFactory"],function(a){c=a.getPaginationComponent(i.paginationButtonsCount,i.currentPageIndex,h.getGridData)})),i.errorMessage&&(e=React.createElement("div",{className:"errorMessage"},i.errorMessage));var o=classNames("sql-grid-container",{"is-loading":i.isLoading,"is-loaded":i.loaded});return React.createElement("div",{ref:function(a){h.container=a},className:o},this.state.isExportable&&g?React.createElement("div",{className:"sql-grid-table-actions"},React.createElement(b.SqlExportButton,{doExport:h.doExport})):" ",!i.isLoading&&React.createElement(b.SqlGridReloadButton,{loaded:i.loaded,onClick:h.reloadButtonClick,mouseOver:h.mouseOver,mouseOut:h.mouseOut,noDataMode:k,className:classNames({"pull-up":m&&l})}),React.createElement("div",{className:"sqlGrid noSwipe"},e,React.createElement(b.WaitingPanel,{style:"th-frm-bg1",isVisible:i.isLoading}),d),c)}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{},c=a.mixins;return b.SqlGridReloadButton=createReactClass({displayName:"SqlGridReloadButton",propTypes:{noDataMode:PropTypes.bool,loaded:PropTypes.bool,onClick:PropTypes.func.isRequired,mouseOver:PropTypes.func.isRequired,mouseOut:PropTypes.func.isRequired,className:PropTypes.string},mixins:[c.RegistrableControl],getLoadDataText:function(a,b){return a?b?React.createElement("div",null,React.createElement("div",null,webconLocale.cNoDataFound),React.createElement("div",{className:"small-text"},webconLocale.cClickToReload)):"":webconLocale.cClickToLoadData},render:function(){var a,b=this.props,c=b.noDataMode,d=b.className,e=b.loaded,f=b.onClick,g=b.mouseOut,h=b.mouseOver,i=e&&!c;Injector.resolve([{depName:"IconRepository"}],function(b){a=i?b.getReloadImage():""});var j=this.getLoadDataText(e,c);return React.createElement("div",{className:classNames("sql-grid-button-container th-frm-main",d)},React.createElement("button",{type:"button",className:classNames("btn fix-width-button",i?"sqlGridReloadButton top-right":"data-not-loaded th-frm-bg1"),onClick:f,onMouseOver:h,onMouseOut:g},React.createElement("span",{className:"load-data-text"},j),a))}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{},c=a.mixins;return b.SqlRowReadonly=createReactClass({displayName:"SqlRowReadonly",propTypes:{name:PropTypes.string.isRequired,style:PropTypes.object.isRequired,config:PropTypes.object.isRequired,inlineStyle:PropTypes.string},mixins:[c.RegistrableControl],getInitialState:function(){return{tableRows:[],tableColumns:[],isLoading:!1}},componentDidMount:function(){this.getGridData()},getGridData:function(){var a=this;Injector.resolve(["SqlAttributeController","WaitingPanelService"],function(b,c){c.showLoadingPanel(a.waitingPanelCallback),b.getSqlRowData(a.props.id,a.props.name,function(b){a.setState({tableRows:b.rows,tableColumns:b.columns,errorMessage:b.errorMessage}),c.hideLoadingPanel(a.waitingPanelCallback)},function(){c.hideLoadingPanel(a.waitingPanelCallback)})})},waitingPanelCallback:function(a){this.setState({isLoading:a})},render:function(){var a,c,d=this,e=d.props,f=d.state,g=e.name,h=e.description,i=e.config.showColumnCaption;return f.errorMessage&&(c=React.createElement("div",{className:"col-xs-12 ms-formlabel sqlRowName"},e.displayName),a=React.createElement("div",{className:"errorMessage"},f.errorMessage)),React.createElement("div",null,c?React.createElement(b.JsApp.Tooltip,{trigger:"hover",content:h,delay:500},c):null,React.createElement("div",{ref:function(a){d.container=a},className:"col-xs-12 sqlRow"},a,React.createElement(b.WaitingPanel,{isVisible:f.isLoading}),f.tableRows.map(function(a,c){var d=g+c;return React.createElement(b.SqlRowSingleRowReadonly,{key:d,columns:f.tableColumns,showColumnCaption:i,description:h,rowValues:a,style:e.style,inlineStyle:e.inlineStyle})})))}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{};return b.SqlRowSingleRowReadonly=createReactClass({displayName:"SqlRowSingleRowReadonly",propTypes:{style:PropTypes.object.isRequired,inlineStyle:PropTypes.string,showColumnCaption:PropTypes.bool.isRequired},componentWillMount:function(){Injector.resolve(["SqlRowCellsFactory"],function(a){this.cellsFactory=a},this)},render:function(){var a=this,c=a.cellsFactory;return React.createElement("div",{className:"sqlRowSingleRow th-link"},this.props.columns.map(function(d,e){var f=a.props.rowValues[e].Value,g=c.createDataCell(d.columnType,d.columnName,d.columnDataType,f,d.decimalConfigModel,d.showAsALink);return React.createElement(b.BesidePanel,{isEditable:!1,displayName:d.columnCaption,description:a.props.description,showColumnCaption:a.props.showColumnCaption,key:d.columnName+"_panel",isRequired:!1,style:a.props.style.label,inlineStyle:a.props.inlineStyle.label},React.createElement(b.StylePanel,{style:a.props.style.control,inlineStyle:a.props.inlineStyle.control},g))}))}}),a}(window.webcon||{});var _extends=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a};window.webcon=function(a){var b=a.views=a.views||{},c=createReactClass({displayName:"RelativeAttachments",getInitialState:function(){return{resolvedAttachments:[],isLoading:!1}},componentWillMount:function(){var a=this;Injector.resolve(["FormInfo","DeviceInfo","WaitingPanelService"],function(b,c,d){a.editMode=b.editMode,a.areAttachmentCategories=b.areAttachmentCategories,a.isNative=c.isNativeMobileApp(),a.waitingPanelService=d},a)},componentDidMount:function(){this.fetchAndUpdateAttachments()},componentDidUpdate:function(a){var b=this.props.value.attachmentIds,c=a.value.attachmentIds;if(!_.isEqual(b,c)){(function(a,b){return a.every(function(a){return-1!==b.indexOf(a)})})(b,c)?this.setState({resolvedAttachments:this.state.resolvedAttachments.filter(function(a){return-1!==b.indexOf(a.attId)})}):this.fetchAndUpdateAttachments()}},fetchAndUpdateAttachments:function(){var a=this,b=this.props.value.attachmentIds,c=function(){_.isEmpty(b)?a.setState({resolvedAttachments:[],isLoading:!1}):Injector.resolve(["AttachmentController"],function(c){c.resolveRelativeAttachmentsNames(function(c){var d=b.map(function(a){var b=_.find(c.items,function(b){return b.attId===a});return b||{attId:a,isDeleted:!0}});a.setState({resolvedAttachments:d,isLoading:!1})},function(){a.setState({resolvedAttachments:[],isLoading:!1})},b,a.props.isArchive)},a)};this.setState({isLoading:!0},c)},getAttachmentActions:function(){var a=this;return{previewAtt:function(b){Injector.resolve(["RelativeAttachmentsPreviewService"],function(c){c.preview(b,void 0,a.props.insidePopup?"IN_MODAL":"IN_PLACE")})},previewAttInNewWindow:function(a){Injector.resolve(["RelativeAttachmentsPreviewService"],function(b){b.previewInNewWindow(a)})},downloadAtt:function(a){Injector.resolve(["RelativeAttachmentsDownloadService"],function(b){b.download(a.attId,a.version)})},detachAtt:function(b){a.removeAttachmentFromState(b.attId)}}},attachExistingAttachmentClick:function(){var a=this;Injector.resolve(["PopupController"],function(b){b.showAttachRelativeAttachmentsToSubelement(a.props.controller.context,a.props.name,a.props.controller.rowNumber,a.props.value.attachmentIds,a.updateAttachments,a.props.config)},a)},removeAttachmentFromState:function(a){var b=_.without(this.props.value.attachmentIds,a);this.updateAttachments(b)},updateAttachments:function(a){this.props.controller.change(this.props.name,{attachmentIds:a},{validate:!1})},handleAttachmentIconClick:function(a,b){var c=this;2===b.button||this.props.isArchive||(b.ctrlKey||1===b.button?Injector.resolve(["AttachmentsPreviewService"],function(b){b.previewInNewWindow(a)}):Injector.resolve(["RelativeAttachmentIconActionService"],function(b){b.handleIconClick(a,c.props.insidePopup?"IN_MODAL":"IN_PLACE")}))},getImageTitleForAtt:function(a){var b=null;return Injector.resolve(["AttachmentActionsAvailabilityService"],function(c){b=c.isPreviewAvailable(a)?webconLocale.cAttMenuPreview:webconLocale.cAttMenuDownload}),b},getImageUrlForAtt:function(a){var b=void 0;return Injector.resolve(["AttachmentsIconService"],function(c){b=c.getSmallIcon(a)}),b},getAttachmentMenuButtons:function(a){var c=this.getAttachmentActions(),d=this;return React.createElement(b.AttachmentMenuButton,{actions:c,className:"table-tree-button-wrapper",node:a,disabled:d.props.disabled,tab:"all",isAttachmentColumnMenu:!0,modifiers:{preventOverflow:{enabled:!0,priority:["left","right"]}}})},getDeletedAttachmentMenuButtons:function(a){var c=this,d={detachAtt:function(a){c.props.controller.removeAllErrors(c.props.name),c.removeAttachmentFromState(a.attId)}};return React.createElement(b.AttachmentMenuButton,{actions:d,className:"table-tree-button-wrapper",node:a,disabled:c.props.disabled,tab:"all",deleted:!0,isAttachmentColumnMenu:!0})},getAttachRelativeAttachmentIcon:function(){return Injector.resolve([{depName:"IconRepository",depEnv:a.env}],function(a){return a.getAttachRelativeAttachmentIcon()})},getColumnEditModeButtons:function(){return React.createElement("div",null,React.createElement("button",{onClick:this.attachExistingAttachmentClick,disabled:this.props.disabled,type:"button",className:classNames("btn btn-default",{"button-disabled":this.props.disabled}),title:webconLocale.cAttachExisting},this.getAttachRelativeAttachmentIcon()))},isReadOnly:function(){return!1===this.editMode||this.props.isReadOnly},renderContent:function(){if(this.state.isLoading)return React.createElement(b.WaitingPanel,{isVisible:this.state.isLoading});var a=this,c=this.isReadOnly();return React.createElement(React.Fragment,null,_.sortBy(this.state.resolvedAttachments,"isDeleted").map(function(b){var c=b.name||"";!b.name&&b.isDeleted&&(c=webconLocale.cDeletedAttachment);var d=b.isDeleted?a.getDeletedAttachmentMenuButtons(b):a.getAttachmentMenuButtons(b);return React.createElement("div",{key:b.attId,className:"table-tree"},React.createElement("div",{className:"table-tree-row"},React.createElement("div",{className:"table-tree-column attachment-name-column"},b.isDeleted?null:React.createElement("div",{className:"table-tree-icon",onMouseDown:a.handleAttachmentIconClick.bind(a,b)},React.createElement("img",{src:a.getImageUrlForAtt(b),title:a.getImageTitleForAtt(b),alt:a.getImageTitleForAtt(b)})),React.createElement("div",{className:"attachment-name-wrapper",onMouseDown:b.isDeleted?null:a.handleAttachmentIconClick.bind(a,b)},React.createElement("div",{className:classNames("attachment-name",{deleted:b.isDeleted}),title:c},c))),React.createElement("div",{className:"table-tree-column attachment-actions-column"},d)))}),React.createElement("div",{className:"table-tree-column attachment-buttons-column"},c?null:this.getColumnEditModeButtons()))},render:function(){return React.createElement("div",{className:classNames("relative-attachments",{"form-attachment-control-readonly":this.isReadOnly()})},this.renderContent())}});return c.propTypes={value:PropTypes.object.isRequired,controller:PropTypes.object.isRequired,config:PropTypes.object.isRequired,disabled:PropTypes.bool,name:PropTypes.string,isArchive:PropTypes.bool,isReadOnly:PropTypes.bool,insidePopup:PropTypes.bool},b.RelativeAttachments=createReactClass({displayName:"RelativeAttachments",render:function(){var a=this.props;return React.createElement(b.PopupContext.Consumer,null,function(b){return React.createElement(c,_extends({insidePopup:b},a))})}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{};return b.SimpleDropdownItem=createReactClass({displayName:"SimpleDropdownItem",onChange:function(a){this.props.onChange(a)},render:function(){var a=this.props;return React.createElement("li",{role:"presentation"},React.createElement("a",{role:"menuitem",onClick:this.onChange.bind(this,a.item),tabIndex:"-1"},a.item.name))}}),b.SimpleDropdown=createReactClass({displayName:"SimpleDropdown",propTypes:{value:PropTypes.object.isRequired,onChange:PropTypes.func},mixins:[a.mixins.DropdownOutsideClick],change:function(a){this.setState({selected:a}),this.props.onChange(a)},getInitialState:function(){var a=this.props.value;return{selected:a.selected,items:a.availableValues}},componentWillReceiveProps:function(a){var b=a.value;this.setState({selected:b.selected,items:b.availableValues})},render:function(){var b=this,c=this.state.items.map(function(c){return React.createElement(a.views.SimpleDropdownItem,{onChange:b.change,item:c,key:c.value})}.bind(this));return React.createElement("div",{className:"dropdown",ref:function(a){b.dropdown=a}},React.createElement("button",{className:"btn btn-default btn-block dropdown-toggle form-control",type:"button","data-toggle":"dropdown"},React.createElement("div",{className:"dropdown-name"},this.state.selected?this.state.selected.name:""),React.createElement("div",{className:"dropdown-arrow"})),React.createElement("ul",{className:"dropdown-menu",role:"menu"},c))}}),a}(window.webcon||{}),window.webcon=function(a){return(a.views=a.views||{}).SingleRow=createReactClass({displayName:"SingleRow",propTypes:{name:PropTypes.string.isRequired,disabled:PropTypes.bool.isRequired,value:PropTypes.string,controller:PropTypes.object.isRequired,registerFocus:PropTypes.func},getInitialState:function(){return{value:this.props.value}},change:function(a){this.setState({value:a.target.value})},componentWillReceiveProps:function(a){this.setState({value:a.value})},endEdit:function(a){a.target.value!==this.props.value&&this.props.controller.change(this.props.name,a.target.value)},render:function(){return React.createElement("div",null,React.createElement("input",{type:"text",className:"wfFormControl form-control",disabled:this.props.disabled,value:this.state.value,onChange:this.change,onBlur:this.endEdit,onFocus:this.props.registerFocus}))}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{};return b.StylePanel=createReactClass({displayName:"StylePanel",propTypes:{style:PropTypes.object,inlineStyle:PropTypes.string,className:PropTypes.string},componentWillMount:function(){this.formRuleNames=[],this.applyStyles(this.props.style)},componentDidMount:function(){var a=this.stylePanel;this.props.inlineStyle&&a&&a.setAttribute("style",this.props.inlineStyle)},applyStyles:function(a){var b=this;Injector.resolve(["StyleStringHelper"],function(c){b.formRuleNames=c.convertObjectToClassNamesArray(a,c.formRuleSuffix)})},componentWillReceiveProps:function(a){this.props.style!==a.style&&this.applyStyles(a.style)},isStylepanelWithColor:function(a,b){var c;return Injector.resolve(["StyleStringHelper"],function(b){c=b.checkIfStyleStringSetsColor(a)}),c||b&&b.hasOwnProperty("color")},render:function(){var a=this,b=this.props.style,c=this.props.inlineStyle,d=this.props.className;return b&&!_.isEmpty(b)||c?React.createElement("div",{className:classNames(a.formRuleNames,"stylePanel","stylePanelWithStyles",d,{"stylepanel-with-color":a.isStylepanelWithColor(c,b)}),style:b,ref:function(b){a.stylePanel=b}},this.props.children):React.createElement("div",{className:classNames("stylePanel","stylePanelWithoutStyles",d)},this.props.children)}}),b.StylePanel.defaultProps={className:""},a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{},c=a.mixins;return b.SubDocTypesDropDown=createReactClass({displayName:"SubDocTypesDropDown",propTypes:{availableValues:PropTypes.object.isRequired,currentValue:PropTypes.object,disabled:PropTypes.bool.isRequired,callback:PropTypes.func.isRequired},mixins:[c.DropDownBase],change:function(a){this.setState({selected:a})},getInitialState:function(){return{selected:this.props.currentValue,items:this.props.availableValues,disabled:0===this.props.availableValues.length}},componentWillReceiveProps:function(a){this.setState({selected:a.currentValue,items:a.availableValues})},endEdit:function(a){var b=this.props.currentValue;b&&a||b===a?b&&a&&(b.id!==a.id||b.name!==a.name)&&this.props.callback(a.id):this.props.callback(a.id)}}),a}(window.webcon||{}),Injector.factory("SubelementCellStyleFactory",["SubelementColumnStyleFactory","FormInfo"],function(a,b){function c(c,d){var e=a.getColumnStyle(c,d),f=b.editMode;return e+=" subelem-base-cell subelem-cell",e+=f?" subelem-edit-cell":" subelem-readonly-cell"}return{getCellStyle:c}},Injector.env.global);var _extends=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a};Injector.instance("ConnectedLocalAttachments",[],function(){function a(a,b){var c=b.value.attachmentIds,d=[];Injector.resolve(["AttachmentsFinder"],function(b){var c=b.getCurrentAttachmentsFlatList(a.attachments.attachments),e=b.getCurrentConversationsFlatList(a.attachments.attachments);d=c.concat(e)});var e=_.filter(d,function(a){return _.contains(c,a.attId)}),f=_.filter(c,function(a){return!d.some(function(b){return b.attId===a})});return _extends({},b,{selectedAttachments:e,allAttachments:d,statuses:a.attachments.statuses,attachmentIds:c,deletedAttachments:f})}function b(a){return{addAttachmentRequest:function(b){a(c.AttachmentsActions.createAddAttachmentRequestAction(b))},addAttachmentFailed:function(b){a(c.AttachmentsActions.createAddAttachmentFailedAction(b))}}}var c=webcon.redux=webcon.redux||{};return ReactRedux.connect(a,b)(webcon.views.LocalAttachments)}),window.webcon=function(a){return(a.views=a.views||{}).OrdinalCell=createReactClass({displayName:"OrdinalCell",render:function(){return this.props.row.isSummary?React.createElement("td",{key:"OrdinalColumn"}):React.createElement("td",{key:"OrdinalColumn",className:"ordinal-cell subelem-item-id subelem-cell subelem-base-cell",onClick:this.props.onClick},this.props.rowIndex+1)}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{};return b.StandardCell=createReactClass({displayName:"StandardCell",render:function(){var c,d=$.extend(!0,{},this.props.cell);d.validation=d.validation||{messages:[]};var e=this.props.fieldName,f=this.props.cellStyle,g=this.props.columnsConfiguration;return d.config=g[e]?g[e].config:void 0,Injector.resolve([{depName:"ControlsFactory",depEnv:a.env}],function(a){var b={fieldName:e,editMode:this.props.editMode,isDisabled:this.props.isDisabled,editSingleRow:this.props.popupEditMode,displayName:this.props.column.displayName};if("FloatingPointCalculated"===d.type)c=a.getReadOnlyControl(b,d,this.props.controller);else{var f={orientation:void 0,isMarkedRequired:this.props.isMarkedRequired};c=a.getControl(b,d,this.props.controller,f)}},this),React.createElement("div",{style:f},React.createElement(b.ValidationErrorPanel,{isValid:d.validation.isValid},c),React.createElement(b.AttributeErrorPanel,{data:d.validation}))}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{};return b.SummaryCell=createReactClass({displayName:"SummaryCell",renderCell:function(a){if(void 0===a)return null;var c={data:{value:a},type:"FloatingPointCalculated"};return React.createElement(b.StandardCell,{fieldName:this.props.columnName,columnsConfiguration:this.props.columnsConfiguration,column:this.props.column,editMode:"ReadOnlyHtml",cell:c})},render:function(){var a={},b=this.props.columnSums[this.props.columnName],c=this.props.columnsSizeProperties,d=c.columnsWidthValues,e=c.remainingWidth,f=c.nonFixedWidthColumns,g=this,h=g.props.index,i=g.props.columnsNumber,j=d.find(function(a){return a.fieldName===g.props.columnName}).width;return j&&(a.width=j+"px",a.minWidth=j+"px",a.maxWidth=j+"px"),h===i-1&&0===f.length&&e>0&&(a.width="inherit",a.minWidth="inherit",a.maxWidth="inherit"),React.createElement("td",{key:this.props.columnName,className:"subelem-summary-cell","data-key":this.props.columnName,style:a},this.renderCell(b))}}),a}(window.webcon||{}),Injector.instance("ConnectedSubelements",[],function(){function a(a,b){var c=null;Injector.resolve(["FormInfo"],function(a){c=a.isAdminMode});var d=a.subelements.filter(function(a){return a.info.fieldName===b.name})[0],e=d.control.config.singleRowEditMode,f=e&&d.control.config.allowEditingAllWhenSingleMode,g=d.control.data.rows.length>d.control.config.rowInEditModeLimit,h=webcon.env===Injector.env.mobile;return{subelementsControlId:d.info.id,columns:d.control.config.columns,rows:d.control.data.rows,config:d.control.config,editMode:d.info.editMode,disabled:d.info.isDisabled,fieldName:d.info.fieldName,isAdmin:c,showEditAllButton:f&&!g&&!h,editInPopup:e||h,isMobileForm:h,isLoading:d.control.isLoading}}function b(a){return{change:function(b){return function(c,e,f){a(d.SubelementsActions.createChangeActions(f,e,c,b))}},remove:function(b){return function(c){a(d.SubelementsActions.createRemoveActions(c,b))}},clone:function(b){return function(c){a(d.SubelementsActions.createCloneActions(b,c))}},addNewRow:function(b){return function(c){a(d.SubelementsActions.createAddRowActions(b,c))}},restoreDefaults:function(b){return function(c){a(d.SubelementsActions.createRestoreDefaultsAction(b,c))}},removeAll:function(b){return function(){a(d.SubelementsActions.createRemoveAllAction(b))}},saveRestrictionsChange:function(b,c,e,f,g,h){a(d.SubelementsActions.createChangeSaveRestrictionsActions(b,c,e,f,g,h))},undoEditRow:function(b,c,e){a(d.SubelementsActions.createUndoEditRowAction(b,c,e))},undoChangeColumnsVisibility:function(b,c){a(d.SubelementsActions.createUndoChangeSubelementsColumnVisibilityActions(b,c))},createApplyRecalculateAction:function(b,c,e){a(d.SubelementsActions.createApplyRowRecalculateAction(b,c,e))}}}function c(a,b){var c=null,d=null;return Injector.resolve(["SubelementsControllerCreator","ColumnSumService"],function(b,e){c=b,d=function(){e.propagateSummaries(a.fieldName)}}),{columns:a.columns,rows:a.rows,rowsCount:a?a.rows.length:0,config:a.config,editMode:a.editMode,disabled:a.disabled,editable:"Edit"===a.editMode&&!a.disabled,isAdmin:a.isAdmin,fieldName:a.fieldName,showEditAllButton:a.showEditAllButton,editInPopup:a.editInPopup,isMobileForm:a.isMobileForm,isLoading:a.isLoading,controller:c.createForControl(a.fieldName,b.change(a.fieldName),b.addNewRow(a.fieldName),b.clone(a.fieldName),b.saveRestrictionsChange,a.columns,a.config,a.subelementsControlId,b.createApplyRecalculateAction),restoreDefaults:b.restoreDefaults(a.fieldName),remove:b.remove(a.fieldName),clone:b.clone(a.fieldName),removeAll:b.removeAll(a.fieldName),propagateSums:d,undoEditRow:b.undoEditRow,undoChangeColumnsVisibility:b.undoChangeColumnsVisibility}}var d=webcon.redux=webcon.redux||{};return ReactRedux.connect(a,b,c)(webcon.views.Subelements)}),window.webcon=function(a){var b=a.views=a.views||{},c={edit:"Edit",readOnlyHtml:"ReadOnlyHtml",readOnly:"ReadOnly"};return b.SubelementsRow=createReactClass({displayName:"SubelementsRow",componentWillMount:function(){Injector.resolve(["SubelementCellStyleFactory","IconRepository"],function(a,b){this.subelementCellStyleFactory=a,this.iconRepository=b},this)},clone:function(){this.props.clone()},remove:function(){this.props.remove()},edit:function(){var a=this,b=this.props,c=function(c,d,e,f){a.props.undoEditRow(c,d,e),a.props.undoChangeColumnsVisibility(b.fieldName,f)};a.props.controller.editRow(b.fieldName,b.disabled,c)},noClickableCell:{LocalAttachments:{},RelativeAttachments:{},LinkReadonly:{}},getColumnClassStyle:function(a,b,c){return classNames(this.subelementCellStyleFactory.getCellStyle(a,c),{"cell-no-stretch":a&&a.width,"cell-is-required":b&&"Date"!==a.columnType})},canRemove:function(){return!!this.props.isAdmin||!this.props.disabled&&this.props.config.allowRemoveRows},canClone:function(){return!!this.props.isAdmin||!this.props.disabled&&this.props.config.allowCloneRows},render:function(){var a=this.props.row,d=this.props.rowIndex,e=a.editMode===c.edit,f=this.props.editMode,g=this.props.editMode===c.edit,h={};a.backgroundColor&&(h.backgroundColor=a.backgroundColor);var i=this.props.columnsSizeProperties,j=this,k=j.props.popupEditMode,l=j.props.isMobileForm&&e?j.edit.bind(j,d,a):function(){},m=g&&e&&j.props.config.isActionsColumnVisible,n=g&&e&&k,o=this.props.columns,p=this.props.visibleColumns;return React.createElement("tr",{key:a.id,className:"subelem-row table-hoverable","data-index":d+1,style:h},this.props.isOrdinalColumnVisible&&o.length&&React.createElement(b.OrdinalCell,{row:a,rowIndex:d,onClick:l}),this.props.visibleColumns.map(function(d,e){var h=g&&!j.props.allRowsRequired[d.fieldName]&&a.columnRequiredInfos.find(function(a){return a.columnName===d.fieldName}).isRequired,m=a.cells[d.fieldName],n=j.props.config.columnsConfiguration,o=n[d.fieldName],q=j.getColumnClassStyle(d,h,o),r={};m&&m.backgroundColor&&(r.backgroundColor=m.backgroundColor);var s=i.columnsWidthValues.find(function(a){return a.fieldName===d.fieldName}).width;if(s){var t=s-6+"px";r.width=t,r.minWidth=t,r.maxWidth=t}e===p.length-1&&0===i.nonFixedWidthColumns.length&&i.remainingWidth>0&&(r.width="inherit",r.minWidth="inherit",r.maxWidth=void 0),j.noClickableCell[d.columnType]&&(l=function(){});var u=d.editMode,v=d.isDisabled||m.isCellDisabled;return f===c.readOnlyHtml?u=c.readOnlyHtml:f===c.readOnly&&(v=!0),React.createElement("td",{key:d.fieldName,"data-key":d.fieldName,style:r,className:q,onClick:l},React.createElement(b.StandardCell,{fieldName:d.fieldName,cell:m,columnsConfiguration:n,controller:j.props.controller,column:d,editMode:u,isDisabled:v,popupEditMode:k,cellStyle:r,isMarkedRequired:h}))}),(m||k)&&this.props.editMode===c.edit&&React.createElement("td",{className:"subelem-action-cell"},React.createElement("div",{className:"subelements-action-button"},m&&j.canRemove()&&React.createElement("button",{type:"button",className:"btn btn-default subelements-action-button__delete-row",title:webconLocale.cDelete,onClick:this.remove.bind(j,d)},j.iconRepository.getRemoveImage()),m&&j.canClone()&&React.createElement("button",{type:"button",className:"btn btn-default subelements-action-button__clone-row",title:webconLocale.cCloneRow,onClick:this.clone.bind(j,d)},j.iconRepository.getCloneImage()),n&&React.createElement("button",{type:"button",className:"btn btn-default subelements-action-button__edit-row",title:webconLocale.cEdit,onClick:this.edit.bind(j,d,a)},j.iconRepository.getEditAllImage()))))}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{},c=a.mixins;return b.Subelements=createReactClass({displayName:"Subelements",mixins:[c.SubelementsColumnCalculator],componentDidMount:function(){this.resizeObserver.observe(this.container)},componentWillUnmount:function(){this.resizeObserver.unobserve(this.container)},componentDidUpdate:function(){var a=this;a.state.editAllMode&&!a.props.showEditAllButton&&a.toggleEditAll(),a.props.editable&&a.props.config.isImportFromExcelVisible&&!a.state.fileuploadIsLoaded&&(Injector.resolve(["TemporaryFilesUploadService"],function(b){b.registerUpload(a.fileupload,function(b){a.doImport(b)},a.props.showLoadingPanel,a.props.hideLoadingPanel,a.validateFile)},a),a.setState({fileuploadIsLoaded:!0}))},getInitialState:function(){return this.noClickableCell={LocalAttachments:{},LinkReadonly:{}},this.resizeObserver=new ResizeObserver(this.createResizeObserver()),{isLoading:!1,editAllMode:!1,fileuploadIsLoaded:!1}},getVisibleColumns:function(){var a=this;return _.filter(this.props.columns,function(b){return b.isVisible&&(a.props.isAdmin||!b.isTechnical)})},render:function(){var a=this,b=this.props.editable&&this.props.config.allowAddRows?this.addRow:null;return this.props.columns.length<1?React.createElement("div",{ref:function(b){a.container=b},className:"subelements noSwipe"}):this.createSubelementsTable(this,b)},addRow:function(){var a=this,b=this.props,c=function(c){if(a.props.editInPopup&&!a.state.editAllMode){var d=a.props.controller.createForRow(c),e=function(c,d,e,f){a.props.remove(d),a.props.undoChangeColumnsVisibility(b.fieldName,f),a.props.controller.runAfterCallbackScripts()};d.editRow(b.fieldName,b.disabled,e,!0)}};!b.disabled&&b.config.allowAddRows&&a.props.controller.addRow(a.waitingPanelCallback,c)},cloneRow:function(a){var b=this;this.props.disabled||Injector.inject("SubelementsQueueService").queueCloneRow(a,b.waitingPanelCallback,b.props.controller.cloneRow)},waitingPanelCallback:function(a){this.setState({isLoading:a})},toggleEditAll:function(){var a=this;a.setState({editAllMode:!a.state.editAllMode})},createResizeObserver:function(){var a=this,b=_.throttle(a.recalculateDisplayMode,10,{leading:!0,trailing:!0});return function(a){a.forEach(function(){window.requestAnimationFrame(b)})}},recalculateDisplayMode:function(){if(this.container){var a=this.container.getBoundingClientRect().width;return this.setState({subelementsWidth:a}),a}},createSubelementsTable:function(c,d){var e;Injector.resolve(["DeviceInfo"],function(a){e=a.isModern()});var f,g,h,i,j="";Injector.resolve([{depName:"IconRepository",depEnv:a.env}],function(a){f=a.getPlusImage(),g=a.getRemoveImage(),h=a.getImportImage(),i=a.getExportImage(),j=a.getEditAllImage()});var k=c.props,l=c.state,m=k.config,n="Edit"===k.editMode,o=k.editInPopup&&!l.editAllMode,p=m&&m.isActionsColumnVisible,q=n&&(p||o),r=m.isOrdinalColumnVisible,s=k.columns.reduce(function(a,b){return a[b.fieldName]=k.rows.every(function(a){return a.columnRequiredInfos.find(function(a){return a.columnName===b.fieldName}).isRequired}),a},{}),t=l.subelementsWidth,u=!1,v=!1;Injector.resolve(["FormInfo"],function(a){u=a.isAdminMode,v=a.editMode},c);var w=_.filter(m.columns,function(a){return a.isVisible&&(u||!a.isTechnical)
}),x=this.calculateColumnsWidth(w,m,v,t,l.editAllMode);return React.createElement("div",{id:k.fieldName,ref:function(a){c.container=a},className:"subelements noSwipe"},t&&React.createElement("div",null,React.createElement("div",{className:"subelements-table-actions"},k.editable&&!k.readonly&&k.showEditAllButton?React.createElement("button",{type:"button",className:"btn btn-default subelements-table-actions__edit-all",onClick:c.toggleEditAll},j,React.createElement("span",null,l.editAllMode?webconLocale.cEndEditing:webconLocale.cEditAll)):"",k.editable&&m.isInitButtonVisible?React.createElement("button",{type:"button",className:"btn btn-default subelements-table-actions__initialize",onClick:c.initialize},f,React.createElement("span",null," ",webconLocale.cInitSubelement)):"",k.editable&&!k.readonly&&m.isRemoveAllButtonVisible?React.createElement("button",{type:"button",className:"btn btn-default subelements-table-actions__remove-all",onClick:c.removeAll},g,React.createElement("span",null," ",webconLocale.cRemoveAll)):"",k.editable&&m.isExportToExcelVisible?React.createElement("button",{type:"button",className:"btn btn-default subelements-table-actions__export-to-excel",onClick:c.doExport},i,React.createElement("span",null," ",webconLocale.cExportSubelementsRows)):"",k.editable&&m.isImportFromExcelVisible?React.createElement("div",{className:"fileinput-button btn btn-default subelements-table-actions__import-from-excel"},h,React.createElement("span",null," ",webconLocale.cImportFromExcel),React.createElement("input",{ref:function(a){c.fileupload=a},id:"fileupload",type:"file",name:"file"})):""),React.createElement(b.TableControlTemplate,{addButon:d,isModern:e,isLoading:k.isLoading||l.isLoading},React.createElement(b.SubelementTableHeaderTemplate,{columns:w,allRowsRequired:s,isActionsColumnVisible:q,isOrdinalColumnVisible:r,subelementsWidth:t,columnsSizeProperties:x,editMode:v,columnsConfiguration:m.columnsConfiguration}),React.createElement("tbody",null,k.rows.map(function(a,d){return React.createElement(b.SubelementsRow,{row:a,key:d,rowIndex:d,fieldName:k.fieldName,disabled:k.disabled,columns:k.columns,visibleColumns:c.getVisibleColumns(),isOrdinalColumnVisible:k.config.isOrdinalColumnVisible,config:k.config,editMode:k.editMode,isAdmin:k.isAdmin,controller:k.controller.createForRow(a,c.waitingPanelCallback),columnsSizeProperties:x,remove:function(){Injector.inject("SubelementsQueueService").queueDeleteRow(d,function(a){k.remove(a),k.propagateSums(),c.registerActivity(),k.controller.runAfterCallbackScripts()})},clone:function(){var b=a.id;c.cloneRow(b)},undoEditRow:k.undoEditRow,undoChangeColumnsVisibility:k.undoChangeColumnsVisibility,isMobileForm:k.isMobileForm,popupEditMode:o,allRowsRequired:s})}),React.createElement(b.SummaryRow,{key:"summary",visibleColumns:c.getVisibleColumns(),rows:k.rows,isOrdinalColumnVisible:m.isOrdinalColumnVisible,getColumnSums:k.controller.getColumnSums,readonly:k.readonly,columnsConfiguration:m.columnsConfiguration,isActionsColumnVisible:q,columnsSizeProperties:x})))))},removeAll:function(){var a=this.props,b=this;a.editable&&a.config.isRemoveAllButtonVisible&&(a.removeAll(),a.propagateSums(),b.registerActivity(),a.controller.runAfterCallbackScripts())},initialize:function(){var a=this.props;a.editable&&a.config.isInitButtonVisible&&a.controller.restoreDefaultRows(a.restoreDefaults,this.waitingPanelCallback)},doExport:function(){var a=this.props;a.editable&&a.config.isExportToExcelVisible&&a.controller.doSubelementsExport(this.waitingPanelCallback)},doImport:function(a){var b=this,c=b.props;c.editable&&c.config.isImportFromExcelVisible&&c.controller.doSubelementsImport(a,this.waitingPanelCallback,c.restoreDefaults)},validateFile:function(a){return 1===a.files.length&&a.files[0].name.endsWith(".xlsx")?{isValid:!0}:{isValid:!1,message:webconLocale.cFileExtensionNotXlsx}},registerActivity:function(){Injector.resolve(["ActivitiesWatcher"],function(a){a.registerActivity()})}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{};return b.SummaryRow=createReactClass({displayName:"SummaryRow",render:function(){var a=this,c=a.props.getColumnSums(a.props.rows);if(!c||0===_.size(c))return null;var d=a.props.columnsSizeProperties,e=this.props.visibleColumns.length;return React.createElement("tr",{className:"subelem-row subelem-summary-row"},a.props.isOrdinalColumnVisible?React.createElement("td",null):null,this.props.visibleColumns.map(function(f,g){return React.createElement(b.SummaryCell,{key:g,index:g,columnName:f.fieldName,columnSums:c,columnsNumber:e,columnsConfiguration:a.props.columnsConfiguration,column:f,columnsSizeProperties:d})}),a.props.readonly||!a.props.isActionsColumnVisible?null:React.createElement("td",{className:"subelem-action-cell"}))}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{};return b.SurveyChoose=createReactClass({displayName:"SurveyChoose",propTypes:{name:PropTypes.string.isRequired,disabled:PropTypes.bool.isRequired,value:PropTypes.object.isRequired,controller:PropTypes.object.isRequired,config:PropTypes.object.isRequired},getInitialState:function(){var a=this.props.value;return{selectedValues:Object.assign({},a.selectedValues),customAnswer:a.custom}},componentWillReceiveProps:function(a){var b=a.value;this.setState({selectedValues:Object.assign({},b.selectedValues),customAnswer:b.custom})},componentWillMount:function(){var a=this.props.config;this.answers=a.answers,this.multichoose=a.multichoose,this.numbering=a.numbering,this.optional=a.optional,this.optionalLines=a.optionalLines,this.optionalText=a.optionalText,this.question=a.question,this.titlePlacement=a.titlePlacement},change:function(a,b){if(!this.multichoose)return this.executeChangeForRadio(a,b);var c=this.state,d=c.selectedValues,e=c.customAnswer;d[a]?("-1"==a&&(e=""),delete d[a]):d[a]=b,this.setState({selectedValues:d});var f={custom:e,selectedValues:d};this.controlEndEdit(f)},textAreaChange:function(a){this.setState({customAnswer:a.target.value})},executeChangeForRadio:function(a,b){var c={},d=this.state.customAnswer;"-1"!=a&&(d=""),c[a]||(c[a]=b),this.setState({selectedValues:c});var e={custom:d,selectedValues:c};this.controlEndEdit(e)},textAreaEndEdit:function(a){this.setState({customAnswer:$(a.target).val()});var b={custom:$(a.target).val(),selectedValues:this.state.selectedValues};this.controlEndEdit(b)},controlEndEdit:function(a){JSON.stringify(a)!==JSON.stringify(this.props.value)&&this.props.controller.change(this.props.name,a)},getOptionalAnswer:function(a,b){if(this.optional){var c=!1,d=this;return this.state.selectedValues[-1]?c=!0:""===this.state.selectedValues[-1]&&(c=!0),React.createElement("li",null,React.createElement("div",{className:b},React.createElement("label",null,React.createElement("input",{disabled:d.props.disabled,type:a,onChange:this.change.bind(d,-1,"true"),checked:c}),this.optionalText)),React.createElement("textarea",{className:"wfFormControl form-control",rows:this.optionalLines,disabled:d.props.disabled||!c,onBlur:this.textAreaEndEdit,onChange:this.textAreaChange,value:this.state.customAnswer}))}return""},getNotMatchedAnswers:function(a,b){var c=this;return _.map(_.difference(_.keys(this.state.selectedValues),_.keys(this.answers)),function(d){if(-1==d)return"";var e=c.state.selectedValues[d];return React.createElement("li",null,React.createElement("div",{className:b},React.createElement("label",null,React.createElement("input",{type:a,disabled:c.props.disabled,checked:!0,onChange:c.change.bind(c,d,e)}),e)))})},render:function(){var a=1==this.numbering?"listLatin":"listNumeric",c=this.multichoose?"checkbox":"radio",d=c;this.props.disabled&&(d+=" disabled");var e="";"Upside"===this.titlePlacement&&(e=React.createElement(b.Tooltip,{tooltip:this.props.description},React.createElement("h5",{className:"wfUpsideControlDisplayNameNormal",dangerouslySetInnerHTML:{__html:this.question}})));var f=this;return React.createElement("div",{className:"surveyChoose"},e,React.createElement("ul",{className:a},_.map(this.answers,function(a,b){var e=!!f.state.selectedValues[b],g=b+"#"+a;return React.createElement("li",{key:g},React.createElement("div",{className:d},React.createElement("label",null,React.createElement("input",{type:c,disabled:f.props.disabled,checked:e,onChange:f.change.bind(f,b,a)}),a)))}),this.getOptionalAnswer(c,d),this.getNotMatchedAnswers(c,d)))}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{};return b.SurveyRating=createReactClass({displayName:"SurveyRating",propTypes:{name:PropTypes.string.isRequired,disabled:PropTypes.bool.isRequired,value:PropTypes.number,controller:PropTypes.object.isRequired,config:PropTypes.object.isRequired},componentWillMount:function(){var a=this,b=a.props.config;a.titlePlacement=b.titlePlacement,a.scaleMax=b.scaleMax,a.scaleMin=b.scaleMin,a.question=b.question,a.selectedValue=a.props.value,a.maxValueDescription=b.max,a.minValueDescription=b.min},componentDidMount:function(){for(var a=this,b=this.slider,c=[],d=a.scaleMin;d<=a.scaleMax;d++)c.push(d);$(b).jRange({from:a.scaleMin,to:a.scaleMax,step:1,scale:c,format:"%s",showLabels:!0,width:"100%",ondragend:a.change,onbarclicked:a.change,disable:a.props.disabled});var e=a.props.value;$(document).ready(function(){setTimeout(function(){$(b).jRange("setValue",e)},1e3)})},componentWillReceiveProps:function(a){var b=this.slider,c=a.value;$(b).jRange("setValue",c)},componentDidUpdate:function(){var a=this.slider;this.props.disabled?$(a).jRange("disable"):$(a).jRange("enable")},change:function(a){this.props.controller.change(this.props.name,parseInt(a))},render:function(){var a="",c=this.props.value,d=this;return"Upside"===this.titlePlacement&&(a=React.createElement(b.Tooltip,{tooltip:this.props.description},React.createElement("h5",{className:"wfUpsideControlDisplayNameNormal",dangerouslySetInnerHTML:{__html:this.question}}))),React.createElement("div",null,a,React.createElement("div",{className:"surveyControlWrapper row"},React.createElement("div",{className:"col-lg-2 col-xs-3 surveyDescription"},React.createElement("span",null,this.minValueDescription)),React.createElement("div",{className:"col-lg-8 col-xs-6"},React.createElement("input",{ref:function(a){d.slider=a},type:"hidden",className:"slider-input",value:c})),React.createElement("div",{className:"col-lg-2 col-xs-3 surveyDescription"},React.createElement("span",null,this.maxValueDescription))))}}),a}(window.webcon||{}),window.webcon=function(a){return(a.views=a.views||{}).Attachments=createReactClass({displayName:"Attachments",render:function(){var a;return Injector.resolve(["ConnectedAttachmentControl"],function(b){a=b}),React.createElement("div",{className:"attachment-control-container"},React.createElement(a,null))}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{},c=a.mixins;return b.Comments=createReactClass({displayName:"Comments",propTypes:{name:PropTypes.string.isRequired,isReadOnly:PropTypes.bool.isRequired,isArchive:PropTypes.bool},mixins:[c.RegistrableControl],getInitialState:function(){Injector.resolve(["$Window","FormInfo"],function(a,b){this.win=a,this.isHistoryVersion=!!b.historicalVersionsInfo&&b.historicalVersionsInfo.isInHistoricalVersionPreview},this);var a=this.win.model.comments;return{comments:Array.isArray(a.comments)?a.comments.slice():a.comments,value:a.primary}},change:function(a){this.setState({value:a.target.value})},endEdit:function(a){var b={primary:a.target.value};Injector.resolve(["CommentPanelController","MassActionsService"],function(a,c){a.addComment("comments",b),c.saveCommentValue(b)},this)},getCommentImage:function(){var a="";return Injector.resolve(["IconRepository"],function(b){a=b.getCommentImage()}),a},getSaveImage:function(){var a="";return Injector.resolve(["IconRepository"],function(b){a=b.getSaveImage()}),a},updateCallback:function(){Injector.resolve(["CommentPanelController"],function(a){a.addCommentEntry()},this);var a=this.win.model.comments;this.setState({comments:Array.isArray(a.comments)?a.comments.slice():a.comments,value:""})},saveComment:function(){var a=this;this.state.value&&Injector.resolve(["DocumentController"],function(b){b.saveComment(a.updateCallback)})},render:function(){var c=this,d=a.env===Injector.env.lite||a.env===Injector.env.outlook||a.env===Injector.env.massAction,e=d?{backgroundColor:this.win.model.applicationColor}:{},f=d?{color:this.win.model.applicationColor}:{},g=c.getCommentImage(),h=c.getSaveImage(),i=c.isHistoryVersion||this.props.isArchive,j=this.props.isReadOnly&&!c.isHistoryVersion&&!this.props.isArchive;return React.createElement("div",{id:"commentPanel"},React.createElement(b.VisibilityPanel,{isVisible:!0},React.createElement("div",{className:"ms-formlabel wfUpsideControlDisplayName",style:f},webconLocale.cComment),React.createElement("table",{className:"comment-line-separator single-border-table"},React.createElement("tbody",null,React.createElement("tr",null,React.createElement("td",{className:"ms-formline"})))),React.createElement("div",{className:"media"},React.createElement("div",{className:"media-left ms-storefront-appiconspan media-img-background",style:e},g),React.createElement("div",{className:"media-body"},React.createElement("textarea",{className:"wfFormControl form-control",disabled:i,value:this.state.value,onChange:this.change,rows:"5",cols:"20",onBlur:this.endEdit})),j?React.createElement("div",{className:"save-comment-panel"},React.createElement("button",{className:"btn btn-default",onClick:this.saveComment,disabled:!this.state.value},h,React.createElement("span",{className:"save-comment-label"},webconLocale.cSaveComment))):null),React.createElement(b.JsApp.CommentsEntries,{comments:this.state.comments})))}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{};return b.Companies=createReactClass({displayName:"Companies",render:function(){var a=this.props.value?this.props.value.availableCompanies:void 0,b=this.props.value?this.props.value.currentCompany:void 0,c=void 0;return Injector.resolve(["MetaDataControlsFactory"],function(d){c=d.getCompaniesSysControl(a,b)}),React.createElement("div",{className:"wfFormControl form-control-readonly"},c)}}),b.Companies.propTypes={value:PropTypes.object.isRequired},a}(window.webcon||{}),window.webcon=function(a){return(a.views=a.views||{}).IdSystem=createReactClass({displayName:"IdSystem",propTypes:{name:PropTypes.string.isRequired,value:PropTypes.object.isRequired},getInitialState:function(){return{value:this.props.value}},componentWillReceiveProps:function(a){this.setState({value:a.value})},render:function(){return React.createElement("div",{className:"wfFormControl"},React.createElement("span",null,this.state.value))}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{};return b.Tasks=createReactClass({displayName:"Tasks",propTypes:{name:PropTypes.string.isRequired,value:PropTypes.object.isRequired,isReadOnly:PropTypes.bool.isRequired},getInitialState:function(){return Injector.resolve(["$Window"],function(a){this.win=a},this),{userFlag:this.props.value.userFlag}},componentWillMount:function(){var a=this.props.value;this.stepDescription=a.stepDescription,this.taskDescription=a.taskDescription,this.taskName=a.taskName,this.expiredFlagInfo=a.expiredFlagInfo,this.shouldRenderFlag=a.showUserFlag,Injector.resolve(["ImagesUrlProvider"],function(a){this.getImage=a.getWebcon},this);var b=this;document.addEventListener("click",b.closeMenu),document.addEventListener("touchend",b.closeMenu)},componentWillUnmount:function(){var a=this;document.removeEventListener("click",a.closeMenu),document.removeEventListener("touchend",a.closeMenu)},closeMenu:function(a){var b=this.dropdown;b&&!b.contains(a.target)&&b.classList.remove("open")},getFlags:function(a){var b={index:3,key:"flag-flag",text:webconLocale.cMarkFlagged},c={index:2,key:"flag-postpone",text:webconLocale.cMarkPostponed},d={index:1,key:"flag-clear",text:webconLocale.cClearFlag},e=[];switch(a){case 3:e.push(d,c);break;case 2:e.push(d,b);break;case 1:e.push(b,c);break;default:e.push(d,b,c)}return e},getFlagImage:function(a){var b="";return Injector.resolve(["IconRepository"],function(c){switch(a){case 3:b=c.getFlagFlaggedIcon();break;case 2:b=c.getFlagPostponedIcon();break;case 1:b=c.getClearFlagIcon()}}),b},getExpiredFlag:function(a){var b="";return Injector.resolve(["IconRepository"],function(c){switch(a){case 3:b=c.getExpiredIcon();break;case 2:b=c.getExpiredCloseIcon()}}),b},setFlag:function(a){a>0&&a<4&&(this.setState({userFlag:a}),Injector.resolve(["TaskPanelController"],function(b){b.setUserFlag(a)},this))},renderFlags:function(){var a=this,c=a.getFlags(a.state.userFlag),d=a.getFlagImage(a.state.userFlag||1);return React.createElement("div",{className:"btn-group taskPanelButton",ref:function(b){a.dropdown=b}},React.createElement(b.FlagButton,{isReadOnly:a.props.isReadOnly||!a.props.value.isFlagEditable,userFlag:d}),React.createElement("ul",{className:"dropdown-menu pull-right ms-core-menu-box ms-core-menu-hasIcons ms-core-defaultFont ms-shadow",role:"menu"},c.map(function(b,c){return React.createElement("li",{key:c,className:classNames("ms-core-menu-item",b.key),"data-key":b.key,onClick:a.setFlag.bind(a,b.index)},React.createElement("a",{className:"ms-core-menu-link"},a.getFlagImage(b.index),React.createElement("span",{className:"ms-core-menu-label"},b.text)))})))},getTaskImage:function(){var a="";return Injector.resolve(["IconRepository"],function(b){a=b.getInfoImage()}),a},render:function(){var a,c=this,d=c.shouldRenderFlag?c.renderFlags():"",e=c.getExpiredFlag(c.expiredFlagInfo.flagStatus||1);Injector.resolve(["DeviceInfo"],function(b){a=b.isModern()});var f=a?{backgroundColor:c.win.model.applicationColor}:{},g=a?{color:c.win.model.applicationColor}:{},h=this.getTaskImage();return React.createElement("div",{id:"taskPanel"},React.createElement("div",{className:"taskPanel"},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-lg-12 col-xs-12  mediaWrapper"},React.createElement("div",{className:"taskDetailsDescription ms-formlabel wfUpsideControlDisplayName",style:g},webconLocale.cTaskDetails),React.createElement("table",{className:"taskDetailsSeparator comment-line-separator single-border-table"},React.createElement("tbody",null,React.createElement("tr",null,React.createElement("td",{className:"ms-formline"})))),React.createElement("div",{className:"ms-storefront-appiconspan media-img-background",style:f},h),React.createElement(b.TaskDetails,{data:c.props.value,flags:d,expiredFlag:e})))))}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{};return b.Tab=createReactClass({displayName:"Tab",propTypes:{control:PropTypes.object.isRequired,controller:PropTypes.object.isRequired,isActive:PropTypes.bool.isRequired,orientation:PropTypes.oneOf(["Beside","Upside"]).isRequired,members:PropTypes.arrayOf(PropTypes.object)},componentDidUpdate:function(){this.props.isActive&&$(this.tab).find(".map").trigger("shown.webcon.maps")},componentWillMount:function(){Injector.resolve(["$Window","ShouldRenderService"],function(a,b){this.win=a,this.shouldRenderService=b},this)},getControlsToRender:function(a,b){var c=this.shouldRenderService;return _.chain(a.controls).filter(function(a){return!a.isInGroup||b&&a.groupName&&b.fieldName===a.groupName}).filter(function(b){var d=a[b.fieldName];return c.checkIfShouldRender(d)}).value()},getInitialState:function(){return{}},render:function(){var a=this;if(!a.props.isActive)return null;var c={controls:a.props.members};return _.each(c.controls,function(b){c[b.fieldName]=a.win.model[b.fieldName]}),React.createElement("div",{className:"tab-pane"+(a.props.isActive?" active":""),id:a.props.control.fieldName,key:"TabPane_"+a.props.control.id,ref:function(b){a.tab=b},role:"tabpanel"},React.createElement(b.MainPanel,{addMetaData:!1,controller:a.props.controller,data:c,key:"TabPanePanel_"+a.props.control.id,name:"TabPanePanel_"+a.props.control.id,members:a.getControlsToRender(c,a.props.control),orientation:a.props.orientation}))}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{};return b.TabPanel=createReactClass({displayName:"TabPanel",propTypes:{activeTabId:PropTypes.number.isRequired,controller:PropTypes.object.isRequired,displayName:PropTypes.string.isRequired,fieldName:PropTypes.string.isRequired,members:PropTypes.arrayOf(PropTypes.object),orientation:PropTypes.oneOf(["Beside","Upside"]).isRequired},getInitialState:function(){return{activeTabId:this.props.activeTabId,openTabs:!1,dropOnBot:!1}},componentWillMount:function(){var a=this;Injector.resolve(["$Window","TabPanelController"],function(b,c){a.win=b,a.tabPanelController=c}),a.isRequiredDataForTabs=a.fillIsRequiredDataForTabs(),a.closeTabs=a.closeTabs.bind(a),document.addEventListener("click",a.closeTabs),document.addEventListener("touchend",a.closeTabs)},componentWillUnmount:function(){var a=this;document.removeEventListener("click",a.closeTabs),document.removeEventListener("touchend",a.closeTabs)},componentWillReceiveProps:function(a){var b=this;b.isRequiredDataForTabs=b.fillIsRequiredDataForTabs(),this.setState({activeTabId:a.activeTabId})},handleClick:function(a,b){var c=this;b.preventDefault(),c.state.activeTabId!==c.props.members[a].id&&(c.tabPanelController.setActiveTabId(c.props.fieldName,c.props.members[a].id),c.setState({activeTabId:c.props.members[a].id,openTabs:!1}))},checkHeight:function(){var a=this.tabMenu;if(a){var b=this.tabDrop.getBoundingClientRect(),c=b.top;if(a.scrollHeight+100>window.innerHeight-c)return!0}return!1},toggleTabs:function(){var a=!this.state.openTabs&&this.checkHeight.call(this);this.setState({openTabs:!this.state.openTabs,dropOnBot:a})},closeTabs:function(a){var b=this.tabDrop;b&&!b.contains(a.target)&&this.state.openTabs&&this.setState({openTabs:!1})},fillIsRequiredDataForTabs:function(){var b=this,c=[];return Injector.resolve([{depName:"ControlsFactory",depEnv:a.env},"logger","ModelController","FormInfo"],function(a,d,e,f){_.each(b.props.members,function(a){var d=b.win.model[a.fieldName].config,g=d.members.map(function(a){return e.findControlByFieldName(a)});c[a.fieldName]=_.some(g,function(a){var c=b.win.model[a.fieldName];if("Subelements"===c.type)var d=_.some(c.config.columns,function(a){return!0===a.required});return f.editMode&&(a.required||d)})})}),c},createTabs:function(){var a=this,c=a.state.activeTabId,d=a.props.members.find(function(a,b){return parseInt(c)===parseInt(a.id)}),e=a.state.openTabs?"wb-tabs-header open":"wb-tabs-header",f=function(){var b=a.state.dropOnBot?"wb-tabs drop-on-bot":"wb-tabs";return a.props.members.length>1?React.createElement("div",{className:"wb-tabs-dropdown",ref:function(b){a.tabDrop=b}},React.createElement("div",{className:"wb-tab-toggle",onClick:a.toggleTabs.bind(a)},React.createElement("span",null,d&&d.displayName),React.createElement("i",{className:"icon ms-Icon ms-Icon--ChevronDown"})),React.createElement("ul",{className:b,ref:function(b){a.tabMenu=b},role:"tablist"},g())):React.createElement("div",{className:"wb-tabs-dropdown no-drop",ref:function(b){a.tabDrop=b}},React.createElement("div",{className:"wb-tab-toggle"},React.createElement("span",null,d&&d.displayName)))},g=function(){return a.props.members.map(function(d,e){var f={},g=a.isRequiredDataForTabs[d.fieldName];d.isVisible||(f.display="none");var h=React.createElement("div",{className:"tab-tooltip-content"},React.createElement("div",{className:"tab-tooltip-content-name"},d.displayName),d.description?React.createElement("div",{className:"tab-tooltip-content-description"},d.description):null),i={};Injector.resolve(["StyleStringHelper"],function(a){i=a.convertStyleStringToReactStyleObject(d.labelStyle||"")});var j=classNames({requiredAttribute:g,"nav-tab--with-custom-style":i});return React.createElement(b.JsApp.Tooltip,{key:"Tab_"+d.id,popoverClassName:"tabs-panel-tooltip",trigger:"hover",content:h},React.createElement("li",{className:c===d.id?" active":"",style:f,key:"Tab_"+d.id,role:"presentation"},React.createElement("a",{href:"#"+d.fieldName,"aria-controls":d.fieldName,"aria-expanded":c===d.id?"true":"false",role:"tab",className:j,style:i,onClick:a.handleClick.bind(a,e)},React.createElement("span",null,d.displayName))))})};return"tab-panel-sm"===a.props.breakpoint?React.createElement("div",{className:e},f()):React.createElement("ul",{className:"nav nav-tabs",role:"tablist"},g())},render:function(){var c=this.state.activeTabId,d=this,e=[];Injector.resolve([{depName:"ControlsFactory",depEnv:a.env},"logger","PanelDecorator","ModelController"],function(a,f,g,h){e=d.props.members.map(function(a,e){var f=d.win.model[a.fieldName].config,g=f.members.map(function(a){return h.findControlByFieldName(a)});return React.createElement(b.Tab,{control:a,controller:d.props.controller,key:"TabPane_"+a.id,isActive:c===a.id,orientation:d.props.orientation,members:g})})});var f=d.createTabs();return React.createElement("div",{className:"wfTabPanel tab-panel"},f,React.createElement("div",{className:"tab-content"},e))}}),a}(window.webcon||{}),window.webcon=function(a){return(a.views=a.views||{}).Tooltip=createReactClass({displayName:"Tooltip",createMarkup:function(a){return{__html:a}},render:function(){var a;Injector.resolve(["DeviceInfo"],function(b){a=b.isModern()});var b=this.props.styles,c=classNames("tooltip-container",this.props.className);return a?React.createElement("div",{className:c,style:b},this.props.tooltip?React.createElement("div",null,React.createElement("span",{className:"tooltip-modern-text",dangerouslySetInnerHTML:this.createMarkup(this.props.tooltip)})):"",this.props.children," "):React.createElement("div",{className:"tooltip-container"},this.props.children)}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{};return b.TreeControl=createReactClass({displayName:"TreeControl",componentWillMount:function(){var a=this.props.config.roots;this.roots=a,Injector.resolve(["TreeTraversingService"],function(b){this.nodesToExpand=b.getNodesInPathToNode(a,this.props.value)},this)},isExpanded:function(a){return _.some(this.nodesToExpand,function(b){return b.id===a.id})},selectNode:function(a,b,c){var d={id:a,name:b,fullName:c};d.id!==this.props.value.id&&this.props.controller.change(this.props.name,d),this.props.params.successCallback(d),this.props.params.closePopup()},renderChildNodes:function(a){var b=this,c=a.isSelectable,d=a.id===this.props.value.id,e=c?"selectableNode":"th-main-font",f=a.childNodes.length>0,g="",h="";d&&(e+=" selectedNode");var i="";return i=c?React.createElement("div",{className:e,onClick:this.selectNode.bind(this,a.id,a.name,a.fullName)},a.name):React.createElement("div",{className:e},a.name),f?(g=this.props.name+"node"+a.id+"container",g=g.replace(/\//g,"_"),h=React.createElement("div",{"data-target":"#"+g,"data-toggle":"collapse",className:"collapsed th-main-font"},React.createElement("span",{className:"icon ms-Icon ms-Icon--ChevronDown"}),i)):h=i,React.createElement("div",{className:"indentNode"},h,React.createElement("div",{id:g,className:this.isExpanded(a)?"in":"collapse"},a.childNodes?a.childNodes.map(function(a){return React.createElement("div",null,b.renderChildNodes(a))}):""))},render:function(){var a=this;return React.createElement(b.TreeControlPopup,{name:this.props.displayName,params:this.props.params},React.createElement("div",{className:"choiceTree"},a.roots?a.roots.map(function(b){return React.createElement("div",null,a.renderChildNodes(b))}):""))}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{};return b.UpsidePanel=createReactClass({displayName:"UpsidePanel",propTypes:{isRequired:PropTypes.bool.isRequired,style:PropTypes.object.isRequired},createMarkup:function(a){return{__html:a}},render:function(){var a="";if(this.props.shouldDisplayName&&this.props.displayName){var c="ms-formlabel wfUpsideControlDisplayName";this.props.isRequired&&(c+=" requiredAttribute"),this.props.shouldNotDisplayNameInBold&&(c+=" wfUpsideControlDisplayNameNormal"),a=React.createElement("span",{className:c},this.props.displayName)}var d="";this.props.shouldDisplayDescriptionInControl&&(d=React.createElement("div",{className:"wfUpsideControlDescription",dangerouslySetInnerHTML:this.createMarkup(this.props.description)}));var e=a?React.createElement(b.JsApp.Tooltip,{trigger:"hover",content:this.props.description,delay:500},a):null,f="upsidePanel "+(this.props.notColumn?"":"col-xs-12")+" "+this.props.additionalClass;return React.createElement("div",{className:"row wfContentRow"},React.createElement("div",{className:f},e||d?React.createElement(b.StylePanel,{style:this.props.style,inlineStyle:this.props.inlineStyle},React.createElement("div",{className:"wfUpsidePanelLabels"},React.createElement("span",null,e),d)):null,React.createElement("div",{className:this.props.shouldDisplayName&&this.props.displayName?"ms-formbody":""},this.props.children)))}}),a}(window.webcon||{}),window.webcon=function(a){return(a.views=a.views||{}).ValidationErrorPanel=createReactClass({displayName:"ValidationErrorPanel",propTypes:{isValid:PropTypes.bool.isRequired},render:function(){var a=this.props.isValid?"":"has-error";return React.createElement("div",{className:a},this.props.children)}}),a}(window.webcon||{}),window.webcon=function(a){return(a.views=a.views||{}).VisibilityPanel=createReactClass({displayName:"VisibilityPanel",propTypes:{isVisible:PropTypes.bool.isRequired},render:function(){return this.props.isVisible?React.createElement("div",null,this.props.children):React.createElement("span",null)}}),a}(window.webcon||{}),window.webcon=function(a){return(a.views=a.views||{}).WaitingPanel=createReactClass({displayName:"WaitingPanel",propTypes:{isVisible:PropTypes.bool.isRequired,style:PropTypes.string},componentWillMount:function(){Injector.resolve(["ImagesUrlProvider"],function(a){this.getImage=a.getWebcon},this)},render:function(){var a=this.props.isVisible?"loading-panel-visible":"loading-panel-hidden";return React.createElement("div",{className:classNames(a,this.props.style)},React.createElement("img",{src:this.getImage("uploading.gif")}))}}),a}(window.webcon||{}),Injector.factory("ControlsFactory",["logger","FormInfo","ModelController","$Window","CustomControlsFactory","ExternalControlController"],function(a,b,c,d,e,f){function g(a,g,h,j){var k,l=g.data,n=a.fieldName,o={};if(e.isCustomField(a))return e.getCustomControl(a,a.editMode,h);switch(g.type){case"AttributeGroup":return k=g.config.members.map(function(a){return c.findControlByFieldName(a)}),React.createElement(m.GroupPanel,{control:a,controller:h,displayName:a.displayName,initiallyExpanded:a.isExpanded,fieldName:a.fieldName,key:a.fieldName,members:k,orientation:j,config:g.config});case"Autocomplete":return React.createElement(m.PickerReadOnly,{name:n,key:n,value:l,config:g.config});case"SingleRowText":return React.createElement(m.SingleRowReadOnly,{name:n,value:l,key:n});case"Choose":return React.createElement(m.ChooseReadOnly,{name:n,value:l,key:n,description:a.description});case"MultiRowText":return React.createElement(m.JsApp.MultiRowReadOnly,{config:g.config,name:n,value:l,key:n});case"Bool":return React.createElement(m.SingleRowReadOnly,{name:n,value:l?webconLocale.cYes:webconLocale.cNo,key:n});case"Integer":return React.createElement(m.SingleRowReadOnly,{name:n,value:l,key:n,className:"form-control-readonly-integer"});case"FloatingPoint":case"FloatingPointCalculated":return React.createElement(m.FloatingPointReadOnly,{name:n,key:n,value:g,config:g.config});case"Date":return React.createElement(m.DateTimeReadOnly,{name:n,key:n,value:l,config:g.config});case"SurveyRating":return React.createElement(m.SingleRowReadOnly,{name:n,value:l,key:n});case"SurveyChoose":return React.createElement(m.SurveyChooseReadOnly,{name:n,key:n,value:l,config:g.config,description:a.description});case"SqlGrid":return React.createElement(m.SqlGridReadonly,{name:n,key:n,id:a.id,config:g.config});case"SqlRow":
return React.createElement(m.SqlRowReadonly,{displayName:a.displayName,name:n,description:a.description,id:a.id,config:g.config,key:n,style:g.style,inlineStyle:{control:a.controlStyle,label:a.labelStyle}});case"Subelements":return Injector.resolve(["ConnectedSubelements"],function(a){o=React.createElement(a,{name:n,key:n,readonly:!0,value:g.data,config:g.config})}),o;case"Picker":case"People":return React.createElement(m.PickerReadOnly,{name:n,key:n,value:l,config:g.config});case"GoogleMap":return React.createElement(m.GoogleMapReadOnly,{name:n,key:n,value:l,config:g.config});case"Image":return React.createElement(m.ImageReadOnly,{name:n,key:n,value:l});case"Link":case"LinkReadonly":return React.createElement(m.LinkReadOnly,{name:n,key:n,value:l,config:g.config});case"ChoiceTree":return React.createElement(m.SingleRowReadOnly,{name:n,value:l&&l.name?l.name:"",key:n});case"CalculatedText":case"CalculatedTextSelect":return React.createElement(m.CalculatedText,{name:n,value:l,key:n,config:g.config});case"Chart":return React.createElement(m.Chart,{name:n,key:n,disabled:a.isDisabled,height:g.config.chartHeight,value:g.data,id:a.id});case"SystemElementId":return React.createElement(m.IdSystem,{name:n,key:n,value:g.data});case"SystemCompany":return React.createElement(m.Companies,{name:n,key:n,value:g.data});case"SystemComments":return React.createElement(m.Comments,{name:n,key:n,isReadOnly:!b.editMode,isArchive:b.isArchive});case"SystemTaskDetails":return React.createElement(m.Tasks,{name:n,key:n,value:g.data,isReadOnly:!b.editMode});case"SystemAttachments":return React.createElement(m.Attachments,{name:n,key:n});case"SystemAttachmentPreview":return React.createElement(m.JsApp.AttachmentPreviewInPlaceContainer,{store:d.webcon.redux.portalStore});case"TabPanel":return i(g,h,a,j);case"RelativeAttachments":return React.createElement(m.RelativeAttachments,{name:n,key:n,disabled:a.isDisabled,isReadOnly:!0,value:g.data,controller:h,config:g.config,isArchive:b.isArchive});case"LocalAttachments":return Injector.resolve(["ConnectedLocalAttachments"],function(c){o=React.createElement(c,{name:n,key:n,isReadOnly:!0,disabled:a.isDisabled&&!b.isArchive,value:g.data,controller:h,config:g.config})}),o;case"Email":return React.createElement(m.EmailReadOnly,{name:n,value:l,key:n,config:g.config});case"Picture":return React.createElement(m.PictureReadOnly,{name:n,value:l,key:n,config:g.config});case"HandwrittenSignature":return React.createElement(m.HandwrittenSignatureReadOnly,{name:n,value:l,key:n,config:g.config});case"ExternalCustomControl":var p=!1;return Injector.resolve(["DeviceInfo"],function(a){p=a.isNativeMobileApp()}),Injector.resolve(["ConnectedExternalCustomControl"],function(a){o=React.createElement(a,{data:g.data,isMobileNative:p,externalControlController:f,fieldName:n})}),o}}function h(h,k,n,o){var p,q,r=h.fieldName,s=function(){l(r)},t=o.orientation,u=o.isMarkedRequired,v=o.popup;if(e.isCustomField(h))return e.getCustomControl(h,h.editMode,n);if("ReadOnlyHtml"===h.editMode||h.editSingleRow)p=g(h,k,n,t);else switch(k.type){case"AttributeGroup":q=k.config.members.map(function(a){return c.findControlByFieldName(a)}),p=React.createElement(m.GroupPanel,{control:h,controller:n,displayName:h.displayName,initiallyExpanded:h.isExpanded,fieldName:h.fieldName,key:h.fieldName,members:q,orientation:t,config:k.config});break;case"Autocomplete":p=React.createElement(m.Autocomplete,{name:r,key:r,disabled:h.isDisabled,popupTitle:h.displayName,value:k.data,controller:n,config:k.config,registerFocus:s,popup:v});break;case"SingleRowText":p=React.createElement(m.SingleRow,{name:r,key:r,disabled:h.isDisabled,value:k.data,controller:n,registerFocus:s});break;case"Choose":p=React.createElement(m.Dropdown,{name:r,key:r,disabled:h.isDisabled,value:k.data,controller:n,registerFocus:s});break;case"MultiRowText":p=React.createElement(m.MultiRow,{name:r,key:r,disabled:h.isDisabled,value:k.data,controller:n,config:k.config,registerFocus:s});break;case"Bool":p=React.createElement(m.Bool,{name:r,key:r,disabled:h.isDisabled,value:k.data,controller:n});break;case"Integer":p=React.createElement(m.Integer,{name:r,key:r,disabled:h.isDisabled,value:k.data,controller:n,registerFocus:s});break;case"FloatingPoint":case"FloatingPointCalculated":p=React.createElement(m.FloatingPoint,{name:r,key:r,disabled:h.isDisabled,value:k,controller:n,config:k.config,registerFocus:s});break;case"Date":p=React.createElement(m.DateTime,{name:r,key:r,disabled:h.isDisabled,value:k.data,controller:n,config:k.config,registerFocus:s,isMarkedRequired:u});break;case"SurveyRating":p=React.createElement(m.SurveyRating,{name:r,key:r,disabled:h.isDisabled,value:k.data,controller:n,config:k.config,description:h.description});break;case"SurveyChoose":p=React.createElement(m.SurveyChoose,{name:r,key:r,disabled:h.isDisabled,value:k.data,controller:n,config:k.config,description:h.description});break;case"SqlGrid":p=React.createElement(m.SqlGridReadonly,{name:r,key:r,id:h.id,config:k.config});break;case"SqlRow":p=React.createElement(m.SqlRowReadonly,{displayName:h.displayName,name:r,description:h.description,id:h.id,config:k.config,key:r,style:k.style,inlineStyle:{control:h.controlStyle,label:h.labelStyle}});break;case"Subelements":Injector.resolve(["ConnectedSubelements"],function(a){p=React.createElement(a,{name:r,key:r})});break;case"Picker":case"People":p=React.createElement(m.Picker,{name:r,key:r,disabled:h.isDisabled,popupTitle:h.displayName,value:k.data,controller:n,config:k.config,registerFocus:s});break;case"GoogleMap":p=React.createElement(m.GoogleMap,{name:r,key:r,disabled:h.isDisabled,value:k.data,controller:n,config:k.config,registerFocus:s});break;case"Image":p=React.createElement(m.Image,{name:r,key:r,disabled:h.isDisabled,value:k.data,controller:n,registerFocus:s});break;case"Link":p=React.createElement(m.Link,{name:r,key:r,disabled:h.isDisabled,value:k.data,controller:n,registerFocus:s});break;case"LinkReadonly":p=React.createElement(m.LinkReadOnly,{name:r,key:r,value:k.data,config:k.config});break;case"ChoiceTree":p=React.createElement(m.ChoiceTree,{name:r,disabled:h.isDisabled,key:r,value:k.data,controller:n,config:k.config});break;case"CalculatedText":case"CalculatedTextSelect":p=React.createElement(m.CalculatedText,{name:r,value:k.data,key:r,config:k.config});break;case"Chart":p=React.createElement(m.Chart,{name:r,key:r,disabled:h.isDisabled,height:k.config.chartHeight,value:k.data,id:h.id});break;case"SystemElementId":p=React.createElement(m.IdSystem,{name:r,key:r,value:k.data});break;case"SystemCompany":p=React.createElement(m.Companies,{name:r,key:r,value:k.data});break;case"SystemComments":p=React.createElement(m.Comments,{name:r,key:r,isReadOnly:!b.editMode});break;case"SystemTaskDetails":p=React.createElement(m.Tasks,{name:r,key:r,value:k.data,isReadOnly:!b.editMode});break;case"SystemAttachments":p=React.createElement(m.Attachments,{name:r,key:r});break;case"TabPanel":p=i(k,n,h,t);break;case"RelativeAttachments":p=React.createElement(m.RelativeAttachments,{name:r,key:r,disabled:h.isDisabled,value:k.data,controller:n,config:k.config});break;case"LocalAttachments":Injector.resolve(["ConnectedLocalAttachments"],function(a){p=React.createElement(a,{name:r,key:r,disabled:h.isDisabled,value:k.data,controller:n,config:k.config})});break;case"Email":p=React.createElement(m.Email,{name:r,key:r,disabled:h.isDisabled,value:k.data,controller:n,registerFocus:s});break;case"Picture":p=j(r,h,k,n);break;case"HandwrittenSignature":p=React.createElement(m.HandwrittenSignature,{name:r,value:k.data,config:k.config,disabled:h.isDisabled,controller:n});break;case"OcrVerification":var w,x;Injector.resolve(["OcrBlockClickService","OcrVerificationViewService"],function(a,b){w=function(c,d,e,f){a.handleOcrBlockClick(c,d,e,f),b.resetActiveBlock()},x=b.changeCurrentPage});var y=235,z="calc(100vh - "+y+"px)";p=React.createElement(m.JsApp.OcrVerificationViewContainer,{onBlockClick:w,areaWidth:"100%",areaHeight:z,dbId:b.dbId,onPageChange:x,wfdId:b.wfdId,sessionId:d.model.sessionId});break;case"ExternalCustomControl":var A=!1;Injector.resolve(["DeviceInfo"],function(a){A=a.isNativeMobileApp()}),Injector.resolve(["ConnectedExternalCustomControl"],function(a){p=React.createElement(a,{data:k.data,isMobileNative:A,externalControlController:f,fieldName:r})})}if(p)return p;a.error("UnknownControlType: "+k.type+",forControl:"+r)}function i(a,b,d,e){var f,g=a.config.members.map(function(a){return c.findControlByFieldName(a)});return Injector.resolve(["TabPanelController"],function(a){return f=a.getActiveTabIdFromStorage(d.fieldName)||d.activeTabId,React.createElement(m.BreakpointResizeDetector,{breakpoints:{"tab-panel-sm":80*g.length,"tab-panel-md":void 0}},React.createElement(m.TabPanel,{activeTabId:f,controller:b,displayName:d.displayName,fieldName:d.fieldName,key:d.fieldName,members:g,orientation:e,timestamp:Date.now()}))})}function j(a,b,c,d){var e=c.config,f="",g="",h={},i=!1;return Injector.resolve(["PictureController","DeviceInfo"],function(a,b){f=a.getEmptyControlMessage(),g=a.getBorderColor(),h=a.getSizeSettings(e.pictureSizeMode),i=b.isNativeMobileApp()}),React.createElement(m.Picture,{name:a,key:a,disabled:b.isDisabled||i,value:c.data,controller:d,config:e,emptyControlMessage:f,borderColor:g,sizeSettings:h})}function k(b){var c;switch(b.type){case"Choose":c=React.createElement(m.SimpleDropdown,{value:b.data,onChange:b.onChange})}if(c)return c;a.error("UnknownControlType: "+b.type)}function l(a){b.isOcrVerificationView&&Injector.resolve(["FocusRegistrationService"],function(b){b.registerFormFieldFocus(a)})}var m=webcon.views;return{getControl:h,getReadOnlyControl:g,getSimpleControl:k}},Injector.env.global),Injector.factory("CustomControlFactory",[],function(){function a(a){return 3071===a.id}function b(a,b,c){console.log(a),console.log(b),console.log(c);var d=JSON.parse(JSON.stringify(b.data)),e=function(b){console.log("change"),console.log(b),window&&window.workbench&&window.workbench.onCCChange(b),c.change(a.fieldName,b)};return React.createElement("div",{className:"component1be88443_d314_4131_a654_ab3bd68bfbd6"},component_1be88443_d314_4131_a654_ab3bd68bfbd6({model:d,onChange:e}))}return{isCustomField:a,getCustomControl:b}},Injector.env.global);var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};Injector.factory("CustomControlsFactory",["$Window","FormInfo","RedrawService"],function(a,b,c){function d(a){return!!a.plugin}function e(d,e,i){var j,k=d.plugin,l=k.pluginGuid,m=k.pluginName,n=f(k.sdkConfiguration),o=function(b){if(!a.model[d.fieldName].hasCustomModel){var e=h(d.fieldName,b);if(e.hasErrors)return a.model[d.fieldName].invalidData={error:e.error},void c.redraw(d.placeHolder)}i.change(d.fieldName,b),a.workbench&&a.workbench.onCCChange(b)},p=a.model[d.fieldName].data,q=a.model[d.fieldName].invalidData;q&&q.error&&(j={message:q.error.message,stack:q.error.stack,name:q.error.name,hasError:!0});var r=a.webcon.views,s=r.CustomControlContextProvider,t=a.webcon.customControls.components[l];return React.createElement(s,{value:{dbId:b.dbId,appId:b.applicationId,pluginGuid:d.plugin.pluginGuid}},React.createElement(r.ErrorBoundary,{errorTitle:"Error: "+m,initialError:j},React.createElement("div",{className:"component_"+l.split("-").join("_")},React.createElement(t,{model:p,onChange:o,fieldConfiguration:g(d),sdkConfiguration:n}))))}function f(b){var c=b;return a.workbench&&a.workbench.getCCSdkConfiguration&&(c=a.workbench.getCCSdkConfiguration()),c=c?JSON.parse(c):{}}function g(c){var d={displayName:c.displayName,description:c.description,isRequired:c.required,editMode:c.editMode,isNew:b.isNew,isAdmin:b.isAdminMode,isDisabled:c.isDisabled};return a.workbench?Object.assign({},d,a.workbench.getCCFormConfiguration()):d}function h(b,c){var d=a.model[b],e=d.type;switch(e){case"Image":if("object"===(void 0===c?"undefined":_typeof(c))&&c.hasOwnProperty("imageUrl")&&"string"==typeof c.imageUrl&&c.hasOwnProperty("displayName")&&"string"==typeof c.displayName)break;return{hasErrors:!0,error:{message:webconLocale.cCustomControlsReturnedInvalidData,stack:webconLocale.cCustomControlsObjectOfTypeExpected+" "+JSON.stringify({imageUrl:"string",displayName:"string"})}};case"Link":if("object"===(void 0===c?"undefined":_typeof(c))&&c.hasOwnProperty("url")&&"string"==typeof c.url&&c.hasOwnProperty("displayName")&&"string"==typeof c.displayName)break;return{hasErrors:!0,error:{message:webconLocale.cCustomControlsReturnedInvalidData,stack:webconLocale.cCustomControlsObjectOfTypeExpected+" "+JSON.stringify({url:"string",displayName:"string"})}};case"SingleRowText":if("string"==typeof c)break;return{hasErrors:!0,error:{message:webconLocale.cCustomControlsReturnedInvalidData,stack:webconLocale.cCustomControlsStringExpected}};case"Date":if(c instanceof Date)break;return{hasErrors:!0,error:{message:webconLocale.cCustomControlsReturnedInvalidData,stack:webconLocale.cCustomControlsDateTimeExpected}};case"FloatingPoint":if("object"===(void 0===c?"undefined":_typeof(c))&&c.hasOwnProperty("value")&&"number"==typeof c.value)break;return{hasErrors:!0,error:{message:webconLocale.cCustomControlsReturnedInvalidData,stack:webconLocale.cCustomControlsObjectOfTypeExpected+" "+JSON.stringify({value:"number"})}};case"MultiRowText":if("object"===(void 0===c?"undefined":_typeof(c))&&c.hasOwnProperty("primary")&&"string"==typeof c.primary)break;return{hasErrors:!0,error:{message:webconLocale.cCustomControlsReturnedInvalidData,stack:webconLocale.cCustomControlsObjectOfTypeExpected+" "+JSON.stringify({primary:"string"})}};default:throw new Error("Control customization of type '"+e+"' is not supported")}return{hasErrors:!1}}return a.webcon.wrappedCustomControls=a.webcon.wrappedCustomControls||{},{isCustomField:d,getCustomControl:e,checkIfNewDataIsValid:h,getSdkConfiguration:f,getFieldConfiguration:g}}),window.webcon=function(a){return(a.mixins=a.mixins||{}).ErrorMixinPanel={getInner:function(a,b){return a?React.createElement("ul",null,React.createElement("li",{className:"error",key:b},a.message)):React.createElement("span",null)},getErrors:function(a,b){var c=this;return React.createElement("div",null,a.map(function(a,b){var d=a.message.body?a.message.body:a,e=d.message.split(/\r\n|\r|\n/g);return React.createElement("li",{className:"error",key:b},c.getSplittedMessages(e),c.getInner(d.innerError,b))}),this.getValidationErrors(b))},getValidationErrors:function(a){return a?a.map(function(a,b){return React.createElement("li",{className:"error",key:b},a.title?a.title+":":"",React.createElement("span",{className:"validationMessage"},a.errorMessage))}):React.createElement("span",null)},renderErrors:function(){var a=this.props;if(0===this.props.errors.length)return React.createElement("span",null);var b="";return Injector.resolve(["IconRepository"],function(a){b=a.getErrorPanelImage()}),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-lg-12 col-sm-12 errors clearfix"},React.createElement("div",{className:"error-icon"},b),React.createElement("div",{className:"errors-text"},React.createElement("ul",null,this.getErrors(a.errors,a.validationErrors)))))},getSplittedMessages:function(a){return React.createElement("span",null,a.map(function(a,b){return React.createElement("span",{className:"error-message-header",key:b},a,React.createElement("br",null))}))}},a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{},c=a.mixins;return b.ErrorPanel=createReactClass({displayName:"ErrorPanel",mixins:[c.RegistrableControl,c.ErrorMixinPanel],render:function(){return this.renderErrors()}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{},c=a.mixins;return b.FatalErrorPanel=createReactClass({displayName:"FatalErrorPanel",mixins:[c.ErrorMixinPanel],render:function(){return this.renderErrors()}}),a}(window.webcon||{}),window.webcon=function(a){return(a.views=a.views||{}).AssignmentListPanel=createReactClass({displayName:"AssignmentListPanel",propTypes:{id:PropTypes.string.isRequired,title:PropTypes.string.isRequired,tasks:PropTypes.arrayOf(PropTypes.object).isRequired},render:function(){var a;Injector.resolve(["FormInfoPanelRowBuilder"],function(b){a=b},this);var b=_.uniq(this.props.tasks,!1,function(a){return a.userName}),c=this;return React.createElement("ul",{className:this.props.id},React.createElement("h2",null,React.createElement("a",null,this.props.title)),b.map(function(b){return a.createIconRow(c.getImageClassForTaskInfo(b),b.userName,c.getImageClassForGlyphCell(b),b.taskId,{"data-is-current":b.isCurrentUserTask,"data-is-finished":b.isFinished,"data-task-id":b.taskId,"data-user-login":b.userLogin})}))},getImageClassForTaskInfo:function(b){var c="";return Injector.resolve([{depName:"IconRepository",depEnv:a.env}],function(a){c=b.isFinished?a.getFinishedTaskImage():a.getCurrentTaskImage()}),c},getImageClassForGlyphCell:function(a){return a.isCurrentUserTask?"activeStep ms-imnlink ":"ms-imnlink "}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{};return b.AssignmentPanel=createReactClass({displayName:"AssignmentPanel",propTypes:{assignments:PropTypes.object.isRequired,ccCoversTitle:PropTypes.string.isRequired,ccTitle:PropTypes.string.isRequired,directCoversTitle:PropTypes.string.isRequired,directTitle:PropTypes.string.isRequired,id:PropTypes.string.isRequired,title:PropTypes.string},render:function(){return React.createElement("div",{className:this.props.id},this.props.title?React.createElement("ul",null,React.createElement("li",null,this.props.title)):"",this.createListPanel("direct-assignment-list-panel",this.props.directTitle,this.props.assignments.directTasks),this.createListPanel("cc-assignment-list-panel",this.props.ccTitle,this.props.assignments.ccTasks),this.createListPanel("direct-covers-assignment-list-panel",this.props.directCoversTitle,this.props.assignments.directCoversTasks),this.createListPanel("cc-covers-assignment-list-panel",this.props.ccCoversTitle,this.props.assignments.ccCoversTasks))},createListPanel:function(a,c,d){return d.length>0?React.createElement(b.AssignmentListPanel,{id:a,title:c,tasks:d}):""}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{};return b.AssignmentsInfoPanel=createReactClass({displayName:"AssignmentsInfoPanel",render:function(){return React.createElement("div",{className:"AssignmentsInfoPanel FormInfoPanel"},this.initPanel(window.initialModel.FormInfo.tasksInfo.standardTasks)?React.createElement(b.AssignmentPanel,{id:"standard-assignments-panel",directTitle:webconLocale.cAssignedTo,ccTitle:webconLocale.cAssignedToCc,directCoversTitle:webconLocale.cAssignedCovers,ccCoversTitle:webconLocale.cAssignedCcCovers,assignments:window.initialModel.FormInfo.tasksInfo.standardTasks}):"",this.initPanel(window.initialModel.FormInfo.tasksInfo.otherTasks)?React.createElement("div",null,React.createElement("hr",{className:"divider"}),React.createElement(b.AssignmentPanel,{id:"other-assignments-panel",title:webconLocale.cOtherTasks,directTitle:webconLocale.cAssignedTo,ccTitle:webconLocale.cAssignedToCc,directCoversTitle:webconLocale.cAssignedCovers,ccCoversTitle:webconLocale.cAssignedCcCovers,assignments:window.initialModel.FormInfo.tasksInfo.otherTasks})):"")},initPanel:function(a){return a&&(a.directTasks.length>0||a.ccTasks.length>0||a.directCoversTasks.length>0||a.ccCoversTasks.length>0)}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{};return b.BasicFormInfoPanel=createReactClass({displayName:"BasicFormInfoPanel",mixins:[a.mixins.RegistrableControl],render:function(){var a,c,d;Injector.resolve(["FormInfoPanelRowBuilder","FormInfo"],function(b,d){a=b,c=d},this),d=c.subDocTypesInfo;var e;return c.isElementIdVisible&&(e=a.createTextRow(webconLocale.cInstanceId,c.wfdId)),React.createElement(b.FormInfoPanel,{title:webconLocale.cInformation},a.createTextRow(webconLocale.cProcess,c.process),a.createTextRow(webconLocale.cDocType,c.docType),a.createTextRow(webconLocale.cWorkflow,c.workflow),e,d.currentSubDocType?a.createTextRow(webconLocale.cSubDocType,d.currentSubDocType.name):"")}}),a}(window.webcon||{}),window.webcon=function(a){return(a.views=a.views||{}).FormInfoPanel=createReactClass({displayName:"FormInfoPanel",propTypes:{title:PropTypes.string.isRequired},render:function(){return React.createElement("div",{className:"FormInfoPanel",id:this.props.id},React.createElement("h2",null,React.createElement("a",null,this.props.title)),this.props.children)}}),a}(window.webcon||{}),window.webcon=function(a){return(a.views=a.views||{}).FormInfoPanelRow=createReactClass({displayName:"FormInfoPanelRow",render:function(){return React.createElement("li",null,this.props.children)}}),a}(window.webcon||{});var _extends=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a};Injector.factory("FormInfoPanelRowBuilder",["$Window"],function(a){function b(a,b,c){return g(b,React.createElement("span",{className:a,"aria-hidden":"true"}),c+" glyph-padded-row")}function c(a,b,c,d,e,f){return React.createElement(h.Tooltip,{key:d,tooltip:f},React.createElement("div",_extends({key:d,className:classNames(c,"sp-icon-row","glyph-padded-row")},e),a,React.createElement("span",{className:"sp-image-description","data-key":b},b)))}function d(a,b,c){return g(React.createElement(h.BPSLinkWrapper,{urlData:a,className:"subelem-linkReadOnly",title:b},b),c)}function e(a,b){return React.createElement("div",{className:"formInfo-label"},React.createElement("div",null,a,":"),React.createElement("div",{className:"formInfo-value"},b))}function f(a,b,c){return React.createElement(h.Tooltip,{tooltip:c},e(a,b))}function g(a,b,c){return c=c||"",React.createElement("div",{className:c.toString()},b,React.createElement("span",null," "),React.createElement("span",null,a))}var h=a.webcon.views;return{createGlyphRow:b,createTextRow:e,createLinkRow:d,createIconRow:c,createTextRowWithTooltip:f}}),window.webcon=function(a){var b=a.views=a.views||{};return b.FormStatusPanel=createReactClass({displayName:"FormStatusPanel",render:function(){var a=this.props;return React.createElement("div",null,a.showInformations?React.createElement(b.BasicFormInfoPanel,{name:"BasicFormInfoPanel"}):"",a.showInformations?React.createElement("hr",{className:"divider"}):"",a.showSteps?React.createElement(b.StepsInfoPanel,{name:"StepsInfoPanel"}):"",a.showSteps?React.createElement("hr",{className:"divider"}):"",a.showAssignment?React.createElement(b.AssignmentsInfoPanel,{name:"AssignmentsInfoPanel"}):"",a.showAssignment?React.createElement("hr",{className:"divider"}):"",a.showDetails||a.ShowProcessSupervisor?React.createElement(b.TaskDetailsInfoPanel,{name:"TaskDetailsInfoPanel",showDetails:a.showDetails,showProcessSupervisor:a.showProcessSupervisor,isNew:a.isNew}):"",React.createElement(b.RelatedElementsInfoPanel,{name:"RelatedElementsInfoPanel",showParentElement:a.showParentElement,showSubworkflows:a.showSubworkflows}),a.showUserGuide?React.createElement("hr",{className:"divider"}):"",a.showUserGuide?React.createElement(b.UserGuideLink,null):"")}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{};return b.RelatedElementListPanel=createReactClass({displayName:"RelatedElementListPanel",propTypes:{title:PropTypes.string.isRequired,elements:PropTypes.arrayOf(PropTypes.object).isRequired},render:function(){return React.createElement(b.FormInfoPanel,{title:this.props.title},this.createRelatedElementsRows())},createRelatedElementsRows:function(){var a=this;return Injector.resolve(["FormInfoPanelRowBuilder","BPSDataSourceLinkService"],function(b,c){return a.props.elements.map(function(d){var e={url:c.createUrl(d.id).url,embedViewUrl:c.createEmbedViewUrl(d.id).url,isBpsElement:!0,elementId:d.id,queryParams:""};return b.createLinkRow(e,d.signature,a.getImageClassForRelatedElementInfo(d))})},this)},getImageClassForRelatedElementInfo:function(b){var c="";return Injector.resolve([{depName:"IconRepository",depEnv:a.env}],function(a){c=b.isFinish?a.getFinishedRelatedElementImage():a.getRelatedElementImage()}),c}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{};return b.RelatedElementsInfoPanel=createReactClass({displayName:"RelatedElementsInfoPanel",render:function(){var a=this.props;return Injector.resolve(["FormInfo"],function(a){this.parentElement=a.parentElement,this.childElements=a.childElements},this),React.createElement("div",null,this.parentElement&&a.showParentElement?React.createElement(b.RelatedElementListPanel,{title:webconLocale.cParentElement,elements:[this.parentElement]}):"",this.childElements&&a.showSubworkflows&&this.childElements.length>0?React.createElement(b.RelatedElementListPanel,{title:webconLocale.cChildrenElements,elements:this.childElements}):"")}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{};return b.StepsInfoPanel=createReactClass({displayName:"StepsInfoPanel",render:function(){var a=this;return React.createElement(b.FormInfoPanel,{title:webconLocale.cSteps,id:"stepInfos"},Injector.resolve(["FormInfoPanelRowBuilder"],function(b){return _.filter(window.initialModel.FormInfo.stepsHistoryInfo.stepInfos,function(a){return a.showInStatusTable}).map(function(c){return b.createIconRow(a.getImageClassForStepStatus(c.status),c.stepName,a.getStatusContextClass(c.status,c.hasGeneratedImage),c.stepId,c.hasGeneratedImage?{onClick:function(){a.handleStepClick(c.stepId)}}:{},c.stepDescription)},this)}))},getStatusContextClass:function(a,b){return classNames({activeStep:0===a},{stepClickable:b})},handleStepClick:function(a){Injector.resolve(["WorkflowDiagramService"],function(b){b.showWorkflowDiagram(a)})},getImageClassForStepStatus:function(b){var c="";return Injector.resolve([{depName:"IconRepository",depEnv:a.env}],function(a){switch(b){case 0:c=a.getCurrentImage();break;case 1:c=a.getOkImage();break;case 2:c=a.getArrowImage()}}),c?React.createElement("span",{className:"sp-step-icon"},c):(Injector.resolve(["logger"],function(a){a.error("UnknownStepStatus: "+b)},this),null)}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{};return b.TaskDetailsInfoPanel=createReactClass({displayName:"TaskDetailsInfoPanel",componentWillMount:function(){Injector.resolve(["FormInfo","UrlsFactory"],function(a,b){this.historyUrl=a.isNew?"":b.createHistoryUrl(a.wfdId,a.isAdminMode)},this)},render:function(){var a,c,d=this.props;return Injector.resolve(["FormInfoPanelRowBuilder","FormInfo"],function(b,d){a=b,c=d},this),React.createElement(b.FormInfoPanel,{title:webconLocale.cDetails},d.showDetails&&c.author?a.createTextRow(webconLocale.cAuthor,c.author.name):"",d.showDetails&&c.createDate?a.createTextRowWithTooltip(webconLocale.cCreatedDate,c.createDate,this.createDateAndTimeTooltipContent(c.createDate,c.createTime)):"",d.showDetails&&c.modifier?a.createTextRow(webconLocale.cModifiedBy,c.modifier.name):"",d.showDetails&&c.modifyDate?a.createTextRowWithTooltip(webconLocale.cModifiedDate,c.modifyDate,this.createDateAndTimeTooltipContent(c.modifyDate,c.modifyTime)):"",d.showDetails&&c.elementVersion?d.isNew?a.createTextRow(webconLocale.cVersion,c.elementVersion):a.createTextRow(webconLocale.cVersion,React.createElement("a",{href:this.historyUrl,onClick:this.redirectToHistory,className:"subelem-linkReadOnly",title:c.elementVersion},c.elementVersion)):"",d.showProcessSupervisor&&c.supervisor?a.createTextRow(webconLocale.cSupervisor,c.supervisor.name):"")},createDateAndTimeTooltipContent:function(a,b){return a+"</br>"+b},redirectToHistory:function(a){var b=this.historyUrl;return Injector.resolve(["OpenLinkHandler"],function(c){return c.openLinkEvent(a,function(){c.openHistory(b)})},this)}}),a}(window.webcon||{}),window.webcon=function(a){return(a.views=a.views||{}).FlagButton=createReactClass({displayName:"FlagButton",getInitialState:function(){return{flagHovered:!1}},componentWillMount:function(){Injector.resolve(["ImagesUrlProvider"],function(a){this.getImage=a.get},this)},mouseOver:function(){this.setState({flagHovered:!0})},mouseOut:function(){this.setState({flagHovered:!1})},render:function(){var a=this,b=a.state.flagHovered&&!a.props.isReadOnly?"ms-selectedtitle":"ms-unselectedtitle";return React.createElement("button",{type:"button",className:"btn btn-default dropdown-toggle flag-button",disabled:a.props.isReadOnly,"data-toggle":"dropdown",onMouseOver:this.mouseOver,onMouseOut:this.mouseOut},React.createElement("span",{className:b},a.props.userFlag,React.createElement("div",{className:"ms-menuimagecell flagDropdownArrow"},React.createElement("img",{src:a.getImage("menudark.gif")}))))}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{};return b.TaskDetails=createReactClass({displayName:"TaskDetails",getTaskContent:function(){var a=this.props.data;return a.taskDescription||a.stepDescription?!a.taskDescription&&a.stepDescription?React.createElement("div",{className:"taskPanelDesc pull-left"},React.createElement(b.RenderAsHtmlReadOnly,null,a.stepDescription)):a.taskDescription&&!a.stepDescription?React.createElement("div",{className:"taskPanelDesc pull-left"},React.createElement(b.RenderAsHtmlReadOnly,null,a.taskDescription)):React.createElement("div",{className:"taskPanelDesc pull-left"},React.createElement("div",{className:"taskBold clear"},webconLocale.cStepDetails,":"),React.createElement("div",null,React.createElement(b.RenderAsHtmlReadOnly,null,a.stepDescription)),React.createElement("div",{className:"taskBold taskDetailsHeader"},webconLocale.cTaskDescription,":"),React.createElement("div",null,React.createElement(b.RenderAsHtmlReadOnly,null,a.taskDescription))):React.createElement("span",null)},render:function(){var a=this.props.data;return React.createElement("div",{className:"taskPanelFont"},React.createElement("div",{className:"taskName pull-left"},a.taskName),this.props.flags,this.props.expiredFlag,this.getTaskContent())}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{};return b.UserGuideLink=createReactClass({displayName:"UserGuideLink",componentWillMount:function(){Injector.resolve(["FormInfo","IconRepository","HyperLinkFormatter"],function(a,b,c){var d=c.openModeEnum.newWindow;this.urlData=c.parseRawLinkData(a.userGuidePath,d),this.icon=b.getUserGuideIcon()},this)},render:function(){return React.createElement("div",{className:"user-guide"},this.icon,React.createElement(b.BPSLinkWrapper,{urlData:this.urlData,className:"sp-image-description user-guide__link",title:this.urlData.displayName},React.createElement("span",null,webconLocale.cInstruction)))}}),a}(window.webcon||{}),Injector.factory("IconRepository",["ImagesUrlProvider","ThemeLinkFactory"],function(a,b){function c(){return React.createElement("span",{className:"glyphicon glyphicon-ok","aria-hidden":"true"})}function d(){return React.createElement("span",{className:"glyphicon glyphicon-arrow-right","aria-hidden":"true"})}function e(){return React.createElement("span",{className:"glyphicon glyphicon-chevron-right","aria-hidden":"true"})}function f(){return e()}function g(){return c()}function h(){return e()}function i(){return c()}function j(){return React.createElement("span",{className:"glyphicon glyphicon-time ms-promotedActionButton-icon"})}function k(){return React.createElement("span",{className:"ms-promotedActionButton-icon glyphicon glyphicon-plus","aria-hidden":"true"})}function l(){return React.createElement("span",{className:"glyphicon glyphicon-pencil","aria-hidden":"true"})}function m(){return React.createElement("span",{className:"glyphicon glyphicon-pencil","aria-hidden":"true"})}function n(){return React.createElement("span",{className:"glyphicon glyphicon-share-alt flip-horizontal","aria-hidden":"true"})}function o(){return React.createElement("span",{
className:"glyphicon glyphicon-floppy-disk","aria-hidden":"true"}," ")}function p(){return React.createElement("span",{className:"glyphicon glyphicon-trash","aria-hidden":"true"})}function q(){return React.createElement("span",{className:"glyphicon glyphicon-remove"})}function r(){return React.createElement("span",{className:"glyphicon glyphicon-refresh","aria-hidden":"true"})}function s(){return React.createElement("span",{className:"glyphicon glyphicon-cog","aria-hidden":"true"})}function t(){return React.createElement("span",{className:"glyphicon glyphicon-cog","aria-hidden":"true"})}function u(){return React.createElement("span",{className:"glyphicon glyphicon-user","aria-hidden":"true"})}function v(){return React.createElement("i",{"data-time-icon":"glyphicon glyphicon-time","data-date-icon":"glyphicon glyphicon-calendar",className:"glyphicon glyphicon-calendar"})}function w(){return React.createElement("span",{className:"glyphicon glyphicon-menu-hamburger","aria-hidden":"true"})}function x(){return w()}function y(){return React.createElement("span",{className:"sp-toolbar-icon ms-promotedActionButton-icon"},React.createElement("img",{className:"sp-document-pdf-icon",src:ya}))}function z(){return y()}function A(){return React.createElement("span",null)}function B(){return React.createElement("span",{className:"glyphicon glyphicon-filter"})}function C(){return React.createElement("span",{className:"iconWrapperPadding"},React.createElement("span",{className:"iconWrapper"},React.createElement("img",{className:"ms-dlgCloseBtnImg",src:a.get("fgimg.png?rev=23"),alt:"Close dialog"})))}function D(){return React.createElement("img",{className:"",src:a.getWebcon("edititem.png")})}function E(){return React.createElement("img",{className:"taskPanelIcon",src:a.getWebcon("wfDynamicIconFlagFlagged.png")})}function F(){return React.createElement("img",{className:"taskPanelIcon",src:a.getWebcon("wfDynamicIconPostponed.png")})}function G(){return React.createElement("img",{className:"taskPanelIcon clearFlagIcon",src:a.getWebcon("wfDynamicIconFlag.png")})}function H(){return React.createElement("div",{className:"taskPanelButton"},React.createElement("img",{className:"taskPanelIcon wfDynamicIconExpired",src:a.getWebcon("wfDynamicIconExpired.png")}))}function I(){return React.createElement("div",{className:"taskPanelButton"},React.createElement("img",{className:"taskPanelIcon wfDynamicIconExpired",src:a.getWebcon("wfDynamicIconExpiredClose.png")}))}function J(){return React.createElement("span",null,React.createElement("i",{className:"glyphicon glyphicon-download-alt"}))}function K(){return React.createElement("span",{className:"glyphicon glyphicon-exclamation-sign"})}function L(){return React.createElement("span",{className:"glyphicon glyphicon-file","aria-hidden":"true"})}function M(){return React.createElement("span",{className:"glyphicon glyphicon-file","aria-hidden":"true"})}function N(){return React.createElement("span",{className:"glyphicon glyphicon-lock","aria-hidden":"true"})}function O(){return React.createElement("span",{className:"glyphicon glyphicon-remove","aria-hidden":"true"})}function P(){return React.createElement("span",{className:"ms-promotedActionButton-icon"},React.createElement("i",{className:"icon ms-Icon ms-Icon--Timer","aria-hidden":"true"}))}function Q(){return React.createElement("span",{className:"glyphicon glyphicon-list-alt","aria-hidden":"true"})}function R(){return React.createElement("span",{className:"glyphicon glyphicon-search","aria-hidden":"true"})}function S(){return React.createElement("span",{className:"glyphicon"},React.createElement("i",{className:"ms-Icon ms-Icon--MapDirections","aria-hidden":"true"}))}function T(){return React.createElement("span",{className:"glyphicon glyphicon-remove","aria-hidden":"true"})}function U(){return React.createElement("span",{className:"glyphicon glyphicon-pencil","aria-hidden":"true"})}function V(){return React.createElement("span",{className:"glyphicon glyphicon-tasks","aria-hidden":"true"})}function W(){return React.createElement("span",{className:"sp-toolbar-icon ms-promotedActionButton-icon"},React.createElement("img",{className:"sp-printer-icon",src:ya}))}function X(){return React.createElement("span",{className:"sp-toolbar-icon ms-promotedActionButton-icon"},React.createElement("img",{className:"sp-document-icon",src:ya}))}function Y(){return React.createElement("span",{className:"sp-toolbar-icon ms-promotedActionButton-icon"},React.createElement("img",{className:"sp-document-word-icon",src:ya}))}function Z(){return React.createElement("span",{className:"sp-toolbar-icon ms-promotedActionButton-icon"},React.createElement("img",{className:"sp-document-pdf-icon",src:ya}))}function $(){return React.createElement("span",{className:"sp-toolbar-icon ms-promotedActionButton-icon"},React.createElement("img",{className:"sp-document-pdf-icon",src:ya}))}function _(a){return React.createElement("div",{className:"action-img ms-core-menu-buttonIcon"},React.createElement("img",{src:a}))}function aa(){return React.createElement("span",{className:"glyphicon glyphicon-triangle-left","aria-hidden":"true"})}function ba(){return React.createElement("span",{className:"glyphicon glyphicon-triangle-right","aria-hidden":"true"})}function ca(){return React.createElement("div",{className:"menu-toolbar-icon"},React.createElement("img",{src:a.getWebcon("paperclip-2.png")}))}function da(){return React.createElement("img",{className:"media-object",src:a.getWebcon("LTDISC_48.png"),alt:".."})}function ea(){return React.createElement("img",{className:"media-object",src:a.getWebcon("info_48x48.png")})}function fa(){return React.createElement("i",{className:"glyphicon glyphicon-plus","aria-hidden":"true"})}function ga(){return React.createElement("i",{className:"glyphicon glyphicon-duplicate","aria-hidden":"true"})}function ha(){return React.createElement("i",{className:"glyphicon glyphicon-import","aria-hidden":"true"})}function ia(){return React.createElement("i",{className:"glyphicon glyphicon-export","aria-hidden":"true"})}function ja(){return React.createElement("i",{className:"glyphicon glyphicon-pencil","aria-hidden":"true"})}function ka(){return React.createElement("span",{className:"glyphicon glyphicon-chevron-down","aria-hidden":"true"})}function la(){return React.createElement("span",{className:"glyphicon glyphicon-envelope"})}function ma(){return React.createElement("span",null)}function na(){return React.createElement("span",{className:"glyphicon glyphicon-pencil","aria-hidden":"true"})}function oa(){return React.createElement("span",{className:"glyphicon glyphicon-plus-sign","aria-hidden":"true"})}function pa(){return React.createElement("span",{className:"glyphicon glyphicon-link","aria-hidden":"true"})}function qa(){return pa()}function ra(){return React.createElement("span",{className:"glyphicon glyphicon-option-vertical","aria-hidden":"true"})}function sa(){return React.createElement("span",{className:"ms-promotedActionButton-icon"},React.createElement("i",{className:"icon ms-Icon ms-Icon--Save","aria-hidden":"true"}))}function ta(){return React.createElement("span",{className:"ms-promotedActionButton-icon"},React.createElement("i",{className:"icon ms-Icon ms-Icon--ErrorBadge","aria-hidden":"true"}))}function ua(){return React.createElement("span",{className:"glyphicon glyphicon-book","aria-hidden":"true"})}function va(){return React.createElement("i",{className:"icon ms-Icon ms-Icon--CircleAddition"})}function wa(){return React.createElement("i",{className:"icon ms-Icon ms-Icon--Paste"})}function xa(){return React.createElement("span",{className:"glyphicon glyphicon-list","aria-hidden":"true"})}var ya=(webcon.views,b.getMobileToolbarLink());return{getOkImage:c,getCurrentImage:d,getArrowImage:e,getHistoryImage:j,getCurrentTaskImage:f,getFinishedTaskImage:g,getNewImage:k,getEditImage:l,getAddImage:m,getCancelEditImage:l,getSaveImage:o,getDeleteImage:p,getReloadImage:r,getAdminImage:s,getAdminCommandsImage:t,getDelegateImage:u,getCalendarImage:v,getMinifiedActionsImage:w,getHoveredMinifiedActionsImage:x,getUserActionsImage:y,getHoveredUserActionsImage:z,getHoveredEditImage:l,getHoveredCancelEditImage:l,getHoveredNewImage:k,getHoveredSaveImage:o,getHoveredDeleteImage:p,getHoveredAdminImage:s,getHoveredDelegateImage:u,getHoveredHistoryImage:j,getActionGroupArrowImage:A,getFlagFlaggedIcon:E,getFlagPostponedIcon:F,getClearFlagIcon:G,getExpiredIcon:H,getExpiredCloseIcon:I,getCloseDialogButtonImage:C,getChoiceTreeIcon:B,getDownloadAttachmentIcon:J,getClearButton:q,getErrorPanelImage:K,getRelatedElementImage:h,getFinishedRelatedElementImage:i,getHoveredReturnImage:n,getReturnImage:n,getDownloadLastVersionImage:L,getHoveredDownloadLastVersionImage:L,getDownloadHistoryVersionImage:M,getHoveredDownloadHistoryVersionImage:M,getPathImage:S,getHoveredPathImage:S,getHoveredPrivilegesImage:N,getPrivilegesImage:N,getRemoveImage:O,getHTMLTemplateIcon:Q,getHoveredHTMLTemplateIcon:Q,getPersonImage:c,getHoveredPersonImage:c,getSearchImage:R,getHoveredSearchImage:R,getEditItemImage:D,getPickerRemoveItemImage:T,getCustomModeIcon:U,getSourceModeIcon:V,getPrinterIcon:W,getHoveredPrinterIcon:W,getDocumentIcon:X,getHoveredDocumentIcon:X,getWordIcon:Y,getHoveredWordIcon:Y,getDefaultActionIcon:$,getPdfIcon:Z,getHoveredPdfIcon:Z,getHoveredPreviousVersionIcon:aa,getPreviousVersionIcon:aa,getHoveredNextVersionIcon:ba,getNextVersionIcon:ba,getCustomIcon:_,getAnalysisImage:ca,getCommentImage:da,getInfoImage:ea,getPlusImage:fa,getCloneImage:ga,getExportImage:ia,getImportImage:ha,getEditAllImage:ja,getArrowDownIcon:ka,getMailImage:la,getDropImage:ma,getEndUserCheckout:na,getAddLocalAttachmentIcon:oa,getAttachExistingLocalAttachmentIcon:pa,getAttachRelativeAttachmentIcon:qa,getMoreOptionsVerticalIcon:ra,getSaveAttachmentEditAttributes:sa,getCancelAttachmentEditAttributes:ta,getUserGuideIcon:ua,getTimeoutImage:P,getAddAttachmentIcon:va,getPasteAttachmentIcon:wa,getListIcon:xa}},Injector.env.global),Injector.instance("InitialRenderService",["logger","$Window","FormInfo","AttributeChangeController","ShouldRenderService","LoadingBlockingPanel","LicenceInfoPanelService"],function(a,b,c,d,e,f,g){function h(a){return document.getElementById(a)}function i(a,b){return _.chain(a.controls).filter(function(a){return a.placeHolder===b}).filter(function(a){return!a.isInGroup}).filter(function(b){var c=a[b.fieldName];return e.checkIfShouldRender(c)}).value()}function j(a,b){return ReactDOM.render(React.createElement(ReactRedux.Provider,{store:b},React.createElement(v.MainPanel,{name:"Header",controller:d,data:a,members:i(a,"Header"),orientation:"Beside"})),h("HeaderPanel"))}function k(a,b){return ReactDOM.render(React.createElement(ReactRedux.Provider,{store:b},React.createElement(v.MainPanel,{name:"LeftColumn",addMetaData:!0,controller:d,data:a,members:i(a,"LeftColumn"),orientation:"Beside"})),h("LeftPanel"))}function l(a,b){return ReactDOM.render(React.createElement(ReactRedux.Provider,{store:b},React.createElement(v.MainPanel,{name:"RightColumn",controller:d,data:a,members:i(a,"RightColumn"),orientation:"Beside"})),h("RightPanel"))}function m(a,b){return ReactDOM.render(React.createElement(ReactRedux.Provider,{store:b},React.createElement(v.MainPanel,{name:"Bottom",controller:d,data:a,members:i(a,"Bottom"),orientation:"Beside"})),h("BottomPanel"))}function n(a,b){if(!c||!c.isCompactModel)return ReactDOM.render(React.createElement(ReactRedux.Provider,{store:b},React.createElement(v.MainPanel,{name:"AttachmentPreview",controller:d,data:a,members:i(a,"AttachmentPreview"),orientation:"Beside"})),h("AttachmentPreview"))}function o(a,b,e){return ReactDOM.render(React.createElement(v.PathPanel,{name:"PathPanel",data:a,controller:d,showCcTasksPanel:b,isPreviewMode:c.isPreviewMode,isEditMode:c.editMode,quickPathMode:e}),h("pathPanel"))}function p(a){return ReactDOM.render(React.createElement(v.RulesTrace,{entries:a}),h("rulesTrace"))}function q(d){if(a.log("initialRender"),!d.subscribe)throw new Error("Incorrect store object passed to `InitialRenderService`. Store object does not contain `subscribe` method.");var e=b.model,i=e.paths,q=e.quickPaths;g.setLicenceInfo(e.licenceInfo),s(),this.header=j(e,d),this.leftColumn=k(e,d),this.rightColumn=l(e,d),this.bottom=m(e,d),this.attachmentPreview=n(e,d),(0,w.viewport)(d,b);var r=i&&c.editMode,t=e.showCcAssignmentControl&&r;i=r?i:q,this.pathPanel=o(i,t,!r),this.toolbar=ReactDOM.render(React.createElement(v.Toolbar,{name:"Toolbar",data:e.toolbar,menuActions:e.menuActions,paths:i}),h("toolbar")),ReactDOM.render(React.createElement(v.ErrorPanel,{name:"ErrorPanel",errors:[]}),h("errorPanelBottom")),b.initModel.isDebug&&(this.rulesTrace=p(b.webcon.rulesTrace)),c.hierarchicalSecurityUsedToEdit&&ReactDOM.render(React.createElement("span",null,window.webconLocale.cHierarchicalSecurityUsedToEdit),h("hierarchicalSecurityInfo")),c.showStatusPanel?this.formStatusPanel=ReactDOM.render(React.createElement(v.FormStatusPanel,{name:"FormStatusPanel",showInformations:c.showStatusPanelInformations,showSteps:c.showStatusPanelSteps,showDetails:c.showStatusPanelDetails,showAssignment:c.showStatusPanelAssignment,showParentElement:c.showStatusPanelParentElement,showSubworkflows:c.showStatusPanelSubworkflows,showProcessSupervisor:c.showStatusPanelProcessSupervisor,showUserGuide:c.showStatusPanelUserGuide,isNew:c.isNew}),h("formStatusPanel")):$(".dynamic-lite").attr("data-status-panel","hidden");var u=h("toolBoxPanel");u&&(this.toolBox=ReactDOM.render(React.createElement(v.ToolBox,{name:"ToolBox",data:e.toolbar,menuActions:e.menuActions,paths:e.paths,pathsVisible:r}),u)),f.render()}function r(){ReactDOM.render(React.createElement(v.ErrorPanel,{name:"ErrorPanel",errors:[]}),h("errorPanel"))}function s(){c.isArchive&&$("body").addClass("archive"),c.showStatusPanel||($("#sideNavBox").addClass("hiddenSideNavBox"),$("#contentBox").addClass("expandedContentBox"))}function t(a,b){a.props=Object.assign({},a.props,b),a.forceUpdate()}function u(){a.log("redrawWholeModel");var d=b.model,e=d.paths,f=e&&c.editMode;t(this.header,{data:d}),t(this.leftColumn,{data:d}),t(this.rightColumn,{data:d}),t(this.bottom,{data:d}),f&&t(this.pathPanel,{data:d.paths}),this.attachmentPreview&&t(this.attachmentPreview,{data:d}),t(this.toolbar,{data:d.toolbar,menuActions:d.menuActions,paths:d.paths}),this.toolBox&&t(this.toolBox,{data:d.toolbar,menuActions:d.menuActions,paths:d.paths,pathsVisible:f}),t(this.formStatusPanel,{})}var v=webcon.views,w=webcon.redux;return{render:q,redraw:u,renderErrorPanel:r,getHeader:j,getLeftColumn:k,getRightColumn:l,getBottom:m,getPathPanel:o,getRulesTrace:p}}),Injector.factory("ControlsFactory",[{depName:"ControlsFactory",depEnv:Injector.env.global},"FormInfo","CustomControlsFactory"],function(a,b,c){function d(b,d,e,f){return c.isCustomField(b)?c.getCustomControl(b,b.editMode,e):a.getReadOnlyControl(b,d,e,f)}function e(b,e,g,j){var k,l=b.fieldName,m=e.data,n=e.config,o=function(){f(l)};if(c.isCustomField(b))return c.getCustomControl(b,b.editMode,g);if("ReadOnlyHtml"===b.editMode||b.editSingleRow)k=d(b,e,g,j.orientation);else switch(e.type){case"Autocomplete":k=React.createElement(h.Autocomplete,{name:l,key:l,disabled:b.isDisabled,popupTitle:b.displayName,value:e.data,controller:g,config:e.config,registerFocus:o,popup:j.popup});break;case"Bool":k=React.createElement(i.Bool,{name:l,key:l,disabled:b.isDisabled,value:m,controller:g});break;case"Choose":k=React.createElement(i.Dropdown,{name:l,key:l,disabled:b.isDisabled,value:m,controller:g,registerFocus:o});break;case"FloatingPoint":k=React.createElement(i.FloatingPoint,{name:l,key:l,disabled:b.isDisabled,value:e,controller:g,config:n,registerFocus:o});break;case"SurveyRating":k=React.createElement(i.SurveyRating,{name:l,key:l,disabled:b.isDisabled,value:m,controller:g,config:n,description:b.description});break;case"MultiRowText":k=n.richEditMode?React.createElement(i.RichText,{name:l,key:l,disabled:b.isDisabled,value:e.data,controller:g,config:e.config,registerFocus:o}):React.createElement(h.MultiRow,{name:l,key:l,disabled:b.isDisabled,value:e.data,controller:g,config:e.config,registerFocus:o})}return k||a.getControl(b,e,g,j)}function f(a){b.isOcrVerificationView&&Injector.resolve(["FocusRegistrationService"],function(b){b.registerFormFieldFocus(a)})}function g(b){var c;switch(b.type){case"Choose":c=React.createElement(i.SimpleDropdown,{value:b.data,onChange:b.onChange})}return c||a.getSimpleControl(b)}var h=webcon.views,i=webcon.views.lite;return{getControl:e,getReadOnlyControl:d,getSimpleControl:g}},Injector.env.lite),Injector.factory("IconRepository",[{depName:"IconRepository",depEnv:Injector.env.global},"$Window","ThemeLinkFactory","ImagesUrlProvider"],function(a,b,c,d){function e(){return React.createElement("i",{className:"icon ms-Icon ms-Icon--Accept","aria-hidden":"true"})}function f(){return React.createElement("i",{className:"icon ms-Icon ms-Icon--Forward","aria-hidden":"true"})}function g(){return React.createElement("i",{className:"icon ms-Icon ms-Icon--RadioBullet","aria-hidden":"true"})}function h(){return React.createElement("span",{className:"sp-assignment-icon"},React.createElement("i",{className:"icon ms-Icon ms-Icon--FollowUser","aria-hidden":"true"}))}function i(){return React.createElement("span",{className:"sp-assignment-icon"},React.createElement("i",{className:"icon ms-Icon ms-Icon--Play","aria-hidden":"true"}))}function j(){return React.createElement("span",{className:"sp-assignment-icon"},React.createElement("i",{className:"icon ms-Icon ms-Icon--Accept","aria-hidden":"true"}))}function k(){return React.createElement("i",{className:"icon ms-Icon ms-Icon--TemporaryUser","aria-hidden":"true"})}function l(){return React.createElement("span",{className:"sp-assignment-icon"},React.createElement("i",{className:"icon ms-Icon ms-Icon--UserFollowed","aria-hidden":"true"}))}function m(){return React.createElement("span",{className:"ms-promotedActionButton-icon"},React.createElement("i",{className:"icon ms-Icon ms-Icon--Clock","aria-hidden":"true"}))}function n(){return m()}function o(){return React.createElement("span",{className:"ms-promotedActionButton-icon"},React.createElement("i",{className:"icon ms-Icon ms-Icon--Add","aria-hidden":"true"}))}function p(){return o()}function q(){return React.createElement("span",{className:"ms-promotedActionButton-icon"},React.createElement("i",{className:"icon ms-Icon ms-Icon--WindowEdit","aria-hidden":"true"}))}function r(){return React.createElement("span",{className:"ms-promotedActionButton-icon"},React.createElement("i",{className:"icon ms-Icon ms-Icon--Add","aria-hidden":"true"}))}function s(){return q()}function t(){return React.createElement("span",{className:"ms-promotedActionButton-icon"},React.createElement("i",{className:"icon ms-Icon ms-Icon--Save","aria-hidden":"true"}))}function u(){return t()}function v(){return React.createElement("span",{className:"ms-promotedActionButton-icon"},React.createElement("i",{className:"icon ms-Icon ms-Icon--Delete","aria-hidden":"true"}))}function w(){return React.createElement("i",{className:"ms-Icon ms-Icon--Clear","aria-hidden":"true"})}function x(){return v()}function y(){return React.createElement("span",{className:"ms-promotedActionButton-icon"},React.createElement("i",{className:"icon ms-Icon ms-Icon--Refresh","aria-hidden":"true"}))}function z(){return React.createElement("span",{className:"ms-promotedActionButton-icon"},React.createElement("i",{className:"icon ms-Icon ms-Icon--AdminALogo32","aria-hidden":"true"}))}function A(){return z()}function B(){return React.createElement("span",{className:"ms-promotedActionButton-icon"},React.createElement("i",{className:"icon ms-Icon ms-Icon--Settings","aria-hidden":"true"}))}function C(){return React.createElement("span",{className:"ms-promotedActionButton-icon"},React.createElement("i",{className:"icon ms-Icon ms-Icon--SetAction","aria-hidden":"true"}))}function D(){return C()}function E(){return React.createElement("span",{className:"ms-promotedActionButton-icon"},React.createElement("i",{className:"icon ms-Icon ms-Icon--TriggerUser","aria-hidden":"true"}))}function F(){return E()}function G(){return React.createElement("span",{className:"ms-promotedActionButton-icon"},React.createElement("i",{className:"icon ms-Icon ms-Icon--FollowUser","aria-hidden":"true"}))}function H(){return G()}function I(){return React.createElement("span",{className:"ms-promotedActionButton-icon"},React.createElement("i",{className:"icon ms-Icon ms-Icon--ErrorBadge","aria-hidden":"true"}))}function J(){return I()}function K(){return React.createElement("span",{className:"ms-promotedActionButton-icon"},React.createElement("i",{className:"icon ms-Icon ms-Icon--Reply","aria-hidden":"true"}))}function L(){return K()}function M(){return React.createElement("img",{src:d.get("calendar_25.gif"),border:"0"})}function N(){return React.createElement("span",{className:"ms-promotedActionButton-icon"},React.createElement("i",{className:"icon ms-Icon ms-Icon--ChevronDown dropdown","aria-hidden":"true"}))}function O(){return React.createElement("div",{className:"actions"},React.createElement("div",{className:"close"},React.createElement("div",{className:"cfg-button btn btn-default no-text"},React.createElement("i",{className:"icon ms-Icon ms-Icon--ChromeClose","aria-hidden":"true"}))))}function P(){return React.createElement("img",{className:"",src:d.getWebcon("edititem.png")})}function Q(){return React.createElement("img",{className:"taskPanelIcon ms-core-menu-icon",src:d.getWebcon("Tasks/WithFlag16x16.png")})}function R(){return React.createElement("img",{className:"taskPanelIcon ms-core-menu-icon",src:d.getWebcon("Tasks/Postpone16x16.png")})}function S(){return React.createElement("img",{className:"taskPanelIcon ms-core-menu-icon clearFlagIcon",src:d.getWebcon("Tasks/WithFlagGray16x16.png")})}function T(){return React.createElement("div",{className:"taskPanelButton"},React.createElement("img",{className:"taskPanelIcon wfDynamicIconExpired",src:d.getWebcon("Tasks/Expired16x16.png")}))}function U(){return React.createElement("div",{className:"taskPanelButton"},React.createElement("img",{className:"taskPanelIcon wfDynamicIconExpired",src:d.getWebcon("Tasks/NearlyExpired.png")}))}function V(){return React.createElement("div",{className:"ms-core-menu-icon buttonIcon"},React.createElement("img",{src:d.getWebcon("downloadFile")}))}function W(){return React.createElement("i",{className:"icon ms-Icon ms-Icon--Filter","aria-hidden":"true"})}function X(){return React.createElement("i",{className:"icon ms-Icon ms-Icon--ErrorBadge","aria-hidden":"true"})}function Y(){return React.createElement("span",{className:"sp-toolbar-icon ms-promotedActionButton-icon"},React.createElement("img",{className:"sp-downloadLastVersion-icon",src:Xa}))}function Z(){return React.createElement("span",{className:"sp-toolbar-icon ms-promotedActionButton-icon"},React.createElement("img",{className:"sp-downloadLastVersion-icon",src:Ya}))}function $(){return React.createElement("span",{className:"sp-toolbar-icon ms-promotedActionButton-icon"},React.createElement("img",{className:"sp-downloadHistoryVersion-icon",src:Xa}))}function _(){return React.createElement("span",{className:"sp-toolbar-icon ms-promotedActionButton-icon"},React.createElement("img",{className:"sp-downloadHistoryVersion-icon",src:Ya}))}function aa(){return React.createElement("span",{className:"ms-promotedActionButton-icon "},React.createElement("i",{className:"icon ms-Icon ms-Icon--ProtectionCenterLogo32 dropdown","aria-hidden":"true"}))}function ba(){return React.createElement("span",{className:"ms-promotedActionButton-icon "},React.createElement("i",{className:"icon ms-Icon ms-Icon--PrintfaxPrinterFile dropdown","aria-hidden":"true"}))}function ca(){return React.createElement("span",{className:"ms-promotedActionButton-icon "},React.createElement("i",{className:"icon ms-Icon ms-Icon--UserFollowed dropdown","aria-hidden":"true"}))}function da(){return React.createElement("span",{className:"ms-promotedActionButton-icon"},React.createElement("i",{className:"icon ms-Icon ms-Icon--Timer dropdown","aria-hidden":"true"}))}function ea(){return React.createElement("i",{className:"ms-Icon ms-Icon--Search"})}function fa(){return React.createElement("span",{className:"ms-promotedActionButton-icon"},React.createElement("i",{className:"ms-Icon ms-Icon--MapDirections"}))}function ga(){return React.createElement("span",{className:"ms-promotedActionButton-icon"},React.createElement("i",{className:"ms-Icon ms-Icon--MapDirections"}))}function ha(){return React.createElement("i",{className:"ms-Icon ms-Icon--ChromeClose"})}function ia(){return React.createElement("i",{className:"ms-Icon ms-Icon--Edit","aria-hidden":"true"})}function ja(){return React.createElement("span",{className:"glyphicon glyphicon-tasks","aria-hidden":"true"})}function ka(){return React.createElement("span",{className:"ms-promotedActionButton-icon"},React.createElement("i",{className:"icon ms-Icon ms-Icon--Print","aria-hidden":"true"}))}function la(){return ka()}function ma(){return React.createElement("span",{className:"ms-promotedActionButton-icon"},React.createElement("i",{className:"icon ms-Icon ms-Icon--TextDocument","aria-hidden":"true"}))}function na(){return ma()}function oa(){return React.createElement("span",{className:"ms-promotedActionButton-icon"},React.createElement("i",{className:"icon ms-Icon ms-Icon--WordDocument","aria-hidden":"true"}))}function pa(){return oa()}function qa(){return React.createElement("span",{className:"ms-promotedActionButton-icon"},React.createElement("i",{className:"icon ms-Icon ms-Icon--PDF","aria-hidden":"true"}))}function ra(){return qa()}function sa(){return React.createElement("span",{className:"ms-promotedActionButton-icon"},React.createElement("i",{className:"icon ms-Icon ms-Icon--TriggerUser","aria-hidden":"true"}))}function ta(b){return a.getCustomIcon(b)}function ua(){return va()}function va(){return React.createElement("span",{className:"ms-promotedActionButton-icon"},React.createElement("i",{className:"icon ms-Icon ms-Icon--PageLeft","aria-hidden":"true"}))}function wa(){return xa()}function xa(){return React.createElement("span",{className:"ms-promotedActionButton-icon"},React.createElement("i",{className:"icon ms-Icon ms-Icon--PageRight","aria-hidden":"true"}))}function ya(){return React.createElement("span",{className:"ms-promotedActionButton-icon"},React.createElement("i",{className:"icon ms-Icon ms-Icon--Lightbulb","aria-hidden":"true"}))}function za(){return React.createElement("div",{className:"panel-image"},React.createElement("i",{className:"ms-Icon ms-Icon--Comment"}))}function Aa(){return React.createElement("div",{className:"panel-image"},React.createElement("i",{className:"ms-Icon ms-Icon--Info"}))}function Ba(){return React.createElement("i",{className:"ms-Icon ms-Icon--Add","aria-hidden":"true"})}function Ca(){return React.createElement("i",{className:"ms-Icon ms-Icon--Delete","aria-hidden":"true"})}function Da(){return React.createElement("i",{className:"ms-Icon ms-Icon--Personalize","aria-hidden":"true"})}function Ea(){return React.createElement("i",{className:"ms-Icon ms-Icon--PageCheckedin","aria-hidden":"true"})}function Fa(){return React.createElement("i",{className:"ms-Icon ms-Icon--PageCheckedOut","aria-hidden":"true"})}function Ga(){return React.createElement("i",{className:"ms-Icon ms-Icon--Edit","aria-hidden":"true"})}function Ha(){return React.createElement("i",{className:"ms-Icon ms-Icon--ChevronDown","aria-hidden":"true"})}function Ia(){return React.createElement("i",{className:"ms-Icon ms-Icon--Mail","aria-hidden":"true"})}function Ja(){return React.createElement("i",{className:"ms-Icon ms-Icon--TriangleSolidDown12","aria-hidden":"true"})}function Ka(){return React.createElement("span",{className:"ms-Icon ms-Icon--PencilReply","aria-hidden":"true"})}function La(){return React.createElement("i",{className:"ms-Icon ms-Icon--CircleAddition"})}function Ma(){return React.createElement("i",{className:"ms-Icon ms-Icon--Link"})}function Na(){return Ma()}function Oa(){return React.createElement("i",{className:"ms-Icon ms-Icon--MoreVertical"})}function Pa(){return t()}function Qa(){return I()}function Ra(){return React.createElement("span",{className:"user-guide-icon"},React.createElement("i",{className:"ms-Icon ms-Icon--Documentation","aria-hidden":"true"}))}function Sa(){return React.createElement("i",{className:"icon ms-Icon ms-Icon--CircleAddition"})}function Ta(){return React.createElement("i",{className:"icon ms-Icon ms-Icon--Paste"})}function Ua(){return React.createElement("span",{className:"ms-promotedActionButton-icon"},React.createElement("i",{className:"icon ms-Icon ms-Icon--CheckList"}))}function Va(){return React.createElement("span",{className:"ms-promotedActionButton-icon"},React.createElement("i",{className:"icon ms-Icon ms-Icon--TaskManager"}))}function Wa(){return React.createElement("i",{className:"icon ms-Icon ms-Icon--List"})}var Xa=(webcon.views.lite,c.getToolbarLink()),Ya=c.getHoverToolbarLink();return{getOkImage:e,getCurrentImage:f,getArrowImage:g,getHistoryImage:m,getHoveredHistoryImage:n,getCurrentTaskImage:h,getFinishedTaskImage:l,getNewImage:o,getEditImage:q,getAddImage:r,getSaveImage:t,getDeleteImage:v,getReloadImage:y,getAdminImage:z,getAdminCommandsImage:B,getDelegateImage:G,getCalendarImage:M,getMinifiedActionsImage:C,getHoveredMinifiedActionsImage:D,getUserActionsImage:E,getHoveredUserActionsImage:F,getHoveredEditImage:s,getHoveredNewImage:p,getHoveredSaveImage:u,getHoveredDeleteImage:x,getHoveredAdminImage:A,getHoveredDelegateImage:H,getCancelEditImage:I,getHoveredCancelEditImage:J,getActionGroupArrowImage:N,getCloseDialogButtonImage:O,getTaskPanelTaskImage:k,getFlagFlaggedIcon:Q,getFlagPostponedIcon:R,getClearFlagIcon:S,getExpiredIcon:T,getExpiredCloseIcon:U,getChoiceTreeIcon:W,getDownloadAttachmentIcon:V,getClearButton:w,getErrorPanelImage:X,getRelatedElementImage:i,getFinishedRelatedElementImage:j,getHoveredReturnImage:L,getReturnImage:K,getDownloadLastVersionImage:Y,getHoveredDownloadLastVersionImage:Z,getDownloadHistoryVersionImage:$,getHoveredDownloadHistoryVersionImage:_,getPathImage:fa,getHoveredPathImage:ga,getHoveredPrivilegesImage:aa,getPrivilegesImage:aa,getRemoveImage:Ca,getHTMLTemplateIcon:ba,getHoveredHTMLTemplateIcon:ba,getPersonImage:ca,getHoveredPersonImage:ca,getSearchImage:ea,getHoveredSearchImage:ea,getEditItemImage:P,getPickerRemoveItemImage:ha,getCustomModeIcon:ia,getSourceModeIcon:ja,getPrinterIcon:ka,getHoveredPrinterIcon:la,getDocumentIcon:ma,getHoveredDocumentIcon:na,getDefaultActionIcon:sa,getPdfIcon:qa,getHoveredPdfIcon:ra,getWordIcon:oa,getHoveredWordIcon:pa,getCustomIcon:ta,getHoveredPreviousVersionIcon:ua,getPreviousVersionIcon:va,getHoveredNextVersionIcon:wa,getNextVersionIcon:xa,getAnalysisImage:ya,getCommentImage:za,getInfoImage:Aa,getPlusImage:Ba,getCloneImage:Da,getExportImage:Fa,getImportImage:Ea,getEditAllImage:Ga,getArrowDownIcon:Ha,getMailImage:Ia,getDropImage:Ja,getEndUserCheckout:Ka,getAddLocalAttachmentIcon:La,getAttachExistingLocalAttachmentIcon:Ma,getAttachRelativeAttachmentIcon:Na,getMoreOptionsVerticalIcon:Oa,getSaveAttachmentEditAttributes:Pa,getCancelAttachmentEditAttributes:Qa,getUserGuideIcon:Ra,getTimeoutImage:da,getAddAttachmentIcon:Sa,getPasteAttachmentIcon:Ta,getOcrModeIcon:Ua,getStandardModeIcon:Va,getListIcon:Wa}},Injector.env.lite),Injector.factory("LoadingBlockingPanel",[],function(){function a(){}return{render:a}},Injector.env.lite),Injector.factory("ThemeLinkFactory",["$Window","ImagesUrlProvider"],function(a,b){function c(){return l+"toolbarcmd.png"}function d(){return m+"toolbarcmd_h.png"}function e(){return l+"toolbarcmd_mobile.png"}function f(){return l+"statustable.png"}function g(){return b.get("spcommon.png?rev=23")}
var h=["Palette001","Palette013","Palette015"],i=["Palette001"],j=a.model&&a.model.themeKey&&-1===i.indexOf(a.model.themeKey)?a.model.themeKey:"defaultTheme",k=a.model&&a.model.themeKey&&-1===h.indexOf(a.model.themeKey)?a.model.themeKey:"defaultTheme",l=b.getTheme(j)+"/",m=b.getTheme(k)+"/";return{getToolbarLink:c,getHoverToolbarLink:d,getStatusTableLink:f,getSpCommonLink:g,getMobileToolbarLink:e}},Injector.env.global),Injector.factory("WFConfirmBodyFactory",["BarcodeService","IconRepository"],function(a,b){function c(){return b.getTaskPanelTaskImage()}function d(b){return React.createElement("div",{className:"barcode-control"},React.createElement("img",{src:a.createBarcodeUrl(b)}),React.createElement("br",null),React.createElement("span",{style:{"font-size":"xx-small"}},a.createBarcodeLabel(b)))}function e(a,b){var e=c(),f=b?d(b):"";return React.createElement("div",{className:"wfConfirmMediaContainer"},React.createElement("div",{className:"media"},React.createElement("div",{className:"media-left media-middle "},React.createElement("div",{className:"ms-storefront-appiconspan media-img-background"},e)),React.createElement("div",{className:"media-body"},React.createElement("div",{className:"signature"},a),f)))}function f(){return React.createElement("input",{type:"button",value:"OK",className:"modal-footer-button"})}return{getWFConfirmBody:e,getWFConfirmFooter:f}},Injector.env.lite),Injector.factory("LoadingBlockingPanel",[],function(){function a(){ReactDOM.render(React.createElement(b.BlockingPanel,{name:"BlockingPanel",isVisible:!1}),document.getElementById("waitingPanel"))}var b=webcon.views;return{render:a}}),window.webcon=function(a){var b=a.views=a.views||{},c=a.mixins;return b.MainPanel=createReactClass({displayName:"MainPanel",propTypes:{addMetaData:PropTypes.bool,controller:PropTypes.object.isRequired,data:PropTypes.object.isRequired,members:PropTypes.arrayOf(PropTypes.object),orientation:PropTypes.oneOf(["Beside","Upside"]).isRequired,popup:PropTypes.bool},mixins:[c.RegistrableControl],addMetaDataControl:function(a){if(this.props.addMetaData){var b=this;Injector.resolve(["logger","PanelDecorator","FormInfo","MetaDataControlsFactory"],function(c,d,e,f){if(e.subDocTypesInfo.showSubDocTypeInfo){var g=f.getSubDocTypesControl();a.push(d.decorateMetaControl(g,"subDocTypes",webconLocale.cSubDocType,e.subDocTypesInfo.isSelectionRequired,b.props.orientation))}c.debug("metaControlsAddedToRender")})}},render:function(){var b=[];this.addMetaDataControl(b);var c=this;return Injector.resolve([{depName:"ControlsFactory",depEnv:a.env},"logger","PanelDecorator"],function(a,d,e){d.debug("controlsFilteredForPlaceholders"),c.props.members.map(function(d){var f=c.props.data[d.fieldName],g={orientation:c.props.orientation,popup:c.props.popup};b.push(e.decorate(a.getControl(d,f,c.props.controller,g),d,c.props.orientation,f))}),d.debug("controlsAddedToRender")},this),React.createElement("div",{className:"main-panel"},b)}}),a}(window.webcon||{}),Injector.instance("MassActionRenderService",["logger","$Window","FormInfo","LoadingBlockingPanel","AttributeChangeController","ShouldRenderService"],function(a,b,c,d,e,f){function g(a){return _.chain(a.controls).filter(function(a){return!a.isInGroup}).filter(function(b){var c=a[b.fieldName];return f.checkIfShouldRender(c)})}function h(a){return document.getElementById(a)}function i(a,b){return ReactDOM.render(React.createElement(ReactRedux.Provider,{store:b},React.createElement(m.MainPanel,{name:"MainPanel",controller:e,data:a,members:g(a),orientation:"Beside"})),h("MainPanel"))}function j(){ReactDOM.render(React.createElement(m.ErrorPanel,{name:"ErrorPanel",errors:[]}),h("errorPanel"))}function k(){var a=b.model;this.mainPanel&&this.mainPanel.setProps({data:a})}function l(a){var c=b.model;this.mainPanel=i(c,a),ReactDOM.render(React.createElement(m.ErrorPanel,{name:"ErrorPanel",errors:[]}),h("errorPanelBottom")),d.render()}var m=webcon.views;return{render:l,redraw:k,renderErrorPanel:j,getMainColumn:i}}),Injector.factory("ControlsFactory",[{depName:"ControlsFactory",depEnv:Injector.env.lite}],function(a){return a},Injector.env.massAction),Injector.factory("IconRepository",[{depName:"IconRepository",depEnv:Injector.env.lite}],function(a){return a},Injector.env.massAction),Injector.factory("LoadingBlockingPanel",[],function(){function a(){}return{render:a}},Injector.env.massAction),Injector.factory("MetaDataControlsFactory",["logger","AttributeChangeController","ControlUpdateController","FormInfo","RedrawService","RedirectService"],function(a,b,c,d,e,f){function g(){return d.companiesInfo.allowCompanyChange?j(d.companiesInfo.availableCompanies,d.companiesInfo.currentCompany,f.redirectToCompany,webconLocale.cCompanyChangeTitle,webconLocale.cCompanyChangeWarning):l(d.companiesInfo.currentCompany?d.companiesInfo.currentCompany.name:"")}function h(a,b){return d.companiesInfo.allowCompanyChange?j(a,b,f.redirectToCompany,webconLocale.cCompanyChangeTitle,webconLocale.cCompanyChangeWarning):l(d.companiesInfo.currentCompany?d.companiesInfo.currentCompany.name:"")}function i(){return d.subDocTypesInfo.allowSubDocTypeChange?k(d.subDocTypesInfo.availableSubDocTypes,d.subDocTypesInfo.currentSubDocType,function(a){var f=_.find(d.subDocTypesInfo.availableSubDocTypes,function(b){return b.id===a});f&&(d.subDocTypesInfo.currentSubDocType=f),c.resetDefaultsOnPostback(b.change),e.redraw("BasicFormInfoPanel")}):l(d.subDocTypesInfo.currentSubDocType?d.subDocTypesInfo.currentSubDocType.name:"")}function j(a,b,c,d,e){return React.createElement(m.MetaDataDropDown,{availableValues:a,currentValue:b,disabled:!1,callback:c,confirmationTitle:d,confirmationMessage:e})}function k(a,b,c){return React.createElement(m.SubDocTypesDropDown,{availableValues:a,currentValue:b,disabled:!1,callback:c})}function l(a){return React.createElement("span",null,a)}var m=webcon.views;return{getCompaniesControl:g,getSubDocTypesControl:i,getCompaniesSysControl:h}}),Injector.factory("ControlsFactory",[{depName:"ControlsFactory",depEnv:Injector.env.lite}],function(a){function b(b,c,d,e){return"SystemAttachments"==c.type?React.createElement("div",null):a.getControl(b,c,d,e)}return{getControl:b,getReadOnlyControl:a.getReadOnlyControl,getSimpleControl:a.getSimpleControl}},Injector.env.outlook),Injector.factory("IconRepository",[{depName:"IconRepository",depEnv:Injector.env.lite}],function(a){return a},Injector.env.outlook);var _extends=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a};Injector.instance("InitialRenderService",["logger","$Window","FormInfo","LoadingBlockingPanel",{depName:"InitialRenderService",depEnv:Injector.env.global}],function(a,b,c,d,e){function f(a){return document.getElementById(a)}function g(g){a.log("initialRenderOutlook");var h=b.model,i=h.paths,j=h.quickPaths,k=webcon.views;this.header=e.getHeader(h,g),this.leftColumn=e.getLeftColumn(h,g),this.rightColumn=e.getRightColumn(h,g),this.bottom=e.getBottom(h,g);var l=i&&c.editMode,m=h.showCcAssignmentControl&&l;i=l?i:j,this.pathPanel=e.getPathPanel(i,m,!l),this.toolbar=ReactDOM.render(React.createElement(k.Toolbar,{name:"Toolbar",data:h.toolbar,menuActions:h.menuActions,paths:i}),f("toolbar")),ReactDOM.render(React.createElement(k.ErrorPanel,{name:"ErrorPanel",errors:[]}),f("errorPanelBottom")),c.showStatusPanel?this.formStatusPanel=ReactDOM.render(React.createElement(k.FormStatusPanel,{name:"FormStatusPanel",showInformations:c.showStatusPanelInformations,showSteps:c.showStatusPanelSteps,showDetails:c.showStatusPanelDetails,showAssignment:c.showStatusPanelAssignment,showParentElement:c.showStatusPanelParentElement,showSubworkflows:c.showStatusPanelSubworkflows,showProcessSupervisor:c.showStatusPanelProcessSupervisor,showUserGuide:c.showStatusPanelUserGuide,isNew:c.isNew}),f("formStatusPanel")):$(".dynamic-lite").attr("data-status-panel","hidden"),d.render()}function h(a,b){a.props=_extends({},a.props,b),a.forceUpdate()}function i(){a.log("redrawWholeModel");var d=b.model,e=d.paths,f=d.quickPaths,g=e&&c.editMode;if(h(this.header,{data:d}),h(this.leftColumn,{data:d}),h(this.rightColumn,{data:d}),h(this.bottom,{data:d}),this.pathPanel){var i=[];g?i=e:f&&(i=f),h(this.pathPanel,{data:i})}h(this.toolbar,{data:d.toolbar,menuActions:d.menuActions,paths:d.paths})}return{render:g,redraw:i,renderErrorPanel:e.renderErrorPanel,getHeader:e.getHeader,getLeftColumn:e.getLeftColumn,getRightColumn:e.getRightColumn,getBottom:e.getBottom,getPathPanel:e.getPathPanel}},Injector.env.outlook),Injector.factory("PanelDecorator",["logger","FormInfo","$Window"],function(a,b,c){function d(c,d,e,f){var g="",h=d&&d.required&&b.editMode,i=d&&d.editMode&&("Edit"===d.editMode||"ReadOnly"===d.editMode),k=!0,l=d.displayName,m=!1,n="",o=!1,p=!1,q=f.style.control;switch(f.type){case"AttributeGroup":e="Upside",k=!1;break;case"GoogleMap":case"Chart":e="Upside",k=f.config.showAttributeName,n=d.description,g="wfContentRow-chart";break;case"SqlGrid":e="Upside",k=f.config.showAttributeName,m=f.config.showAttributeDescription,n=d.description,g="wfContentRow-sql-grid";break;case"SqlRow":case"SystemAttachments":case"SystemAttachmentPreview":case"SystemComments":e="Upside",k=!1;break;case"SystemTaskDetails":g="wfContentRowWithTask",e="Upside",k=!1;break;case"SurveyRating":case"SurveyChoose":f&&f.config&&(l=f.config.question,"ReadOnlyHtml"!==d.editMode&&(e="Beside"===f.config.titlePlacement?"Beside":"Upside",k="Beside"===f.config.titlePlacement),p=!0);break;case"MultiRowText":f&&f.config&&(e="Upside"===f.config.titlePlacement?"Upside":"Beside",n=d.description,"ReadOnlyHtml"!==d.editMode&&(o="Beside"===f.config.titlePlacement));break;case"Subelements":e="Upside",k=f.config.showTitle,m=f.config.showDescription,n=d.description;break;case"TabPanel":e="Upside",f.config.showDescription&&(n=d.description),k=f.config.showTitle;break;case"OcrVerification":e="Upside";break;case"FloatingPointReadOnly":case"IntegerReadOnly":q.textAlign=q.textAlign?q.textAlign:"right";break;case"ExternalCustomControl":"None"===f.config.namePlacement?(e="Upside",k=!1):e=f.config.namePlacement}var r,s=f.saveRestrictions,t=f.validation,u=!s||s.isSavable,v=!t||t.isValid,w=v&&u,x={isValid:w,messages:_.union(s.messages,t.messages)};if(b.isOcrVerificationView&&"Beside"===e)r=c;else if("Beside"===e)r=React.createElement(j.BesidePanel,{displayName:l,key:d.fieldName+"_Panel",isEditable:i,isRequired:h,style:f.style.label,inlineStyle:d.labelStyle,description:d.description,enableHtmlTags:p},React.createElement(j.StylePanel,{style:q,inlineStyle:d.controlStyle},c,React.createElement(j.AttributeErrorPanel,{data:x,key:d.fieldName+"_ErrorPanel"})));else if("Upside"===e){var y="SqlRow"===f.type?null:q;r=React.createElement(j.UpsidePanel,{shouldDisplayName:k,displayName:l,shouldNotDisplayNameInBold:o,key:d.fieldName+"_Panel",isEditable:i,isRequired:h,notColumn:"SqlRow"===f.type,additionalClass:g,shouldDisplayDescriptionInControl:m,description:n,style:f.style.label,inlineStyle:d.labelStyle},React.createElement(j.StylePanel,{style:y,inlineStyle:d.controlStyle},c,React.createElement(j.AttributeErrorPanel,{data:x,key:d.fieldName+"_ErrorPanel"})))}else a.error("UnkownPanelOrientation: "+e);return{control:r,orientation:e}}function e(a,c,d){var e=c.isVisible&&(b.isAdminMode||!c.isTechnical),f=c.fieldName+"_VisibilityPanel",g=/^att/i.test(c.fieldName)?c.fieldName.split("_")[0]:c.fieldName;return"SystemAttachmentPreview"===d&&(e=!0),React.createElement("div",{key:f,id:g},React.createElement(j.VisibilityPanel,{isVisible:e},a))}function f(a,d,e,f){if(!b.isOcrVerificationView||"Upside"===f)return a;var g,h,i=e.ocrData,k=b.editMode,l=d&&d.editMode&&("Edit"===d.editMode||"ReadOnly"===d.editMode),m=c.model.ocrTrainButtonsHidden,n=i&&(i.wasRecognized||i.valueChanged)?{left:i.blocks[0].left,top:i.blocks[0].top,right:i.blocks[0].right,bottom:i.blocks[0].bottom,pageIndex:i.pageIndex,attId:i.attId,wordsIds:i.wordsIds?i.wordsIds:[]}:void 0;Injector.resolve(["OcrVerificationViewService"],function(a){g=function(b){a.setActiveBlock(b)},h=function(b){a.toggleMarkForRelearning(b.target.checked,d.fieldName)}});var o=React.createElement(j.StylePanel,{style:e.style.label,inlineStyle:d.labelStyle},d.displayName);return React.createElement(j.JsApp.OcrFormFieldWrapper,{label:o,checkboxHidden:k&&(!l||!i||m),checkboxCollapsed:!k,checkboxDisabled:!i||!i.valueChanged&&!i.markedForRelearning,checkboxChange:h,block:n,previewClick:g,dbId:b.dbId,markedForRelearning:i&&i.markedForRelearning,labelStyle:e.style.label,labelInlineStyle:d.labelStyle,wfdId:b.wfdId,sessionId:c.model.sessionId},React.createElement(j.StylePanel,{style:e.style.control,inlineStyle:d.controlStyle},a))}function g(a,b,c){var d=c.saveRestrictions,e=c.validation,f=!d||d.isSavable,g=!e||e.isValid,h=g&&f;return React.createElement(j.ValidationErrorPanel,{isValid:h,key:b.fieldName+"_ValidationPanel"},a)}function h(b,c,d,e,f){return"Beside"===f?React.createElement(j.BesidePanel,{displayName:d,key:c+"_Panel",isRequired:e,enableHtmlTags:!1,style:{}},React.createElement("div",{className:"meta-control-wrapper"},b)):"Upside"===f?React.createElement(j.UpsidePanel,{shouldDisplayName:!0,displayName:d,key:c+"_Panel",isRequired:e,style:{}},React.createElement("div",{className:"meta-control-wrapper"},b)):void a.error("UnkownPanelOrientation: "+f)}function i(a,b,c,h){var i=d(a,b,c,h);return e(f(g(i.control,b,h),b,h,i.orientation),b,h.type)}var j=webcon.views;return{decorate:i,decorateWithVisibilityPanel:e,decorateMetaControl:h}}),window.webcon=function(a){var b=a.views=a.views||{},c=a.mixins;return b.PathPanel=createReactClass({displayName:"PathPanel",propTypes:{controller:PropTypes.object.isRequired,showCcTasksPanel:PropTypes.object.isRequired,quickPathMode:PropTypes.bool},mixins:[c.RegistrableControl],render:function(){var a=this,c=a.props.data.filter(function(a){return a.chooseAssignedPerson}),d=a.props.data.filter(function(a){return!a.chooseAssignedPerson}),e=React.createElement(b.PathsControl,{withPersonPicker:!0,paths:c,quickPathMode:this.props.quickPathMode,isEditMode:this.props.isEditMode,controller:this.props.controller}),f=React.createElement(b.PathsControl,{withPersonPicker:!1,paths:d,quickPathMode:this.props.quickPathMode,isEditMode:this.props.isEditMode,controller:this.props.controller}),g=this.props.showCcTasksPanel&&!this.props.quickPathMode?React.createElement(b.CcTasksControl,{controller:this.props.controller}):"";return React.createElement("div",null,React.createElement("div",null,e,f),g)}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{},c=a.mixins;return b.PathsControl=createReactClass({displayName:"PathsControl",propTypes:{controller:PropTypes.object.isRequired},mixins:[c.RegistrableControl],componentWillMount:function(){Injector.resolve(["$Window","DocumentController","PickerController"],function(a,b,c){this.win=a,this.documentController=b,this.pickerController=c},this)},getButtonStyle:function(a){var b={};return Injector.resolve(["StyleStringHelper"],function(c){b=c.convertStyleStringToReactStyleObject(a)}),b},getGlobalButtonWidthStyle:function(a,b){var c={};return!a.width&&b?c.width=b:a.width&&(c.width=a.width),c},goPath:function(a){this.documentController.goToNextStep(a)},pathClick:function(a){return this.props.quickPathMode?this.documentController.goQuickPath(a):this.props.isPreviewMode?void 0:this.goPath(a)},updatePickerPersonsCallback:function(a){this.win.model.additionalTasks=this.pickerController.getPickerStringValue(a)},render:function(){var a=this,c=a.props.paths;if(null===c||0===c.length||c.every(function(a){return!a.isVisible}))return null;var d=a.props.withPersonPicker&&!this.props.quickPathMode?React.createElement("div",{className:"any-person-picker"},React.createElement("div",{className:"ms-promotedActionButton-text wfPathPanelCaption th-frm-group "},window.webconLocale.cSendToSpecifiedUsers),React.createElement(b.Picker,{type:"people",updatePickerValueCallback:this.updatePickerPersonsCallback,controller:a.props.controller})):React.createElement("div",{className:"ms-promotedActionButton-text wfPathPanelCaption th-frm-group"},window.webconLocale.cNextSteps,":"),e=_.groupBy(c,function(a){return a.lineNumber}),f=Object.keys(e).map(function(c,d){var f=e[c];return React.createElement("div",{key:d,className:"pathPanelRow"},f.map(function(c,d){if(c.isVisible){var e=a.getButtonStyle(c.buttonStyle),f=a.getGlobalButtonWidthStyle(e,c.buttonWidth);return React.createElement("div",{style:f,className:"path-button-container",key:d},React.createElement(b.JsApp.Tooltip,{trigger:"hover",content:c.toolTip,delay:500},React.createElement("input",{type:"button",className:"btn btn-default btn-md pathPanelButton",value:c.title,onClick:a.pathClick.bind(a,c.id),key:c.id,style:e})))}}))});return React.createElement("div",{className:classNames("wfBottomSide Menu",{viewMode:!this.props.isEditMode})},d,React.createElement("div",null,f))}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{};return b.AttachLocalAttachmentsToSubelement=createReactClass({displayName:"AttachLocalAttachmentsToSubelement",propTypes:{name:PropTypes.string.isRequired,attachments:PropTypes.object.isRequired,selectedAttachments:PropTypes.object.isRequired,config:PropTypes.object.isRequired},getInitialState:function(){function a(a){return!!_.find(b.selectedAttachmentIds,function(b){return a.attId===b})}var b=this.props.params;return this.config=b.config,{attachments:_.map(b.attachments,function(b){return{data:b,isSelected:a(b)}})}},componentDidMount:function(){this.refConfirmButton&&this.refConfirmButton.focus()},componentWillMount:function(){Injector.resolve(["ControlsFactory","DataPairHelper"],function(a,b){this.dataPairHelper=b},this)},close:function(){this.props.params.closePopup()},confirm:function(){var a=this,b=_.filter(a.state.attachments,function(a){return a.isSelected}).map(function(a){return a.data.attId});this.props.params.confirmPopup(b)},changeForCheckBox:function(a,b){var c=_.find(b,function(b){return b.data.attId===a.data.attId});c.isSelected=!c.isSelected},changeForRadioButton:function(a,b){_.forEach(b,function(b){b.isSelected=b.data.attId==a.data.attId})},changeSelection:function(a){var b=$.extend(!0,[],this.state.attachments);this.config.allowManyAttachments?this.changeForCheckBox(a,b):this.changeForRadioButton(a,b),this.setState({attachments:b})},render:function(){var a=this;return React.createElement(b.PopupTemplate,{isVisible:this.props.params.isVisible},React.createElement(b.PopupHeaderTemplate,{closeFunction:this.close},React.createElement(b.PopupTitleTemplate,{title:webconLocale.cSelectAttachments})),React.createElement(b.PopupBodyTemplate,null,React.createElement("div",{className:"attach-existing-content"},React.createElement(b.ExistingAttachmentsSimpleTable,{attachments:this.state.attachments,allowManyAttachments:this.config.allowManyAttachments,changeSelection:this.changeSelection.bind(this),dataPairHelper:this.dataPairHelper}))),React.createElement(b.PopupFooterTemplate,null,React.createElement("div",null,React.createElement("button",{type:"button",className:"btn btn-primary accept-button",onClick:this.confirm,ref:function(b){a.refConfirmButton=b}},React.createElement("span",null,webconLocale.cOk)),React.createElement("button",{type:"button",className:"btn btn-default default-button",onClick:this.close},React.createElement("span",null,webconLocale.cCancel)))))}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{};return b.AttachRelativeAttachmentsToSubelement=createReactClass({displayName:"AttachRelativeAttachmentsToSubelement",propTypes:{name:PropTypes.string.isRequired,attachments:PropTypes.object.isRequired,selectedAttachments:PropTypes.object.isRequired,config:PropTypes.object.isRequired},getInitialState:function(){function a(a){return!!_.find(c.selectedAttachmentIds,function(b){return a.attId===b})}var b=this,c=this.props.params;this.config=c.config;var d=function(c){var d=[];c.nodes.forEach(function(b){b.nodes.forEach(function(b){b.nodes.forEach(function(b){d.push({data:b,isSelected:a(b)})})})}),b.setState({treeStructure:c,attachments:d,loading:!1})},e=function(){};return Injector.resolve(["AttachmentController"],function(a){a.fetchRelativeAttachmentsTree(d,e,c.subelementsFieldName,c.columnName,c.rowNumber)}),{attachments:[],loading:!0}},componentDidMount:function(){this.refConfirmButton&&this.refConfirmButton.focus()},componentWillMount:function(){Injector.resolve(["ControlsFactory","DataPairHelper"],function(a){this.dataPairHelper=a},this)},close:function(){this.props.params.closePopup()},confirm:function(){var a=this,b=_.filter(a.state.attachments,function(a){return a.isSelected}).map(function(a){return a.data.attId});this.props.params.confirmPopup(b)},changeForCheckBox:function(a,b){var c=_.find(b,function(b){return b.data.attId===a.data.attId});c.isSelected=!c.isSelected},changeForRadioButton:function(a,b){_.forEach(b,function(b){b.isSelected=b.data.attId==a.data.attId})},changeSelection:function(a){var b=$.extend(!0,[],this.state.attachments);this.config.allowManyAttachments?this.changeForCheckBox(a,b):this.changeForRadioButton(a,b),this.setState({attachments:b})},render:function(){var a=this;return React.createElement(b.PopupTemplate,{isVisible:this.props.params.isVisible},React.createElement(b.PopupHeaderTemplate,{closeFunction:this.close},React.createElement(b.PopupTitleTemplate,{title:webconLocale.cSelectAttachments})),React.createElement(b.PopupBodyTemplate,null,React.createElement("div",{className:"attach-existing-content"},this.state.loading?React.createElement(b.LoadingPanel,{isVisible:!0}):this.state.attachments&&this.state.attachments.length>0?React.createElement(b.ExistingAttachmentsTree,{attachments:this.state.attachments,tree:this.state.treeStructure,allowManyAttachments:this.config.allowManyAttachments,changeSelection:this.changeSelection.bind(this)}):React.createElement("div",{className:"th-main-font"},webconLocale.cRelativeAttachmentsNoResult))),React.createElement(b.PopupFooterTemplate,null,React.createElement("div",null,React.createElement("button",{type:"button",className:"btn btn-primary accept-button",onClick:this.confirm,ref:function(b){a.refConfirmButton=b}},React.createElement("span",null,webconLocale.cOk)),React.createElement("button",{type:"button",className:"btn btn-default default-button",onClick:this.close},React.createElement("span",null,webconLocale.cCancel)))))}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{};return b.ExistingAttachmentsSimpleTableAttachmentRow=createReactClass({displayName:"ExistingAttachmentsSimpleTableAttachmentRow",propTypes:{attachment:PropTypes.object.isRequired,allowManyAttachments:PropTypes.bool.isRequired,changeSelection:PropTypes.func.isRequired,dataPairHelper:PropTypes.func.isRequired},changeSelection:function(){var a=this.props.attachment;(0,this.props.changeSelection)(a)},render:function(){var a=this.props.attachment,b=this.props.allowManyAttachments,c=(this.props.dataPairHelper,b?"checkbox":"radio");return React.createElement("tr",{className:"existing-attachments-simple-table-row",onClick:this.changeSelection},React.createElement("td",{className:"existing-attachments-simple-table-row__checkbox"},React.createElement("input",{type:c,checked:a.isSelected,onChange:this.changeSelection})),React.createElement("td",{className:"existing-attachments-simple-table-row__category"},React.createElement("span",null,a.data.category.translatedName)),React.createElement("td",{className:"existing-attachments-simple-table-row__filename"},React.createElement("span",null,a.data.name)))}}),b.ExistingAttachmentsSimpleTable=createReactClass({displayName:"ExistingAttachmentsSimpleTable",propTypes:{attachments:PropTypes.array.isRequired,allowManyAttachments:PropTypes.bool.isRequired,changeSelection:PropTypes.func.isRequired,dataPairHelper:PropTypes.object.isRequired},render:function(){var a=this;return React.createElement("table",{className:"existing-attachments-simple-table subelem-att-table table"},React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",null),React.createElement("th",null,webconLocale.cCategory),React.createElement("th",null,webconLocale.cName))),React.createElement("tbody",null,a.props.attachments.map(function(c){return React.createElement(b.ExistingAttachmentsSimpleTableAttachmentRow,{key:c.data.name,attachment:c,allowManyAttachments:a.props.allowManyAttachments,changeSelection:a.props.changeSelection,dataPairHelper:a.props.dataPairHelper})})))}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{};return b.ExistingAttachmentsTreeAttachmentRow=createReactClass({displayName:"ExistingAttachmentsTreeAttachmentRow",propTypes:{attachment:PropTypes.object.isRequired,collapsed:PropTypes.bool.isRequired,allowManyAttachments:PropTypes.bool.isRequired,changeSelection:PropTypes.func.isRequired},changeSelection:function(){var a=this.props.attachment;(0,this.props.changeSelection)(a)},render:function(){var a=this.props.attachment,b=this.props.collapsed,c=this.props.allowManyAttachments,d=c?"checkbox":"radio";return React.createElement("div",{key:a.data.name,className:classNames("existing-attachments-tree-row attachment-row",{"row-collapsed":b}),onClick:this.changeSelection},React.createElement("div",{className:"tree-row-control-cell input-cell"},React.createElement("input",{type:d,checked:a.isSelected,onChange:this.changeSelection})),React.createElement("div",{className:"tree-row-value-cell"},a.data.name))}}),b.ExistingAttachmentsTreeAttachmentRow.defaultProps={collapsed:!1},b.ExistingAttachmentsTreeCategoryRow=createReactClass({displayName:"ExistingAttachmentsTreeCategoryRow",propTypes:{categoryNode:PropTypes.object.isRequired,attachments:PropTypes.array.isRequired,collapsed:PropTypes.bool.isRequired,allowManyAttachments:PropTypes.bool.isRequired,changeSelection:PropTypes.func.isRequired},getInitialState:function(){var a=this;return Injector.resolve(["IconRepository"],function(b){a.arrowIcon=b.getArrowDownIcon()}),{collapsed:!1}},toggleSelfCollapsedState:function(){this.setState(function(a){return{collapsed:!a.collapsed}})},render:function(){var a=this.props.categoryNode,c=this.props.collapsed,d=this.state.collapsed,e=this.props.attachments,f=this.props.allowManyAttachments,g=this.props.changeSelection;return React.createElement(React.Fragment,null,React.createElement("div",{key:a.name,className:classNames("existing-attachments-tree-row","category-row",{"row-collapsed":c}),onClick:this.toggleSelfCollapsedState},React.createElement("div",{className:classNames("tree-row-control-cell",{"rotated-icon":d})},this.arrowIcon),React.createElement("div",{className:"tree-row-value-cell"},a.name)),_.sortBy(a.nodes,function(a){return a.name}).map(function(a){var h=_.find(e,function(b){return b.data.attId===a.attId});return React.createElement(b.ExistingAttachmentsTreeAttachmentRow,{key:a.id,attachment:h,collapsed:d||c,allowManyAttachments:f,changeSelection:g})}))}}),b.ExistingAttachmentsTreeCategoryRow.defaultProps={collapsed:!1},b.ExistingAttachmentsTreeElementRow=createReactClass({displayName:"ExistingAttachmentsTreeElementRow",propTypes:{elementNode:PropTypes.object.isRequired,attachments:PropTypes.array.isRequired,allowManyAttachments:PropTypes.bool.isRequired,changeSelection:PropTypes.func.isRequired},getInitialState:function(){var a=this;return Injector.resolve(["IconRepository"],function(b){a.arrowIcon=b.getArrowDownIcon()}),{collapsed:!1}},toggleSelfCollapsedState:function(){this.setState(function(a){return{collapsed:!a.collapsed}})},render:function(){var a=this.props.elementNode,c=this.props.attachments,d=this.state.collapsed,e=this.props.allowManyAttachments,f=this.props.changeSelection;return React.createElement(React.Fragment,null,React.createElement("div",{className:"existing-attachments-tree-row element-row",key:a.name,onClick:this.toggleSelfCollapsedState},React.createElement("div",{className:classNames("tree-row-control-cell",{"rotated-icon":d})},this.arrowIcon),React.createElement("div",{className:"tree-row-value-cell"},a.name)),_.sortBy(a.nodes,function(a){return a.name}).map(function(a){return React.createElement(b.ExistingAttachmentsTreeCategoryRow,{key:a.id,categoryNode:a,attachments:c,collapsed:d,allowManyAttachments:e,changeSelection:f})}))}}),b.ExistingAttachmentsTree=createReactClass({displayName:"ExistingAttachmentsTree",propTypes:{tree:PropTypes.object.isRequired,attachments:PropTypes.array.isRequired,allowManyAttachments:PropTypes.bool.isRequired,changeSelection:PropTypes.func.isRequired},render:function(){var a=this.props.tree,c=this.props.attachments,d=this.props.allowManyAttachments,e=this.props.changeSelection;return React.createElement("div",{className:"existing-attachments-tree"},_.sortBy(a.nodes,function(a){return a.name}).map(function(a){return React.createElement(b.ExistingAttachmentsTreeElementRow,{key:a.id,elementNode:a,attachments:c,allowManyAttachments:d,changeSelection:e})}))}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{};return b.AttachmentsPreviewPopup=createReactClass({displayName:"AttachmentsPreviewPopup",render:function(){var a,c=this.props.params,d={width:"100%",height:"100%"};return Injector.resolve(["AttachmentsUrlBuilder"],function(b){a=b.buildPreviewLink(c.att.attId,c.att.canCreatePreview)},this),React.createElement(b.PopupTemplate,{isVisible:c.isVisible},React.createElement(b.PopupHeaderTemplate,{closeFunction:this.props.params.closePopup},React.createElement(b.PopupTitleTemplate,{title:c.att.name})),React.createElement(b.PopupBodyTemplate,null,React.createElement("div",null,React.createElement("iframe",{src:a,style:d,frameBorder:"0"}))),React.createElement(b.PopupFooterTemplate,null,React.createElement("div",{className:"btn-group"},React.createElement("input",{type:"button",className:"btn modal-footer-button",onClick:this.props.params.closePopup,value:"OK"}))))}}),a}(window.webcon||{}),window.webcon=function(a){function b(a,b){var c=a.subelements.filter(function(a){return a.info.fieldName===b.params.fieldName})[0],d=c?c.control.data.rows.find(function(a){return b.params.internalRowId===a.id}):{};return{displayName:b.displayName,rows:c.control.data.rows,config:c.control.config,params:b.params,row:d}}return(a.redux=a.redux||{}).SubelementsEditView=function(){var c=a.views.SubelementsEditView;return ReactRedux.connect(b)(c)},a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{},c=a.mixins;return b.ErrorPopupAlert=createReactClass({displayName:"ErrorPopupAlert",mixins:[c.ErrorMixinPanel],propTypes:{commands:PropTypes.object.isRequired,params:PropTypes.object.isRequired},command:function(a){var b=!0;if(a&&a.callback&&"function"==typeof a.callback){var c=a.callback();void 0!==c&&null!==c&&"boolean"===$.type(c)&&(b=c)}b&&this.props.params.closePopup()},render:function(){var a=this.props.params,c=this;return React.createElement(b.PopupTemplate,{isVisible:this.props.params.isVisible},React.createElement(b.PopupHeaderTemplate,{closeFunction:a.closePopup},React.createElement(b.PopupTitleTemplate,{title:webconLocale.cErrorOccurred})),React.createElement(b.PopupBodyTemplate,null,React.createElement("div",{className:"col-lg-12 col-sm-12 errors row"},React.createElement("div",null,React.createElement("span",{className:"glyphicon glyphicon-exclamation-sign"})),React.createElement("div",null,React.createElement("ul",null,this.getErrors(a.errors,a.validationErrors))))),React.createElement(b.PopupFooterTemplate,null,React.createElement("div",{className:""},_.map(this.props.commands,function(a){return React.createElement("button",{key:a.displayName.split(" ").join("_"),type:"button",className:"btn btn-default default-button error-popup-alert--default-button",onClick:c.command.bind(c,a)},a.displayName)}))))}}),a}(window.webcon||{}),Injector.factory("ModalOverflowBlockingService",["DeviceInfo"],function(a){function b(){
a.isNativeMobileApp()?$("body").addClass("popup-no-scroll"):jQuery("#centerPanel").bind("touchmove",!1)}function c(){a.isNativeMobileApp()?$("body").removeClass("popup-no-scroll"):jQuery("#centerPanel").unbind("touchmove",!1)}return{disableOverflow:b,enableOverflow:c}}),window.webcon=function(a){var b=a.views=a.views||{};return b.PickerSearch=createReactClass({displayName:"PickerSearch",getInitialState:function(){return{searchCategory:"",searchValue:this.props.searchValue?this.props.searchValue:"",columns:[]}},componentWillReceiveProps:function(a){var b=[{name:webconLocale.cPickerAllColumnSearch,value:"",searchColumn:"true"}].concat(a.columns);if(this.setState({columns:b}),this.props.columns!==a.columns){var c=b.find(function(a){return a.isDefaultSearchColumn});c&&this.setState({searchCategory:c.value})}},componentDidMount:function(){this.search.focus()},changeSearchText:function(a){this.setState({searchValue:a.target.value})},changeSearchColumn:function(a){this.setState({searchCategory:a})},getKeyNum:function(a){return window.event?a.keyCode:a.which?a.which:void 0},keyUp:function(a){13===this.getKeyNum(a)&&this.searchExecute()},keyPress:function(a){if(13===this.getKeyNum(a)){var b;Injector.resolve(["DeviceInfo"],function(a){b=a.isBrowserIE()}),b&&a.preventDefault()}},searchExecute:function(){this.props.searchCallback(this.state.searchCategory,this.state.searchValue)},render:function(){var c="",d=this;if(this.props.showSearchCol){var e=_.filter(this.state.columns,function(a){return a.searchColumn});c=React.createElement("div",{className:"input-group-btn picker-dropdown"},React.createElement(b.JsDropDown,{name:"searchColumnDropDown",selectedValue:this.state.searchCategory,items:e,onChange:this.changeSearchColumn}))}var f="";return Injector.resolve([{depName:"IconRepository",depEnv:a.env}],function(a){f=a.getSearchImage()}),React.createElement("div",{className:"input-group"},c,React.createElement("input",{type:"text",ref:function(a){d.search=a},className:"form-control",placeholder:webconLocale.cPickerSearch,value:this.state.searchValue,onChange:this.changeSearchText,onKeyUp:this.keyUp,onKeyPress:this.keyPress}),React.createElement("span",{className:"input-group-btn pickerSearchSpan"},React.createElement("button",{className:"btn btn-default pickerSearchBtn",type:"button",onClick:this.searchExecute},f)))}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{},c=a.mixins;return b.PickerSelectPopup=createReactClass({displayName:"PickerSelectPopup",mixins:[c.PickerLogic,c.PickerPopupLogic],propTypes:{name:PropTypes.string.isRequired,title:PropTypes.string.isRequired},componentDidMount:function(){this.state.value.rawValue&&this.searchExecute("",this.state.value.rawValue),this.refNewElementLink&&ReactDOM.findDOMNode(this.refNewElementLink).addEventListener("auxclick",this.handleLinkClick)},componentWillUnmount:function(){this.refNewElementLink&&ReactDOM.findDOMNode(this.refNewElementLink).removeEventListener("auxclick",this.handleLinkClick)},addItemCallback:function(a){var b=this.state.selectedItems;this.isItemSelected(b,a)||(b.push(a),this.setState({selectedItems:b}))},removeItem:function(a){var b=this.state.selectedItems;b.splice(a,1),this.setState({selectedItems:b})},getSelectedValues:function(){var b=this,c="";return Injector.resolve([{depName:"IconRepository",depEnv:a.env}],function(a){c=a.getPickerRemoveItemImage()}),React.createElement("div",{className:"picker-tagsinput",ref:function(a){b.refTagsInput=a}},React.createElement("div",null,b.state.selectedItems.map(function(a,d){return React.createElement("span",{className:"tag label label-default",key:a.key||a.elementId},a.name,React.createElement("span",{onClick:b.removeItem.bind(b,d)},c))})))},getButtons:function(){var a=!this.state.selectedItems||this.state.selectedItems.length<=0,b=this;return React.createElement("div",{className:"picker-popup-buttons"},React.createElement("button",{disabled:a,type:"button",className:"btn btn-primary accept-button",onClick:this.confirm,ref:function(a){b.refConfirmButton=a}},React.createElement("span",null,webconLocale.cOk)),React.createElement("button",{type:"button",className:"btn btn-default default-button",onClick:this.close},React.createElement("span",null,webconLocale.cCancel)))},render:function(){var a=this,c=this.props.params,d=this.state,e=React.createElement(b.PickerSearch,{searchCallback:a.searchExecute,searchValue:d.value.rawValue,type:c.type,showSearchCol:d.showSearchCol,columns:d.columns}),f=React.createElement(b.PickerTable,{items:d.items,columns:d.columns,searching:d.searching,searchFinished:d.searchFinished,hasMoreResults:d.hasMoreResults,addItemCallback:a.addItemCallback});return React.createElement(b.PopupTemplate,{customClassName:classNames({"with-add-link":c.config.addNewElementLink}),isVisible:c.isVisible},React.createElement(b.PopupHeaderTemplate,{className:"picker-header",closeFunction:c.closePopup},React.createElement(b.PopupTitleTemplate,{title:c.title})),React.createElement(b.PopupBodyPickerTemplate,{table:f,search:e}),React.createElement(b.PopupFooterTemplate,null,!c.config.addNewElementLink||React.createElement("div",{className:"row"},React.createElement("div",{className:"col-xs-12"},React.createElement("div",{className:"picker-add-link"},React.createElement("a",{href:"#",ref:function(b){a.refNewElementLink=b},onClick:a.handleLinkClick},React.createElement("span",{className:"glyphicon glyphicon-new-window"})," ",webconLocale.cAcAddNewItemLink)))),React.createElement("div",{className:"picker-chosen-items"},a.getSelectedValues(),a.getButtons())))}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{},c=a.mixins;return b.PickerSingleValueSelectPopup=createReactClass({displayName:"PickerSingleValueSelectPopup",mixins:[c.PickerLogic,c.PickerPopupLogic],propTypes:{name:PropTypes.string.isRequired,title:PropTypes.string.isRequired},componentDidMount:function(){this.state.value.rawValue&&this.searchExecute("",this.state.value.rawValue),this.refNewElementLink&&ReactDOM.findDOMNode(this.refNewElementLink).addEventListener("auxclick",this.handleLinkClick)},componentWillUnmount:function(){this.refNewElementLink&&ReactDOM.findDOMNode(this.refNewElementLink).removeEventListener("auxclick",this.handleLinkClick)},addItemCallback:function(a){this.setState({selectedItems:[a]},this.confirm)},render:function(){var a=this,c=this.props.params,d=this.state,e=React.createElement(b.PickerSearch,{searchCallback:a.searchExecute,searchValue:d.value.rawValue,type:c.type,showSearchCol:d.showSearchCol,columns:d.columns}),f=React.createElement(b.PickerTable,{items:d.items,columns:d.columns,searching:d.searching,searchFinished:d.searchFinished,hasMoreResults:d.hasMoreResults,addItemCallback:a.addItemCallback});return React.createElement(b.PopupTemplate,{customClassName:classNames({"with-add-link":c.config.addNewElementLink}),isVisible:c.isVisible},React.createElement(b.PopupHeaderTemplate,{className:"picker-header",closeFunction:a.close},React.createElement(b.PopupTitleTemplate,{title:c.title})),React.createElement(b.PopupBodyPickerTemplate,{table:f,search:e}),React.createElement(b.PopupFooterTemplate,null,!c.config.addNewElementLink||React.createElement("div",{className:"row"},React.createElement("div",{className:"col-xs-12"},React.createElement("div",{className:"picker-add-link"},React.createElement("a",{href:"#",ref:function(b){a.refNewElementLink=b},onClick:a.handleLinkClick},React.createElement("span",{className:"glyphicon glyphicon-new-window"})," ",webconLocale.cAcAddNewItemLink)))),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-xs-12 col-sm-12 col-md-12"},React.createElement("button",{type:"button",className:"btn btn-default default-button",onClick:this.close,ref:function(b){a.refCloseButton=b}},React.createElement("span",null,webconLocale.cCancel))))))}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{};return b.PickerTable=createReactClass({displayName:"PickerTable",render:function(){this.style={};var a=this,c=React.createElement("div",null);return a.props.searching||0===this.props.items.length?a.props.searching||a.props.searchFinished?!a.props.searching&&a.props.searchFinished?c=React.createElement("div",{className:"picker-search-prompt th-main-font"},webconLocale.cPickerNoResults):a.props.searching&&(c=React.createElement(b.WaitingPanel,{isVisible:!0})):c=React.createElement("div",{className:"picker-search-prompt th-main-font"},webconLocale.cPickerSearchPrompt):c=React.createElement("div",{className:"picker-table th-main-font"},this.props.hasMoreResults?React.createElement("div",{className:"picker-search-prompt picker-search-info"},webconLocale.cPickerSearchLimitExceeded):null,React.createElement("table",{className:"table table-condensed table-striped"},React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",null),this.props.columns.map(function(a){if(a.dialogDisplay)return React.createElement("th",{key:a.name},a.name)}))),React.createElement("tbody",{style:a.style},this.props.items.map(function(b,c){return a.createRow(b,c)})))),c},onClick:function(a){this.props.addItemCallback(a)},createRow:function(b){var c=b.data,d="";Injector.resolve([{depName:"IconRepository",depEnv:a.env}],function(a){d=a.getNewImage()});var e=React.createElement("button",{type:"button",className:"btn btn-default fix-width-button pickerSearchAddBtn"},d);return React.createElement("tr",{className:"pickerSearchRow ms-itmHoverEnabled ms-itmhover",key:b.key||b.elementId,onClick:this.onClick.bind(this,b)},React.createElement("td",{className:"vertical-center"},e),this.props.columns.map(function(a){for(var b=0;b<c.length;++b)if(a.dialogDisplay&&c[b].Key==a.value)return React.createElement("td",{className:"vertical-center",key:c[b].Key},c[b].Value)}))}}),a}(window.webcon||{}),Injector.instance("PopupClosingFunctionsService",[],function(){function a(a){if(!a||"function"!=typeof a){throw new Error("ParameterMustBeAfunction")}c.push(a)}function b(){return c.pop()}var c=[];return{push:a,pop:b}}),Injector.factory("PopupControlsFactory",["logger"],function(a){function b(b){switch(b.controlName){case"WFConfirm":return React.createElement(c.WFConfirm,{name:b.controlName,params:b.params});case"WFAlert":return React.createElement(c.WFAlert,{name:b.controlName,params:b.params});case"WFAddAttWithCategory":return React.createElement(c.WFAddAttWithCategory,{name:b.controlName,params:b.params});case"WFOverwriteOrAddNewAttachment":return React.createElement(c.WFOverwriteOrAddNewAttachment,{name:b.controlName,params:b.params});case"WFAddAttWithCategoryInNative":return React.createElement(c.WFAddAttWithCategoryInNative,{name:b.controlName,params:b.params});case"WFConfirmAction":return React.createElement(c.WFConfirmAction,{name:b.controlName,params:b.params});case"WFForwardElement":return React.createElement(c.WFForwardElement,{name:b.controlName,params:b.params});case"PickerSelectPopup":return React.createElement(c.PickerSelectPopup,{name:b.controlName,params:b.params});case"ErrorPopupAlert":return React.createElement(c.ErrorPopupAlert,{name:b.controlName,params:b.params})}a.error("UnknownControlName: ,forControl:"+b.controlName)}var c=webcon.views;return{getPopupControl:b}}),window.webcon=function(a){var b=a.views=a.views||{},c=a.mixins;return b.PopupPanel=createReactClass({displayName:"PopupPanel",mixins:[c.RegistrableControl],render:function(){var a=this.props.data;return a?React.createElement("div",{className:this.props.isVisible?"wfPopupPanelVisible":"wfPopupPanelHidden"},a):React.createElement("div",{className:this.props.isVisible?"wfPopupPanelVisible":"wfPopupPanelHidden"})}}),a}(window.webcon||{}),Injector.factory("PopupRenderService",["Store","ModalOverflowBlockingService"],function(a,b){function c(a){return document.getElementById(a)}function d(a){var c=document.querySelectorAll("#"+a);$(c).remove(),f()||b.enableOverflow()}function e(){b.disableOverflow()}function f(){return $("#popupContainer").children().length>0}function g(a){e(),ReactDOM.render(React.createElement(C.PopupPanel,{name:a.controlName,params:a.params,isVisible:!0}),document.getElementById("PopupPanelWFConfirm"))}function h(a){if(a.params.isVisible)e(),ReactDOM.render(React.createElement(C.WFConfirm,{name:a.controlName,params:a.params}),c("PopupPanelWFConfirm"));else{var b=c("PopupPanelWFConfirm");null!=b&&(ReactDOM.unmountComponentAtNode(b),d("PopupPanelWFConfirm"))}}function i(a){var b="PopupPanelWFAlert";"string"==typeof a.params.message&&a.params.message.length>600&&(b="PopupPanelWFAlertLarge"),a.params.isVisible?(e(),ReactDOM.render(React.createElement(C.WFAlert,{name:a.controlName,params:a.params}),c(b))):(ReactDOM.unmountComponentAtNode(c(b)),d(b))}function j(a){a.params.isVisible?(e(),ReactDOM.render(React.createElement(C.WFSelectAttCategory,{name:a.controlName,params:a.params}),c("PopupPanelWFSelectAttCategory"))):(ReactDOM.unmountComponentAtNode(c("PopupPanelWFSelectAttCategory")),d("PopupPanelWFSelectAttCategory"))}function k(a){a.params.isVisible?(e(),ReactDOM.render(React.createElement(C.WFAddAttWithCategory,{name:a.controlName,params:a.params}),c("PopupPanelWFAddAttWithCategory"))):(ReactDOM.unmountComponentAtNode(c("PopupPanelWFAddAttWithCategory")),d("PopupPanelWFAddAttWithCategory"))}function l(a){a.params.isVisible?(e(),ReactDOM.render(React.createElement(C.WFOverwriteAtt,{name:a.controlName,params:a.params}),c("PopupPanelWFOverwriteAtt"))):(ReactDOM.unmountComponentAtNode(c("PopupPanelWFOverwriteAtt")),d("PopupPanelWFOverwriteAtt"))}function m(a){a.params.isVisible?(e(),ReactDOM.render(React.createElement(C.WFOverwriteOrAddManyAttachments,{name:a.controlName,params:a.params}),c("PopupPanelWFOverwriteOrAddManyAttachments"))):(ReactDOM.unmountComponentAtNode(c("PopupPanelWFOverwriteOrAddManyAttachments")),d("PopupPanelWFOverwriteOrAddManyAttachments"))}function n(a){a.params.isVisible?(e(),ReactDOM.render(React.createElement(C.WFOverwriteOrAddNewAttachment,{name:a.controlName,params:a.params}),c("PopupPanelWFOverwriteOrAddNewAttachment"))):(ReactDOM.unmountComponentAtNode(c("PopupPanelWFOverwriteOrAddNewAttachment")),d("PopupPanelWFOverwriteOrAddNewAttachment"))}function o(a){a.params.isVisible?(e(),ReactDOM.render(React.createElement(C.WFAddAttWithCategoryInNative,{name:a.controlName,params:a.params}),c("PopupPanelWFAddAttWithCategoryInNative"))):(ReactDOM.unmountComponentAtNode(c("PopupPanelWFAddAttWithCategoryInNative")),d("PopupPanelWFAddAttWithCategoryInNative"))}function p(a){var b="PopupPanelWFConfirmAction";a.params.message.length>600&&(b="PopupPanelWFConfirmActionLarge"),a.params.isVisible?(e(),ReactDOM.render(React.createElement(C.WFConfirmAction,{name:a.controlName,params:a.params}),c("PopupPanelWFConfirmAction"))):(ReactDOM.unmountComponentAtNode(c(b)),d(b))}function q(a){a.params.isVisible?(e(),ReactDOM.render(React.createElement(C.WFForwardElement,{name:a.controlName,params:a.params}),c("PopupPanelWFForwardElement"))):(ReactDOM.unmountComponentAtNode(c("PopupPanelWFForwardElement")),d("PopupPanelWFForwardElement"))}function r(a){a.params.isVisible?(e(),ReactDOM.render(React.createElement(C.PickerSelectPopup,{name:a.controlName,params:a.params}),c("PopupPanelPickerSelectPopup"))):(ReactDOM.unmountComponentAtNode(c("PopupPanelPickerSelectPopup")),d("PopupPanelPickerSelectPopup"))}function s(a){a.params.isVisible?(e(),ReactDOM.render(React.createElement(C.ErrorPopupAlert,{name:a.controlName,commands:a.commands,params:a.params}),c("ErrorPopupAlert"))):(ReactDOM.unmountComponentAtNode(c("ErrorPopupAlert")),d("ErrorPopupAlert"))}function t(a){a.params.isVisible?(e(),ReactDOM.render(React.createElement(C.AttachmentsPreviewPopup,{name:a.controlName,params:a.params}),c("AttachmentsPreviewPopup"))):(ReactDOM.unmountComponentAtNode(c("AttachmentsPreviewPopup")),d("AttachmentsPreviewPopup"))}function u(a){a.params.isVisible?(e(),ReactDOM.render(React.createElement(C.TreeControl,{name:a.controlName,displayName:a.displayName,params:a.params,value:a.value,controller:a.controller,config:a.config}),c("TreePopup"))):(ReactDOM.unmountComponentAtNode(c("TreePopup")),d("TreePopup"))}function v(b){if(b.params.isVisible){e(),$("#popupContainer").append('<div id="SubelementsDateTimeContainer"></div>');var f=D.SubelementsEditView(),g=React.createElement(f,{name:"SubelementsEditView",displayName:"Subelements",params:b.params});ReactDOM.render(React.createElement(ReactRedux.Provider,{store:a.getStore()},g),c("SubelementsEditView"))}else ReactDOM.unmountComponentAtNode(c("SubelementsEditView")),d("SubelementsEditView"),d("SubelementsDateTimeContainer")}function w(a){a.params.isVisible?(e(),ReactDOM.render(React.createElement(C.PickerSingleValueSelectPopup,{name:a.controlName,params:a.params}),c("PopupPanelPickerSingleValueSelectPopup"))):(ReactDOM.unmountComponentAtNode(c("PopupPanelPickerSingleValueSelectPopup")),d("PopupPanelPickerSingleValueSelectPopup"))}function x(a){a.params.isVisible?(e(),ReactDOM.render(React.createElement(C.WFPrivileges,{name:a.controlName,params:a.params}),c("PopupPanelWFPrivileges"))):(ReactDOM.unmountComponentAtNode(c("PopupPanelWFPrivileges")),d("PopupPanelWFPrivileges"))}function y(a){a.params.isVisible?(e(),ReactDOM.render(React.createElement(C.WFTimeoutStatistics,{name:a.controlName,params:a.params}),c("TimeoutStatistics"))):(ReactDOM.unmountComponentAtNode(c("TimeoutStatistics")),d("TimeoutStatistics"))}function z(a){a.params.isVisible?(e(),ReactDOM.render(React.createElement(C.AttachLocalAttachmentsToSubelement,{name:a.controlName,params:a.params}),c("PopupPanelAttachLocalAttachmentsToSubelement"))):(ReactDOM.unmountComponentAtNode(c("PopupPanelAttachLocalAttachmentsToSubelement")),d("PopupPanelAttachLocalAttachmentsToSubelement"))}function A(a){a.params.isVisible?(e(),ReactDOM.render(React.createElement(C.AttachRelativeAttachmentsToSubelement,{name:a.controlName,params:a.params}),c("PopupPanelAttachRelativeAttachmentsToSubelement"))):(ReactDOM.unmountComponentAtNode(c("PopupPanelAttachRelativeAttachmentsToSubelement")),d("PopupPanelAttachRelativeAttachmentsToSubelement"))}function B(a){var b="";b=a.params.errorsCount>0?"PopupPanelSubelementsImportResultHasErrors":"PopupPanelSubelementsImportResultNoErrors",a.params.isVisible?(e(),ReactDOM.render(React.createElement(C.SubelementsImportResult,{params:a.params}),c(b))):(ReactDOM.unmountComponentAtNode(c(b)),d(b))}var C=webcon.views,D=webcon.redux;return{renderPopup:g,renderWFConfirm:h,renderWFAlert:i,renderWFAddAttWithCategory:k,renderWFOverwriteAtt:l,renderWFOverwriteOrAddManyAttachments:m,renderWFOverwriteOrAddNewAttachment:n,renderWFAddAttWithCategoryInNative:o,renderWFSelectAttCategory:j,renderWFConfirmAction:p,renderWFForwardElement:q,renderPickerSelectPopup:r,renderErrorPopupAlert:s,renderAttachmentsPreview:t,showTreePopup:u,showSubelementsEditView:v,renderPickerSingleValueSelectPopup:w,renderWFPrivileges:x,renderAttachLocalAttachmentsToSubelement:z,renderAttachRelativeAttachmentsToSubelement:A,renderSubelementsImportResult:B,renderTimeoutStatistics:y}}),window.webcon=function(a){var b=a.views=a.views||{};return b.SubelementsEditView=createReactClass({displayName:"SubelementsEditView",ok:function(){var a=this.props.params.save();a&&a.isValid&&this.props.params.closePopup()},cancel:function(){this.props.params.silentClose()},prepareModel:function(){var a=$.extend(!0,{},this.props.row),b=this.props.config;return a.cells.controls=b.columns,_.each(a.cells.controls,function(c){var d=a.cells[c.fieldName],e=d.backgroundColor?d.backgroundColor:a.backgroundColor;d.config=b.columnsConfiguration[c.fieldName]?b.columnsConfiguration[c.fieldName].config:void 0,c.isDisabled=d.isCellDisabled,c.required=a.columnRequiredInfos.find(function(a){return a.columnName===c.fieldName}).isRequired,e&&(d.style={control:{backgroundColor:e}}),"FloatingPointCalculated"===c.columnType&&(c.editMode="ReadOnlyHtml")}),a.cells},componentDidMount:function(){this.refEndEditButton&&ReactDOM.findDOMNode(this.refEndEditButton).focus()},render:function(){var a=this.props.params,c=this,d=this.prepareModel();return React.createElement(b.PopupTemplate,{isVisible:a.isVisible},React.createElement(b.PopupHeaderTemplate,{closeFunction:this.props.params.silentClose},React.createElement(b.PopupTitleTemplate,{title:a.title})),React.createElement(b.PopupBodyTemplate,null,React.createElement("div",null,React.createElement(b.MainPanel,{name:"subelement",controller:a.controller,data:d,members:d.controls,orientation:"Beside",popup:!0}))),React.createElement(b.PopupFooterTemplate,null,React.createElement("div",{className:"subelements-popup-buttons"},React.createElement("button",{type:"button",className:"btn accept-button subelements-popup-buttons__confirm-button",onClick:this.ok,ref:function(a){c.refEndEditButton=a}},webconLocale.cEndEditing),React.createElement("button",{type:"button",className:"btn btn-default default-button subelements-popup-buttons__cancel-button",onClick:this.cancel},webconLocale.cCancel))))}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{};return b.SubelementsImportResult=createReactClass({displayName:"SubelementsImportResult",componentDidMount:function(){this.refConfirmButton&&ReactDOM.findDOMNode(this.refConfirmButton).focus()},render:function(){var a=this.props.params,c=new DOMParser,d=this;return React.createElement(b.PopupTemplate,{isVisible:a.isVisible},React.createElement(b.PopupHeaderTemplate,{closeFunction:this.props.params.closePopup},React.createElement(b.PopupTitleTemplate,{title:webconLocale.cSummaryImportHeader})),React.createElement(b.PopupBodyTemplate,null,React.createElement("div",null,React.createElement("div",null,webconLocale.cAllImported,": ",a.allImported),React.createElement("div",null,webconLocale.cJustImported,": ",a.justImported),React.createElement("div",null,webconLocale.cErrorsCount,": ",a.errorsCount),React.createElement("div",null,a.errors.map(function(a){var b=c.parseFromString(a.Message,"text/html");return React.createElement("div",null,b.body.textContent)})))),React.createElement(b.PopupFooterTemplate,null,React.createElement("div",{className:"btn-group"},React.createElement("input",{type:"button",className:"btn modal-footer-button",onClick:this.props.params.closePopup,ref:function(a){d.refConfirmButton=a},value:webconLocale.cOk}))))}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{};return b.WFTimeoutStatistics=createReactClass({displayName:"WFTimeoutStatistics",propTypes:{name:PropTypes.string.isRequired},getInitialState:function(){return{stats:this.props.params.stats}},componentDidMount:function(){this.refCloseButton&&ReactDOM.findDOMNode(this.refCloseButton).focus()},resetExecutionCount:function(a,b){Injector.inject("TimeoutsController").resetExecutions(a,b)},resetErrorExecutionCount:function(a,b){Injector.inject("TimeoutsController").resetErrorExecutions(a,b)},render:function(){var a=this,c=a.state.stats,d=React.createElement("button",{type:"button",className:"btn btn-default default-button",onClick:a.props.params.closePopup,ref:function(b){a.refCloseButton=b}},React.createElement("span",null,webconLocale.cClose));return React.createElement(b.PopupTemplate,{isVisible:a.props.params.isVisible},React.createElement(b.PopupHeaderTemplate,{closeFunction:a.props.params.closePopup},React.createElement(b.PopupTitleTemplate,{title:webconLocale.cTimeoutExceutionStatistics})),React.createElement(b.PopupBodyTemplate,null,React.createElement("div",{className:"row"},React.createElement(b.JsApp.TimeoutStatistics,{stats:c.items,resetErrorExecutionCount:a.resetErrorExecutionCount,resetExecutionCount:a.resetExecutionCount}))),React.createElement(b.PopupFooterTemplate,null,d))}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{};return b.TreeControlPopup=createReactClass({displayName:"TreeControlPopup",componentDidMount:function(){this.refCloseButton&&ReactDOM.findDOMNode(this.refCloseButton).focus()},render:function(){var a=this.props,c=this;return React.createElement(b.PopupTemplate,{isVisible:a.params.isVisible},React.createElement(b.PopupHeaderTemplate,{closeFunction:this.props.params.closePopup},React.createElement(b.PopupTitleTemplate,{title:a.name})),React.createElement(b.PopupBodyTemplate,null,React.createElement("div",null,a.children)),React.createElement(b.PopupFooterTemplate,null,React.createElement("div",{className:"btn-group"},React.createElement("button",{type:"button",className:"btn btn-default default-button",onClick:this.props.params.closePopup,ref:function(a){c.refCloseButton=a}},webconLocale.cCancel))))}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{},c=a.mixins;return b.WFAddAttWithCategory=createReactClass({displayName:"WFAddAttWithCategory",propTypes:{name:PropTypes.string.isRequired},componentDidMount:function(){this.fileupload&&this.fileupload.focus()},componentWillMount:function(){this.chooseCategory=!0},mixins:[c.WFUploadAttachmentLogic],getMobileButtons:function(){var a=this;return React.createElement("div",null,React.createElement("span",{className:"btn btn-success btn-lg btn-block fileinput-button"},React.createElement("i",{className:"glyphicon glyphicon-plus"}),React.createElement("span",null," ",webconLocale.cAddAttachment),React.createElement("input",{ref:function(b){a.fileupload=b},id:"fileupload",type:"file",name:"file"})),React.createElement("div",{className:"btn btn-default btn-lg btn-block",onClick:this.cancel},webconLocale.cCancel))},getDesktopButtons:function(){var a=this;return React.createElement("div",{className:"btn-group"},React.createElement("span",{className:"btn btn-success fileinput-button"},React.createElement("span",null," ",webconLocale.cAddAttachment),React.createElement("input",{ref:function(b){a.fileupload=b},id:"fileupload",type:"file",multiple:!0,name:"file"})),React.createElement("button",{className:"btn btn-default default-button",onClick:this.cancel},webconLocale.cCancel))},render:function(){var a=this.props.params,c=this.prepareCategories();return React.createElement(b.PopupTemplate,{isVisible:a.isVisible},React.createElement(b.PopupHeaderTemplate,{closeFunction:this.props.params.closePopup},React.createElement(b.PopupTitleTemplate,{title:a.mediaHeading})),React.createElement(b.PopupBodyTemplate,null,React.createElement("div",{className:"well"},React.createElement(b.JsDropDown,{name:"addWithCategoryDropDown",selectedValue:c.selectedItem,items:c.categories,onChange:this.change}),a.isMobileDevice?this.getMobileButtons():React.createElement("span",null))),React.createElement(b.PopupFooterTemplate,null,a.isMobileDevice?React.createElement("span",null):this.getDesktopButtons()))}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{},c=a.mixins;return b.WFAddAttWithCategoryInNative=createReactClass({displayName:"WFAddAttWithCategoryInNative",propTypes:{name:PropTypes.string.isRequired},getCategorySelect:function(){if(this.props.params.chooseCategory){var a=this.prepareCategories();return React.createElement(b.JsDropDown,{name:"addWithCategoryDropDown",selectedValue:a.selectedItem,items:a.categories,onChange:this.change})}return React.createElement("span",null)},mixins:[c.WFUploadAttachmentLogic],render:function(){var a=this.props.params;return React.createElement(b.PopupTemplate,{isVisible:a.isVisible},React.createElement(b.PopupHeaderTemplate,{closeFunction:this.props.params.closePopup},React.createElement(b.PopupTitleTemplate,{title:a.chooseCategory?webconLocale.cChooseCategory:webconLocale.cChooseSource})),React.createElement(b.PopupBodyTemplate,null,React.createElement("div",{className:"well Menu"},this.getCategorySelect(),React.createElement("span",{onClick:this.addPictureFromNative,className:"btn btn-primary btn-lg btn-block fileinput-button"},React.createElement("i",{className:"glyphicon glyphicon-plus"}),React.createElement("span",null," ",webconLocale.cAddPhoto)),React.createElement("span",{onClick:this.addRecordFromNative,className:"btn btn-primary btn-lg btn-block fileinput-button"},React.createElement("i",{className:"glyphicon glyphicon-plus"}),React.createElement("span",null," ",webconLocale.cAddRecord)),React.createElement("div",{className:"btn btn-default btn-lg btn-block",onClick:this.cancel},webconLocale.cCancel))))}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{};return b.WFAlert=createReactClass({displayName:"WFAlert",propTypes:{name:PropTypes.string.isRequired,params:PropTypes.object.isRequired},componentDidMount:function(){this.refCloseButton&&ReactDOM.findDOMNode(this.refCloseButton).focus()},getContent:function(){var a=this.props.params.message;return"string"==typeof a?a.split("\n").map(function(a,b){return React.createElement("p",{key:b},a)}):a},render:function(){var a=this;return React.createElement(b.PopupTemplate,{isVisible:this.props.params.isVisible},React.createElement(b.PopupHeaderTemplate,{closeFunction:this.props.params.closePopup},React.createElement(b.PopupTitleTemplate,{title:this.props.params.title})),React.createElement(b.PopupBodyTemplate,null,React.createElement("div",null,this.getContent())),React.createElement(b.PopupFooterTemplate,null,React.createElement("div",{className:"btn-group"},React.createElement("button",{type:"button",id:"confirm-ok",className:"btn btn-default default-button",onClick:this.props.params.closePopup,ref:function(b){a.refCloseButton=b}},webconLocale.cOk))))}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{};return b.WFConfirm=createReactClass({displayName:"WFConfirm",propTypes:{name:PropTypes.string.isRequired},componentDidMount:function(){var a=this,b=a.props.params;a.shouldCallTimeoutCallback=!0,Injector.resolve(["CallbackExecutor"],function(c){setTimeout(function(){a.shouldCallTimeoutCallback&&c.execute(b.onTimeoutCallback)},b.timeout)},this),this.refConfirmButton&&ReactDOM.findDOMNode(this.refConfirmButton).focus()},componentWillUnmount:function(){this.shouldCallTimeoutCallback=!1},getBody:function(){var a=this.props.params,b="";return Injector.resolve(["WFConfirmBodyFactory"],function(c){b=c.getWFConfirmBody(a.signature,a.elementId,a.extraMessage)},this),b},getFooter:function(){var a="",b=this,c=function(a){b.refConfirmButton=a};return Injector.resolve(["WFConfirmBodyFactory"],function(b){a=b.getWFConfirmFooter(c)},this),a},render:function(){var a=this.props.params;return React.createElement(b.PopupTemplate,{isVisible:a.isVisible},React.createElement(b.PopupHeaderTemplate,{closeFunction:this.props.params.closePopup},React.createElement(b.PopupTitleTemplate,{title:a.mediaHeading})),React.createElement(b.PopupBodyTemplate,null,this.getBody()),React.createElement(b.PopupFooterTemplate,null,React.createElement("div",{className:"btn-group",onClick:this.props.params.closePopup},this.getFooter())))}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{};return b.WFConfirmAction=createReactClass({displayName:"WFConfirmAction",propTypes:{name:PropTypes.string.isRequired},componentDidMount:function(){this.refConfirmButton&&ReactDOM.findDOMNode(this.refConfirmButton).focus()},render:function(){var a=this.props.params,c=this;return React.createElement(b.PopupTemplate,{isVisible:a.isVisible},React.createElement(b.PopupHeaderTemplate,{closeFunction:a.closePopup},React.createElement(b.PopupTitleTemplate,{title:a.title})),React.createElement(b.PopupBodyTemplate,null,React.createElement("h5",{className:"big-text"},a.message)),React.createElement(b.PopupFooterTemplate,null,React.createElement("div",null,React.createElement("button",{type:"button",id:"confirm-yes",className:"btn btn-primary accept-button",onClick:a.yesCallback,ref:function(a){c.refConfirmButton=a}},webconLocale.cYes),React.createElement("button",{type:"button",id:"confirm-no",className:"btn btn-default default-button",onClick:a.noCallback},webconLocale.cNo))))}}),a}(window.webcon||{});var _extends=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b]
;for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a};window.webcon=function(a){var b=a.views=a.views||{};return b.WFForwardElement=createReactClass({displayName:"WFForwardElement",propTypes:{name:PropTypes.string.isRequired},getInitialState:function(){var a=JSON.parse(JSON.stringify(window.initialModel.FormInfo.tasksInfo.standardTasks)),b=null,c=null;return Injector.resolve(["FormInfo"],function(a){b=a.userSubordinatesActiveTasks,c=a.hierarchicalSecurityUsedToEdit},this),{sendEmail:!0,emailMessage:"",description:webconLocale.cForwardTaskDescriptonPhrase,pickerValue:[],currAssignedPersons:a.directTasks.concat(a.directCoversTasks),userSubordinatesActiveTasks:b,hierarchicalSecurityUsedToEdit:c}},componentWillMount:function(){var a=this,b=this.state.currAssignedPersons;if(!_.some(b,function(a){return a.isSelected})){var c=b.map(function(b){return _extends({},b,{isSelected:b.isCurrentUserTask||a.isSubordinateTask(b.taskId)})});this.setState({currAssignedPersons:c})}},componentDidMount:function(){this.refDelegateButton&&ReactDOM.findDOMNode(this.refDelegateButton).focus()},close:function(){this.props.params.closePopup()},forward:function(){for(var a=this,b=this.state,c=b.currAssignedPersons,d=b.pickerValue.pickerEntities,e=[],f=0;f<c.length;++f)c[f].isSelected&&e.push(c[f].taskId);Injector.resolve(["DelegateValidator"],function(c){c.isDataValid(e,d)&&a.props.params.forwardCallback(b.sendEmail,b.emailMessage,b.description,e,d)})},commentChanged:function(a){this.setState({emailMessage:a.target.value})},descriptionChanged:function(a){this.setState({description:a.target.value})},sendEmailCheckboxChange:function(a){this.setState({sendEmail:a.target.checked})},updatePickerPersonsCallback:function(a){this.setState({pickerValue:a})},changePersonAssignSelection:function(a,b){for(var c=this.state.currAssignedPersons,d=0;d<c.length;++d)c[d].taskId===a.taskId&&(c[d].isSelected=b.target.checked);this.setState({currAssignedPersons:c})},isSubordinateTask:function(a){return this.state.hierarchicalSecurityUsedToEdit&&this.state.userSubordinatesActiveTasks.some(function(b){return b.id===a})},getAssignedPersons:function(){var a,b=this;return Injector.resolve(["FormInfo"],function(b){a=b.isAdminMode}),this.state.currAssignedPersons.map(function(c,d){var e=a||c.isCurrentUserTask||b.isSubordinateTask(c.taskId);return React.createElement("div",{className:"checkbox","data-key":"checkbox-"+d},React.createElement("label",{className:"th-main-font"},React.createElement("input",{type:"checkbox",checked:c.isSelected,disabled:!e,onChange:b.changePersonAssignSelection.bind(this,c)}),c.userName," (",c.userLogin,")"))})},render:function(){var a=null;this.state.hierarchicalSecurityUsedToEdit&&Injector.resolve(["ClientInfo"],function(b){a=b.userLogin},this);var c=Injector.inject("AttributeChangeController"),d=this;return React.createElement(b.PopupTemplate,{isVisible:this.props.params.isVisible},React.createElement(b.PopupHeaderTemplate,{closeFunction:this.props.params.closePopup},React.createElement(b.PopupTitleTemplate,{title:webconLocale.cForwardTaskWindowTitle})),React.createElement(b.PopupBodyTemplate,null,React.createElement("div",{className:"row"},React.createElement("div",{className:"col-lg-12"},React.createElement("h5",null,React.createElement("strong",{className:"th-main-font"},webconLocale.cForwardTaskCurrentAssignements,":")),this.getAssignedPersons())),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-lg-12"},React.createElement("h5",null,React.createElement("strong",{className:"th-main-font"},webconLocale.cForwardTaskForwardTo,":")),React.createElement(b.Picker,{type:"people",updatePickerValueCallback:this.updatePickerPersonsCallback,popupTitle:webconLocale.cForwardTaskWindowTitle,controller:c,initialValue:a}),React.createElement("h5",null,React.createElement("strong",{className:"th-main-font"},webconLocale.cForwardTaskTaskDescription,":")),React.createElement("input",{className:"wfFormControl form-control",type:"text",onChange:this.descriptionChanged,value:this.state.description}),React.createElement("div",{className:"checkbox"},React.createElement("label",{className:"th-main-font"},React.createElement("input",{type:"checkbox",checked:this.state.sendEmail,onChange:this.sendEmailCheckboxChange}),webconLocale.cForwardTaskSendEmail)),React.createElement("h5",null,React.createElement("strong",{className:"th-main-font"},webconLocale.cForwardTaskAdditionalInformation,":")),React.createElement("textarea",{className:"wfFormControl form-control",onChange:this.commentChanged,disabled:!this.state.sendEmail,value:this.state.emailMessage})))),React.createElement(b.PopupFooterTemplate,null,React.createElement("button",{type:"button",className:"btn btn-primary accept-button",onClick:this.forward,ref:function(a){d.refDelegateButton=a}},webconLocale.cToolBarForwardTask),React.createElement("button",{type:"button",className:"btn btn-default default-button",onClick:this.close},React.createElement("span",null,webconLocale.cCancel))))}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{};return b.WFOverwriteAtt=createReactClass({displayName:"WFOverwriteAtt",propTypes:{name:PropTypes.string.isRequired},componentDidMount:function(){this.registerUploadPlugin(),this.refCloseButton&&ReactDOM.findDOMNode(this.refCloseButton).focus()},addAttachmentFromUploadPlugin:function(a){this.props.params.addCallback(a)},registerUploadPlugin:function(){var a=this;Injector.resolve(["AttachmentController","AttachmentsUploadService","ModelController","FormInfo","ErrorDisplayService"],function(b,c,d,e,f){var g=function(b){a.props.params.uploadStart()},h=function(b){a.props.params.uploadFail(b)},i=function(g){var h=g.queue[Object.keys(g.queue)[0]],i=b.validateFileNameNoModal(h.fileName);if(!i.isValid)return c.removeFromQueue(h.id),void f.displayErrorMessageOnTopStandalone(i.error,0);a.props.params.closePopup(),h.submitted=!0;var j=h.pluginData,k=d.getDataModel(),l={attId:a.props.params.attachment.attId,name:j.name,category:a.props.params.attachment.category,model:JSON.stringify(k)};0!==e.wfdId&&(l.wfdId=e.wfdId),j.formData={param:JSON.stringify(l)},j.submit()};c.registerUpload(a.fileupload,a.addAttachmentFromUploadPlugin,g,h,i)})},getMobileButtons:function(){var a=this;return React.createElement("div",null,React.createElement("span",{className:"btn btn-success btn-lg btn-block fileinput-button"},React.createElement("span",null," ",webconLocale.cAttControlOverwrite),React.createElement("input",{ref:function(b){a.fileupload=b},id:"fileupload",type:"file",name:"file"})),React.createElement("button",{className:"btn btn-default btn-lg btn-block",onClick:this.props.params.closePopup},webconLocale.cCancel))},getDesktopButtons:function(){var a=this;return React.createElement("div",{className:"btn-group"},React.createElement("span",{className:"btn btn-success fileinput-button",ref:function(b){a.refFileInput=b}},React.createElement("span",null," ",webconLocale.cAttControlOverwrite),React.createElement("input",{ref:function(b){a.fileupload=b},id:"fileupload",type:"file",name:"file"})),React.createElement("button",{className:"btn btn-default default-button",onClick:this.props.params.closePopup},webconLocale.cCancel))},render:function(){var a=this.props.params;_.templateSettings={interpolate:/\{\{(.+?)\}\}/g};var c=_.template(webconLocale.cAttControlAttachmentWillBeOverwritten)({name:a.attachment.name});return React.createElement(b.PopupTemplate,{isVisible:a.isVisible},React.createElement(b.PopupHeaderTemplate,{closeFunction:this.props.params.closePopup},React.createElement(b.PopupTitleTemplate,{title:a.mediaHeading})),React.createElement(b.PopupBodyTemplate,null,React.createElement("div",null,React.createElement("span",null,c),a.isMobileDevice?this.getMobileButtons():React.createElement("span",null))),React.createElement(b.PopupFooterTemplate,null,a.isMobileDevice?React.createElement("span",null):this.getDesktopButtons()))}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{},c={none:0,overwrite:1,addNew:2,skip:3};return b.WFOverwriteOrAddManyAttachments=createReactClass({displayName:"WFOverwriteOrAddManyAttachments",propTypes:{name:PropTypes.string.isRequired},componentDidMount:function(){this.refConfirmButton&&ReactDOM.findDOMNode(this.refConfirmButton).focus()},getInitialState:function(){var a=this.props.params.files;return{common:c.none,files:_.chain(a).filter(function(a){return void 0!==a.attachmentToOverwrite||null!==a.attachmentToOverwrite}).map(function(a){return{fileName:a.fileName,id:a.id,overwriteMode:c.overwrite}}).value()}},createHandleChange:function(a){var b=this;return function(a){var d=b.state.files.slice(),e=d.find(function(b){return b.id===a.target.name});d[d.indexOf(e)]=Object.assign({},e,{overwriteMode:parseInt(a.target.value)}),b.setState({common:c.none,files:d})}},createHandleChangeCommon:function(a){var b=this;return function(){for(var c=b.state.files.slice(),d=0;d<c.length;d++)c[d]=Object.assign({},c[d],{overwriteMode:a});b.setState({common:a,files:c})}},handleCancel:function(){this.props.params.cancelCallback()},handleOk:function(){this.props.params.okCallback(this.state.files)},render:function(){var a=this.state.common,d=this.state.files,e=this;return React.createElement(b.PopupTemplate,{isVisible:this.props.params.isVisible},React.createElement(b.PopupHeaderTemplate,{closeFunction:this.props.params.cancelCallback},React.createElement(b.PopupTitleTemplate,{title:webconLocale.cOverwriteOrAddFileWithTheSameName})),React.createElement(b.PopupBodyTemplate,{className:"attachments-overwrite-modal-body"},React.createElement("h4",{className:"add-or-overwrite-prompt"},webconLocale.cOverwriteOrAddChooseSelectWhatToDo),React.createElement(b.BreakpointResizeDetector,{breakpoints:{"attachments-overwrite-table-xs":360,"attachments-overwrite-table-sm":600,"attachments-overwrite-table-md":void 0}},React.createElement(b.BreakpointResizePanel,{className:"attachments-overwrite-table"},React.createElement("div",{className:"attachments-overwrite-header"},React.createElement("div",{className:"attachments-overwrite-col2"},React.createElement("div",null,React.createElement("label",null,React.createElement("input",{type:"checkbox",checked:a===c.overwrite,onChange:e.createHandleChangeCommon(c.overwrite)})," ",webconLocale.cOverwriteOrAddOverwrite)),React.createElement("div",null,React.createElement("label",null,React.createElement("input",{type:"checkbox",checked:a===c.addNew,onChange:e.createHandleChangeCommon(c.addNew)})," ",webconLocale.cOverwriteOrAddAddNew)),React.createElement("div",null,React.createElement("label",null,React.createElement("input",{type:"checkbox",checked:a===c.skip,onChange:e.createHandleChangeCommon(c.skip)})," ",webconLocale.cOverwriteOrAddSkip)))),d.map(function(a){return React.createElement("div",{className:"attachments-overwrite-row"},React.createElement("div",{className:"attachments-overwrite-col1"},a.fileName),React.createElement("div",{className:"attachments-overwrite-col2"},React.createElement("div",null,React.createElement("label",null,React.createElement("input",{type:"radio","aria-label":webconLocale.cOverwriteOrAddOverwrite,checked:a.overwriteMode===c.overwrite,name:a.id,onChange:e.createHandleChange(a),value:c.overwrite})," ",webconLocale.cOverwriteOrAddOverwrite)),React.createElement("div",null,React.createElement("label",null,React.createElement("input",{type:"radio","aria-label":webconLocale.cOverwriteOrAddAddNew,checked:a.overwriteMode===c.addNew,name:a.id,onChange:e.createHandleChange(a),value:c.addNew})," ",webconLocale.cOverwriteOrAddAddNew)),React.createElement("div",null,React.createElement("label",null,React.createElement("input",{type:"radio","aria-label":webconLocale.cOverwriteOrAddSkip,checked:a.overwriteMode===c.skip,name:a.id,onChange:e.createHandleChange(a),value:c.skip})," ",webconLocale.cOverwriteOrAddSkip))))})))),React.createElement(b.PopupFooterTemplate,null,React.createElement("div",{className:"btn-group"},React.createElement("button",{className:"btn btn-primary accept-button",type:"button",onClick:this.handleOk,ref:function(a){e.refConfirmButton=a}},webconLocale.cOk),React.createElement("button",{className:"btn btn-default default-button",type:"button",onClick:this.handleCancel},webconLocale.cCancel))))}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{};return b.WFOverwriteOrAddNewAttachment=createReactClass({displayName:"WFOverwriteOrAddNewAttachment",propTypes:{name:PropTypes.string.isRequired},componentDidMount:function(){this.refOverrideAttachmentButton&&ReactDOM.findDOMNode(this.refOverrideAttachmentButton).focus()},cancelCallback:function(){this.props.params.cancelCallback()},addAttachment:function(){this.props.params.addCallback(),this.props.params.cancelCallback()},overrideAttachment:function(){this.props.params.overwriteCallback(),this.props.params.cancelCallback()},render:function(){_.templateSettings={interpolate:/\{\{(.+?)\}\}/g};var a=_.template(webconLocale.cConfirmOverwritingAttachment)({name:this.props.params.existingAttachment.fileName}),c=this;return React.createElement(b.PopupTemplate,{isVisible:this.props.params.isVisible},React.createElement(b.PopupHeaderTemplate,{closeFunction:this.props.params.cancelCallback},React.createElement(b.PopupTitleTemplate,{title:webconLocale.cOverwriteAttachmentTitle})),React.createElement(b.PopupBodyTemplate,null,React.createElement("div",{className:"well"},React.createElement("span",null,a))),React.createElement(b.PopupFooterTemplate,null,React.createElement("div",{className:"btn-group"},React.createElement("button",{className:"btn btn-primary accept-button overwrite-att-button",onClick:this.overrideAttachment,type:"button",ref:function(a){c.refOverrideAttachmentButton=a}},webconLocale.cOverwrite),React.createElement("button",{className:"btn btn-default default-button add-new-att-button",type:"button",onClick:this.addAttachment},webconLocale.cAddNew),React.createElement("button",{className:"btn btn-default default-button cancel-overwrite-button",type:"button",onClick:this.cancelCallback},webconLocale.cCancel))))}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{};return b.WFPrivileges=createReactClass({displayName:"WFPrivileges",propTypes:{name:PropTypes.string.isRequired},getInitialState:function(){Injector.resolve(["$Window"],function(a){this.win=a},this);var a=this.win.model.privileges;return{globalPrivileges:a.globalPrivileges,processPrivileges:a.processPrivileges,documentPrivileges:a.documentPrivileges,elementPrivileges:a.elementPrivileges,avaiblePrivileges:a.avaiblePrivileges,peopleToAddPrivileges:{pickerEntities:[]},addPrivilegesType:a.avaiblePrivileges[0].privilegeType}},componentDidMount:function(){this.refCloseButton&&ReactDOM.findDOMNode(this.refCloseButton).focus()},addPrivilegesSuccess:function(a){this.updateElementPrivileges(a.elementPrivileges),this.updatePickerPersonsCallback({pickerEntities:[]})},addPrivileges:function(){var a=this;Injector.resolve(["PrivilegesValidator","DocumentController"],function(b,c){b.isDataValid(a.state.peopleToAddPrivileges,a.state.addPrivilegesType)&&c.addPrivileges(a.state.peopleToAddPrivileges,a.state.addPrivilegesType,a.addPrivilegesSuccess)})},updatePickerPersonsCallback:function(a){this.setState({peopleToAddPrivileges:a})},deletePrivileges:function(a){var b=this;Injector.resolve(["DocumentController"],function(c){c.removePrivileges(a,function(){b.deletePrivilegesSuccess(a)})})},deletePrivilegesSuccess:function(a){var b=this.state.elementPrivileges.filter(function(b){return b.privilegeIdentifier!==a});this.updateElementPrivileges(b)},updateElementPrivileges:function(a){this.setState({elementPrivileges:a}),this.win.model.privileges.elementPrivileges=a},addPrivilegesTypeChange:function(a){this.setState({addPrivilegesType:a.value})},getUserDisplayControl:function(a){return a.userName?a.userName:a.userLogin},getPersonPrivileges:function(a){var b=this.getUserDisplayControl(a);return React.createElement("div",{className:"row privilegesRow th-main-font",key:b.split(" ").join("_")},React.createElement("div",{className:"col-xs-3 user-name"},b),React.createElement("div",{className:"col-xs-9 privilege-name","data-privilege-type":a.privilege.privilegeType},a.privilege.privilegeDisplayName))},getElementPrivileges:function(a,b){var c=this.getUserDisplayControl(a);return React.createElement("div",{className:"row privilegesRow th-main-font",key:c.split(" ").join("_")},React.createElement("div",{className:"col-xs-3 user-name"},c),React.createElement("div",{className:"col-xs-3 privilege-name","data-privilege-type":a.privilege.privilegeType},a.privilege.privilegeDisplayName),React.createElement("div",{className:"col-xs-5 privilegesOnElement",title:a.privilegeReasonToolTip},a.privilegeReason),React.createElement("div",{className:"col-xs-1 privilegesDeleteButton",onClick:this.deletePrivileges.bind(this,a.privilegeIdentifier)},b))},getPrivilegesRow:function(a,b,c,d){return c&&0!==c.length?React.createElement("div",{className:classNames("row",a)},React.createElement("div",{className:"col-xs-12"},React.createElement("hr",null),React.createElement("strong",{className:"th-main-font"},b),c.map(d))):React.createElement("div",{className:classNames("row",a)})},render:function(){var c=this,d=Injector.inject("AttributeChangeController"),e={none:0,user:1,securityGroup:2,sharePointGroup:4,apiApplication:8},f={allowMultiValue:!0,usePeopleDataSource:!0,choiceMode:e.user|e.securityGroup|e.sharePointGroup|e.apiApplication,selectedGroupId:-1},g=React.createElement(b.Picker,{type:"people",updatePickerValueCallback:c.updatePickerPersonsCallback,popupTitle:webconLocale.cSecurityAdd,value:c.state.peopleToAddPrivileges,isValuesBind:!0,controller:d,config:f}),h="",i="",j="",k={type:"Choose",onChange:c.addPrivilegesTypeChange,data:{availableValues:c.state.avaiblePrivileges.map(function(a){return{value:a.privilegeType,name:a.privilegeDisplayName}}),selected:{value:c.state.addPrivilegesType,name:c.state.avaiblePrivileges.filter(function(a){return a.privilegeType==c.state.addPrivilegesType})[0].privilegeDisplayName}}},l=React.createElement("button",{type:"button",className:"btn btn-default default-button",onClick:c.props.params.closePopup,ref:function(a){c.refCloseButton=a}},React.createElement("span",null,webconLocale.cClose));return Injector.resolve([{depName:"IconRepository",depEnv:a.env},{depName:"ControlsFactory",depEnv:a.env}],function(a,b){h=a.getClearButton(),i=a.getAddImage(),j=b.getSimpleControl(k)}),React.createElement(b.PopupTemplate,{isVisible:c.props.params.isVisible},React.createElement(b.PopupHeaderTemplate,{closeFunction:c.props.params.closePopup},React.createElement(b.PopupTitleTemplate,{title:webconLocale.cSecurity})),React.createElement(b.PopupBodyTemplate,null,React.createElement("div",{className:"row"},React.createElement("div",{className:"centerDiv th-main-font"},webconLocale.cSecurityTitle)),c.getPrivilegesRow("global-privileges-row",webconLocale.cSecurityGlobalLevel,c.state.globalPrivileges,c.getPersonPrivileges),c.getPrivilegesRow("process-privileges-row",webconLocale.cSecurityProcessLevel,c.state.processPrivileges,c.getPersonPrivileges),c.getPrivilegesRow("document-privileges-row",webconLocale.cSecurityDocumentLevel,c.state.documentPrivileges,c.getPersonPrivileges),c.getPrivilegesRow("element-privileges-row",webconLocale.cSecurityElementLevel,c.state.elementPrivileges,function(a){return c.getElementPrivileges(a,h)}),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-xs-12"},React.createElement("hr",null),React.createElement("strong",{className:"th-main-font"},webconLocale.cSecurityAdd,":"),React.createElement("div",{className:"privilegesContainer"},React.createElement("div",{className:"privilegesPicker"},g),React.createElement("div",{className:"privilegesDropDownAndBtnContainer"},React.createElement("div",{className:"addPrivilegesDropDownContainer"},j),React.createElement("button",{type:"button",className:"addPrivilegesBtnContainer btn btn-default ms-promotedActionButton",onClick:this.addPrivileges},i,React.createElement("span",{className:"addPrivilegesBtnText ms-core-defaultFont"},webconLocale.cSecurityAddButton))))))),React.createElement(b.PopupFooterTemplate,null,l))}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{},c=a.mixins;return b.WFSelectAttCategory=createReactClass({displayName:"WFSelectAttCategory",propTypes:{name:PropTypes.string.isRequired},componentDidMount:function(){this.props.params.chooseCategory&&this.loadCategories(),this.refAddButton&&ReactDOM.findDOMNode(this.refAddButton).focus()},componentWillMount:function(){this.chooseCategory=!0},mixins:[c.WFUploadAttachmentLogic],getMobileButtons:function(){var a=this;return React.createElement("div",null,React.createElement("button",{className:"btn btn-success btn-lg btn-block",type:"button",onClick:this.handleAdd,ref:function(b){a.refAddButton=b}},React.createElement("i",{className:"glyphicon glyphicon-plus"}),React.createElement("span",null," ",webconLocale.cAddAttachment)),React.createElement("button",{className:"btn btn-default btn-lg btn-block",type:"button",onClick:this.handleCancel},webconLocale.cCancel))},getDesktopButtons:function(){return React.createElement("div",{className:"btn-group"},React.createElement("button",{className:"btn btn-primary accept-button",type:"button",onClick:this.handleAdd},webconLocale.cAddAttachment),React.createElement("button",{className:"btn btn-default default-button",type:"button",onClick:this.handleCancel},webconLocale.cCancel))},handleAdd:function(){var a=this.state.selected;this.props.params.addCallback(a)},handleCancel:function(){this.props.params.cancelCallback()},render:function(){var a=this.props.params,c=this.prepareCategories();return React.createElement(b.PopupTemplate,{isVisible:a.isVisible},React.createElement(b.PopupHeaderTemplate,{closeFunction:this.props.params.cancelCallback},React.createElement(b.PopupTitleTemplate,{title:a.mediaHeading})),React.createElement(b.PopupBodyTemplate,null,React.createElement("div",{className:"well"},React.createElement(b.JsDropDown,{name:"addWithCategoryDropDown",selectedValue:c.selectedItem,items:c.categories,onChange:this.change}),a.isMobileDevice?this.getMobileButtons():React.createElement("span",null))),React.createElement(b.PopupFooterTemplate,null,a.isMobileDevice?React.createElement("span",null):this.getDesktopButtons()))}}),a}(window.webcon||{}),window.webcon=function(a){return(a.views=a.views||{}).PopupBodyPickerTemplate=createReactClass({displayName:"PopupBodyPickerTemplate",render:function(){return React.createElement("section",{className:"picker-popup-content"},React.createElement("div",{className:"picker-search"},this.props.search),React.createElement("div",{className:"picker-popup-body"},this.props.table))}}),a}(window.webcon||{}),window.webcon=function(a){return(a.views=a.views||{}).PopupBodyTemplate=createReactClass({displayName:"PopupBodyTemplate",render:function(){var a="";return this.props.className&&(a+=" "+this.props.className),React.createElement("section",{className:a},this.props.children)}}),a}(window.webcon||{}),window.webcon=function(a){return(a.views=a.views||{}).PopupFooterTemplate=createReactClass({displayName:"PopupFooterTemplate",render:function(){return React.createElement("footer",{className:"Menu text-right"},this.props.children)}}),a}(window.webcon||{}),window.webcon=function(a){return(a.views=a.views||{}).PopupHeaderTemplate=createReactClass({displayName:"PopupHeaderTemplate",componentDidMount:function(){document.body.addEventListener("keydown",this.handleKeyPressed,!0)},componentWillUnmount:function(){document.body.removeEventListener("keydown",this.handleKeyPressed,!0)},getCloseButton:function(){if(this.props.closeFunction){var a="";return Injector.resolve(["IconRepository"],function(b){a=b.getCloseDialogButtonImage()},this),React.createElement("span",{className:"ms-dlgTitleBtns close-popup-button",onClick:this.props.closeFunction},a)}},handleKeyPressed:function(a){27===a.keyCode&&this.props.closeFunction()},render:function(){var a="";this.props.className&&(a+=" "+this.props.className);var b=this.getCloseButton();return React.createElement("header",{className:a},b,this.props.children)}}),a}(window.webcon||{}),window.webcon=function(a){return(a.views=a.views||{}).PopupMediaTemplate=createReactClass({displayName:"PopupMediaTemplate",render:function(){var a="media-left "+(this.props.mediaSource?"media-img-background ms-storefront-appiconspan":""),b=React.createElement("img",{className:"media-object",src:this.props.mediaSource});return this.props.mediaImage&&(b=this.props.mediaImage),React.createElement("div",{className:"media modal-center-header"},React.createElement("div",{className:a,style:this.props.iconStyle},b),React.createElement("div",{className:"media-body modal-center-header-content"},React.createElement("h4",{className:"media-heading"},this.props.mediaHeading),this.props.children))}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{};return b.PopupContext=React.createContext(!1),b.PopupTemplate=createReactClass({displayName:"PopupTemplate",render:function(){var a;Injector.resolve(["DeviceInfo"],function(b){a=b.isModern()});var c=a?"modal-content":"modal-content modal-window-mobile";return React.createElement("div",{className:this.props.isVisible?"wfPopupPanelVisible":"wfPopupPanelHidden"},React.createElement("div",{className:"wfPopupPanelControl noSwipe"},React.createElement("div",{className:classNames("modal-dialog",this.props.customClassName)},React.createElement("div",{className:c},React.createElement(b.PopupContext.Provider,{value:!0},this.props.children)))))}}),a}(window.webcon||{}),window.webcon=function(a){return(a.views=a.views||{}).PopupTitleTemplate=createReactClass({displayName:"PopupTitleTemplate",render:function(){return React.createElement("div",{className:"media modal-center-header"},React.createElement("div",{className:"media-body modal-center-header-content"},React.createElement("h4",{className:"media-heading ms-dlg-heading"},this.props.title),this.props.children))}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{};return b.RulesTrace=createReactClass({displayName:"RulesTrace",propTypes:{},render:function(){var a=this.props.entries||[];return React.createElement("div",null,React.createElement("span",null,"Form rules trace log:"),React.createElement("ul",null,a.map(function(a,c){return React.createElement(b.RulesTraceEntry,{isExpanded:!0,entry:a,key:c})})))}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{};return b.RulesTraceEntry=createReactClass({displayName:"RulesTraceEntry",getInitialState:function(){return{expandChildren:!1}},onClick:function(){this.setState({expandChildren:!this.state.expandChildren})},render:function(){var a=this.props.entry,c=a.children||[],d=moment(a.time),e=classNames("rte",{expanded:this.props.isExpanded}),f=this.state.expandChildren;return React.createElement("li",{className:e},React.createElement("div",{onClick:this.onClick,className:"rte-info"},React.createElement("span",{className:"rte-time"},d.format("lll")),React.createElement("span",{className:"rte-name"}," ",a.name)),a.isSuccess?"":React.createElement("span",{className:"rte-error"},a.error),React.createElement("ul",null,c.map(function(a,c){return React.createElement(b.RulesTraceEntry,{isExpanded:f,entry:a,key:c})})))}}),a}(window.webcon||{}),Injector.instance("Swipe",["FormInfo"],function(a){function b(){$(".rightBar .btn:not(:focus):first").focus()}function c(){f.status?($("body").removeClass("statusBar"),f.status=!1):f.toolbox||($("body").addClass("toolBox"),f.toolbox=!0),b()}function d(){f.toolbox?($("body").removeClass("toolBox"),f.toolbox=!1):!f.status&&a.showStatusPanel&&($("body").addClass("statusBar"),f.status=!0),b()}function e(){$("body").removeClass("statusBar"),$("body").removeClass("toolBox"),f.status=!1,f.toolbox=!1}var f={status:!1,toolbox:!1};return{left:c,right:d,clear:e,active:f}}),window.webcon=function(a){var b=a.views=a.views||{};return b.BreakpointResizeDetector=createReactClass({displayName:"BreakpointResizeDetector",propTypes:{breakpoints:PropTypes.objectOf(PropTypes.number).isRequired,onBreakpointChanged:PropTypes.func,resizableElementId:PropTypes.string},mixins:[a.mixins.PureControl],createResizeObserver:function(a){var b=this,c=_.chain(this.props.breakpoints).map(function(a,b){return{breakpoint:b,maxWidth:a||Number.MAX_VALUE}}).sortBy("maxWidth").value();a.forEach(function(a){var d=a.contentRect.width;b.animationFrameID=window.requestAnimationFrame(function(){if(!b.skipOnMount){var a=_.find(c,function(a){return d<=a.maxWidth});b.state&&a.breakpoint!==b.state.breakpoint&&(b.props.onBreakpointChanged(a.breakpoint),b.setState({breakpoint:a.breakpoint}))}b.skipOnMount=!1})})},getInitialState:function(){this.skipOnMount=!1;var a=this.createResizeObserver;return this.ro=new ResizeObserver(a),this.animationFrameID=null,{breakpoint:void 0}},componentDidMount:function(){var a=this.props.resizableElementId,b=a?document.getElementById(a):this.elementRef;this.ro.observe(b)},componentWillUnmount:function(){var a=this.props.resizableElementId,b=a?document.getElementById(a):this.elementRef;this.ro.unobserve(b),window.cancelAnimationFrame(this.animationFrameID)},render:function(){var a=this;return React.createElement("div",{ref:function(b){a.elementRef=b}},React.cloneElement(React.Children.only(this.props.children),{breakpoint:this.state.breakpoint}))}}),b.BreakpointResizeDetector.defaultProps={onBreakpointChanged:_.noop,resizableElementId:void 0},a}(window.webcon||{}),window.webcon=function(a){return(a.views=a.views||{}).BreakpointResizePanel=createReactClass({displayName:"BreakpointResizePanel",propTypes:{breakpoint:PropTypes.string.isRequired,className:PropTypes.string},mixins:[a.mixins.PureControl],render:function(){return React.createElement("div",{className:classNames(this.props.className,this.props.breakpoint)},this.props.children)}}),a}(window.webcon||{}),window.webcon=function(a){return(a.views=a.views||{}).RelatedDocumentsContent=createReactClass({displayName:"RelatedDocumentsContent",render:function(){return React.createElement("div",null,"inne zakadki")}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{},c=a.mixins;return b.AttachmentControl=createReactClass({displayName:"AttachmentControl",mixins:[c.PureControl],getInitialState:function(){var a=this;return{activeTabId:0,actions:{deleteAtt:function(b){Injector.resolve(["AttachmentController","PopupController"],function(c,d){d.showWFConfirmAction(webconLocale.cDelete,webconLocale.cDeleteConfirm,function(){c.deleteAttachment(b.attId,function(){var b=a.getIsConversationsTabVisible(a.props.attachments);a.setState({activeTabId:1!==a.state.activeTabId||b?a.state.activeTabId:0,isConversationsTabVisible:b})},_.noop)})})},downloadAtt:function(a){Injector.resolve(["AttachmentsDownloadService"],function(b){b.download(a.attId,a.version)})},editAtt:function(a){Injector.resolve(["AttachmentsDownloadService"],function(b){b.edit(a.attId)})},editInfo:function(b){a.props.editInfo(b),a.areAttachmentCategories&&(a.props.categoriesLoadRequest(),Injector.resolve(["AttachmentController"],function(b){b.getCategories(function(b){a.props.categoriesLoadSuccess(b)},_.noop)}))},execAction:function(a,b){Injector.resolve(["AttachmentActionsController"],function(c){c.execAction(a,b)})},handleIconClick:function(a,b,c){2!==a.button&&(a.ctrlKey||1===a.button?Injector.resolve(["AttachmentsPreviewService"],function(a){a.previewInNewWindow(node)}):Injector.resolve(["AttachmentIconActionService"],function(a){a.handleIconClick(b,null,null,c)}))},toggleGroup:function(b){a.props.toggleGroup(b)},overwriteAtt:function(b){Injector.resolve(["PopupController"],function(c){c.showOverwriteAtt(b,a.addAttachment,a.handleUploadStart,a.handleUploadFailed)})},previewAtt:function(a){
Injector.resolve(["AttachmentsPreviewService"],function(b){b.preview(a)})},previewAttInNewWindow:function(a){Injector.resolve(["AttachmentsPreviewService"],function(b){b.previewInNewWindow(a)})},copyAttLinkToClipboard:function(a){Injector.resolve(["PortalAttachmentClipboardService","AttachmentsUrlBuilder"],function(b,c){b.copyUrlToClipboard(c.buildAttachmentLinkForClipboard(a))})}},isConversationsTabVisible:a.getIsConversationsTabVisible(a.props.attachments)}},componentWillMount:function(){Injector.resolve(["FormInfo","DeviceInfo"],function(a,b){this.editMode=a.editMode&&a.allowAddAndDeleteAttachments,this.areAttachmentCategories=a.areAttachmentCategories,this.isNative=b.isNativeMobileApp(),this.isDocumentTemplate=a.isDocumentTemplate},this),this.isDocumentTemplate&&this.state.isConversationsTabVisible&&this.setActiveTab(1)},componentWillReceiveProps:function(a){if(this.props.attachments!==a.attachments){var b=this.getIsConversationsTabVisible(a.attachments);this.setState({isConversationsTabVisible:b})}},setActiveTab:function(a){var b=this;b.state.activeTabId!==a&&b.setState({activeTabId:a},function(){window.model.attachmentConfig.showSubWorkflowsAttachments&&(1!==a||b.props.statuses.conversations.isRequested||b.props.statuses.conversations.isLoading?2!==a||b.props.statuses.all.isRequested||b.props.statuses.all.isLoading||b.loadRelated():b.loadRelatedConversations())})},loadCurrent:function(){Injector.resolve(["AttachmentController"],function(a){a.loadCurrentAttachments()})},loadCurrentConversations:function(){Injector.resolve(["AttachmentController"],function(a){a.loadCurrentConversations()})},loadRelated:function(){Injector.resolve(["AttachmentController"],function(a){a.loadRelatedAttachments()})},loadRelatedConversations:function(){Injector.resolve(["AttachmentController"],function(a){a.loadRelatedConversations()})},addAttachment:function(a){var b=this;if(a.isLastFileDone){var c=_.chain(a.queue).filter(function(a){return console.log(a),a.isSkipped}).map(function(a){return a.fileName}).value();c.length>0&&Injector.resolve(["PopupController"],function(a){a.showWFAlert(webconLocale.cAddingMessagesTitle,webconLocale.cAddingMessagesFollowingMessagesHaveNotBeedAdded+" \r\n"+_.map(c,function(a){return" "+a}).join(", \r\n"))})}if(a.isSkipped)return void Injector.resolve(["AttachmentController"],function(b){b.addAttachment(a)});Injector.resolve(["AttachmentController","ModelMapper"],function(c,d){a.nodes[0].nodeType===d.attachmentNodeType.file&&1===b.state.activeTabId?b.setActiveTab(0):a.nodes[0].nodeType===d.attachmentNodeType.message&&1!==b.state.activeTabId&&(b.state.isConversationsTabVisible?b.setActiveTab(1):b.setState({isConversationsTabVisible:!0},function(){b.setActiveTab(1)})),c.addAttachment(a)})},addAttachmentNative:function(a){var b=this;Injector.resolve(["AttachmentController"],function(c){1===b.state.activeTabId&&b.setActiveTab(0),c.addAttachmentNative(a)})},getIsConversationsTabVisible:function(a){var b;return Injector.resolve(["AttachmentsFinder"],function(c){var d=c.getCurrentConversationsFlatList(a);b=d.length>0||window.model.attachmentConfig.showSubWorkflowsAttachments}),b},handleAddClick:function(){var a=this;Injector.resolve(["PopupController"],function(b){a.areAttachmentCategories&&!a.isNative?b.showAddAttachmentWithCategory(a.addAttachment,a.handleUploadStart,a.handleUploadFailed,a.handleUploadAdd):a.isNative&&b.showAddAttachmentWithCategoryInNative(a.addAttachmentNative,a.handleUploadStart,a.handleUploadFailed,a.handleUploadAdd)})},handleUploadAdd:function(a){Injector.resolve(["AttachmentsFileUploadHandler"],function(b){b.handleUploadAdd(a)})},handleUploadStart:function(a){this.props.addAttachmentRequest(a)},handleUploadFailed:function(a){this.props.addAttachmentFailed(a)},render:function(){var a,c,d,e;Injector.resolve(["ConnectedCurrentTabContent","ConnectedConversationsTabContent","ConnectedAllTabContent","AttachmentsCopyPasteService"],function(b,f,g,h){a=b,c=f,d=g,e=function(a,b){h.toggleOverlay(a,b)}});var f=[{control:React.createElement(a,{actions:this.state.actions}),displayName:webconLocale.cAttControlTabAttachments,fieldName:"attachments",icon:React.createElement("i",{className:"icon ms-Icon ms-Icon--Attach"}),id:0,isVisible:!this.isDocumentTemplate||!this.state.isConversationsTabVisible},{control:React.createElement(c,{actions:this.state.actions}),displayName:webconLocale.cAttControlTabConversations,fieldName:"mail-attachments",icon:React.createElement("i",{className:"icon ms-Icon ms-Icon--Mail"}),id:1,isVisible:this.state.isConversationsTabVisible},{control:React.createElement(d,{actions:this.state.actions}),displayName:webconLocale.cAttControlTabAll,fieldName:"all-attachments",icon:React.createElement("i",{className:"icon ms-Icon ms-Icon--FabricOpenFolderHorizontal"}),id:2,isVisible:!this.isDocumentTemplate}];return React.createElement(b.BreakpointResizeDetector,{breakpoints:{"attachment-tab-panel-xs":360,"attachment-tab-panel-sm":396,"attachment-tab-panel-md":580,"attachment-tab-panel-lg":void 0}},React.createElement(b.AttachmentTabPanel,{activeTabId:this.state.activeTabId,addAttachment:this.addAttachment,attachments:this.props.attachments,handleAddClick:this.handleAddClick,isAddButtonDisabled:this.props.statuses.current.isLoading||this.props.statuses.currentConversations.isLoading||!this.editMode||this.isDocumentTemplate&&this.props.attCount>0,members:f,setActiveTab:this.setActiveTab,uploadAddCallback:this.handleUploadAdd,uploadStart:this.handleUploadStart,uploadFailed:this.handleUploadFailed,onClick:e}))}}),a}(window.webcon||{}),window.webcon=function(a){return(a.views=a.views||{}).AttachmentTab=createReactClass({displayName:"AttachmentTab",propTypes:{attachments:PropTypes.arrayOf(PropTypes.object).isRequired,item:PropTypes.object.isRequired,control:PropTypes.element.isRequired,isActive:PropTypes.bool.isRequired,isVisible:PropTypes.bool.isRequired},mixins:[a.mixins.PureControl],render:function(){var a=this;return this.props.isVisible&&React.createElement("div",{className:"tab-pane"+(this.props.isActive?" active":""),id:this.props.item.fieldName,key:"AttachmentTabPane_"+this.props.item.id,ref:function(b){a.tab=b},role:"tabpanel"},this.props.isActive&&React.cloneElement(this.props.control,{attachments:this.props.attachments}))}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{};return b.AttachmentTabPanel=createReactClass({displayName:"AttachmentTabPanel",propTypes:{activeTabId:PropTypes.number.isRequired,members:PropTypes.arrayOf(PropTypes.object),onClick:PropTypes.func.isRequired},mixins:[a.mixins.PureControl],componentWillMount:function(){Injector.resolve(["FormInfo","DeviceInfo","ClientInfo"],function(a,b,c){this.editMode=a.editMode&&a.allowAddAndDeleteAttachments,this.areAttachmentCategories=a.areAttachmentCategories,this.isNative=b.isNativeMobileApp(),this.isIE=b.isBrowserIE(),this.locale=c.language},this)},componentDidMount:function(){var a=this;a.editMode&&!a.isNative&&Injector.resolve(["AttachmentsDropService","AttachmentsUploadService"],function(b,c){a.dragDropPlugin=b.registerUpload(a.dropfileupload,a.dropzone,a.props.addAttachment,a.props.uploadStart,a.props.uploadFailed,a.props.uploadAddCallback),a.areAttachmentCategories||c.registerUpload(a.fileupload,a.props.addAttachment,a.props.uploadStart,a.props.uploadFailed,a.props.uploadAddCallback)},a)},componentWillUnmount:function(){this.dragDropPlugin&&this.dragDropPlugin.destroy()},handleTabClick:function(a,b){b.preventDefault(),this.props.setActiveTab(a)},handleAddClick:function(){this.props.handleAddClick()},handleControlClick:function(a){var b=this;b.props.isAddButtonDisabled||b.props.onClick(a,b.dropzone)},handleActiveXButton:function(){var a=void 0,b=void 0;try{b=new ActiveXObject("WebCon.Solutions.BPSActiveXControls.UploadFileClient")}catch(a){return void this.renderNotInstalledActiveXError()}var c=0;Injector.resolve(["ActiveXVersion"],function(a){c=a});try{b.LanguageVersion=this.locale,b.RequiredVersion=c,a=b.GetFileFromClipboard()}catch(a){return void this.renderWrongVersionActiveXError()}var d=b,e=d.fileName,f=d.fileType;Injector.resolve(["AttachmentsCopyPasteService"],function(b){b.uploadGivenFilesFromActiveX(a,e,f)})},renderNotInstalledActiveXError:function(){Injector.resolve(["PopupController"],function(a){a.showWFAlert(webconLocale.cAttachmentsActiveXInstallationErrorTitle,React.createElement("div",null,React.createElement("div",null,webconLocale.cAttachmentsActiveXInstallationError,React.createElement("a",{href:this.getActiveXMsiPath()}," ",webconLocale.cAttachmentsActiveXErrorClickHere," ")),React.createElement("div",null,webconLocale.cAttachmentsActiveXErrorRestart)))},this)},renderWrongVersionActiveXError:function(){Injector.resolve(["PopupController"],function(a){a.showWFAlert(webconLocale.cAttachmentsActiveXVersionErrorTitle,React.createElement("div",null,React.createElement("div",null,webconLocale.cAttachmentsActiveXVersionError,React.createElement("a",{href:this.getActiveXMsiPath()}," ",webconLocale.cAttachmentsActiveXErrorClickHere," ")),React.createElement("div",null,webconLocale.cAttachmentsActiveXErrorRestart)),null)},this)},getActiveXMsiPath:function(){var a="";return Injector.resolve(["$Window"],function(b){return a=b.location.origin+((b.initModel?b.initModel.runningAddress:"")||"")}),a+"/api/plugins/uploadfileplugin"},getUploadFileIcon:function(){var a="";return Injector.resolve(["IconRepository"],function(b){a=b.getAddAttachmentIcon()}),a},getPasteFileIcon:function(){var a="";return Injector.resolve(["IconRepository"],function(b){a=b.getPasteAttachmentIcon()}),a},render:function(){var c=this,d=this.props.activeTabId,e=this.props.members.map(function(a){var e=React.createElement("div",{className:"tab-tooltip-content"},React.createElement("div",{className:"tab-tooltip-content-name"},a.displayName),a.description?React.createElement("div",{className:"tab-tooltip-content-description"},a.description):null);return a.isVisible&&React.createElement(b.JsApp.Tooltip,{key:"Tab_"+a.id,popoverClassName:"tabs-panel-tooltip",trigger:"hover",content:e},React.createElement("li",{className:d===a.id?" active":"",key:"AttachmentTab_"+a.id,role:"presentation"},React.createElement("a",{href:"#"+a.fieldName,className:a.fieldName+"-link","aria-controls":a.fieldName,"aria-expanded":d===a.id?"true":"false",role:"tab",onClick:c.handleTabClick.bind(c,a.id)},a.icon?a.icon:"",React.createElement("span",null,a.displayName))))}),f=this.props.members.map(function(a){var e=a.controls;return React.createElement(b.AttachmentTab,{attachments:c.props.attachments,item:a,control:a.control,key:"AttachmentTabPane_"+a.id,isActive:d===a.id,isVisible:a.isVisible,members:e})}),g={};a.env===Injector.env.lite&&Injector.resolve(["AttachmentsCopyPasteService"],function(a){g={outlineColor:a.getOutlineColor()}});var h="";Injector.resolve(["$Window"],function(a){h=a.model.attachmentConfig.enableAddDelete});var i;return Injector.resolve(["AttachmentActionsAvailabilityService"],function(a){i=a.isActiveXPasteAvailable()}),React.createElement("div",{className:classNames("wfTabPanel","attachment-tab-panel","drop-target","tab-panel",this.props.breakpoint),ref:function(a){c.dropzone=a},style:g,onClick:this.handleControlClick},React.createElement("ul",{className:"nav nav-tabs ms-clientcontrol-chromeheader",role:"tablist"},e,React.createElement("li",{className:"attachment-tab-buttons-li"},React.createElement("div",{className:"attachment-tab-buttons"},this.editMode&&h?React.createElement("div",{className:"fileinput-button",style:this.props.isAddButtonDisabled?{display:"none"}:{}},React.createElement("button",{className:"attachment-tab-button-add",disabled:this.props.isAddButtonDisabled,onClick:this.handleAddClick,type:"button"},this.getUploadFileIcon(),webconLocale.cAttControlAddAttachment),this.areAttachmentCategories||c.isNative?React.createElement("span",null):React.createElement("input",{ref:function(a){c.fileupload=a},id:"fileupload",type:"file",multiple:!0,name:"file"})):React.createElement("span",null),i&&h&&React.createElement(b.JsApp.Tooltip,{trigger:"hover",content:webconLocale.cAddFromClipBoard,placement:"top",delay:500,showArrowCentered:!1},React.createElement("div",{className:"fileinput-button"},React.createElement("button",{className:"attachment-tab-button-activex",disabled:this.props.isAddButtonDisabled,onClick:this.handleActiveXButton,type:"button"},this.getPasteFileIcon()))),this.editMode&&h&&!this.isNative&&React.createElement("input",{className:"fileupload-drop",disabled:this.props.isAddButtonDisabled?"disabled":"",ref:function(a){c.dropfileupload=a},id:"dropfileupload",type:"file",multiple:!0,name:"file"})))),React.createElement("div",{className:"tab-content"},f))}}),a}(window.webcon||{}),Injector.instance("ConnectedAttachmentControl",[],function(){function a(a){return{attachments:a.attachments.attachments,statuses:a.attachments.statuses,attCount:a.attachments.attachmentsCount}}function b(a){return{addAttachmentRequest:function(b){a(c.AttachmentsActions.createAddAttachmentRequestAction(b))},addAttachmentFailed:function(b){a(c.AttachmentsActions.createAddAttachmentFailedAction(b))},editInfo:function(b){a(c.AttachmentsActions.createEditInfoAction(b))},categoriesLoadRequest:function(){a(c.AttachmentsActions.createCategoriesLoadRequestAction())},categoriesLoadSuccess:function(b){a(c.AttachmentsActions.createCategoriesLoadSuccessAction(b))},loadAllFailed:function(){a(c.AttachmentsActions.createLoadAllFailedAction())},loadAllRequest:function(b){a(c.AttachmentsActions.createLoadAllRequestAction(b))},loadAllSuccess:function(b){a(c.AttachmentsActions.createLoadAllSuccessAction(b))},loadCurrentConversationsFailed:function(b){a(c.AttachmentsActions.createLoadCurrentConversationsFailedAction(b))},loadCurrentConversationsRequest:function(b){a(c.AttachmentsActions.createLoadCurrentConversationsRequestAction(b))},loadCurrentConversationsSuccess:function(b){a(c.AttachmentsActions.createLoadCurrentConversationsSuccessAction(b))},loadCurrentFailed:function(b){a(c.AttachmentsActions.createLoadCurrentFailedAction(b))},loadCurrentRequest:function(b){a(c.AttachmentsActions.createLoadCurrentRequestAction(b))},loadCurrentSuccess:function(b){a(c.AttachmentsActions.createLoadCurrentSuccessAction(b))},loadConversationsFailed:function(b){a(c.AttachmentsActions.createLoadConversationsFailedAction(b))},loadConversationsRequest:function(b){a(c.AttachmentsActions.createLoadConversationsRequestAction(b))},loadConversationsSuccess:function(b){a(c.AttachmentsActions.createLoadConversationsSuccessAction(b))},toggleGroup:function(b){a(c.AttachmentsActions.createToggleGroupAction(b))}}}var c=webcon.redux=webcon.redux||{};return ReactRedux.connect(a,b)(webcon.views.AttachmentControl)}),Injector.factory("AllModelMapper",["FormInfo","ModelMapper","TreeHelper","AttachmentsIconService","AttachmentActionsAvailabilityService"],function(a,b,c,d,e){function f(a,c){var d=_.findIndex(a,function(a){return b.isCurrent(a)}),e=a&&a.length>0&&d>=0&&a[d].nodes&&1===a[d].nodes.length&&"cat_0"===a[d].nodes[0].id;return{columns:[{displayName:"",id:0},{displayName:webconLocale.cAttControlColumnModified,id:2},{displayName:"",id:5}],rows:void 0!==a&&null!==a?_.flatten(a.map(function(a,b){return g(a,b,c,null,e)}),!0):[]}}function g(a,c,d,e,f){var g;switch(a.nodeType){case b.attachmentNodeType.attachmentsGroup:g=h(a,c,d,e,f);break;case b.attachmentNodeType.bpsElement:g=i(a,c,d,e,f);break;case b.attachmentNodeType.conversation:g=j(a,c,d,e,f);break;case b.attachmentNodeType.file:g=k(a,c,d,e,f);break;case b.attachmentNodeType.group:g=l(a,c,d,e,f)}return g}function h(d,e,f,h,i){if(b.isCurrent(h)&&a.areAttachmentCategories&&!i||h.nodeType===b.attachmentNodeType.bpsElement&&h.shouldShowGroups&&!i){if(!c.findNode(d.nodes,function(a){return a.nodeType===b.attachmentNodeType.file||a.nodeType===b.attachmentNodeType.message}))return[];return[{id:d.id||e,isGroup:!0,cells:{0:{control:d.name,data:d,click:function(){f.toggleGroup(d.id)}}},data:d,dropData:b.isCurrent(h)?d.category:void 0,rows:_.flatten(d.nodes.map(function(a,b){return g(a,b,f)}),!0)}]}return _.flatten(d.nodes.map(function(a,b){return g(a,b,f)}),!0)}function i(a,b,c,d,e){return{id:a.id,isGroup:!0,cells:{0:{control:a.name,data:a,click:function(){c.toggleGroup(a.id)}}},data:a,rows:_.flatten(a.nodes.map(function(b,d){return g(b,d,c,a,e)}),!0)}}function j(a,b,c){return{id:a.id||b,isGroup:!0,cells:{0:{control:a.name,data:a,click:function(){c.toggleGroup(a.id)}}},data:a,rows:_.flatten(a.nodes.map(function(a,b){return g(a,b,c)}),!0)}}function k(a,b,c){var f,g=React.createElement("div",{className:"attachment-name-wrapper"},React.createElement("div",{className:"attachment-name",title:a.name,onMouseDown:function(b){return c.handleIconClick(b,a)}},a.name),a.description&&React.createElement("div",{className:"attachment-desc",title:a.description},a.description));Injector.resolve(["DateTimeFormatter"],function(b){f=b.formatDateWithTime(a.modificationDate)});var h=React.createElement("div",{className:"attachment-metadata-wrapper"},React.createElement("div",{className:"attachment-modified-by",title:a.modifiedBy},a.modifiedBy),React.createElement("div",{className:"attachment-last-modification",title:f},f)),i=d.getSmallIcon(a),j=e.isPreviewAvailable(a)?webconLocale.cAttMenuPreview:webconLocale.cAttMenuDownload;return{id:a.id,isLoading:a.isDeleting||a.isSaving,cells:{0:{control:g,icon:React.createElement("img",{title:j,onMouseDown:function(b){return c.handleIconClick(b,a)},src:i,style:{cursor:"pointer"}})},2:{control:h},5:{control:React.createElement(webcon.views.AttachmentMenuButton,{actions:c,className:"table-tree-button-wrapper",node:a,tab:"all"})}},data:a,rows:[]}}function l(a,c,d,e,f){var h="";switch(a.staticNodeType){case b.staticAttachmentTreeNodeType.current:h=webconLocale.cAttControlGroupCurrent;break;case b.staticAttachmentTreeNodeType.conversations:h=webconLocale.cAttControlGroupConversations;break;case b.staticAttachmentTreeNodeType.custom:case b.staticAttachmentTreeNodeType.relatedChild:case b.staticAttachmentTreeNodeType.relatedParent:h=a.name}return{id:a.id||c,isGroup:!0,isLoading:a.isLoading,cells:{0:{control:h,data:a,click:function(){d.toggleGroup(a.id)}}},data:a,rows:_.flatten(a.nodes.map(function(b,c){return g(b,c,d,a,f)}),!0)}}return{mapModelToTree:f}}),window.webcon=function(a){var b=a.views=a.views||{},c=a.mixins;return b.AllTabContent=createReactClass({displayName:"AllTabContent",mixins:[c.PureControl],render:function(){return this.props.isEmpty&&!this.props.isLoading?React.createElement(b.AttachmentsPlaceholder,{isEditable:this.props.isEditable}):React.createElement(b.TreeTable,{className:"all-attachments",data:this.props.model})}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{},c=a.mixins,d={none:0,customAction:1,delete:2,download:3,editFile:4,editInfo:5,overwrite:6,preview:7,previewInNewWindow:8,detach:9,copyLinkToClipboard:10},e=[{type:d.download},{type:d.preview},{type:d.previewInNewWindow},{type:d.editInfo},{type:d.editFile},{type:d.overwrite},{type:d.delete},{type:d.detach},{type:d.copyLinkToClipboard}];return b.AttachmentMenuButton=createReactClass({displayName:"AttachmentMenuButton",mixins:[c.PureControl],propTypes:{actions:PropTypes.object.isRequired,node:PropTypes.object.isRequired,tab:PropTypes.string.isRequired,isAttachmentColumnMenu:PropTypes.bool,deleted:PropTypes.bool,disabled:PropTypes.bool,modifiers:PropTypes.object},resolveMenuItemIcon:function(a){switch(a){case d.customAction:return React.createElement("i",{className:"ms-Icon ms-Icon--TriggerUser"});case d.delete:return React.createElement("i",{className:"ms-Icon ms-Icon--Delete"});case d.detach:return React.createElement("i",{className:"ms-Icon ms-Icon--RemoveLink"});case d.download:return React.createElement("i",{className:"ms-Icon ms-Icon--Download"});case d.editFile:return React.createElement("i",{className:"ms-Icon ms-Icon--PageEdit"});case d.editInfo:return React.createElement("i",{className:"ms-Icon ms-Icon--EditSolid12"});case d.overwrite:return React.createElement("i",{className:"ms-Icon ms-Icon--SyncOccurence"});case d.preview:return React.createElement("i",{className:"ms-Icon ms-Icon--Search"});case d.previewInNewWindow:return React.createElement("i",{className:"ms-Icon ms-Icon--SearchAndApps"});case d.copyLinkToClipboard:return React.createElement("i",{className:"ms-Icon ms-Icon--FileSymlink"});default:return React.createElement("i",{className:"ms-Icon ms-Icon--StarburstSolid"})}},createItems:function(a){var b,c,f,g,h={action:function(){},displayName:"",isDisabled:!1,isVisible:!0},i=this;if(Injector.resolve(["FormInfo","DeviceInfo","AttachmentActionsAvailabilityService"],function(a,d,e){b=!1===a.editMode,c=d.isMobile(window.navigator),f=e,g=a.isDocumentTemplate}),a.deleted)return[Object.assign({},h,{action:function(b){a.actions.detachAtt(b)},displayName:webconLocale.cAttMenuDetach,isVisible:!0,type:d.detach})];var j=_.map(e,function(e){var j;switch(e.type){case d.customAction:break;case d.delete:j=Object.assign({},h,{action:function(b){a.actions.deleteAtt(b)},displayName:webconLocale.cAttMenuDelete,isDisabled:a.node.isDeleting,isVisible:!a.isAttachmentColumnMenu&&f.isDeleteAvailable(a.node)});break;case d.detach:j=Object.assign({},h,{action:function(b){a.actions.detachAtt(b)},displayName:webconLocale.cAttMenuDetach,isDisabled:a.node.isDeleting,isVisible:a.isAttachmentColumnMenu&&!b});break;case d.download:j=Object.assign({},h,{action:function(b){a.actions.downloadAtt(b)},displayName:webconLocale.cAttMenuDownload,isDisabled:a.node.isDeleting});break;case d.editFile:j=Object.assign({},h,{action:function(b){a.actions.editAtt(b)},displayName:webconLocale.cAttMenuEditFile,isDisabled:a.node.isDeleting,isVisible:f.isEditAvailable(a.node)});break;case d.editInfo:j=Object.assign({},h,{action:function(b){a.actions.editInfo(b)},displayName:webconLocale.cAttMenuEditAttributes,isDisabled:a.node.isEdited||a.node.isDeleting||a.node.isSaving,isVisible:a.node.canEdit&&a.node.isCurrent&&"current"===a.tab&&!b});break;case d.overwrite:j=Object.assign({},h,{action:function(b){a.actions.overwriteAtt(b)},displayName:webconLocale.cAttMenuOverwrite,isDisabled:a.node.isDeleting,isVisible:window.model.attachmentConfig.enableAddDelete&&a.node.canDelete&&a.node.isCurrent&&!b&&!c});break;case d.preview:j=Object.assign({},h,{action:function(b){a.actions.previewAtt(b)},displayName:webconLocale.cAttMenuPreview,isDisabled:a.node.isDeleting,isVisible:f.isPreviewAvailable(a.node)});break;case d.previewInNewWindow:j=Object.assign({},h,{action:function(b){a.actions.previewAttInNewWindow(b)},displayName:webconLocale.cAttMenuPreviewNewWindow,isDisabled:a.node.isDeleting,isVisible:f.isPreviewInNewWindowAvailable(a.node)});break;case d.copyLinkToClipboard:j=Object.assign({},h,{action:function(b){a.actions.copyAttLinkToClipboard(b.name)},displayName:webconLocale.cCopyLink,isDisabled:!1,isVisible:g})}return j.type=e.type,j.icon=i.resolveMenuItemIcon(e.type),j}),k=_.map(a.node.attachmentActions,function(c){return Object.assign({},h,{action:function(b){a.actions.execAction(b,c)},displayName:c.actionName,isVisible:a.node.canEdit&&!b,type:d.customAction,icon:i.resolveMenuItemIcon(d.customAction)})});return j.concat(k)},getInitialState:function(){return{items:this.createItems(this.props),isMenuOpen:!1}},componentWillReceiveProps:function(a){var b=this.createItems(a);this.setState({items:b})},handleMenuItemClick:function(a,b){2!==b.button&&(a.isDisabled||a.action(this.props.node))},closeMenu:function(){this.handleVisibilityChange(!1)},handleVisibilityChange:function(a){this.setState({isMenuOpen:a})},render:function(){var a=this,c=null;Injector.resolve(["IconRepository"],function(a){c=a.getMoreOptionsVerticalIcon()});var e=this.state.items.map(function(c,e){return c.isVisible?React.createElement(b.JsApp.DropdownMenuItem,{key:e,className:classNames("attachment-menu-item",_.findKey(d,function(a){return a===c.type}),{disabled:c.isDisabled}),onMouseDown:a.handleMenuItemClick.bind(a,c),leftIcon:c.icon,label:c.displayName}):""});return React.createElement(b.JsApp.DropdownMenuContainer,{placement:"bottom-end",content:e,onVisibilityChange:this.handleVisibilityChange,menuVisible:this.state.isMenuOpen,forceMenuClose:this.closeMenu,modifiers:a.props.modifiers},React.createElement("button",{type:"button",className:classNames("attachment-menu-button table-tree-menu-button btn",{"button-disabled":this.props.disabled}),disabled:this.props.disabled},c))}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{},c=a.mixins;return b.AttachmentsPlaceholder=createReactClass({displayName:"AttachmentsPlaceholder",mixins:[c.PureControl],render:function(){var a,b;return Injector.resolve(["DeviceInfo"],function(c){a=c.isMobile(window.navigator),b=c.isBrowserIE()}),React.createElement("div",{className:"no-attachments th-frm-bg1"},React.createElement("div",null,this.props.isEditable&&!a?b?webconLocale.cAttachmentsDropAttachmentHere:webconLocale.cAttachmentsDropOrPasteHere:webconLocale.cAttachmentsNoAttachments))}}),a}(window.webcon||{});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};Injector.instance("ConnectedAllTabContent",[],function(){function a(a,b){var c,d,e;return Injector.resolve(["AllModelMapper","FormInfo","ModelMapper","TreeHelper"],function(a,f,g,h){c=f.editMode&&f.allowAddAndDeleteAttachments,d=void 0===h.findNode(b.attachments,function(a){return a.nodeType===g.attachmentNodeType.file});var i=_.filter(b.attachments,function(a){return g.isPartOfAllAttachments(a)&&(a.isVirtual||a.nodes&&"object"===_typeof(a.nodes)&&a.nodes.length>0)}),j=Object.assign({},b.actions,{handleIconClick:function(a,c){b.actions.handleIconClick(a,c,{nodes:i})}});e=a.mapModelToTree(i,j)}),{isEditable:c,isEmpty:d,isLoading:a.attachments.statuses.all.isLoading||a.attachments.statuses.current.isLoading,model:e}}return ReactRedux.connect(a)(webcon.views.AllTabContent)}),Injector.instance("ConnectedAttachmentMenuButton",[],function(){function a(){return{}}function b(){return{}}return ReactRedux.connect(a,b)(webcon.views.AttachmentMenuButton)}),Injector.instance("ConnectedConversationsTabContent",[],function(){function a(a,b){var c,d,e;return Injector.resolve(["ConversationsModelMapper","FormInfo","ModelMapper","TreeHelper"],function(a,f,g,h){c=f.editMode&&f.allowAddAndDeleteAttachments,d=void 0===h.findNode(b.attachments,function(a){return a.nodeType===g.attachmentNodeType.message});var i=_.find(b.attachments,function(a){return g.isConversations(a)}),j=Object.assign({},b.actions,{handleIconClick:function(a,c){b.actions.handleIconClick(a,c,i)}});e=a.mapModelToTree(i,j)}),{isEditable:c,isEmpty:d,isLoading:a.attachments.statuses.conversations.isLoading||a.attachments.statuses.currentConversations.isLoading,model:e}}return ReactRedux.connect(a)(webcon.views.ConversationsTabContent)}),Injector.instance("ConnectedCurrentAttachmentButtons",[],function(){function a(){return{}}function b(){return{}}return ReactRedux.connect(a,b)(webcon.views.CurrentAttachmentButtons)}),Injector.instance("ConnectedCurrentAttachmentTile",[],function(){function a(a){return{categories:JSON.parse(JSON.stringify(a.attachments.categories))}}function b(a,b){return{cancelInfo:function(){a(c.AttachmentsActions.createCancelInfoAction(b.node))},saveInfoRequest:function(d,e){a(c.AttachmentsActions.createSaveInfoRequestAction(b.node,d,e))},saveInfoSuccess:function(d){a(c.AttachmentsActions.createSaveInfoSuccessAction(b.node,d))}}}var c=webcon.redux=webcon.redux||{};return ReactRedux.connect(a,b)(webcon.views.CurrentAttachmentTile)}),Injector.instance("ConnectedCurrentTabContent",[],function(){function a(a,b){var c,d,e;return Injector.resolve(["AttachmentsFinder","CurrentModelMapper","FormInfo","ModelMapper"],function(a,f,g,h){c=g.editMode&&g.allowAddAndDeleteAttachments,d=0===a.getCurrentAttachmentsFlatList(b.attachments).length;var i=_.find(b.attachments,function(a){return h.isCurrent(a)}),j=Object.assign({},b.actions,{handleIconClick:function(a,c){b.actions.handleIconClick(a,c,i)}});e=f.mapModelToTree(i,j)}),{isEditable:c,isEmpty:d,isLoading:a.attachments.statuses.current.isLoading,model:e}}return ReactRedux.connect(a)(webcon.views.CurrentTabContent)}),Injector.factory("ConversationsModelMapper",["ModelMapper","AttachmentsIconService","AttachmentActionsAvailabilityService"],function(a,b,c){function d(a,b){return{columns:[{displayName:"",id:0},{displayName:webconLocale.cAttControlColumnDateSent,id:2,type:"datetime"},{displayName:"",id:3}],rows:void 0!==a&&null!==a&&void 0!==a.nodes&&null!==a.nodes?_.flatten(a.nodes.map(function(a,c){return e(a,c,b)}),!0):[]}}function e(b,c,d){var e;switch(b.nodeType){case a.attachmentNodeType.attachmentsGroup:e=f(b,c,d);break;case a.attachmentNodeType.bpsElement:e=g(b,c,d);break;case a.attachmentNodeType.conversation:e=h(b,c,d);break;case a.attachmentNodeType.group:e=i(b,c,d);break;case a.attachmentNodeType.message:e=j(b,c,d)}return e}function f(a,b,c){return[{id:a.id||b,isGroup:!0,cells:{0:{control:a.name,data:a,click:function(){c.toggleGroup(a.id)}}},data:a,rows:_.flatten(a.nodes.map(function(a,b){return e(a,b,c)}),!0)}]}function g(a,b,c){return[{id:a.id,isGroup:!0,cells:{0:{control:a.name,data:a,click:function(){c.toggleGroup(a.id)}}},data:a,rows:_.flatten(a.nodes.map(function(a,b){return e(a,b,c)}),!0)}]}function h(a,b,c){return[{id:a.id||b,isGroup:!0,cells:{0:{control:a.name,data:a,click:function(){c.toggleGroup(a.id)}}},data:a,rows:_.flatten(a.nodes.map(function(a,b){return e(a,b,c)}),!0)}]}function i(b,c,d){var f="";switch(b.staticNodeType){case a.staticAttachmentTreeNodeType.current:f=webconLocale.cAttControlGroupCurrent;break;case a.staticAttachmentTreeNodeType.conversations:f=webconLocale.cAttControlGroupConversations;break;case a.staticAttachmentTreeNodeType.custom:case a.staticAttachmentTreeNodeType.relatedChild:case a.staticAttachmentTreeNodeType.relatedParent:f=b.name}return[{id:b.id||c,isGroup:!0,isLoading:b.isLoading,cells:{0:{control:f,data:b,click:function(){d.toggleGroup(b.id)}}},data:b,rows:_.flatten(b.nodes.map(function(a,b){return e(a,b,d)}),!0)}]}function j(a,d,e){var f,g=React.createElement("span",null,webconLocale.cAttControlMailFrom," ",React.createElement("strong",null,a.messageFrom)),h=a.description?React.createElement("div",{className:"attachment-name-wrapper"},React.createElement("div",{className:"attachment-name",title:a.messageFrom,onMouseDown:function(b){return e.handleIconClick(b,a)}},g," ",a.isLoading),React.createElement("div",{className:"attachment-desc",title:a.description},a.description)):React.createElement("span",null,g),i=b.getSmallIcon(a),j=c.isPreviewAvailable(a)?webconLocale.cAttMenuPreview:webconLocale.cAttMenuDownload;return f={id:a.id,isLoading:a.isDeleting||a.isSaving,cells:{0:{control:h,icon:React.createElement("img",{title:j,onMouseDown:function(b){return e.handleIconClick(b,a)},src:i,style:{cursor:"pointer"}})},2:{control:a.sentDate},3:{control:React.createElement(webcon.views.AttachmentMenuButton,{actions:e,className:"table-tree-button-wrapper",node:a,tab:"conversations"})}},data:a,rows:[]},[f]}return{mapModelToTree:d}}),window.webcon=function(a){var b=a.views=a.views||{},c=a.mixins;return b.ConversationsTabContent=createReactClass({displayName:"ConversationsTabContent",mixins:[c.PureControl],render:function(){return this.props.isEmpty&&!this.props.isLoading?React.createElement(b.AttachmentsPlaceholder,{isEditable:this.props.isEditable}):React.createElement(b.TreeTable,{className:"conversations",data:this.props.model})}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{},c=a.mixins;return b.CurrentAttachmentButtons=createReactClass({displayName:"CurrentAttachmentButtons",mixins:[c.PureControl],propTypes:{className:PropTypes.string,node:PropTypes.object.isRequired},handlePreviewButtonClick:function(a){
2!==a.button&&(this.props.actions.previewAttInNewWindow(this.props.node),a.preventDefault())},render:function(){var a,b=this,c=b.props.node;Injector.resolve(["AttachmentActionsAvailabilityService"],function(b){a=b});var d=0!=window.model.attachmentConfig.shortcutsMode,e=d&&a.isEditAvailable(c),f=d&&a.isPreviewInNewWindowAvailable(c);return React.createElement("div",{className:this.props.className},React.createElement("button",{title:webconLocale.cAttachmentDownloadButtonTooltip,className:"table-tree-menu-button btn",onClick:this.props.actions.downloadAtt.bind(this,c),type:"button"},React.createElement("i",{className:"ms-Icon ms-Icon--Download"}),React.createElement("span",null," ",webconLocale.cAttControlButtonDownload)),f?React.createElement("button",{title:webconLocale.cAttachmentPreviewInNewWindowButtonTooltip,className:"table-tree-menu-button btn",onMouseDown:b.handlePreviewButtonClick,type:"button",style:f?{}:{visibility:"hidden"}},React.createElement("i",{className:"ms-Icon ms-Icon--SearchAndApps"}),React.createElement("span",null," ",webconLocale.cAttControlButtonPreviewInNewWindow)):[],React.createElement("button",{title:webconLocale.cAttachmentEditButtonTooltip,className:"table-tree-menu-button btn",onClick:this.props.actions.editAtt.bind(this,this.props.node),type:"button",style:e?{}:{visibility:"hidden"}},React.createElement("i",{className:"ms-Icon ms-Icon--PageEdit"}),React.createElement("span",null," ",webconLocale.cAttControlButtonEditFile)))}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{},c=a.mixins;return b.CurrentAttachmentTile=createReactClass({displayName:"CurrentAttachmentTile",mixins:[c.PureControl],getInitialState:function(){var a;return Injector.resolve(["FormInfo"],function(b){a=b.areAttachmentCategories},this),{areAttCategorySupported:a,category:this.props.node.category,description:this.props.node.description,isDirty:!1,name:this.props.node.name,originalName:this.props.node.name,originalDescription:this.props.node.description,originalCategory:this.props.node.category,items:[],isMenuOpen:!1}},componentDidUpdate:function(a){this.props!==a&&(this.state.isDirty||this.setState({category:this.props.node.category,description:this.props.node.description,name:this.props.node.name}))},handleCategoryChange:function(a){var b=this,c=Object.assign({},b.props.node,{category:a});this.setState({category:a,isDirty:!0},function(){Injector.resolve(["AttachmentController"],function(a){a.updateAttachmentMetadata(c)})})},handleDescriptionChange:function(a){this.setState({description:a.target.value,isDirty:!0})},handleDescriptionBlur:function(a){var b=this,c=Object.assign({},b.props.node,{description:a.target.value});Injector.resolve(["AttachmentController"],function(a){a.updateAttachmentMetadata(c)})},handleNameChange:function(a){this.setState({name:a.target.value,isDirty:!0})},handleNameBlur:function(a){var b=this,c=Object.assign({},b.props.node,{name:a.target.value});Injector.resolve(["AttachmentController"],function(a){a.updateAttachmentMetadata(c)})},handleOk:function(){var a=this;Injector.resolve(["AttachmentController"],function(b){var c=Object.assign({},a.props.node,{category:a.state.category,description:a.state.description,name:a.state.name});b.validateFileName(c.name,!0)&&b.updateAttachment(c,function(){a.setState({originalName:a.state.name,originalDescription:a.state.description,isDirty:!1})},function(){a.setState({isDirty:!1})})})},handleCancel:function(){var a=this;a.props.cancelInfo();var b=Object.assign({},a.props.node,{category:a.state.originalCategory,description:a.state.originalDescription,name:a.state.originalName});Injector.resolve(["AttachmentController"],function(a){a.updateAttachmentMetadata(b)}),this.setState({name:a.state.originalName,description:a.state.originalDescription,category:a.state.originalCategory,isDirty:!1})},handleOnAttachmentIconClick:function(a){var b=this.props.node;this.props.actions.handleIconClick(a,b)},closeMenu:function(){this.handleVisibilityChange(!1)},handleVisibilityChange:function(a){this.setState({isMenuOpen:a})},handleMenuItemClick:function(a,b){2!==b.button&&this.handleCategoryChange(a)},render:function(){var a=this.props.node,c=a.isEdited,d=c?React.createElement("input",{type:"text",value:this.state.name,disabled:c&&a.saving,placeholder:webconLocale.cAttTileName,title:webconLocale.cAttTileName,onChange:this.handleNameChange,onBlur:this.handleNameBlur,className:"form-control"}):React.createElement("span",{title:a.name},a.name),e=c?React.createElement("input",{className:"attachment-description-input form-control",type:"text",value:this.state.description,placeholder:webconLocale.cAttTileDescription,title:webconLocale.cAttTileDescription,onChange:this.handleDescriptionChange,onBlur:this.handleDescriptionBlur}):React.createElement("span",{className:"attachment-description-value",title:a.description},a.description),f=null,g=null;Injector.resolve(["IconRepository"],function(a){f=a.getSaveAttachmentEditAttributes(),g=a.getCancelAttachmentEditAttributes()});var h,i,j,k=React.createElement("div",{className:"attachment-metadata-buttons"},React.createElement(b.JsApp.Tooltip,{trigger:"hover",content:webconLocale.cSave,delay:500},React.createElement("button",{type:"button",className:"btn table-tree-menu-button attachment-metadata-save",disabled:c&&a.saving,onClick:this.handleOk},f)),React.createElement(b.JsApp.Tooltip,{trigger:"hover",content:webconLocale.cCancel,delay:500},React.createElement("button",{type:"button",className:"btn table-tree-menu-button attachment-metadata-cancel",disabled:c&&a.saving,onClick:this.handleCancel},g))),l=a.modificationDate;Injector.resolve(["DateTimeFormatter","AttachmentsIconService","AttachmentActionsAvailabilityService","AttachmentController"],function(b,c,d,e){l=b.formatDateWithTime(a.modificationDate),h=c.getIcon(a),i=d,j=e});var m,n=0!=window.model.attachmentConfig.shortcutsMode;n&&(m=React.createElement(b.CurrentAttachmentButtons,{className:"table-tree-big-button-wrapper",actions:this.props.actions,node:a}));var o=this.state.areAttCategorySupported,p=this.props.categories.isLoading,q=this.props.categories.categories;this.state.category&&this.state.category.databaseValue&&!q.map(function(a){return j.idHashDefaultName(a)}).includes(j.idHashDefaultName(this.state.category))&&q.push(this.state.category);var r=this,s=null;Injector.resolve(["IconRepository"],function(a){s=a.getArrowDownIcon()});var j;Injector.resolve(["AttachmentController"],function(a){j=a});var t=q.map(function(a){var c=a.translatedName;return React.createElement(b.JsApp.DropdownMenuItem,{key:j.idHashDefaultName(a),className:"attachment-menu-item",onMouseDown:r.handleMenuItemClick.bind(r,a),label:c})}),u=null;if(o&&!p){var v;this.state.category&&this.state.category.translatedName&&(v=this.state.category.translatedName),v||void 0===this.props.categories.categories[0]||(v=this.props.categories.categories[0].translatedName),u=React.createElement(b.JsApp.DropdownMenuContainer,{placement:"bottom-start",content:t,onVisibilityChange:this.handleVisibilityChange,menuVisible:this.state.isMenuOpen,forceMenuClose:this.closeMenu},React.createElement("div",{className:"attachment-edit-category"},React.createElement("div",{className:"form-control "},v,React.createElement("span",{className:"attachment-menu-button__arrow"},s))))}var w=i.isPreviewAvailable(a)?webconLocale.cAttMenuPreview:webconLocale.cAttMenuDownload,x=classNames("attachment-name-wrapper",{"attachment-is-edited":c});return React.createElement("div",null,React.createElement("div",{className:"attachment-tile"},React.createElement("a",{title:w,className:"attachment-icon",onMouseDown:this.handleOnAttachmentIconClick},React.createElement("img",{src:h})),React.createElement("div",{className:x},React.createElement("div",{className:"attachment-name",onMouseDown:c?void 0:this.handleOnAttachmentIconClick},d),c&&u,(a.description||c)&&React.createElement("div",{className:"attachment-desc"},e),!c&&React.createElement("div",{className:"attachment-last-modification",title:webconLocale.cAttControlAttDescModified+" "+l+" "+webconLocale.cAttControlAttDescBy+" "+a.modifiedBy+" "+webconLocale.cAttControlAttDescVersion+" "+(a.version+1)},React.createElement("span",null,webconLocale.cAttControlAttDescModified," "),React.createElement("strong",{className:"attachment-modified-date"},l),React.createElement("span",null," ",webconLocale.cAttControlAttDescBy," "),React.createElement("strong",{className:"attachment-modified-by"},a.modifiedBy),React.createElement("span",null,webconLocale.cAttControlAttDescVersion," "),React.createElement("strong",{className:"attachment-version"},a.version+1))),c?React.createElement("div",{className:"attachment-metadata-buttons-wrapper"},k):null),n&&m)}}),a}(window.webcon||{}),Injector.factory("CurrentModelMapper",["FormInfo","ModelMapper"],function(a,b){function c(a,b){var c=a.nodes&&1===a.nodes.length&&"cat_0"===a.nodes[0].id;return{columns:[{displayName:webconLocale.cAttControlColumnName,id:0},{displayName:"",id:1},{displayName:"",id:2}],rows:void 0!==a&&null!==a&&void 0!==a.nodes&&null!==a.nodes?_.flatten(a.nodes.map(function(a,e){return d(a,e,b,c)}),!0):[]}}function d(a,c,d,g){var h=[];switch(a.nodeType){case b.attachmentNodeType.attachmentsGroup:h=e(a,c,d,g);break;case b.attachmentNodeType.file:h=f(a,c,d)}return h}function e(b,c,e,f){if(a.areAttachmentCategories&&!f){return[{id:b.id||c,isGroup:!0,cells:{0:{control:b.name,data:b,click:function(){e.toggleGroup(b.id)}}},data:b,dropData:b.category,rows:_.flatten(b.nodes.map(function(a,b){return d(a,b,e)}),!0)}]}return _.flatten(b.nodes.map(function(a,b){return d(a,b,e)}),!0)}function f(a,b,c){var d,e=0!=window.model.attachmentConfig.shortcutsMode;return Injector.resolve(["ConnectedCurrentAttachmentTile"],function(b){d={id:a.id,isLoading:a.isDeleting||a.isSaving,cells:{0:{control:React.createElement(b,{actions:c,node:a})},1:{control:e&&React.createElement(webcon.views.CurrentAttachmentButtons,{actions:c,className:"table-tree-button-wrapper",node:a})},2:{control:React.createElement(webcon.views.AttachmentMenuButton,{actions:c,className:"table-tree-button-wrapper",node:a,tab:"current"})}},className:classNames({"no-shortcuts":a.isEdited||a.isSaving}),data:a,rows:[]}}),[d]}return{mapModelToTree:c}}),window.webcon=function(a){var b=a.views=a.views||{},c=a.mixins;return b.CurrentTabContent=createReactClass({displayName:"CurrentTabContent",mixins:[c.PureControl],render:function(){var a=0!=window.model.attachmentConfig.shortcutsMode;return this.props.isEmpty&&!this.props.isLoading?React.createElement(b.AttachmentsPlaceholder,{isEditable:this.props.isEditable}):React.createElement(b.LoadingPanel,{isVisible:this.props.isLoading},React.createElement(b.TreeTable,{className:classNames("current-attachments",{"no-shortcuts":!a}),data:this.props.model,showHeader:!1}))}}),a}(window.webcon||{}),Injector.factory("ModelMapper",[],function(){function a(a){return a.staticNodeType===e.conversations}function b(a){return a.staticNodeType===e.current}function c(a){return a.staticNodeType===e.current||a.staticNodeType===e.custom||a.staticNodeType===e.relatedChild||a.staticNodeType===e.relatedParent}var d={none:0,root:1,attachmentsGroup:2,group:3,conversation:4,file:5,message:6,bpsElement:7},e={none:0,conversations:1,current:2,custom:3,relatedChild:4,relatedParent:5};return{attachmentNodeType:d,staticAttachmentTreeNodeType:e,isConversations:a,isCurrent:b,isPartOfAllAttachments:c}}),window.webcon=function(a){var b=a.views=a.views||{},c=a.mixins;return b.TableTreeHeader=createReactClass({displayName:"TableTreeHeader",mixins:[c.PureControl],render:function(){var a=this.props.columns;return React.createElement("div",{className:"table-tree-header"},React.createElement("div",{className:"table-tree-row"},a.map(function(a,b){return 0===b?React.createElement("div",{className:"table-tree-column",key:a.id},React.createElement("div",{className:classNames("table-tree-fold")},React.createElement("i",{className:"glyphicon glyphicon-menu-up"})),React.createElement("div",null,a.displayName)):React.createElement("div",{className:"table-tree-column",key:a.id},a.displayName)})))}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{},c=a.mixins;return b.TreeTable=createReactClass({displayName:"TreeTable",propTypes:{className:PropTypes.string,data:PropTypes.object.isRequired,showHeader:PropTypes.bool},mixins:[c.PureControl],render:function(){var a=this.props.data,c=void 0===this.props.showHeader||null===this.props.showHeader||this.props.showHeader;return React.createElement("div",{className:classNames("table-tree",this.props.className)},c?React.createElement(b.TableTreeHeader,{columns:a.columns}):"",React.createElement("ul",{className:"table-tree-list"},a.rows.map(function(c){return React.createElement(b.TreeTableRow,{columns:a.columns,data:c.data,key:c.id,level:0,row:c})})))}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{},c=a.mixins;return b.TreeTableCell=createReactClass({displayName:"TreeTableCell",mixins:[c.PureControl],handleClick:function(a){a.preventDefault();var b=this.props.row,c=this.props.column,d=b.cells[c.id];"function"==typeof d.click&&d.click()},render:function(){var a=this.props.row,b=this.props.index,c=this.props.column,d=a.cells[c.id];if(void 0===d||null===d)return React.createElement("div",null);var e=d.control;if("datetime"===c.type&&e?Injector.resolve(["DateTimeFormatter"],function(a){e=a.formatDateWithTime(d.control)}):"filesize"===c.type&&e&&(e+=" B"),"string"==typeof e){var f=d.data&&d.data.category&&d.data.category.translatedName||e;e=React.createElement("span",{title:f},f)}if(0===b){var g=this.props.isFoldable;return React.createElement("div",{className:classNames("table-tree-column","level-"+this.props.level),key:a.id+"-"+c.id,onClick:this.handleClick,onDoubleClick:this.handleClick},g&&React.createElement("div",{className:classNames("table-tree-fold",{foldable:g},{folded:a.data.isFolded})},0===this.props.level?React.createElement("i",{className:"icon ms-Icon ms-Icon--ChevronDown"}):React.createElement("i",{className:"glyphicon glyphicon-triangle-right open"})),d.icon?React.createElement("span",{className:"table-tree-icon"},d.icon):"",e||"")}return React.createElement("div",{className:classNames("table-tree-column","level-"+this.props.level),key:a.id+"-"+c.id},e||"")}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{},c=a.mixins;return b.TreeTableRow=createReactClass({displayName:"TreeTableRow",mixins:[c.PureControl],renderRow:function(a,c,d){var e=this;return d.map(function(d,f){return React.createElement(b.TreeTableCell,{column:d,isFoldable:c,index:f,key:d.id,level:e.props.level,row:a})})},render:function(){var c=this.props.columns,d=this.props.row,e=this;if(void 0===d||null===d)return React.createElement("div",null);var f=this.props.row.className,g=!!d.isGroup,h=this.props.row.isLoading,i={};a.env===Injector.env.lite&&Injector.resolve(["AttachmentsCopyPasteService"],function(a){i={outlineColor:a.getOutlineColor()}});var j=g&&0===this.props.level&&a.env===Injector.env.lite?{color:window.model.applicationColor}:{},k=Injector.resolve(["AttachmentController"],function(a){return a.idHashDefaultName(d.dropData)||d.dropData});return React.createElement("li",{className:classNames({"drop-target":k},{foldable:g},"level-"+this.props.level,{"lite-spinner-wrapper":h}),"data-drop":k,key:d.id,style:i},h&&React.createElement(b.BlurredOverlay,{isVisible:h},React.createElement(b.InspiniaSpinner,null)),(!g||void 0!==d.rows&&null!==d.rows&&d.rows.length>0)&&React.createElement("div",{"data-key":this.props.data.name,className:classNames("table-tree-row",{foldable:g},{folded:this.props.data.isFolded},"level-"+this.props.level,f),style:j},this.renderRow(d,g,c)),void 0!==d.rows&&null!==d.rows&&d.rows.length>0&&React.createElement("ul",{className:classNames({hidden:this.props.data.isFolded})},d.rows.map(function(a){return React.createElement(b.TreeTableRow,{columns:c,data:a.data,key:a.id,level:e.props.level+1,row:a})})))}}),a}(window.webcon||{}),window.webcon=function(a){return(a.views=a.views||{}).AttachmentItemTemplate=createReactClass({displayName:"AttachmentItemTemplate",getLabel:function(a,b){return b?React.createElement("div",null,a):""},componentWillMount:function(){Injector.resolve(["DateTimeFormatter"],function(a){this.formatDate=a.formatDateWithTime},this)},showPreviewOnClick:function(a){Injector.resolve(["AttachmentsPreviewService"],function(b){b.preview(a)},this)},render:function(){var a=this,b=a.props.attachmentItem,c=webconLocale,d=b.showUpdated&&b.updateDate;return React.createElement("div",{className:"col-xs-12"},React.createElement("div",{className:"attachment-icon",onClick:a.showPreviewOnClick.bind(a,b)},React.createElement("img",{src:a.props.imageUrl})),React.createElement("div",{className:"attachment-titles"},a.getLabel(c.cName+":",!0)),React.createElement("div",{className:"attachment-values"},a.getLabel(b.name,!0)),React.createElement("div",{className:"attachment-titles"},a.getLabel(c.cCreated+":",b.date)),React.createElement("div",{className:"attachment-values"},a.getLabel(b.date?a.formatDate(b.date)+" ("+b.insertedBy+")":"",b.date)),React.createElement("div",{className:"attachment-titles"},a.getLabel(c.cModified+":",d)),React.createElement("div",{className:"attachment-values"},a.getLabel(b.updateDate?a.formatDate(b.updateDate)+" ("+b.updatedBy+")":"",d)),React.createElement("div",{className:"attachment-titles"},a.getLabel(c.cDescription+":",b.description)),React.createElement("div",{className:"attachment-values multi-row-text"},a.getLabel(b.description,b.description)))}}),a}(window.webcon||{}),window.webcon=function(a){return(a.views=a.views||{}).CommentsControlTemplate=createReactClass({displayName:"CommentsControlTemplate",getContent:function(a){return{__html:this.props.replaceNewLine?a.replace(/\n/g,"<br />"):a}},componentWillMount:function(){Injector.resolve(["DateTimeFormatter"],function(a){this.formatDateWithTime=a.formatDateWithTime},this)},render:function(){var a=this;return React.createElement("div",{className:"commentsTemplate"},this.props.comments.map(function(b){return React.createElement("div",null,b.date&&b.author&&React.createElement("h5",{className:"commentsMetadata"},"[",a.formatDateWithTime(b.date),"] ",b.author),React.createElement("div",{className:"multi-row-text existing-comment",dangerouslySetInnerHTML:a.getContent(b.content)}))}))}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{};return b.TableControlTemplate=createReactClass({displayName:"TableControlTemplate",render:function(){var c="table table-condensed";this.props.isModern||(c+=" table-bordered");var d="";return Injector.resolve([{depName:"IconRepository",depEnv:a.env}],function(a){d=a.getPlusImage()}),React.createElement("div",{className:"panel panel-default panelLite"},React.createElement(b.LoadingPanel,{isVisible:this.props.isLoading,delay:200},React.createElement("div",{className:"table-responsive tableLite"},React.createElement("table",{className:c},this.props.children))),this.props.addButon?React.createElement("button",{disabled:this.props.isLoading,type:"button",className:"btn btn-default subelem-addRow",onClick:this.props.addButon},d,React.createElement("span",null," ",webconLocale.cAddRow)):"")}}),b.TableHeaderTemplate=createReactClass({displayName:"TableHeaderTemplate",render:function(){var a;return this.props.config&&this.props.config.isOrdinalColumnVisible&&(a=React.createElement("th",{className:"subelem-header-id"},React.createElement("span",null,webconLocale.cSubelementsRowID))),React.createElement("thead",null,React.createElement("tr",{className:"active tableLiteHeader ms-clientcontrol-chromeheader ms-TopBarText-fontColor"},a,this.props.tableColumns.map(function(a){var b="Integer"===a.columnType||"Decimal"===a.columnType?"text-right":"";return React.createElement("th",{key:a.columnName,"data-column":a.columnName,className:b},React.createElement("span",null,a.columnCaption))})))}}),b.SubelementTableHeaderTemplate=createReactClass({displayName:"SubelementTableHeaderTemplate",getHeader:function(a,b){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return React.createElement("th",{className:"subelem-base-cell ms-TopBarText-fontColor subelem-header-cell "+(b||""),style:c},React.createElement("span",null,a))},render:function(){var a=this,b=a.props.columns,c=a.props.columnsSizeProperties,d=a.props.editMode,e=a.props.columnsConfiguration;if(!b||!b.length)return React.createElement("thead",null);var f,g,h=c.ordinalColumnWidth;if(this.props.isOrdinalColumnVisible){var i={width:h+"px"};f=a.getHeader(webconLocale.cSubelementsRowID,"subelem-header-id",i)}var j=c.actionsColumnWidth;if(this.props.isActionsColumnVisible){var k={width:j+"px"};g=a.getHeader("","subelem-actions-header",k)}var l=c.remainingWidth,m=c.nonFixedWidthColumns,n=c.columnsWidthValues;return React.createElement("thead",null,React.createElement("tr",{className:"active tableLiteHeader ms-clientcontrol-chromeheader"},f,b.map(function(c,f){var g="ms-TopBarText-fontColor ";g+=d?"subelem-header-cell-edit ":"subelem-header-cell-readonly ",Injector.resolve(["SubelementColumnStyleFactory"],function(a){g+=a.getColumnStyle(c,e[c.fieldName])}),g+="FloatingPoint"===c.columnType||"FloatingPointCalculated"===c.columnType||"CalculatedTextSelect"===c.columnType||"CalculatedText"===c.columnType?" text-right":"",g+="Bool"===c.columnType?"text-center":"";var h="";c.required&&d&&a.props.allRowsRequired[c.fieldName]&&(h+=" requiredAttribute");var i={},j=n.find(function(a){return a.fieldName===c.fieldName}).width;return j&&(i.width=j+"px",i.minWidth=j+"px",i.maxWidth=j+"px"),f===b.length-1&&0===m.length&&l>0&&(i.width="inherit",i.minWidth="inherit",i.maxWidth="inherit"),React.createElement("th",{key:c.fieldName,className:g,style:i},React.createElement("span",{className:h},c.displayName))}),g))}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{};return b.ToolBox=createReactClass({displayName:"ToolBox",componentWillMount:function(){Injector.resolve(["$Window"],function(a){this.win=a},this)},render:function(){return React.createElement("div",null,React.createElement(b.Toolbar,{name:"Toolbar",lockedDisplay:"userActionsInDropdown",data:this.props.data,menuItemsInLightTheme:!0,menuActions:this.props.menuActions}),this.props.pathsVisible?React.createElement(b.PathPanel,{name:"PathPanel",data:this.win.model.paths}):"")}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{},c=a.mixins;return b.Toolbar=createReactClass({displayName:"Toolbar",propTypes:{name:PropTypes.string,lockedDisplay:PropTypes.string,data:PropTypes.object.isRequired,menuItemsInLightTheme:PropTypes.bool,paths:PropTypes.array,menuActions:PropTypes.array},mixins:[c.RegistrableControl],getInitialState:function(){return this.availableDisplays={full:this.renderFullDisplay("full"),userActionsInDropdown:this.renderFullDisplay("userActionsInDropdown"),iconsOnly:this.renderFullDisplay("iconsOnly"),minimal:this.renderMinimalDisplay()},this.resizeObserwer=new ResizeObserver(this.createResizeObserver()),{initialized:!1,displayMode:null}},componentDidMount:function(){this.resizeObserwer.observe(this.toolbarRef),this.initializeToolbar()},componentWillUnmount:function(){this.resizeObserwer.unobserve(this.toolbarRef)},componentDidUpdate:function(){this.state.initialized&&null===this.state.display&&this.state.fullDisplayLeftToolbarWidth&&this.state.fullDisplayRightToolbarWidth&&this.state.userActionsInDropdownDisplayLeftToolbarWidth&&this.state.userActionsInDropdownDisplayRightToolbarWidth&&this.state.iconsOnlyDisplayLeftToolbarWidth&&this.state.iconsOnlyDisplayRightToolbarWidth&&this.recalculateDisplayMode()},calculateFullDisplay:function(){var a=this,b=this.toolbarRef,c=b.cloneNode(!1);c.setAttribute("toolbar-sandbox-id","FullDisplaySandboxToolbar"),c.style.visibility="hidden",c.style.position="absolute",c.style.display="block",c.style.width="4096px",b.parentNode.appendChild(c),ReactDOM.render(this.availableDisplays.full,c,function(){var b=c.getElementsByClassName("LeftToolbar")[0],d=c.getElementsByClassName("RightToolbar")[0];a.setState({fullDisplayLeftToolbarWidth:b.getBoundingClientRect().width,fullDisplayRightToolbarWidth:d.getBoundingClientRect().width},function(){c.parentNode.removeChild(c)})})},calculateUserActionsInDropdownDisplay:function(){var a=this,b=this.toolbarRef,c=b.cloneNode(!1);c.setAttribute("toolbar-sandbox-id","UserActionsInDropdownDisplaySandboxToolbar"),c.style.visibility="hidden",c.style.position="absolute",c.style.display="block",c.style.width="4096px",b.parentNode.appendChild(c),ReactDOM.render(this.availableDisplays.userActionsInDropdown,c,function(){var b=c.getElementsByClassName("LeftToolbar")[0],d=c.getElementsByClassName("RightToolbar")[0];a.setState({userActionsInDropdownDisplayLeftToolbarWidth:b.getBoundingClientRect().width,userActionsInDropdownDisplayRightToolbarWidth:d.getBoundingClientRect().width},function(){c.parentNode.removeChild(c)})})},calculateIconOnlyDisplay:function(){var a=this,b=this.toolbarRef,c=b.cloneNode(!1);c.setAttribute("toolbar-sandbox-id","IconOnlyDisplaySandboxToolbar"),c.style.visibility="hidden",c.style.position="absolute",c.style.display="block",c.style.width="4096px",b.parentNode.appendChild(c),ReactDOM.render(this.availableDisplays.iconsOnly,c,function(){var b=c.getElementsByClassName("LeftToolbar")[0],d=c.getElementsByClassName("RightToolbar")[0];a.setState({iconsOnlyDisplayLeftToolbarWidth:b.getBoundingClientRect().width,iconsOnlyDisplayRightToolbarWidth:d.getBoundingClientRect().width},function(){c.parentNode.removeChild(c)})})},initializeToolbar:function(){var a=this;this.setState({initialized:!0},function(){a.calculateFullDisplay(),a.calculateUserActionsInDropdownDisplay(),a.calculateIconOnlyDisplay()})},createResizeObserver:function(){var a=this;return function(b){b.forEach(function(){a.state.initialized&&window.requestAnimationFrame(a.recalculateDisplayMode)})}},recalculateDisplayMode:function(){if(this.toolbarRef){var a=this.toolbarRef.getBoundingClientRect().width,b=this.state.fullDisplayLeftToolbarWidth+this.state.fullDisplayRightToolbarWidth,c=this.state.userActionsInDropdownDisplayLeftToolbarWidth+this.state.userActionsInDropdownDisplayRightToolbarWidth;return a<this.state.iconsOnlyDisplayLeftToolbarWidth+this.state.iconsOnlyDisplayRightToolbarWidth?this.setState({displayMode:"minimal"}):a<c?this.setState({displayMode:"iconsOnly"}):a<b?this.setState({displayMode:"userActionsInDropdown"}):this.setState({displayMode:"full"})}},renderFullDisplay:function(c){var d=this.props.data,e=Injector.inject("DeviceInfo"),f=this.props.menuItemsInLightTheme,g=null;switch(c){case"full":g=this.fullDisplayRightToolbarWidth;break;case"userActionsInDropdown":g=this.userActionsInDropdownDisplayRightToolbarWidth;break;case"iconsOnly":g=this.iconsOnlyDisplayRightToolbarWidth}var h=g?{width:"calc(100% - "+g+"px)"}:null,i="iconsOnly"===c&&a.env!==Injector.env.mobile,j=a.env!==Injector.env.mobile,k="full"!==c,l=a.env!==Injector.env.mobile;return React.createElement(React.Fragment,null,React.createElement("div",{className:"LeftToolbar",style:h},React.createElement(b.ReturnToolbarItem,{hideText:i,show:d.returnButton}),React.createElement(b.EditToolbarItem,{hideText:i,show:d.editButton||this.props.data.endEditButton}),React.createElement(b.NewToolbarItem,{hideText:i,show:d.newButton&&!e.isNativeMobileApp()}),React.createElement(b.SaveToolbarItem,{hideText:i,show:d.saveButton}),React.createElement(b.DeleteToolbarItem,{hideText:i,show:d.deleteButton}),React.createElement(b.ReloadToolbarItem,{hideText:i,show:d.reloadButton}),l&&React.createElement(b.OcrModeToolbarItem,{hideText:i,show:d.ocrModeButton}),React.createElement(b.PathsToolbarItem,{hideText:i,show:d.pathButton,paths:this.props.paths,menuItemsInLightTheme:f}),React.createElement(b.ForwardToolbarItem,{hideText:i,show:d.forwardButton}),React.createElement(b.TakeOverTaskToolbarItem,{hideText:i,show:d.takeOverTaskButton}),React.createElement(b.DownloadArchiveLastVersionToolbarItem,{hideText:i,show:d.downloadArchiveLastVersion}),React.createElement(b.DownloadArchiveHistoryVersionToolbarItem,{hideText:i,show:d.downloadArchiveHistoryVersion}),React.createElement(b.UserActionsToolbarItem,{hideText:i,show:!_.isEmpty(this.props.menuActions),dropdown:k,data:this.props.menuActions,menuItemsInLightTheme:f})),React.createElement("div",{className:"RightToolbar"},React.createElement(b.ReturnToElementToolbarItem,{hideText:j,show:d.returnToElementButton}),React.createElement(b.ChangeVersionToolbarItem,{hideText:j,show:!0,direction:"previous"}),React.createElement(b.ChangeVersionToolbarItem,{hideText:j,show:!0,direction:"next"}),React.createElement(b.ShowElementAnalysisToolbarItem,{hideText:j,show:d.enableAnalysis}),React.createElement(b.AdminActionsToolbarItem,{hideText:j,show:d.standardModeButton}),React.createElement(b.UserModeToolbarItem,{hideText:j,show:d.adminModeButton||d.standardModeButton,admin:d.adminModeButton,standard:d.standardModeButton}),React.createElement(b.HistoryPanelToolbarItem,{hideText:j,show:d.historyButton})),React.createElement("div",{className:"clear"}))},renderMinimalDisplay:function(){var c=this.props.data,d=Injector.inject("DeviceInfo"),e=this.props.menuItemsInLightTheme,f=a.env!==Injector.env.mobile;return React.createElement(React.Fragment,null,React.createElement("div",{className:"LeftToolbar"},React.createElement(b.ReturnToolbarItem,{hideText:f,show:c.returnButton}),React.createElement(b.MinifiedActionsToolbarItem,{hideText:f},React.createElement(b.EditToolbarItem,{hideText:!1,show:c.editButton||this.props.data.endEditButton}),React.createElement(b.NewToolbarItem,{hideText:!1,show:c.newButton&&!d.isNativeMobileApp()}),React.createElement(b.SaveToolbarItem,{hideText:!1,show:c.saveButton}),React.createElement(b.DeleteToolbarItem,{hideText:!1,show:c.deleteButton}),React.createElement(b.ReloadToolbarItem,{hideText:!1,show:c.reloadButton}),React.createElement(b.ForwardToolbarItem,{hideText:!1,show:c.forwardButton}),React.createElement(b.DownloadArchiveLastVersionToolbarItem,{hideText:!1,show:c.downloadArchiveLastVersion}),React.createElement(b.DownloadArchiveHistoryVersionToolbarItem,{hideText:!1,show:c.downloadArchiveHistoryVersion}),React.createElement(b.ReturnToElementToolbarItem,{hideText:!1,show:c.returnToElementButton}),React.createElement(b.ChangeVersionToolbarItem,{hideText:!1,show:c.standardModeButton,direction:"previous"}),React.createElement(b.ChangeVersionToolbarItem,{hideText:!1,show:c.standardModeButton,direction:"next"}),React.createElement(b.ShowElementAnalysisToolbarItem,{hideText:!1,show:c.enableAnalysis}),React.createElement(b.AdminActionsToolbarItem,{hideText:!1,show:c.standardModeButton}),React.createElement(b.UserModeToolbarItem,{hideText:!1,show:c.adminModeButton||c.standardModeButton,admin:c.adminModeButton,standard:c.standardModeButton}),React.createElement(b.HistoryPanelToolbarItem,{hideText:!1,show:c.historyButton})),React.createElement(b.PathsToolbarItem,{hideText:f,show:c.pathButton,paths:this.props.paths,menuItemsInLightTheme:e}),React.createElement(b.UserActionsToolbarItem,{hideText:f,show:!_.isEmpty(this.props.menuActions),dropdown:!0,data:this.props.menuActions,menuItemsInLightTheme:e})),React.createElement("div",{className:"RightToolbar"}),React.createElement("div",{className:"clear"}))},renderProperDisplayMode:function(){return this.props.lockedDisplay&&-1!==Object.keys(this.availableDisplays).indexOf(this.props.lockedDisplay)?this.availableDisplays[this.props.lockedDisplay]:-1!==Object.keys(this.availableDisplays).indexOf(this.state.displayMode)?this.availableDisplays[this.state.displayMode]:null},render:function(){var a=this;return React.createElement("div",{className:"inner-toolbar",ref:function(b){a.toolbarRef=b}},this.renderProperDisplayMode())}}),a}(window.webcon||{});var _extends=Object.assign||function(a){for(var b=1;b<arguments.length;b++){
var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a};window.webcon=function(a){var b=a.views=a.views||{};return b.ToolbarButton=createReactClass({displayName:"ToolbarButton",propTypes:{buttonClassName:PropTypes.string,buttonId:PropTypes.string,hideOnSidebarDash:PropTypes.bool,hideText:PropTypes.bool,hoveredIcon:PropTypes.node,icon:PropTypes.node,onClick:PropTypes.func,show:PropTypes.bool,text:PropTypes.string.isRequired},getInitialState:function(){return this.dropdown=!!this.props.children,{isHovered:!1}},componentWillMount:function(){Injector.resolve(["SidebarContextService"],function(a){this.isInSidebar=a.isInSidebar()},this)},componentWillUnmount:function(){if(this.dropdown&&this.dropdown.classList&&this.dropdown.classList.contains("open")){var a=this;document.removeEventListener("click",a.closeMenuOnOutsideClick),document.removeEventListener("touchend",a.closeMenuOnOutsideClick)}},closeMenuOnOutsideClick:function(a){this.dropdown&&this.dropdown.contains&&!this.dropdown.contains(a.target)&&this.dropdown.classList.remove("open")},toggleDropdownMenu:function(){var a=this.dropdown;a.classList.contains("open")?(a.classList.remove("open"),document.removeEventListener("click",this.closeMenuOnOutsideClick),document.removeEventListener("touchend",this.closeMenuOnOutsideClick)):(document.addEventListener("click",this.closeMenuOnOutsideClick),document.addEventListener("touchend",this.closeMenuOnOutsideClick),a.classList.add("open"))},mouseOver:function(){this.setState({isHovered:!0})},mouseOut:function(){this.setState({isHovered:!1})},handleClick:function(a){this.props.toggleParentDropdownBeforeOnClick&&this.props.toggleParentDropdownBeforeOnClick(a),this.props.onClick&&this.props.onClick(a)},getControl:function(){var b=this;if(this.dropdown){var c=null;Injector.resolve([{depName:"IconRepository",depEnv:a.env}],function(a){c=a.getActionGroupArrowImage()},this);var d=React.Children.map(this.props.children,function(a){return React.cloneElement(a,_extends({},a.props,{toggleParentDropdownBeforeOnClick:b.props.toggleParentDropdownBeforeOnClick?b.props.toggleParentDropdownBeforeOnClick:b.toggleDropdownMenu}))});return React.createElement("div",{className:"btn-group"},React.createElement("div",{ref:function(a){b.dropdown=a}},React.createElement("button",{className:classNames("toolbar-button btn btn-default dropdown-toggle",{"hide-on-sidebar-dash":this.props.hideOnSidebarDash},this.props.buttonClassName),id:this.props.buttonId,title:this.props.text,onClick:this.toggleDropdownMenu,"aria-expanded":"false",onMouseOut:this.mouseOut,onMouseOver:this.mouseOver,type:"button"},this.state.isHovered?this.props.hoveredIcon:this.props.icon,!this.props.hideText&&React.createElement("span",{className:"action-group-name"},this.props.text),c),React.createElement("ul",{className:"dropdown-menu action-dropdown",role:"menu"},d)))}return React.createElement("button",{id:this.props.buttonId,title:this.props.text,type:"button",className:classNames("toolbar-button btn btn-default btn-md",{"hide-on-sidebar-dash":this.props.hideOnSidebarDash},this.props.buttonClassName),onClick:this.handleClick,onMouseOver:this.mouseOver,onMouseOut:this.mouseOut},this.state.isHovered?this.props.hoveredIcon:this.props.icon,!this.props.hideText&&React.createElement("span",null,this.props.text))},render:function(){return!this.props.show||this.props.hideOnSidebarDash&&this.isInSidebar?null:React.createElement("span",null,this.getControl())}}),b.ToolbarButton.defaultProps={show:!0,hideText:!1},a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{};return b.AdminActionsToolbarItem=createReactClass({displayName:"AdminActionsToolbarItem",getItems:function(){if(!this.props.show)return null;var a,c,d,e="",f="",g="",h="",i="";Injector.resolve(["IconRepository","FormInfo","CheckoutService"],function(b,j,k){e=b.getPersonImage(),f=b.getHTMLTemplateIcon(),a=j.isNew,c=j.isArchive,g=b.getPrivilegesImage(),h=b.getEndUserCheckout(),d=k.isElementCheckedOutByOtherUser(),i=b.getTimeoutImage()},this);var j=[];return d?j.push({icon:h,id:"end-checkout-menu-item",onClick:function(){Injector.resolve(["DocumentController"],function(a){a.adminEndUsersCheckout()})},name:window.webconLocale.cEndUserCheckout}):c?j.push({icon:g,id:"security-menu-item",onClick:function(){Injector.resolve(["DocumentController"],function(a){a.showPrivileges()})},name:window.webconLocale.cSecurity}):(a||(j.push({icon:g,id:"security-menu-item",onClick:function(){Injector.resolve(["DocumentController"],function(a){a.showPrivileges()})},name:window.webconLocale.cSecurity}),j.push({icon:e,id:"finish-all-menu-item",onClick:function(){Injector.resolve(["DocumentController"],function(a){a.finishAllUsersTasks()})},name:window.webconLocale.cFinishAllUserTasks}),j.push({icon:i,id:"timeouts-stats-menu-item",onClick:function(){Injector.resolve(["DocumentController"],function(a){a.showTimeoutStatistics()})},name:window.webconLocale.cTimeoutExceutionStatistics}),j.push({icon:f,id:"word-menu-item",onClick:function(){Injector.resolve(["DocumentController"],function(a){a.generateWordPrint()})},name:window.webconLocale.cWordTemplatePrint})),j.push({icon:f,id:"html-template-menu-item",onClick:function(){Injector.resolve(["DocumentController"],function(a){a.generateHtmlTemplate()})},name:window.webconLocale.cHTMLTemplate}),j.push({icon:f,id:"word-template-menu-item",onClick:function(){Injector.resolve(["DocumentController"],function(a){a.generateWordTemplate()})},name:window.webconLocale.cWordTemplate})),j.map(function(a,c){return React.createElement(b.ToolbarButton,{key:c,icon:a.icon,hoveredIcon:a.icon,buttonId:a.id,text:a.name,onClick:a.onClick,hideText:!1})})},getIcon:function(){return Injector.resolve([{depName:"IconRepository",depEnv:a.env}],function(a){return a.getAdminCommandsImage()})},render:function(){return React.createElement(b.ToolbarButton,{show:this.props.show,icon:this.getIcon(),hoveredIcon:this.getIcon(),buttonId:"AdminActionsToolbarItem",buttonClassName:"admin-actions-button-toolbar-item",hideOnSidebarDash:!0,text:window.webconLocale.cAdminActionsMenu,hideText:this.props.hideText},this.getItems())}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{};return b.ChangeVersionToolbarItem=createReactClass({displayName:"ChangeVersionToolbarItem",calculateState:function(a){var b,c=void 0,d="next"===a.direction,e=void 0,f=void 0;Injector.resolve(["FormInfo"],function(a){c=a.isAdminMode,void 0!==a.historicalVersionsInfo&&null!==a.historicalVersionsInfo&&(b=a.historicalVersionsInfo.isInHistoricalVersionPreview,e=d?a.historicalVersionsInfo.nextVersionId:a.historicalVersionsInfo.previousVersionId,f=a.wfdId)});var g=c&&(d&&b&&e||!d&&e)||b&&e;return{isVisible:Boolean(g),versionId:e,wfdId:f,isNextVersionButton:d}},getInitialState:function(){return this.calculateState(this.props)},componentWillReceiveProps:function(a){this.setState(this.calculateState(a))},onClick:function(){var a=this.state.versionId,b=this.state.wfdId;Injector.resolve(["FormInfo","RedirectService"],function(c,d){d.redirectToHistoricalVersion(b,a,c.isAdminMode)})},getIcon:function(){var b=this.state.isNextVersionButton;return Injector.resolve([{depName:"IconRepository",depEnv:a.env}],function(a){return b?a.getNextVersionIcon():a.getPreviousVersionIcon()})},getHoveredIcon:function(){var b=this.state.isNextVersionButton;return Injector.resolve([{depName:"IconRepository",depEnv:a.env}],function(a){return b?a.getHoveredNextVersionIcon():a.getHoveredPreviousVersionIcon()})},render:function(){var a=this.state.isNextVersionButton?window.webconLocale.cAdminNextVersion:window.webconLocale.cAdminPreviousVersion,c=this.state.isNextVersionButton?"NextButtonToolbarItem":"PreviousButtonToolbarItem";return React.createElement(b.ToolbarButton,{show:this.props.show&&this.state.isVisible,buttonId:c,hideOnSidebarDash:!0,onClick:this.onClick,icon:this.getIcon(),hoveredIcon:this.getHoveredIcon(),text:a,hideText:this.props.hideText})}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{};return b.DeleteToolbarItem=createReactClass({displayName:"DeleteToolbarItem",onClick:function(){Injector.resolve(["DocumentController"],function(a){a.deleteElement()})},getIcon:function(){return Injector.resolve([{depName:"IconRepository",depEnv:a.env}],function(a){return a.getDeleteImage()})},getHoveredIcon:function(){return Injector.resolve([{depName:"IconRepository",depEnv:a.env}],function(a){return a.getHoveredDeleteImage()})},render:function(){return React.createElement(b.ToolbarButton,{show:this.props.show,buttonId:"DeleteToolbarButton",hideOnSidebarDash:!0,onClick:this.onClick,icon:this.getIcon(),hoveredIcon:this.getHoveredIcon(),text:window.webconLocale.cDelete,hideText:this.props.hideText})}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{};return b.DownloadArchiveHistoryVersionToolbarItem=createReactClass({displayName:"DownloadArchiveHistoryVersionToolbarItem",onClick:function(){Injector.resolve(["ArchiveDataDownloadService"],function(a){a.downloadHistoryVersions()})},getIcon:function(){return Injector.resolve([{depName:"IconRepository",depEnv:a.env}],function(a){return a.getDownloadHistoryVersionImage()})},getHoveredIcon:function(){return Injector.resolve([{depName:"IconRepository",depEnv:a.env}],function(a){return a.getHoveredDownloadHistoryVersionImage()})},render:function(){return React.createElement(b.ToolbarButton,{show:this.props.show,buttonId:"DownloadArchiveHistoryVersionToolbarButton",hideOnSidebarDash:!0,onClick:this.onClick,icon:this.getIcon(),hoveredIcon:this.getHoveredIcon(),text:window.webconLocale.cHistoricalData,hideText:this.props.hideText})}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{};return b.DownloadArchiveLastVersionToolbarItem=createReactClass({displayName:"DownloadArchiveLastVersionToolbarItem",onClick:function(){Injector.resolve(["ArchiveDataDownloadService"],function(a){a.downloadLastVersion()})},getIcon:function(){return Injector.resolve([{depName:"IconRepository",depEnv:a.env}],function(a){return a.getDownloadLastVersionImage()})},getHoveredIcon:function(){return Injector.resolve([{depName:"IconRepository",depEnv:a.env}],function(a){return a.getHoveredDownloadLastVersionImage()})},render:function(){return React.createElement(b.ToolbarButton,{show:this.props.show,buttonId:"DownloadArchiveLastVersionToolbarButton",hideOnSidebarDash:!0,onClick:this.onClick,icon:this.getIcon(),hoveredIcon:this.getHoveredIcon(),text:window.webconLocale.cLastVersionData,hideText:this.props.hideText})}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{};return b.EditToolbarItem=createReactClass({displayName:"EditToolbarItem",onClick:function(){Injector.resolve(["CheckoutService","RedirectService"],function(a,b){a.releaseElementCheckout(),b.toggleEdit()})},getIcon:function(){return Injector.resolve([{depName:"IconRepository",depEnv:a.env}],function(a){return window.initialModel.Toolbar.editButton?a.getEditImage():a.getCancelEditImage()})},getHoveredIcon:function(){return Injector.resolve([{depName:"IconRepository",depEnv:a.env}],function(a){return window.initialModel.Toolbar.editButton?a.getHoveredEditImage():a.getHoveredCancelEditImage()})},getText:function(){return window.initialModel.Toolbar.editButton?window.webconLocale.cEdit:window.webconLocale.cEditCancel},render:function(){return React.createElement(b.ToolbarButton,{show:this.props.show,buttonId:"EditToolbarButton",hideOnSidebarDash:!0,onClick:this.onClick,icon:this.getIcon(),hoveredIcon:this.getHoveredIcon(),text:this.getText(),hideText:this.props.hideText})}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{};return b.ForwardToolbarItem=createReactClass({displayName:"ForwardToolbarItem",onClick:function(){Injector.resolve(["DocumentController"],function(a){a.forwardElement()})},getIcon:function(){return Injector.resolve([{depName:"IconRepository",depEnv:a.env}],function(a){return a.getDelegateImage()})},getHoveredIcon:function(){return Injector.resolve([{depName:"IconRepository",depEnv:a.env}],function(a){return a.getHoveredDelegateImage()})},render:function(){return React.createElement(b.ToolbarButton,{show:this.props.show,buttonId:"ForwardToolbarButton",hideOnSidebarDash:!0,onClick:this.onClick,icon:this.getIcon(),hoveredIcon:this.getHoveredIcon(),text:window.webconLocale.cToolBarForwardTask,hideText:this.props.hideText})}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{};return b.HistoryPanelToolbarItem=createReactClass({displayName:"HistoryPanelToolbarItem",componentWillMount:function(){Injector.resolve(["FormInfo","UrlsFactory"],function(a,b){this.historyUrl=a.isNew?"":b.createHistoryUrl(a.wfdId,a.isAdminMode)},this)},onClick:function(a){var b=this.historyUrl;return Injector.resolve(["OpenLinkHandler"],function(c){return c.openLinkEvent(a,function(){c.openHistory(b)})},this)},getIcon:function(){return Injector.resolve([{depName:"IconRepository",depEnv:a.env}],function(a){return a.getHistoryImage()})},getHoveredIcon:function(){return Injector.resolve([{depName:"IconRepository",depEnv:a.env}],function(a){return a.getHoveredHistoryImage()})},render:function(){return React.createElement(b.ToolbarButton,{show:this.historyUrl&&this.props.show,buttonId:"HistoryToolbarButton",hideOnSidebarDash:!0,onClick:this.onClick,icon:this.getIcon(),hoveredIcon:this.getHoveredIcon(),text:window.webconLocale.cElementHistory,hideText:this.props.hideText})}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{};return b.MinifiedActionsToolbarItem=createReactClass({displayName:"MinifiedActionsToolbarItem",getIcon:function(){return Injector.resolve([{depName:"IconRepository",depEnv:a.env}],function(a){return a.getMinifiedActionsImage()})},render:function(){return React.createElement(b.ToolbarButton,{hideOnSidebarDash:!0,icon:this.getIcon(),hoveredIcon:this.getIcon(),text:window.webconLocale.cMinifiedStandardActionsMenu,hideText:this.props.hideText},this.props.children)}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{};return b.NewToolbarItem=createReactClass({displayName:"NewToolbarItem",onClick:function(){Injector.resolve(["RedirectService"],function(a){a.redirectToNewElement(window.initialModel.FormInfo.docTypeId,window.initialModel.FormInfo.workflowId,window.initialModel.FormInfo.companiesInfo.currentCompany.id)})},getIcon:function(){return Injector.resolve([{depName:"IconRepository",depEnv:a.env}],function(a){return a.getNewImage()})},getHoveredIcon:function(){return Injector.resolve([{depName:"IconRepository",depEnv:a.env}],function(a){return a.getHoveredNewImage()})},render:function(){return React.createElement(b.ToolbarButton,{show:this.props.show,buttonId:"NewToolbarButton",hideOnSidebarDash:!0,onClick:this.onClick,icon:this.getIcon(),hoveredIcon:this.getHoveredIcon(),text:window.webconLocale.cNew,hideText:this.props.hideText})}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{};return b.OcrModeToolbarItem=createReactClass({displayName:"OcrModeToolbarItem",propTypes:{show:PropTypes.bool,hideText:PropTypes.bool},onClick:function(){var a=this.checkIsOcrVerificationMode();Injector.resolve(["PopupController","RedirectService","FormInfo"],function(b,c,d){d.editMode?b.showWFConfirmAction(a?window.webconLocale.cOcrStandardMode:window.webconLocale.cOcrVerificationMode,webconLocale.cConfirmUnsavedChanges,function(){c.toggleOcrMode(!a)}):c.toggleOcrMode(!a)})},getIcon:function(b){return Injector.resolve([{depName:"IconRepository",depEnv:a.env}],function(a){return b?a.getStandardModeIcon():a.getOcrModeIcon()})},checkIsOcrVerificationMode:function(){var a=!1;return Injector.resolve(["FormInfo"],function(b){a=b.isOcrVerificationView}),a},render:function(){var a=this.checkIsOcrVerificationMode();return React.createElement(b.ToolbarButton,{show:this.props.show,buttonId:"OcrModeToolbarButton",hideOnSidebarDash:!0,onClick:this.onClick,icon:this.getIcon(a),hoveredIcon:this.getIcon(a),text:a?window.webconLocale.cOcrStandardMode:window.webconLocale.cOcrVerificationMode,hideText:this.props.hideText})}}),a}(window.webcon||{}),Injector.factory("MenuSeparatorItemFactory",[],function(){function a(a){return React.createElement("li",{className:"ms-core-menu-separator",role:"separator",key:"pathSeparatorMenuItemLi"+a.id},React.createElement("hr",{className:"ms-core-menu-separatorHr"}))}return{getSeparatorItem:a}},Injector.env.lite),Injector.factory("MenuSeparatorItemFactory",[],function(){function a(a){return React.createElement("li",{className:"divider",role:"separator",key:"pathSeparatorMenuItemLi"+a.id})}return{getSeparatorItem:a}}),window.webcon=function(a){var b=a.views=a.views||{};return b.PathToolbarButton=createReactClass({displayName:"PathToolbarButton",propTypes:{buttonClassName:PropTypes.string,path:PropTypes.object.isRequired},onClick:function(){var a=this;Injector.resolve(["DocumentController"],function(b){b.goToNextStep(a.props.path.id)})},render:function(){return React.createElement(b.ToolbarButton,{buttonClassName:this.props.buttonClassName,onClick:this.onClick,text:this.props.path.title,hideText:!1})}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{};return b.PathsToolbarItem=createReactClass({displayName:"PathsToolbarItem",propTypes:{paths:PropTypes.array,show:PropTypes.bool.isRequired},getPaths:function(){var a;Injector.resolve(["MenuSeparatorItemFactory"],function(b){a=b});var c=[],d=_.first(this.props.paths).lineNumber;return this.props.paths.map(function(e){var f=e.lineNumber;d!==f&&(c.push(a.getSeparatorItem(e)),d=f),c.push(React.createElement(b.PathToolbarButton,{key:"pathGroupMenuItemLi"+e.id,path:e,buttonClassName:"ms-core-menu-item"}))}),c},getIcon:function(){return Injector.resolve([{depName:"IconRepository",depEnv:a.env}],function(a){return a.getPathImage()})},getHoveredIcon:function(){return Injector.resolve([{depName:"IconRepository",depEnv:a.env}],function(a){return a.getHoveredPathImage()})},render:function(){return _.isEmpty(this.props.paths)||!this.props.show?null:React.createElement(b.ToolbarButton,{show:this.props.show,buttonId:"PathsToolbarButton",hideOnSidebarDash:!1,icon:this.getIcon(),hoveredIcon:this.getHoveredIcon(),text:window.webconLocale.cNextSteps,hideText:this.props.hideText},this.getPaths())}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{};return b.PrivilegesToolbarItem=createReactClass({displayName:"PrivilegesToolbarItem",onClick:function(){Injector.resolve(["DocumentController"],function(a){a.showPrivileges()})},getIcon:function(){return Injector.resolve([{depName:"IconRepository",depEnv:a.env}],function(a){return a.getPrivilegesImage()})},getHoveredIcon:function(){return Injector.resolve([{depName:"IconRepository",depEnv:a.env}],function(a){return a.getHoveredPrivilegesImage()})},render:function(){return React.createElement(b.ToolbarButton,{show:this.props.show,buttonId:"PrivilegesToolbarButton",hideOnSidebarDash:!0,onClick:this.onClick,icon:this.getIcon(),hoveredIcon:this.getHoveredIcon(),text:window.webconLocale.cSecurity,hideText:this.props.hideText})}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{};return b.ReloadToolbarItem=createReactClass({displayName:"ReloadToolbarItem",onClick:function(){Injector.resolve(["RedirectService"],function(a){a.reload()})},getIcon:function(){return Injector.resolve([{depName:"IconRepository",depEnv:a.env}],function(a){return a.getReloadImage()})},render:function(){return React.createElement(b.ToolbarButton,{show:this.props.show,buttonId:"ReloadToolbarButton",hideOnSidebarDash:!1,onClick:this.onClick,icon:this.getIcon(),hoveredIcon:this.getIcon(),text:window.webconLocale.cRefresh,hideText:this.props.hideText})}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{};return b.ReturnToElementToolbarItem=createReactClass({displayName:"ReturnToElementToolbarItem",onClick:function(){Injector.resolve(["RedirectService"],function(a){a.returnFromHistoryView()})},getIcon:function(){return Injector.resolve([{depName:"IconRepository",depEnv:a.env}],function(a){return a.getReturnImage()})},getHoveredIcon:function(){return Injector.resolve([{depName:"IconRepository",depEnv:a.env}],function(a){return a.getHoveredReturnImage()})},isAvailable:function(){return this.props.show&&!Injector.resolve(["$Window","DeviceInfo"],function(a,b){return a.WebviewManager||b.isNativeMobileApp()})},render:function(){return React.createElement(b.ToolbarButton,{show:this.isAvailable(),buttonId:"ReturnToElementToolbarButton",hideOnSidebarDash:!0,onClick:this.onClick,icon:this.getIcon(),hoveredIcon:this.getHoveredIcon(),text:window.webconLocale.cReturnToElement,hideText:this.props.hideText})}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{};return b.ReturnToolbarItem=createReactClass({displayName:"ReturnToolbarItem",getInitialState:function(){return Injector.resolve(["UrlsFactory"],function(a){this.showButton=a.showReturnButton()},this),{}},onClick:function(){Injector.resolve(["RedirectService"],function(a){a.redirectToSource()})},getIcon:function(){return Injector.resolve([{depName:"IconRepository",depEnv:a.env}],function(a){return a.getReturnImage()})},getHoveredIcon:function(){return Injector.resolve([{depName:"IconRepository",depEnv:a.env}],function(a){return a.getHoveredReturnImage()})},render:function(){return React.createElement(b.ToolbarButton,{show:this.showButton&&this.props.show,buttonId:"ReturnToolbarButton",hideOnSidebarDash:!0,onClick:this.onClick,icon:this.getIcon(),hoveredIcon:this.getHoveredIcon(),text:window.webconLocale.cBackToSource,hideText:this.props.hideText})}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{};return b.SaveToolbarItem=createReactClass({displayName:"SaveToolbarItem",onClick:function(){Injector.resolve(["DocumentController"],function(a){a.saveElement()})},getIcon:function(){return Injector.resolve([{depName:"IconRepository",depEnv:a.env}],function(a){return a.getSaveImage()})},getHoveredIcon:function(){return Injector.resolve([{depName:"IconRepository",depEnv:a.env}],function(a){return a.getHoveredSaveImage()})},render:function(){return React.createElement(b.ToolbarButton,{show:this.props.show,buttonId:"SaveToolbarButton",hideOnSidebarDash:!0,onClick:this.onClick,icon:this.getIcon(),hoveredIcon:this.getHoveredIcon(),text:window.webconLocale.cSave,hideText:this.props.hideText})}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{};return b.ShowElementAnalysisToolbarItem=createReactClass({displayName:"ShowElementAnalysisToolbarItem",onClick:function(){Injector.resolve(["WebServiceController","AiAnalysisService"],function(a,b){a.getElementAnalysis(function(a){b.showResults(a)})})},getIcon:function(){return Injector.resolve([{depName:"IconRepository",depEnv:a.env}],function(a){return a.getAnalysisImage()})},render:function(){return React.createElement(b.ToolbarButton,{show:this.props.show,buttonId:"AiAnalysisButton",hideOnSidebarDash:!1,onClick:this.onClick,icon:this.getIcon(),hoveredIcon:this.getIcon(),text:window.webconLocale.cAnalysis,hideText:this.props.hideText})}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{};return b.TakeOverTaskToolbarItem=createReactClass({displayName:"TakeOverTaskToolbarItem",onClick:function(){Injector.resolve(["DocumentController"],function(a){a.takeOverElement()})},getIcon:function(){return Injector.resolve([{depName:"IconRepository",depEnv:a.env}],function(a){return a.getDelegateImage()})},getHoveredIcon:function(){return Injector.resolve([{depName:"IconRepository",depEnv:a.env}],function(a){return a.getHoveredDelegateImage()})},render:function(){return React.createElement(b.ToolbarButton,{show:this.props.show,buttonId:"TakeOverTaskToolbarButton",hideOnSidebarDash:!0,onClick:this.onClick,icon:this.getIcon(),hoveredIcon:this.getHoveredIcon(),text:window.webconLocale.cToolbarTakeOverTask,hideText:this.props.hideText})}}),a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{};return b.UserActionsToolbarButton=createReactClass({displayName:"UserActionsToolbarButton",propTypes:{data:PropTypes.array.isRequired},getActionIcon:function(a){return Injector.inject("ActionIconService").getActionIcon(a,!1)},getActionHoveredIcon:function(a){return Injector.inject("ActionIconService").getActionIcon(a,!0)},getActionOnClick:function(a){return function(){Injector.resolve(["DocumentController"],function(b){b.invokeMenuAction(a)})}},getItems:function(){var a=this;return a.props.data.map(function(c,d){return"action"===c.type?React.createElement(b.ToolbarButton,{key:d,hideOnSidebarDash:!0,icon:a.getActionIcon(c),hoveredIcon:a.getActionHoveredIcon(c),onClick:a.getActionOnClick(c),text:c.name,hideText:!1}):"group"===c.type?React.createElement(b.UserActionsToolbarButton,{key:d,data:c.actions,menuItemsInLightTheme:a.props.menuItemsInLightTheme,icon:a.getActionIcon(c),hoveredIcon:a.getActionHoveredIcon(c),text:c.name,hideText:!1}):React.createElement("span",{key:d},"Error, unsupported action type [",c.type,"]")})},render:function(){if(_.isEmpty(this.props.data))return null;var a=this.getItems();return this.props.dropdown?React.createElement(b.ToolbarButton,{icon:this.props.icon,hoveredIcon:this.props.hoveredIcon,buttonId:this.props.buttonId,hideOnSidebarDash:!0,text:this.props.text,hideText:this.props.hideText,reportWidth:this.props.reportWidth,toggleParentDropdownBeforeOnClick:this.props.toggleParentDropdownBeforeOnClick},a):React.createElement("span",null,a)}}),b.UserActionsToolbarButton.defaultProps={dropdown:!0},a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{};return b.UserActionsToolbarItem=createReactClass({displayName:"UserActionsToolbarItem",propTypes:{data:PropTypes.array.isRequired},getIcon:function(){return Injector.resolve([{depName:"IconRepository",depEnv:a.env}],function(a){return a.getUserActionsImage()})},getHoveredIcon:function(){return Injector.resolve([{depName:"IconRepository",depEnv:a.env}],function(a){return a.getHoveredUserActionsImage()})},render:function(){var a;return Injector.resolve(["FormInfo"],function(b){a=!!b.historicalVersionsInfo&&b.historicalVersionsInfo.isInHistoricalVersionPreview},this),React.createElement(b.UserActionsToolbarButton,{show:this.props.show&&!a,dropdown:this.props.dropdown,data:this.props.data,icon:this.getIcon(),hoveredIcon:this.getHoveredIcon(),buttonId:"UserActionsToolbarItem",text:window.webconLocale.cUserActions,hideText:this.props.hideText})}}),b.UserActionsToolbarItem.defaultProps={dropdown:!0},a}(window.webcon||{}),window.webcon=function(a){var b=a.views=a.views||{};return b.UserModeToolbarItem=createReactClass({displayName:"UserModeToolbarItem",onClick:function(){var a;this.props.admin?a=1:this.props.standard&&(a=0),void 0!==a&&Injector.resolve(["RedirectService","QueryStringParamsService"],function(b){b.toggleAdminMode(a)})},getText:function(){return this.props.admin?"Admin":this.props.standard?"Standard":""},getButtonId:function(){return this.props.admin?"AdminToolbarButton":this.props.standard?"StandardToolbarButton":null},getIcon:function(){return Injector.resolve([{depName:"IconRepository",depEnv:a.env}],function(a){return a.getAdminImage()})},getHoveredIcon:function(){return Injector.resolve([{depName:"IconRepository",depEnv:a.env}],function(a){return a.getHoveredAdminImage()})},render:function(){return React.createElement(b.ToolbarButton,{show:this.props.show,buttonId:this.getButtonId(),hideOnSidebarDash:!0,onClick:this.onClick,icon:this.getIcon(),hoveredIcon:this.getHoveredIcon(),text:this.getText(),hideText:this.props.hideText})}}),a}(window.webcon||{}),window.webcon=function(a){return a.businessRules=function(a){return a.tracer=function(){var a=function(a,b){};return{redrawTrace:function(a){Injector.resolve(["InitialRenderService","Store","$Window"],function(b,c,d){d.webcon.rulesTrace=a,b.render(c.getStore())})},showTracer:a}}(),a.logger=function(){var a=[];return{getRootLevelDictionary:function(){return a},resetRoot:function(){a=[]},begin:function(b,c){null!==c&&void 0!==c||(c=a);var d=[],e={name:b,children:d,isSuccess:!1,time:new Date,error:{}};return c.push(e),{childElements:d,index:c.length-1}},end:function(b,c){null!==c&&void 0!==c||(c=a),c[b].isSuccess=!0},error:function(b,c,d){null!==d&&void 0!==d||(d=a);var e=d[b];e.isSuccess=!1,e.error=c}}}(),a}(a.businessRules||{}),a}(window.webcon||{}),Injector.factory("WFConfirmBodyFactory",["BarcodeService"],function(a){function b(b){return React.createElement("div",null,React.createElement("span",{style:{"font-size":"xx-small"}},a.createBarcodeLabel(b)))}function c(a,c,d){var e=c?b(c):"";return React.createElement("div",null,d?React.createElement("div",{className:"extra-message"},d):null,React.createElement("div",{className:"signature"},a),e)}function d(a){return React.createElement("button",{className:"btn btn-danger accept-button",ref:a},"OK")}return{getWFConfirmBody:c,getWFConfirmFooter:d}},Injector.env.global),Injector.instance("ActionIconService",["IconRepository"],function(a){function b(b,c){if(Guard.notNull(b,"ActionInfoForActionUrl"),b.predefinedIconId)switch(b.predefinedIconId){case 1:return c?a.getHoveredPrinterIcon():a.getPrinterIcon();case 2:return c?a.getHoveredDocumentIcon():a.getDocumentIcon();case 3:return c?a.getHoveredWordIcon():a.getWordIcon();case 4:return c?a.getHoveredPdfIcon():a.getPdfIcon()}return b.iconUrl?a.getCustomIcon(b.iconUrl):a.getDefaultActionIcon()}return{getActionIcon:b}}),Injector.instance("ActionService",["PopupController","FormInfo","HyperLinkFormatter","PortalAttachmentPreviewService"],function(a,b,c,d){function e(b,c){if(Guard.notNull(b,"ActionResult"),b.confirmMessage){var d=c;a.showWFAlert(d,b.confirmMessage,function(){f(b)})}else f(b)}function f(a){g(a.urlsToRegister)||a.formWasSaved&&Injector.resolve(["RedirectService"],function(a){a.reload()})}function g(a){return a.length>0&&i(a[0])}function h(){Injector.resolve(["AttachmentController"],function(a){a.loadCurrentAttachments()})}function i(a){var b=c.openModeEnum,e=null;switch(Injector.resolve(["OpenLinkHandler"],function(a){e=a}),a.urlType){case"HtmlUrl":return d.showAttachmentPreviewInModal(a.url,webconLocale.cGeneratedFile,"html",void 0,!0,[],[]),!1;case"RedirectUrl":return a.showInNewWindow?e.openWithoutRestrictions(a.url,b.newWindow):e.openWithoutRestrictions(a.url);case"DocxGeneration":case"PdfGeneration":return h(),d.showAttachmentPreviewInModal(a.url,webconLocale.cGeneratedFile,"pdf",void 0,!0,[],[]),!1}return!1}function j(a){if(a.length>0){var b=a[0],c=b.urlType;if("DocxGeneration"===c||"PdfGeneration"===c){a=[Object.assign({},b,{urlType:"RedirectUrl",showInNewWindow:!0})]}}return g(a)}return{handleActionInvoke:e,openActionUrl:i,handleOnPathActionResult:j}}),Injector.instance("ActivitiesWatcher",[],function(){function a(){c=new Date}function b(){var a=new Date;return Math.abs(a-c)>24e4}var c=new Date;return{registerActivity:a,isUserIdle:b}}),Injector.factory("ArchiveDataDownloadService",["$Window","FormInfo","Ajax"],function(a,b,c){function d(){a.location=c.getUrlWithRunningAddress("downloadLastVersion")}function e(){a.location=c.getUrlWithRunningAddress("downloadHistoryVersions")}return{downloadLastVersion:d,downloadHistoryVersions:e}},Injector.env.global),Injector.instance("AttachmentActionsAvailabilityService",["FormInfo","DeviceInfo","$Window","SystemSettings","Store"],function(a,b,c,d,e){function f(d){return d.isEditable&&d.canEdit&&a.wfdId>0&&c.model.attachmentConfig.enableEdit&&!b.isMobile(c.navigator)&&(a.editMode||j())}function g(a){var d=b.isMobile(c.navigator)&&b.isNativeMobileApp();return(a.isPreviewable||a.canCreatePreview)&&(d||!b.isMobile(c.navigator))}function h(a){return(a.isPreviewable||a.canCreatePreview)&&!b.isNativeMobileApp()&&c.model.attachmentConfig.enablePreviewInNewWindow}function i(b){
return c.model.attachmentConfig.enableAddDelete&&b.canDelete&&b.isCurrent&&a.editMode&&!a.isDocumentTemplate}function j(){return d.instalationType==m}function k(){return(!a.isDocumentTemplate||0===e.getState().attachments.attachmentsCount)&&(a.editMode&&a.allowAddAndDeleteAttachments&&!b.isBrowserIE()&&!b.isMobile(c.navigator))}function l(){return a.editMode&&a.allowAddAndDeleteAttachments&&b.isBrowserIE()&&!b.isMobile(c.navigator)&&c.model.attachmentConfig.enableCopyFromClipboard}var m=0;return{isEditAvailable:f,isPreviewAvailable:g,isPreviewInNewWindowAvailable:h,isDeleteAvailable:i,isSpListEditAvailable:j,isPasteAvailable:k,isActiveXPasteAvailable:l}}),Injector.instance("AttachmentIconActionService",["AttachmentsDownloadService","AttachmentActionsAvailabilityService","AttachmentsPreviewService"],function(a,b,c){function d(d,e,f,g,h){d.isWithoutContent||(b.isPreviewAvailable(d)?c.preview(d,e,f,g,h):b.isPreviewInNewWindowAvailable(d)?c.previewInNewWindow(d,e,f):a.download(d.attId,d.version,f))}return{handleIconClick:d}}),Injector.factory("AttachmentsIconService",["AttachmentsUrlBuilder","$Window"],function(a,b){function c(b,c){switch(b.type){case"doc":case"docx":case"dot":case"docm":case"odt":return c?e+"mswordicon15_small.png":e+"mswordicon15.png";case"xls":case"xlw":case"xlt":case"xlm":case"xlc":case"xla":case"xlsx":return c?e+"msexcelicon15_small.png":e+"msexcelicon15.png";case"mpp":case"mp":return c?e+"MSProjectIcon15_small.png":e+"MSProjectIcon15.png";case"ppt":case"pptx":case"pps":return c?e+"MSPowerPoint15_small.png":e+"MSPowerPoint15.png";case"vsd":return c?e+"Microsoft_Visio_icon_small.png":e+"Microsoft_Visio_icon.png";case"msg":case"eml":case"emlx":return c?e+"msg_small.png":e+"msg.png";case"pdf":return c?e+"pdf_small.png":e+"pdf_big.png";case"txt":return c?e+"TxtIcon_small.png":e+"TxtIcon.png";case"sql":return c?e+"TxtIcon_small.png":e+"SqlIcon.png";case"webm":return c?e+"webmIcon_small.png":e+"webmIcon.png";case"mp4":case"m4a":case"m4p":case"m4b":case"m4r":case"m4v":return c?e+"mp4Icon_small.png":e+"mp4Icon.png";case"ogv":return c?e+"ogvIcon_small.png":e+"ogvIcon.png";case"tif":case"tiff":case"gif":case"jpg":case"jpeg":case"jpe":case"png":case"bmp":case"dib":case"ico":case"jfif":case"webp":return c?e+"picture_16x16.png":a.buildAttachmentMiniatureLink(b.attId,b.version);default:return c?e+"fileIcon_small.png":e+"fileIcon.png"}}var d=b.location.origin+((b.initModel?b.initModel.runningAddress:"")||""),e=d+"/_layouts/15/images/webcon/";return{getIcon:function(a){return c(a)},getSmallIcon:function(a){return c(a,!0)}}}),Injector.factory("AttachmentsActionService",["Ajax"],function(a){function b(b,c,d,e,f){var g="attachments/"+c.attId+"/action/"+d.actionId+"/exec";a.post(g,{model:JSON.stringify(b)},function(a){e&&e(a)},function(a){f&&f(a)})}return{execAction:b}}),Injector.factory("AttachmentsAddOrOverwriteService",["$Window","AttachmentsFinder","PopupController","ModelMapper","Store","TreeHelper"],function(a,b,c,d,e,f){function g(a){var b,c=e.getState().attachments.attachments;return a.category&&(b=h(c,function(b){return b.category===a.category&&b.name===a.fileName},!1)),a.category&&b||(b=h(c,function(b){return b.name===a.fileName},!1)),b}function h(a,c,d){return b.findInCurrentAttachments(a,c,d)}function i(a,b,d){_.each(a,function(b){b.category=a.category,b.attachmentToOverwrite=g(b)});var e=_.filter(a,function(a){return void 0!==a.attachmentToOverwrite&&null!==a.attachmentToOverwrite});0===e.length?b(a):1===e.length?c.showOverwriteOrAddNewAttachment(function(){e[0].overwrite=!0,e[0].attachmentId=e[0].attachmentToOverwrite.attId,b(a)},function(){e[0].overwrite=!1,b(a)},e[0],function(){e[0].skip=!0,b(a)}):e.length>1&&c.showOverwriteOrAddManyAttachments(e,function(c){_.each(c,function(b){var c=a[b.id];switch(b.overwriteMode){case j.overwrite:c.overwrite=!0,c.attachmentId=c.attachmentToOverwrite.attId;break;case j.addNew:c.overwrite=!1;break;case j.skip:c.skip=!0}}),b(a)},d)}var j={none:0,overwrite:1,addNew:2,skip:3};return{findCurrentAttachment:h,showOverwriteOrAddManyAttachments:i}}),Injector.instance("AttachmentsCopyPasteService",["$Window","FormInfo","PopupController","DateTimeFormatter","DeviceInfo","AttachmentActionsAvailabilityService"],function(a,b,c,d,e,f){function g(a,d){var f=e.isBrowserEdge()?a.clipboardData.items.length?a.clipboardData.items[0].getAsFile():null:(a.clipboardData||a.originalEvent.clipboardData).files[0];f&&f.type.startsWith("image")&&(e.isBrowserEdge()?(f=new Blob([f],{type:f.type}),f.name=i()):f=new File([f],i(),{type:f.type}),b.areAttachmentCategories?0===d.size()?c.showSelectAttachmentCategory(function(a){$("#dropfileupload").fileupload("add",{files:[f],category:a})},function(){}):1===d.size()&&(selectedCategory=d[0].attributes["data-drop"]?d[0].attributes["data-drop"].value:void 0,$("#dropfileupload").fileupload("add",{files:[f],category:selectedCategory})):$("#dropfileupload").fileupload("add",{files:[f]}))}function h(a,b,c){if(e.isBrowserIE()){for(var f=[],g=a.split(";|"),h=b.split(";|"),i=0;i<g.length;i++){var j=g[i];if(j){j=window.atob(j);for(var k=new ArrayBuffer(j.length),l=new Uint8Array(k),m=0;m<j.length;m++)l[m]=j.charCodeAt(m);var n=new Blob([k]);n.name=h[i]||d.formatDateWithPreciseTime(new Date)+"."+c,f.push(n)}}$("#dropfileupload").fileupload("add",{files:f})}}function i(){return d.formatDateWithPreciseTime(new Date)+".png"}function j(a,b){for(var c,d=a.querySelectorAll(m),e=0;e<d.length;e++)c=d[e],b(c)}function k(){return e.isBrowserIE()||e.isBrowserEdge()?a.model.applicationColor:a.model.applicationColor+"65"}function l(a){a.classList.remove("paste-target"),j(a,function(a){a.classList.remove("paste-target")})}var m=".drop-target";return{toggleOverlay:function(b,c){if(f.isPasteAvailable()){var d=b.target,e=ReactDOM.findDOMNode(c),h=$(b.target).closest(m,e);0===h.size()?(e.classList.add("paste-target"),j(e,function(a){a.classList.remove("paste-target")})):1===h.size()&&(e.classList.remove("paste-target"),j(e,function(a){a!==h[0]?a.classList.remove("paste-target"):a.classList.add("paste-target")}));var i=function(b){f.isPasteAvailable()&&g(b,h),l(e),a.document.removeEventListener("paste",i)};a.document.addEventListener("paste",i),a.document.addEventListener("click",function b(c){c.target!==d&&0===$(c.target).parents(m).length&&(l(e),a.document.removeEventListener("click",b)),a.document.removeEventListener("paste",i)})}},getOutlineColor:k,uploadGivenFilesFromActiveX:h}}),Injector.factory("AttachmentsDownloadService",["$Window","FormInfo","QueryStringParamsService","DeviceInfo","AttachmentsUrlBuilder"],function(a,b,c,d,e){function f(b,c,e){d.isMobile(a.navigator)&&!d.isNativeMobileApp()?a.open(e):a.location=e}return{download:function(a,b,c){f(a,b,c||e.buildDownloadUrl(a,b))},edit:function(b){a.location=e.buildEditUrl(b)}}}),Injector.instance("AttachmentsDropService",["AttachmentController","AttachmentsUploadService","FormInfo","PopupController","$Window","Store"],function(a,b,c,d,e,f){var g,h=".drop-target",i=function(a){if(a)for(var b=0;b<a.length;b++)if("Files"===a[b])return!0;return!1},j=function(a,b){for(var c,d=a.querySelectorAll(h),e=0;e<d.length;e++)c=d[e],b(c)};return{registerUpload:function(k,l,m,n,o,p){var q=ReactDOM.findDOMNode(l);b.registerUpload(k,m,n,o,p).bind("fileuploaddrop",function(b,e){if(c.areAttachmentCategories){var f=$(b.originalEvent.delegatedEvent.target).closest(h,q);if(0===f.size()){if(_.some(e.files,function(b){return!a.isMailAttachment(b.name)}))return d.showSelectAttachmentCategory(function(a){e.category=a,$(k).fileupload("add",e)},function(){}),!1}else if(1===f.size()){var g=f[0].attributes["data-drop"]?f[0].attributes["data-drop"].value:void 0;e.category=g}}}),$(ReactDOM.findDOMNode(k)).fileupload("option","dropZone",$(q));var r=function(a){a.preventDefault(),g=a.target;var b=a.dataTransfer;if(b&&b.types&&i(b.types))if(q.contains(a.target)){var c=$(a.target).closest(h,q);0===c.size()?(q.classList.add("dragover"),q.classList.add("in"),j(q,function(a){a.classList.remove("dragover"),a.classList.remove("in")})):1===c.size()&&(q.classList.remove("dragover"),q.classList.remove("in"),j(q,function(a){a!==c[0]?(a.classList.remove("dragover"),a.classList.remove("in")):(a.classList.add("dragover"),a.classList.add("in"))}))}else q.classList.add("dragover"),q.classList.remove("in"),j(q,function(a){a.classList.remove("dragover"),a.classList.remove("in")})},s=function(a){g===a.target&&(q.classList.remove("dragover"),q.classList.remove("in"),j(q,function(a){a.classList.remove("dragover"),a.classList.remove("in")}))},t=function(a){a.preventDefault(),a.dataTransfer&&_.includes(a.dataTransfer.types,"Files")&&q.contains(a.target)&&(a.dataTransfer.dropEffect=c.isDocumentTemplate&&0!==f.getState().attachments.attachmentsCount?"none":"copy",a.stopPropagation())},u=function(a){a.preventDefault(),q.classList.remove("dragover"),q.classList.remove("in"),j(q,function(a){a.classList.remove("dragover"),a.classList.remove("in")})};return e.document.addEventListener("dragenter",r),e.document.addEventListener("dragleave",s),e.document.addEventListener("dragover",t),e.document.addEventListener("drop",u),{destroy:function(){e.document.removeEventListener("dragenter",r),e.document.removeEventListener("dragleave",s),e.document.removeEventListener("dragover",t),e.document.removeEventListener("drop",u),$(ReactDOM.findDOMNode(k)).fileupload("destroy")}}}}}),Injector.instance("AttachmentsFileUploadHandler",["AttachmentsAddOrOverwriteService","AttachmentController","AttachmentsUploadService","ErrorDisplayService","ModelController","FormInfo"],function(a,b,c,d,e,f){function g(g){var h=e.getDataModel();if(g.isLastFile){var i=g.queue,j=function(){c.clearQueue()},k=function(a){_.each(a,function(a){if(a.skip)return void c.removeFromQueue(a.id);a.submitted=!0;var d=a.pluginData,e={attId:a.overwrite?a.attachmentId:void 0,name:a.fileName,categoryIdHashDefaultName:b.idHashDefaultName(g.category),model:JSON.stringify(h)};0!==f.wfdId&&(e.wfdId=f.wfdId),d.formData={param:JSON.stringify(e)},d.submit()})},l=[];if(i=_.pick(i,function(a){var d=b.validateFileNameNoModal(a.fileName);return d.isValid||(c.removeFromQueue(a.id),l.push(d)),d.isValid}),l.length>0){var m=_.map(l,function(a){return a.error}).join("\r\n");d.displayErrorMessageOnTopStandalone(m,0,void 0,function(){a.showOverwriteOrAddManyAttachments(i,k,j)})}else a.showOverwriteOrAddManyAttachments(i,k,j)}}return{handleUploadAdd:g}}),Injector.factory("AttachmentsFinder",["ModelMapper","TreeHelper"],function(a,b){function c(b){return _.find(b,function(b){return a.isCurrent(b)})}function d(d){var e=c(d);return e?b.flattenNode(e,function(b){return b.nodeType===a.attachmentNodeType.file}):[]}function e(b){var c=_.find(b,function(b){return a.isConversations(b)});if(c&&c.nodes&&0!==!c.nodes.length){return _.find(c.nodes,function(b){return a.isCurrent(b)})}}function f(c){var d=e(c);return d?b.flattenNode(d,function(b){return b.nodeType===a.attachmentNodeType.message}):[]}function g(a,d,f){var g=void 0,h=c(a);if(h&&h.nodes&&h.nodes.length>0&&(g=b.findNode(h.nodes,d)),f=void 0===f||null===f||f,!g&&f){var i=e(a);i&&i.nodes&&i.nodes.length>0&&(g=b.findNode(i.nodes,d))}return g}return{getCurrentAttachmentNode:c,getCurrentAttachmentsFlatList:d,getCurrentConversationsNode:e,getCurrentConversationsFlatList:f,findInCurrentAttachments:g}}),Injector.instance("AttachmentsGalleryBuilder",["AttachmentActionsAvailabilityService","AttachmentsUrlBuilder","TreeHelper","ModelMapper"],function(a,b,c,d){function e(e){var f={pictureGallery:[],nonPictureGallery:[]};return e?(c.flattenNode(e,function(a){return a.nodeType===d.attachmentNodeType.file||a.nodeType===d.attachmentNodeType.message}).map(function(c){var d={};if(a.isPreviewAvailable(c))switch(d.url=b.buildPreviewLink(c.attId,c.version),d.downloadUrl=b.buildDownloadUrl(c.attId,c.version),d.name=c.name,d.extension=webcon.extensions.getExtension(c.name),c.type){case"jpg":case"jpeg":case"gif":case"bmp":case"tiff":case"png":f.pictureGallery.push(d);break;default:f.nonPictureGallery.push(d)}}),f):f}return{createGalleries:e}}),Injector.instance("AttachmentsPreviewService",["AttachmentsDownloadService","PopupController","DeviceInfo","$Window","PortalAttachmentPreviewService","AttachmentsUrlBuilder","AttachmentsGalleryBuilder","SidebarContextService"],function(a,b,c,d,e,f,g,h){function i(i,k,l,m,n){var o=k||f.buildPreviewLink(i.attId,i.version),l=l||f.buildDownloadUrl(i.attId,i.version);if(c.isNativeMobileApp()){var p=webcon.extensions.getExtension(i.name);"html"!==p.toLowerCase()&&"htm"!==p.toLowerCase()||(o=f.buildHtmlLink(i.attId,i.version)),d.WebviewManager.attachment({url:o,mode:1},function(){i.isPreviewable||i.canCreatePreview?b.showAttachmentsPreview(i):a.download(i.attId,i.version,l)})}else if(c.isMobile(d.navigator))j(i);else{var q=g.createGalleries(m);if(h.isInIframe())window.parent.postMessage({actionType:"ATTACHMENT_PREVIEW",url:o,downloadUrl:l,name:i.name,extension:webcon.extensions.getExtension(i.name),pictureGallery:q.pictureGallery,nonPictureGallery:q.nonPictureGallery},d.location.origin);else switch(n){case"IN_PLACE":e.showAttachmentPreviewInPlace(o,i.name,webcon.extensions.getExtension(i.name),l);break;case"IN_MODAL":e.showAttachmentPreviewInModal(o,i.name,webcon.extensions.getExtension(i.name),l,!1,q.pictureGallery,q.nonPictureGallery);break;default:e.showAttachmentPreview(o,i.name,webcon.extensions.getExtension(i.name),l,!1,q.pictureGallery,q.nonPictureGallery)}}}function j(a,b){var c,e="AttachmentPreview",g=webcon.extensions.getExtension(a.name);c="html"===g.toLowerCase()||"htm"===g.toLowerCase()?f.buildHtmlLink(a.attId,a.version):b||f.buildPreviewLink(a.attId,a.version),d.open(c,e)}return{preview:i,previewInNewWindow:j}}),Injector.instance("AttachmentsSorter",["LocaleSort","ModelMapper"],function(a,b){function c(b,c,d){return a.localeSort(b,c,d)}function d(b,c){var d;switch(c){case f.default:case f.name:d="name";break;case f.description:d="description";break;case f.insertDateAsc:case f.insertDateDesc:d="insertDate"}var e=a.localeSort(b,d);return c===f.insertDateDesc&&e.reverse(),e}function e(c,e){switch(c.nodeType){case b.attachmentNodeType.attachmentsGroup:return function(a){return d(a,e)};case b.attachmentNodeType.bpsElement:return function(b){return a.localeSort(b,"name")};case b.attachmentNodeType.conversation:return function(b){return a.localeSort(b,"sentDate").reverse()};case b.attachmentNodeType.group:switch(c.staticNodeType){case b.staticAttachmentTreeNodeType.conversations:return function(b){return a.localeSort(b,"order")};case b.staticAttachmentTreeNodeType.current:return c.nodes[0]&&c.nodes[0].nodeType===b.attachmentNodeType.attachmentsGroup?function(b){return a.localeSort(b,"name")}:c.nodes[0]&&c.nodes[0].nodeType===b.attachmentNodeType.conversation?function(b){return a.localeSort(b,"sentDate").reverse()}:function(a){return a};case b.staticAttachmentTreeNodeType.custom:case b.staticAttachmentTreeNodeType.relatedChild:case b.staticAttachmentTreeNodeType.relatedParent:return function(b){return a.localeSort(b,"name")};default:return function(a){return a}}default:return function(a){return a}}}var f={default:0,name:1,description:2,insertDateAsc:3,insertDateDesc:4};return{attachmentSortOrder:f,sortBy:c,sortByConfig:d,sortFunctionFactory:e}}),Injector.instance("AttachmentsUploadService",["AttachmentController","ErrorDisplayService","Ajax","FormInfo","$Window"],function(a,b,c,d,e){var f={},g={};return{clearQueue:function(){f={}},removeFromQueue:function(a){f=_.omit(f,function(b,c){return c===a})},registerUpload:function(h,i,j,k,l){return $(ReactDOM.findDOMNode(h)).fileupload({url:e.location.origin+((e.initModel?e.initModel.runningAddress:"")||"")+d.contextWebUrl+c.getUrl("attachments/UploadAttachment2"),dropZone:null,autoUpload:!1,singleFileUploads:!0,sequentialUploads:!1,headers:{"CustomHeaders-TimeZone":moment.tz.guess()}}).bind("fileuploadadd",function(c,e){if(d.isDocumentTemplate&&e.originalFiles.length>1)return void b.displayErrorMessageOnTop(webconLocale.cCanAddOnlyOneAttachment,0);e.files[0].uniqueId=_.uniqueId("new-file-"),e.isFirstFile=e.files[0]===e.originalFiles[0],f[e.files[0].uniqueId]={attachmentId:null,fileName:e.files[0].name,id:e.files[0].uniqueId,isMail:a.isMailAttachment(e.files[0].name),overwrite:!1,pluginData:e,skip:!1},"function"==typeof l?l({category:a.idHashDefaultName(e.category),isLastFile:Object.keys(f).length===e.originalFiles.length,queue:f}):e.submit()}).bind("fileuploaddone",function(a,b){var c=b.result;g[b.files[0].uniqueId].done=!0,g[b.files[0].uniqueId].isSkipped=c.isSkipped,_.every(g,function(a){return a.done})&&(c.isLastFileDone=!0,c.queue=_.clone(g),g={}),i(c)}).bind("fileuploadstart",function(){"function"==typeof j&&j()}).bind("fileuploadsubmit",function(a,b){f=_.pick(f,function(a){return void 0===a.submitted||null===a.submitted||!0!==a.submitted}),g[b.files[0].uniqueId]={done:!1,fileName:b.files[0].name}}).bind("fileuploadfail",function(a,c){b.displayErrorMessageOnTop(webconLocale.cErrorWhileConnection,0),g[c.files[0].uniqueId].done=!0;var d=!1;_.every(g,function(a){return a.done})&&(d=!0,g={}),"function"==typeof k&&k(d)})}}}),Injector.instance("AttachmentsUrlBuilder",["$Window","FormInfo","QueryStringParamsService","PortalAttachmentClipboardService"],function(a,b,c,d){function e(a,d){return b.isArchive?a=c.setParameter("wfdId",b.wfdId,a):(void 0!==d&&null!==d&&void 0!==b.historicalVersionsInfo&&null!==b.historicalVersionsInfo&&b.historicalVersionsInfo.isInHistoricalVersionPreview&&(a=c.setParameter("fileVersion",d,a)),a)}function f(a,c){var d="/api/nav/db/"+b.dbId+"/attachments/"+a+"/download";return l+e(d,c)}function g(a){return l+"/api/nav/db/"+b.dbId+"/element/"+b.wfdId+"/attachments/"+a+"/edit"}function h(a,c){return e(l+"/api/nav/db/"+b.dbId+"/attachments/"+a+"/preview",c)}function i(a,c){return e(l+"/api/nav/db/"+b.dbId+"/attachments/"+a+"/miniature",c)}function j(a,c){return e(l+"/attachments/db/"+b.dbId+"/html/"+a,c)}function k(a){return d.buildAttachmentUrlForClipboard(b.guid,b.application,b.process,a)}var l=a.location.origin+((a.initModel?a.initModel.runningAddress:"")||"");return{buildDownloadUrl:f,buildEditUrl:g,buildPreviewLink:h,buildAttachmentMiniatureLink:i,buildHtmlLink:j,buildAttachmentLinkForClipboard:k}}),Injector.instance("AttachmentsUsageService",["Store"],function(a){function b(b){var e=a.getState().subelements;return!0===_.some(e,function(a){var e=a.control.data.rows;return _.some(e,function(a){return _.some(a.cells,function(a){return!!c(a)&&d(a,b)})})})}function c(a){return"LocalAttachments"===a.type}function d(a,b){return _.some(a.data.attachmentIds,function(a){return a===b})}return{isUsed:b}}),Injector.instance("PortalAttachmentClipboardService",[],function(){function a(){}function b(){}return{buildAttachmentUrlForClipboard:a,copyUrlToClipboard:b}}),Injector.instance("PortalAttachmentPreviewService",[],function(){function a(){}function b(){}function c(){}return{showAttachmentPreview:a,showAttachmentPreviewInPlace:b,showAttachmentPreviewInModal:c}}),Injector.instance("RelativeAttachmentIconActionService",["AttachmentIconActionService","RelativeAttachmentsUrlBuilder"],function(a,b){function c(c,d){var e=b.buildPreviewLink(c.attId,c.version),f=b.buildDownloadUrl(c.attId,c.version);a.handleIconClick(c,e,f,void 0,d)}return{handleIconClick:c}}),Injector.instance("RelativeAttachmentsDownloadService",["AttachmentsDownloadService","RelativeAttachmentsUrlBuilder"],function(a,b){function c(c,d){var e=b.buildDownloadUrl(c,d);a.download(c,d,e)}function d(b){a.edit(b)}return{download:c,edit:d}}),Injector.instance("RelativeAttachmentsPreviewService",["AttachmentsPreviewService","RelativeAttachmentsUrlBuilder"],function(a,b,c){function d(d){var e=b.buildPreviewLink(d.attId,d.version);return a.preview(d,e,void 0,void 0,c)}function e(c){var d=b.buildPreviewLink(c.attId,c.version),e=b.buildDownloadUrl(c.attId,c.version);return a.previewInNewWindow(c,d,e)}return{preview:d,previewInNewWindow:e}}),Injector.instance("RelativeAttachmentsUrlBuilder",["AttachmentsUrlBuilder","QueryStringParamsService"],function(a,b){function c(c,d){var e=a.buildDownloadUrl(c,d);return e=b.setParameter("allowFromOtherElements",1,e)}function d(c,d){var e=a.buildPreviewLink(c,d);return e=b.setParameter("allowFromOtherElements",1,e)}function e(b){return a.buildEditUrl(b)}function f(b,c){return a.buildAttachmentMiniatureLink(b,c)}function g(b,c){return a.buildHtmlLink(b,c)}return{buildDownloadUrl:c,buildEditUrl:e,buildPreviewLink:d,buildAttachmentMiniatureLink:f,buildHtmlLink:g}}),Injector.factory("TreeHelper",[],function(){function a(b,c){b=b.slice();for(var d=b.length-1;d>=0;d--)c(b[d])?b.splice(d,1):b[d].nodes&&b[d].nodes.length>0&&(b[d].nodes=a(b[d].nodes,c));return b}function b(a,b){for(var d=void 0,e=0;void 0===d&&e<a.length;e++)d=c(a[e],b);return d}function c(a,b){if(b(a))return a;if(a.nodes&&a.nodes.length>0){for(var d=void 0,e=0;void 0===d&&e<a.nodes.length;e++)d=c(a.nodes[e],b);return d}}function d(a,b){var c=[];if(a.nodes&&a.nodes.length>0)for(var e=a.nodes,f=0;f<e.length;f++)if(b(e[f])&&c.push(e[f]),e[f].nodes&&e[f].nodes.length>0)for(var g=d(e[f],b),h=0;h<g.length;h++)c.push(g[h]);return c}function e(a,b){a=a.slice(),b=b||function(){return function(a){return a}};for(var c=0;c<a.length;c++)if(a[c].nodes&&a[c].nodes.length>0){var d=b(a[c])(e(a[c].nodes,b));a[c]=Object.assign({},a[c],{nodes:d})}return a}function f(a,b,c,d,e){a=a.slice(),d=d||function(){return function(a){return a}};for(var g=0;g<a.length;g++)if(b(a[g])&&(a[g]=Object.assign({},a[g],c(a[g],e))),a[g].nodes&&a[g].nodes.length>0){var h=d(a[g])(f(a[g].nodes,b,c,d,a[g]));a[g]=Object.assign({},a[g],{nodes:h})}return a}return{deleteNode:a,findNode:b,flattenNode:d,sortNodes:e,updateNode:f}}),Injector.factory("AutocompleteCallbackExecutor",[],function(){function a(a,b,c){if(d)return void c();a&&(b?a(d,b):a(d))}function b(){return d}function c(){d=!0}var d=!1;return{execute:a,isCancelled:b,cancel:c}}),Injector.instance("BPSDataSourceLinkService",["UrlsFactory"],function(a){function b(a,b){return{showAsALink:a,elementId:b.elementId}}function c(b,c){var d=a.createForElement(b);return{displayName:d,url:a.addQueryParams(d,c,!1)}}function d(a,b){return{displayName:"",url:""}}function e(b,c,d){var e=a.createForNewElement(b,c);return{displayName:e,url:a.addQueryParams(e,d,!1)}}return{createUrl:c,createEmbedViewUrl:d,createStartUrl:e,createShowAsALinkData:b}}),Injector.instance("BarcodeService",["FormInfo"],function(a){function b(a){var b=parseInt(a);if(isNaN(b)||isNaN(a))throw new Error("ElementIdForBarcodeMustBeNumber");return b}function c(c){var d=b(c);return a.contextWebUrl+"/_layouts/15/webcon/BarCodeHandler.ashx?KOD="+d}function d(a){var c=b(a),d=c.toString(),e="0000000000";return e.substring(0,e.length-d.length)+d}return{createBarcodeUrl:c,createBarcodeLabel:d}}),Injector.instance("BlockingPanelService",["RedrawService"],function(a){function b(){a.applyProps("BlockingPanel",{isVisible:!0})}function c(){a.applyProps("BlockingPanel",{isVisible:!1})}return{disableAll:b,enableAll:c}}),Injector.instance("CalculateTextWidthService",[],function(){function a(a){var c=b||(b=document.createElement("canvas")),d=c.getContext("2d");return d.font='14px "Helvetica Neue", Helvetica, Arial, sans-serif',d.measureText(a||"").width}var b;return{calc:a}}),Injector.instance("CommentsSortService",[],function(){function a(a){return _.sortBy(a,function(a){return new Date(a.date)}).reverse()}return{sortCommentsByDate:a}}),Injector.instance("ComponentContainerService",["logger"],function(a){var b={};return{registerComponent:function(c,d){b[c]||(b[c]=[]),b[c].push(d),a.debug("componentRegistered:"+c)},unregisterComponent:function(c,d){var e=b[c];e&&(b[c]=_.reject(e,function(a){return a===d})),a.debug("componentUnregistered:"+c)},getComponent:function(c){var d=b[c];if(!d)throw a.error("NoComponentNamed:"+c),new Error("NoComponentNamed:"+c);return d},isRegistered:function(a){return!(!b||!b[a])},areMainPanelsRegistered:function(){return!(!b||!(b.Header&&b.LeftColumn&&b.RightColumn&&b.Bottom||b.MainPanel))}}}),Injector.factory("ControlModelParser",["SubelementModelController"],function(a){function b(b){var c;if(b.hasCustomModel)c=JSON.stringify(b.data);else switch(b.type){case"SingleRowText":c=b.data;break;case"Subelements":c=JSON.stringify(a.mapSubelementsModel(b.data));break;default:c=JSON.stringify(b.data)}return c}return{getModelForControl:b}}),Injector.instance("ControlNameCleaner",[],function(){function a(a){var b=a.toString();return b.startsWith("WFD_")?b.substring(4):b.startsWith("Survey")?b.substring(6):b}return{cleanName:a}}),Injector.instance("DateTimeFormatter",["Localization"],function(a){var b=function(a,b){if(a){var c=moment(a);a=c.isValid()?c.format(b):""}else a="";return a},c=function(a,b){return!a||a._isAMomentObject?a:moment(a,b,!0)};return{formatDateWithPreciseTime:function(c){return b(c,a.getDateWithTimeFormat(!0))},formatDateWithTime:function(c){return b(c,a.getDateWithTimeFormat(!1))},formatDate:function(c){return b(c,a.getDateFormat())},getMomentForDateTime:function(b){return c(b,a.getDateWithTimeFormat(!1))},getMomentForDate:function(b){return c(b,a.getDateFormat())}}}),Injector.instance("DeletedElementService",["PopupController","RedirectService","DeviceInfo","$Window"],function(a,b,c,d){function e(e){var f={forceRefresh:!0,errors:[]},g="";g=c.isNativeMobileApp()?function(){d.WebviewManager.close(f)}:b.reload,a.showWFConfirmControl(g,5e3,g,e.title,e.elementSignature,e.elementId)}return{onDeleteSuccess:e}}),Injector.factory("DeviceInfo",["QueryString","$Window"],function(a,b){var c={android:function(a){return a.userAgent.match(/Android/i)},blackBerry:function(a){return a.userAgent.match(/BlackBerry/i)},iOS:function(a){return a.userAgent.match(/iPhone|iPad|iPod/i)},iOSNew:function(a){return a.userAgent.match(/(iPad|iPhone);.*CPU.*OS (7_|8_)/i)},opera:function(a){return a.userAgent.match(/Opera Mini/i)},windows:function(a){return a.userAgent.match(/IEMobile/i)||a.userAgent.match(/WPDesktop/i)},any:function(a){return c.isNative()||c.android(a)||c.blackBerry(a)||c.iOS(a)||c.iOSNew(a)||c.opera(a)||c.windows(a)},isNative:function(){return"1"===a.getParameter("isNative")}},d=function(){var a=b.navigator.userAgent;return a.indexOf("MSIE ")>-1||!!a.match(/Trident.*rv\:11\./)},e=function(){return b.navigator.userAgent.indexOf("Edge")>-1},f=function(){var a=b.webcon.env;return a===Injector.env.lite||a===Injector.env.outlook||a===Injector.env.massAction};return{isMobile:c.any,isIOS:function(a){return c.iOS(a)&&!c.windows(a)&&!c.iOSNew(a)},isIOSNew:function(a){return c.iOSNew(a)&&!c.windows(a)},isAndroid:function(a){return c.android(a)&&!c.windows(a)},isBlackBerry:function(a){return c.blackBerry(a)&&!c.windows(a)},isOpera:function(a){return c.opera(a)&&!c.windows(a)},isWindows:function(a){return c.windows(a)},isNativeMobileApp:c.isNative,isBrowserIE:d,isBrowserEdge:e,isModern:f}}),Injector.factory("ReadonlyDisplayMode",[],function(){return{setMode:function(){}}}),Injector.factory("ReadonlyDisplayMode",["FormInfo"],function(a){return{setMode:function(){var b=a.readOnlyDisplayType;void 0!==b&&("Standard"===b?$(".centerPanel").addClass("readonly-black"):$(".centerPanel").addClass("readonly-yellow"))}}},Injector.env.lite),Injector.instance("DomService",[],function(){function a(a,b){for(Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(a){for(var b=(this.document||this.ownerDocument).querySelectorAll(a),c=b.length;--c>=0&&b.item(c)!==this;);return c>-1});a&&a!==document;a=a.parentNode)if(a.matches(b))return a;return null}function b(a){return a.getBoundingClientRect().top-document.body.getBoundingClientRect().top}function c(a){var b=a.getBoundingClientRect();return b.top>=0&&b.left>=0&&b.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&b.right<=(window.innerWidth||document.documentElement.clientWidth)}function d(a){var b=a.getBoundingClientRect();return b.top||b.y}function e(a){window.scrollTo(window.scrollX,a)}function f(a){var b=a.clientWidth,c=window.getComputedStyle(a);return b-(parseFloat(c.paddingLeft)+parseFloat(c.paddingRight))}return{getClosest:a,getScrollY:b,isElementInViewport:c,scrollToY:e,getElementTopPos:d,getWidthWithoutPadding:f}}),Injector.instance("EmailAttributeService",["ScriptsRunner","QueryStringParamsService","UserInteractionExecutor","OpenLinkHandler"],function(a,b,c,d){var e=function(a){return"mailto:"+(null!==a&&void 0!==a?a:"")},f=function(a,c,d){return c?b.setEncodedParameter(a,c,d):d},g=function(a){var b=e(a.value);return b=f("subject",a.subject,b),b=f("cc",a.cc,b),b=f("bcc",a.bcc,b),b=f("body",a.body,b)};return{getHref:e,sendEmail:function(a){c.executeWithActiveWaiting(function(){var b=a.state,c=g(b);d.openExternalProtocol(c)})},getMailToOnClick:g}}),Injector.instance("ErrorDisplayService",["RedrawService","PopupController","$Window"],function(a,b,c){function d(){var a=c.model.errors.CriticalErrorsList;a=_.sortBy(a,function(a){return a.Type}),_.each(a,function(a){if(a.InnerError)var b={message:a.InnerError.Message,type:a.InnerError.Type};e(a.Message,a.Type,b)}),k(),$("#loadSpinner").hide(),c.model.errors=void 0}function e(b,c,d){Guard.notNull(b,"message"),"string"!=typeof b&&b.status&&b.statusText&&b.invokedMethodThatFailed&&b.body&&b.body.message&&(b=b.status+" "+b.statusText+", method: "+b.invokedMethodThatFailed+", message: "+b.body.message),o.some(function(a){return a.message===b})||o.push({message:b,type:c,innerError:d}),a.applyProps("ErrorPanel",{errors:o}),k()}function f(b){Guard.notNull(b,"error"),o.some(function(a){return a.message===b.Message})||o.push({message:b.Message,type:b.Type}),a.applyProps("ErrorPanel",{errors:o}),k(),b.InnerError&&f(b.InnerError)}function g(a,c,d,e){Guard.notNull(a,"message"),"string"!=typeof a&&a.status&&a.statusText&&a.invokedMethodThatFailed&&(a=a.status+" "+a.statusText+", method: "+a.invokedMethodThatFailed);var f=[{message:a,type:c,innerError:d}];b.showErrorPopupAlert(f,[],void 0,e)}function h(b){Guard.notNull(b,"validationError"),p.push(b),a.applyProps("ErrorPanel",{validationErrors:p}),k()}function i(a){Guard.notNull(a,"validationError"),p.push(a)}function j(a){Guard.notNull(a,"error"),o.push(a)}function k(){0===o.length&&0===p.length||q()}function l(a){0===o.length&&0===p.length||b.showErrorPopupAlert(o,p,a)}function m(){o.length=0,p.length=0}function n(){p.length=0}var o=[],p=[],q=_.debounce(function(){var a=_.uniq(o,!1,function(a){return a.message});b.showErrorPopupAlert(a,p)},300);return{displayErrorMessageOnTop:e,displayErrorWithInnersOnTop:f,displayErrorMessageOnTopStandalone:g,displayPendingErrors:d,clearErrors:m,displayValidationError:h,clearValidationErrors:n,showErrorAlert:l,addValidationError:i,addError:j}}),Injector.instance("ExternalControlEventService",["ErrorDisplayService"],function(a){function b(a,b,d,e){a.data.type===j.VALIDATION_CALLBACK&&a.source===b&&a.data.id===d&&e(c(a.data,a.origin))}function c(a,b){var c=webconLocale.cExternalCustomControlStoppedAtEvent+a.type;return"boolean"==typeof a.value?a.value?{isValid:!0}:{isValid:!1,origin:b,message:c}:{isValid:a.value.isValid,message:a.value.message?a.value.message:c,origin:b}}function d(){return i(j.ON_SAVE_EXTERNAL_EVENT)}function e(){return i(j.ON_PATH_TRAVERSAL_EXTERNAL_EVENT)}function f(a,b,c){h(a,b,c,j.ON_SAVE_EXTERNAL_EVENT)}function g(a,b,c){h(a,b,c,j.ON_PATH_TRAVERSAL_EXTERNAL_EVENT)}function h(a,b,c,d){k[d]=[].concat(k[d].filter(function(a){return a.id!==c}),[{frame:a,origin:b,id:c}])}function i(c){if(k[c].length<1)return Promise.resolve(!0);var d=k[c].map(function(a){return new Promise(function(c,d){var e=function(d){b(d,a.frame,a.id,function(a){window.removeEventListener("message",e),c(a)})};window.addEventListener("message",e),setTimeout(function(){window.removeEventListener("message",e),d("Timed out")},l)})})
;return k[c].forEach(function(a){a.frame.postMessage({type:c},a.origin)}),Promise.all(d).then(function(b){return!!b.every(function(a){return a.isValid})||(b.filter(function(a){return!a.isValid}).forEach(function(b){a.addValidationError({title:b.origin,errorMessage:b.message})}),a.showErrorAlert(),!1)})}var j=Object.freeze({ON_SAVE_EXTERNAL_EVENT:"ON_SAVE_EXTERNAL_EVENT",ON_PATH_TRAVERSAL_EXTERNAL_EVENT:"ON_PATH_TRAVERSAL_EXTERNAL_EVENT",VALIDATION_CALLBACK:"VALIDATION_CALLBACK"}),k={ON_SAVE_EXTERNAL_EVENT:[],ON_PATH_TRAVERSAL_EXTERNAL_EVENT:[]},l=5e3;return{willSave:d,willTraversePath:e,registerOnSaved:f,registerOnTraversal:g}}),Injector.instance("FocusRegistrationService",["Store"],function(a){function b(b){a.dispatch(d.FormActions.createFormRegisterFocus(b))}function c(){var b=a.getState();return b.form?b.form.lastFocusedFormField:""}var d=webcon.redux=webcon.redux||{};return{registerFormFieldFocus:b,getLastFocusedFormField:c}}),Injector.factory("HyperLinkFormatter",["FormInfo","HyperLinkParser"],function(a,b){function c(a){return b.parseLinkForJsApi(a,"link:",";displayname:")}function d(a){var c=b.parseLinkForJsApi(a,"image:",";name:");return{imageUrl:c.url,displayName:c.displayName}}function e(a,b){return h(f(a,b),b)}function f(a,c){var d=b.parse(a);return d.openMode=c||d.openMode,d}function g(a,c){var d=b.parse(a.url,a.displayName,!0);return h(d,c?i.newWindow:d.openMode)}function h(b,c){return b.openMode=a.editMode?i.newWindow:c||b.openMode,b}var i={sameWindow:1,newWindow:2};return{getUrlDataForAttribute:g,openModeEnum:i,parseRawLinkData:e,parseImageForApi:d,parseLinkForApi:c,parseRawLinkWithoutEditModeRestrictions:f}}),Injector.factory("HyperLinkParser",[],function(){function a(){}function b(){}function c(a,b,c){}return{getUrlData:a,parse:b,parseLinkForJsApi:c}}),Injector.factory("ImageRepository",["ImagesUrlProvider"],function(a){function b(){return e("redIndicator15.png")}function c(){return e("greenIndicator15.png")}function d(){return e("yellowIndicator15.png")}function e(b){return a.getWebcon(b)}return{getRedIndicator:b,getGreenIndicator:c,getYellowIndicator:d}}),Injector.instance("ImagesUrlProvider",[],function(){function a(a){return"/_layouts/15/images/webcon/Themes/"+a}function b(a){return"/_layouts/15/images/webcon/"+a}function c(a){return"_layouts/15/images/"+a}function d(a){return"_layouts/images/"+a}return{get:c,getWebcon:b,getTheme:a,getLayouts:d}}),Injector.factory("InitialModelFormer",["logger","FormInfo","$Window","ModelDefinition","AttachmentsSorter","TreeHelper","ModelController"],function(a,b,c,d,e,f,g){function h(){c.model={},a.debug("ModelStructureCreated")}function i(){var a=c.initialModel.ReadOnlyDisplayType;b.readOnlyDisplayType=a}function j(){var b=c.initialModel;if(!b.Controls)throw new Error("NoControlsInInitialModel");c.model.controls=b.Controls,a.debug("controlCollectionAdded"),k(b),_.each(c.model.controls,function(d){var e=d.fieldName,f=b.ViewModelsList[e],h=b.ConfigurationViewModels[e];if(f&&f.hasCustomModel)try{f.data="string"==typeof f.data?JSON.parse(f.data):f.data}catch(a){f.invalidData={error:a}}f||a.error("NoViewModelInInitialModelFor:"+e),h||a.error("NoConfigurationInInitialModelFor:"+e),h&&!h.config&&!0!==h.noConfig&&a.error("NoConfigurationInsideConfigurationViewModelFor:"+e),c.model[e]=f||{},h&&!h.noConfig&&(c.model[e].config=h.config),c.model[e].validation={isValid:!0,messages:[]},c.model[e].style={control:{},label:{}},c.model[e].saveRestrictions={isSavable:!0,messages:[]},c.model[e].dependentControls=[],g.isPicker(c.model[e])&&(c.model[e].data.valueNotValid=!!f.data.rawValue),a.debug(d.fieldName+" addedToModel")})}function k(b){_.each(c.model.controls,function(c){var d=c.fieldName,e=b.ViewModelsList[d];if(void 0===e)return void a.error("NoViewModelInInitialModelFor:"+d);var f=b.ConfigurationViewModels[d];if(e.type&&"Date"===e.type&&e.data)e.data=moment(e.data).toDate();else if(e.type&&"Subelements"===e.type){var g=f.config.columns.filter(function(a){return"Date"===a.columnType});if(0===g.length)return;_.each(e.data.rows,function(a){_.each(g,function(b){var c=a.cells[b.fieldName];c.data&&(c.data=moment(c.data).toDate())})})}})}function l(){var a=c.initialModel.Errors;if(!a)throw new Error("NoErrorsDefinitionInInitialModel");c.model.errors=a}function m(){var a=c.initialModel.Comments;if(!a)throw new Error("NoCommentsDefinitionInInitialModel");Injector.resolve(["CommentsSortService"],function(b){a.comments=b.sortCommentsByDate(a.comments)}),c.model.comments=a}function n(){var a=c.initialModel.Paths;if(!a)throw new Error("NoPathsDefinitionInInitialModel");c.model.paths=a}function o(){c.model.quickPaths=c.initialModel.QuickPaths}function p(){var a=c.initialModel.Toolbar;if(!a)throw new Error("NoToolbarInInitialModel");c.model.toolbar=a}function q(){c.model.themeKey=c.initialModel.ThemeKey}function r(){c.model.applicationColor=c.initialModel.ApplicationColor?c.initialModel.ApplicationColor:"rgba(128, 128, 128, 0.5)"}function s(){c.model.showCcAssignmentControl=c.initialModel.ShowCcAssignmentControl}function t(){var a=c.initialModel.MenuActions;if(!a)throw new Error("NoMenuActionsInInitialModel");c.model.menuActions=a}function u(){var a=c.initialModel.Scripts;if(!a)throw new Error("NoScriptsInInitialModel");c.model.scripts=a}function v(){c.model.sessionId=c.initialModel.SessionID}function w(){var a=c.initialModel.AttachmentConfig;if(!a)throw new Error("NoAttachmentConfigurationInInitialModel");c.model.attachmentConfig=a}function x(){_.each(c.model.controls,function(a){a.dependencies&&_.each(a.dependencies,function(b){c.model[b]&&c.model[b].dependentControls.push(a.fieldName)})})}function y(){_.each(c.model.controls,function(a){var b=c.model[a.fieldName];b&&"Subelements"===b.type&&_.each(a.subelementColumnsWithDependants,function(a,c){_.each(a,function(a){var d=b.config.columns.find(function(b){return b.fieldName===a});d&&(d.dependantColumns?d.dependantColumns.push(c):d.dependantColumns=[c])})})})}function z(){c.model.privileges=c.initialModel.FormInfo.privileges}function A(){c.model.licenceInfo=c.initialModel.LicenceInfo}function B(){var a=c.initialModel.Attachments,g=[];a&&(g=f.sortNodes(a,function(a){return e.sortFunctionFactory(a,c.model.attachmentConfig.orderType)}));var h={subelements:c.initialModel.Controls.filter(function(a){return"Subelements"===c.model[a.fieldName].type}).map(function(a){return{info:a,control:c.model[a.fieldName]}}),attachments:{attachments:g,categories:{categories:[],defaultCategory:null,isLoading:!1},statuses:{all:{isLoading:!1,isRequested:!1},current:{isLoading:!1,isRequested:!1},currentConversations:{isLoading:!1,isRequested:!1},conversations:{isLoading:!1,isRequested:!1}},attachmentsCount:b.attachmentsCount}};return Redux.createStore(d,h,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__())}function C(){if(a.trace("creatingModel"),!c.initialModel)throw new Error("NoInitialModelOnPage");h(),l(),j(),x(),y(),m(),n(),p(),q(),r(),s(),t(),u(),v(),i(),w(),z(),A(),o();var b=B();return a.trace("modelCreated"),b}function D(){if(a.trace("creatingModel"),!c.initialModel)throw new Error("NoInitialModelOnPage");h(),l(),j(),m(),q(),r(),v(),i(),A();var b=B();return a.trace("modelCreated"),b}return{createModel:C,createMassActionModel:D}}),Injector.factory("ApiProviderFactory",[],function(){function a(a){Guard.notNull(a,"Field");var b,c=Injector;switch(a.type){case"SingleRowText":b=c.inject("SingleRowApiProvider");break;case"Choose":b=c.inject("DropDownApiProvider");break;case"MultiRowText":b=c.inject("MultiRowApiProvider");break;case"Bool":b=c.inject("BoolApiProvider");break;case"Integer":b=c.inject("IntegerApiProvider");break;case"FloatingPoint":case"FloatingPointCalculated":b=c.inject("FloatApiProvider");break;case"Date":b=c.inject("DateApiProvider");break;case"Autocomplete":case"Picker":case"People":b=c.inject("PickerApiProvider");break;case"GoogleMap":b=c.inject("GoogleMapApiProvider");break;case"SurveyRating":b=c.inject("SurveyRatingApiProvider");break;case"SurveyChoose":b=c.inject("SurveyChooseApiProvider");break;case"ChoiceTree":b=c.inject("ChoiceTreeApiProvider");break;case"Link":case"LinkReadonly":b=c.inject("LinkApiProvider");break;case"Image":b=c.inject("ImageApiProvider");break;case"SqlGrid":case"SqlRow":case"Subelements":case"LocalAttachments":case"RelativeAttachments":b=c.inject("NotAllowedApiProvider");break;case"CalculatedText":case"CalculatedTextSelect":b=c.inject("CalculatedTextSelectApiProvider");break;case"Email":b=c.inject("EmailApiProvider");break;case"Picture":case"HandwrittenSignature":b=c.inject("PictureApiProvider")}if(!b)throw new Error("UnknownType:"+a.type);return b}return{getFieldProvider:a}}),Injector.factory("AttachmentsApiProvider",["AttachmentsAddOrOverwriteService","Store"],function(a,b){function c(c){if(null===c||void 0===c)throw new Error("CheckIfAttExists: "+webconLocale.cRegexCannotBeUndefined);if(""===c)return!0;var d=new RegExp(c),e=b.getState().attachments.attachments;return!!a.findCurrentAttachment(e,function(a){return d.test(a.name)})}return{checkIfAttExists:c}}),Injector.factory("BoolApiProvider",[],function(){function a(){return this.controlOrCellModel.data?"1":"0"}function b(a){var b=!1;"boolean"==typeof a?b=a:a&&(a=a.toString(),b="1"===a||"true"===a.toLowerCase()),c.call(this,b)}function c(a){if("boolean"!=typeof a)throw new Error("ValueMustBeBoolean");this.changeCallback(a)}return{setValue:b,getValue:a}}),Injector.factory("CalculatedTextSelectApiProvider",["DateTimeFormatter"],function(a){function b(){throw new Error("CalculatedTextSelect cannot call SetSubValue - Invalid configuration")}function c(){Guard.notNullFunction(this.changeCallback,"ChangeCallback"),Guard.notNullObject(this.controlOrCellModel,"ControlOrCellModel");var b=this.controlOrCellModel.data;switch(b.dataType){case"DateTime":return a.formatDateWithTime(b.value);default:return b.value}}return{setValue:b,getValue:c}}),Injector.factory("ChoiceTreeApiProvider",[],function(){function a(a){if(Guard.notNullFunction(this.changeCallback,"ChangeCallback"),Guard.notNullObject(this.controlOrCellModel,"ControlOrCellModel"),!a)throw new Error("ValueCannotBeUndefined");var c={};if(a=a.toString(),-1===a.indexOf("#"))c={id:a};else{var d=a.split("#");if(2!==d.length)throw new Error("IncorrectInputStringFormat");c={id:d[0],name:d[1]}}b.call(this,c)}function b(a){if(void 0===a)throw new Error("ValueCannotBeUndefined");var b=d.call(this,a.id);if(!b)throw new Error("GivenNodeCannotBeSelected");this.changeCallback({id:b.id,name:b.name})}function c(){return Guard.notNullFunction(this.changeCallback,"ChangeCallback"),Guard.notNullObject(this.controlOrCellModel,"ControlOrCellModel"),this.controlOrCellModel.data&&this.controlOrCellModel.data.id&&this.controlOrCellModel.data.name?this.controlOrCellModel.data.id+"#"+this.controlOrCellModel.data.name:""}function d(a){var b=this.controlOrCellModel.config.roots;if(!b)throw new Error("NoRootsInConfigModel");for(var c=b.length;c--;){var d=b[c];if(d.id===a)return d.isSelectable?d:null}for(var f=b.length;f--;){var g=e(a,b[f]);if(g)return g.isSelectable?g:null}return null}function e(a,b){if(b.id===a)return b;for(var c=b.childNodes,d=c.length;d--;){var f=c[d];if((f=e(a,f))&&f.id===a)return f}return null}return{setValue:a,getValue:c}}),Injector.factory("DateApiProvider",["WCFTools"],function(a){function b(b){if(Guard.notNullFunction(this.changeCallback,"ChangeCallback"),Guard.notNullObject(this.controlOrCellModel,"ControlOrCellModel"),!b)return c.call(this);var f=a.dateTimeReviver("",b);if(f instanceof Date)d.call(this,f);else{var g;if(g=moment(b,e(this.controlOrCellModel.config)),g.isValid()||(g=moment(b)),!g.isValid())throw new Error("ValueMustBeDate");var h=g.toDate();d.call(this,h)}}function c(){this.changeCallback("")}function d(b){if(!(b instanceof Date))try{b=a.getDateFromWCFFormat(b.toString())}catch(a){throw new Error("ValueMustBeDate")}if(!(b instanceof Date))throw new Error("ValueMustBeDate");this.changeCallback(b)}function e(a){var b="";return Injector.resolve(["Localization"],function(c){b=a.includeTime?c.getDateWithTimeFormat():c.getDateFormat()},this),b}function f(){Guard.notNullFunction(this.changeCallback,"ChangeCallback"),Guard.notNullObject(this.controlOrCellModel,"ControlOrCellModel");var a=this.controlOrCellModel,b=a.data,c=a.config;return b?moment(b).format(e(c)):""}function g(){Guard.notNullFunction(this.changeCallback,"ChangeCallback"),Guard.notNullObject(this.controlOrCellModel,"ControlOrCellModel");var a=this.controlOrCellModel.data;return a?{value:moment(a).toDate()}:{value:""}}function h(a){if(Guard.notNullFunction(this.changeCallback,"ChangeCallback"),Guard.notNullObject(this.controlOrCellModel,"ControlOrCellModel"),!a||!a.value&&""!==a.value)throw new Error("IncorrectDateFormat");if(a.value&&""!==a.value.toString()){if(!(a.value instanceof Date))throw new Error("IncorrectDateFormat");if(isNaN(a.value.getTime()))throw new Error("IncorrectDateFormat");this.changeCallback(a.value)}else this.changeCallback("")}return{setValue:b,getValue:f,getTypedValue:g,setTypedValue:h}}),Injector.factory("DropDownApiProvider",[],function(){function a(a){Guard.notNullFunction(this.changeCallback,"ChangeCallback"),Guard.notNullObject(this.controlOrCellModel,"ControlOrCellModel"),null!==a&&void 0!==a||(a=""),a=a.toString();var b=a;a.indexOf("#")>-1&&(b=a.split("#")[0]);var c=this.controlOrCellModel.data.availableValues,d=_.find(c,function(a){return a.value===b});if(null===d||void 0===d)throw new Error("ValueNotFoundInAvailableValues");var e={availableValues:c,selected:d};this.changeCallback(e)}function b(){Guard.notNullFunction(this.changeCallback,"ChangeCallback"),Guard.notNullObject(this.controlOrCellModel,"ControlOrCellModel");var a=this.controlOrCellModel.data.selected;return a&&a.value&&(a.name||a.value)?a.value+"#"+a.name:""}return{setValue:a,getValue:b}}),Injector.factory("EmailApiProvider",[],function(){function a(a){Guard.notNullFunction(this.changeCallback,"ChangeCallback"),Guard.notNullObject(this.controlOrCellModel,"ControlOrCellModel");var b=null===a||void 0===a?"":a.toString();this.changeCallback({value:b.trim()})}function b(){return Guard.notNullFunction(this.changeCallback,"ChangeCallback"),Guard.notNullObject(this.controlOrCellModel,"ControlOrCellModel"),this.controlOrCellModel.data.value}return{setValue:a,getValue:b}}),Injector.factory("FloatApiProvider",["NumbersService"],function(a){function b(){var a=this.controlOrCellModel.config;return a?a.scale:2}function c(b){Guard.notNullFunction(this.changeCallback,"ChangeCallback"),Guard.notNullObject(this.controlOrCellModel,"ControlOrCellModel");var c=null;if(""!==b&&null!==b&&void 0!==b){var d=a.getNumberFormat(this.controlOrCellModel.config).unformatCompat(b);isNaN(d)&&f.call(this,b),c=e.call(this,d)}j.call(this,c)}function d(a){if(Guard.notNullFunction(this.changeCallback,"ChangeCallback"),Guard.notNullObject(this.controlOrCellModel,"ControlOrCellModel"),!a||null===a.value||void 0===a.value)throw new Error("IncorrectFloatFormat");var b=null;if((a.value||0===a.value)&&""!==a.value.toString()){if("number"!=typeof a.value)throw new Error("IncorrectFloatFormat");b=e.call(this,a.value)}j.call(this,b)}function e(a){var c=b.call(this);return parseFloat(a.toFixed(c))}function f(a){throw new Error('IncorrectFloatFormat ("'+a+'")')}function g(){return this.controlOrCellModel.data?this.controlOrCellModel.data.value:null}function h(){Guard.notNullFunction(this.changeCallback,"ChangeCallback"),Guard.notNullObject(this.controlOrCellModel,"ControlOrCellModel");var b=g.call(this);return a.getNumberFormat(this.controlOrCellModel.config).formatEdit(null!==b&&void 0!==b?b:"").formatted}function i(){Guard.notNullFunction(this.changeCallback,"ChangeCallback"),Guard.notNullObject(this.controlOrCellModel,"ControlOrCellModel");var a=g.call(this);return a||0===a?{value:a}:{value:""}}function j(a){this.changeCallback({value:a})}return{setValue:c,getValue:h,getTypedValue:i,setTypedValue:d}}),Injector.factory("GoogleMapApiProvider",[],function(){function a(a){Guard.notNullFunction(this.changeCallback,"ChangeCallback"),Guard.notNullObject(this.controlOrCellModel,"ControlOrCellModel");var b,c=this.controlOrCellModel.config;if(!a)throw new Error("CannotSetUndefinedValue");if(0===c.locationType){var d=a.split("#");d.length>1&&(b={latitude:parseFloat(d[0]),longitude:parseFloat(d[1])})}else 1!==c.locationType&&2!==c.locationType||(b={address:a});b&&this.changeCallback(b)}function b(){return Guard.notNullFunction(this.changeCallback,"ChangeCallback"),Guard.notNullObject(this.controlOrCellModel,"ControlOrCellModel"),JSON.parse(JSON.stringify(this.controlOrCellModel.data))}return{setValue:a,getValue:b}}),Injector.factory("ImageApiProvider",["AttributeChangeController","HyperLinkFormatter"],function(a,b){function c(a){Guard.notNullFunction(this.changeCallback,"ChangeCallback"),Guard.notNullObject(this.controlOrCellModel,"ControlOrCellModel");var c=b.parseImageForApi(a);this.changeCallback(c)}function d(){Guard.notNullFunction(this.changeCallback,"ChangeCallback"),Guard.notNullObject(this.controlOrCellModel,"ControlOrCellModel");var a=this.controlOrCellModel.data;return a&&a.imageUrl&&a.displayName?"image:"+a.imageUrl+";name:"+a.displayName:""}return{setValue:c,getValue:d}}),Injector.factory("IntegerApiProvider",["BusinessRulesHelper"],function(a){function b(b){Guard.notNullFunction(this.changeCallback,"ChangeCallback"),Guard.notNullObject(this.controlOrCellModel,"ControlOrCellModel");var c="";if(""===b||null===b||void 0===b||a.isEmptyObject(b)||(c=parseInt(b)),""!==c&&(isNaN(b)||isNaN(c)))throw new Error("ValueMustBeNumber");this.changeCallback(c)}function c(){Guard.notNullFunction(this.changeCallback,"ChangeCallback"),Guard.notNullObject(this.controlOrCellModel,"ControlOrCellModel");var a=this.controlOrCellModel.data;return a?a+"":""}return{setValue:b,getValue:c}}),Injector.factory("LinkApiProvider",["HyperLinkFormatter"],function(a){function b(b){Guard.notNullFunction(this.changeCallback,"ChangeCallback"),Guard.notNullObject(this.controlOrCellModel,"ControlOrCellModel");var c=a.parseLinkForApi(b);this.changeCallback({links:[{url:c.link,displayName:c.displayName}]})}function c(){Guard.notNullFunction(this.changeCallback,"ChangeCallback"),Guard.notNullObject(this.controlOrCellModel,"ControlOrCellModel");var a="";return this.controlOrCellModel.data&&this.controlOrCellModel.data.links&&(a+=_.map(this.controlOrCellModel.data.links,function(a){return"link:"+a.url+";displayname:"+a.displayName}).join(";")),a}return{setValue:b,getValue:c}}),Injector.factory("MultiRowApiProvider",[],function(){function a(a){Guard.notNullFunction(this.changeCallback,"ChangeCallback"),Guard.notNullObject(this.controlOrCellModel,"ControlOrCellModel");var b=this.controlOrCellModel.data;b.primary=null===a||void 0===a?"":a.toString(),this.changeCallback(b)}function b(){return Guard.notNullFunction(this.changeCallback,"ChangeCallback"),Guard.notNullObject(this.controlOrCellModel,"ControlOrCellModel"),this.controlOrCellModel.data.primary}return{setValue:a,getValue:b}}),Injector.factory("NotAllowedApiProvider",[],function(){function a(){throw Guard.notNullFunction(this.changeCallback,"ChangeCallback"),Guard.notNullObject(this.controlOrCellModel,"ControlOrCellModel"),new Error("CannotSetValueForControl")}function b(){throw Guard.notNullFunction(this.changeCallback,"ChangeCallback"),Guard.notNullObject(this.controlOrCellModel,"ControlOrCellModel"),new Error("CannotGetValueFromControl")}return{setValue:a,getValue:b}}),Injector.factory("PickerApiProvider",["FormInfo","$Window"],function(a,b){function c(c,e){Guard.notNullFunction(this.changeCallback,"ChangeCallback"),Guard.notNullObject(this.controlOrCellModel,"ControlOrCellModel"),Guard.notNull(this.fieldName,"FieldName"),c?"string"!=typeof c&&(c=c.toString()):c="";var f={pickerEntities:[],rawValue:""};if(a.isOcrVerificationView){var g=b.model[this.fieldName].config.allowMultiValue?b.model[this.fieldName].data.pickerEntities||[]:[];f.pickerEntities=g,g.forEach(function(a){c=c.replace(a.key+"#"+a.name,"").replace(";","").trim()}),e&&!e.validate&&(f.rawValue=c)}var h=[];if(this.controlOrCellModel.data.hasCustomValue)f.hasCustomValue=!0,f.valueNotValid=!1,f.customValue=(c||"").split("#").pop();else for(var i=c.split(";"),j=0;j<i.length;++j)if(i[j]&&!/^\s*#?\s*$/gim.test(i[j])){var k=i[j].split("#");1===k.length?h.push(k[0]):k.length>1&&f.pickerEntities.push({isResolved:!0,key:k[0],name:k[1]})}if(h.length>0&&(!e||e.validate)){var l=this.controlOrCellModel.config,m=this;Injector.resolve(["PickerController"],function(a){a.validate(h.join(";"),m.fieldName,l,function(a){a=a.concat(f.pickerEntities),a.length>0&&m.changeCallback(d.call(m,a))},void 0,m.context,m.rowId)},this)}else this.changeCallback(f)}function d(a){var b=_.filter(a,function(a){return!a.isResolved}),c=_.filter(a,function(a){return a.isResolved}),d=_.map(b,function(a){return a.key}).join(";");return{rawValue:d,valueNotValid:!!d,pickerEntities:_.map(c,function(a){return{isResolved:a.isResolved,key:a.key,name:a.name,dataToPropagate:a.dataToPropagate,hasDataToPropagate:a.hasDataToPropagate,link:a.link}})}}function e(){Guard.notNullFunction(this.changeCallback,"ChangeCallback"),Guard.notNullObject(this.controlOrCellModel,"ControlOrCellModel"),Guard.notNull(this.fieldName,"FieldName");var a="";if(this.controlOrCellModel.data){if(this.controlOrCellModel.data.hasCustomValue)return this.controlOrCellModel.data.customValue||"";this.controlOrCellModel.data.pickerEntities&&(a+=_.map(this.controlOrCellModel.data.pickerEntities,function(a){return a.key+"#"+a.name}).join(";")),this.controlOrCellModel.data.rawValue&&(a&&(a+=";"),a+=this.controlOrCellModel.data.rawValue)}return a}return{setValue:c,getValue:e,prepareDataForReturnedEntities:d}}),Injector.factory("PictureApiProvider",[],function(){function a(a){Guard.notNullFunction(this.changeCallback,"ChangeCallback"),this.changeCallback({value:a?a.toString():a})}function b(){return Guard.notNullObject(this.controlOrCellModel,"ControlOrCellModel"),this.controlOrCellModel.data.value}return{setValue:a,getValue:b}}),Injector.factory("SingleRowApiProvider",[],function(){function a(a){Guard.notNullFunction(this.changeCallback,"ChangeCallback"),Guard.notNullObject(this.controlOrCellModel,"ControlOrCellModel"),this.changeCallback(null===a||void 0===a?"":a.toString())}function b(){return Guard.notNullFunction(this.changeCallback,"ChangeCallback"),Guard.notNullObject(this.controlOrCellModel,"ControlOrCellModel"),this.controlOrCellModel.data}return{setValue:a,getValue:b}}),Injector.factory("SubelementsApiProvider",["Store","$Window","SubelementsStoreController"],function(a,b,c){function d(a){if(!a)throw new Error("SubelementCountRows: "+webconLocale.cSubelementNameCannotBeUndefined);var b=c.findSubelementsControlById(a);return b.control.data.rows?b.control.data.rows.length:0}function e(a){if(!a)throw new Error("SubelementHasRows: "+webconLocale.cSubelementNameCannotBeUndefined);var b=c.findSubelementsControlById(a);return!!b.control.data.rows&&b.control.data.rows.length>0}function f(b,c){if(!b)throw new Error("SubelementDelete: "+webconLocale.cSubelementNameCannotBeUndefined);if(0===c||c<0)throw new Error("SubelementDelete: "+webconLocale.cElemIdCannotBeLessThanZero);var d="SubElems_"+b;c?a.dispatch(i.createRemoveActions(c-1,d)):a.dispatch(i.createRemoveAllAction(d))}function g(b,c){if(!b)throw new Error("DeleteSubelementRows: "+webconLocale.cSubelementNameCannotBeUndefined);if(!c)throw new Error("DeleteSubelementRows: "+webconLocale.cListCannotBeUndefined);var d="SubElems_"+b,e=c.map(function(a){return a-1});a.dispatch(i.createRemoveSelectedRowsActions(d,e))}var h=b.webcon||{};h=h.redux||{};var i=h.SubelementsActions;return{subelementCountRows:d,subelementHasRows:e,subelementDelete:f,deleteSubelementRows:g}}),Injector.factory("SurveyChooseApiProvider",["BusinessRulesHelper"],function(a){function b(){var a={custom:"",selectedValues:{}};return this.changeCallback(a)}function c(c){Guard.notNullFunction(this.changeCallback,"ChangeCallback"),Guard.notNullObject(this.controlOrCellModel,"ControlOrCellModel");var e=this.controlOrCellModel.config.answers,f={custom:"",selectedValues:[]};if(""===c||null===c||void 0===c||a.isEmptyObject(c))return b.call(this);var g="string"!=typeof c?String(c):c;if(!e)throw new Error("NoAnswersInConfigModel");for(var h=g.split("|;"),i=0;i<h.length;++i)if(h[i]){var j=h[i].split("#");"__Other__"===j[0]?(j.length>1&&(f.custom=j[1]),f.selectedValues.push(-1)):f.selectedValues.push(j[0])}d.call(this,f)}function d(a){var b="",c=this.controlOrCellModel.config.answers;if(!c)throw new Error("NoAnswersInConfigModel");if(void 0===a)throw new Error("ValueCannotBeUndefined");void 0===a.custom&&(a.custom=""),void 0===a.selectedValues&&(a.selectedValues={}),b=this.controlOrCellModel.config.multichoose?e(a,c):f(a,c),this.changeCallback(b)}function e(a,b){var c={custom:"",selectedValues:{}};if("string"!=typeof a.custom)throw new Error("CustomAnswerMustBeOfTypeString");if(!$.isArray(a.selectedValues))throw new Error("SelectedValuesMustBeAnArray");return _.each(a.selectedValues,function(d){"-1"==d&&a.custom?(c.selectedValues[d]=a.custom,c.custom=a.custom):b.hasOwnProperty(d)&&(c.selectedValues[d]=b[d])}),c}function f(a,b){var c={custom:"",selectedValues:{}},d=a.selectedValues;if("string"!=typeof a.custom)throw new Error("CustomAnswerMustBeOfTypeString");return d&&!isNaN(d)&&(a.selectedValues=parseInt(a.selectedValues,10)),"string"==typeof a.custom&&-1==d?(c.selectedValues[-1]=a.custom,c.custom=a.custom):b.hasOwnProperty(d)&&(c.selectedValues[d]=b[d]),c}function g(){Guard.notNullFunction(this.changeCallback,"ChangeCallback"),Guard.notNullObject(this.controlOrCellModel,"ControlOrCellModel");var a=this.controlOrCellModel.data,b="";return _.map(a.selectedValues,function(c,d){""!==b&&(b+="|;"),b+="-1"==d?"__Other__#"+a.custom:d+"#"+c}),b}return{setValue:c,getValue:g}}),Injector.factory("SurveyRatingApiProvider",["FieldConfigurationController"],function(a){function b(b){if(Guard.notNullFunction(this.changeCallback,"ChangeCallback"),Guard.notNullObject(this.controlOrCellModel,"ControlOrCellModel"),void 0!==b&&""!==b&&null!==b){if(isNaN(b))throw new Error("ValueMustBeOfTypeNumber");b=parseInt(b,10)}else{b=a.getFieldConfiguration(this.fieldName).scaleMin}this.changeCallback(b)}function c(){return Guard.notNullFunction(this.changeCallback,"ChangeCallback"),Guard.notNullObject(this.controlOrCellModel,"ControlOrCellModel"),this.controlOrCellModel.data}return{setValue:b,getValue:c}}),Injector.factory("BusinessRulesHelper",[],function(){function a(a){return!(!webcon.businessRules||!webcon.businessRules.Empty)&&a instanceof webcon.businessRules.Empty}return{isEmptyObject:a}}),Injector.factory("RootPanelApiProvider",[],function(){function a(){Injector.resolve(["BlockingPanelService"],function(a){a.enableAll()},this)}function b(){Injector.resolve(["BlockingPanelService"],function(a){a.disableAll()},this)}return{enableRootPanel:a,disableRootPanel:b}}),Injector.factory("SystemFunctionsApiProvider",[],function(){function a(a){return a?parseFloat(a.replace(",",".").replace(/\s+/g,"")):NaN}function b(a,b){return!a||isNaN(a)?NaN:a.toFixed(b).replace(".",",")}function c(a){if(!a||"string"!=typeof a)throw new Error("StringToDate: "+webconLocale.cInvalidArgument);var b,c,d;if(a.indexOf("/")>0){var e=a.split(" "),f=e[0].split("/");if(c=f[0],b=f[1],d=f[2],e.length>1){var g=e[1].split(":"),h=g[0],i=g[1];return new Date(d,c-1,b,h,i,0,0)}return new Date(d,c-1,b,0,0,0,0)}if(a.indexOf("-")>0)return b=a.substring(8,10),c=a.substring(5,7)-1,d=a.substring(0,4),new Date(d,c,b);throw new Error("StringToDate: "+webconLocale.cInvalidArgument)}function d(a,b){if(!a)throw new Error("DateToString: "+webconLocale.cArgumentCannotBeUndefined);return void 0!==b&&"en"===b?e(a):f(a)}function e(a){var b,c,d;return b=a.getFullYear(),isNaN(b)?null:(c=a.getMonth()+1,isNaN(c)?null:(d=a.getDate(),isNaN(d)?null:c+"/"+d+"/"+b))}function f(a){var b,c,d;return b=a.getFullYear(),isNaN(b)?null:(c=a.getMonth()+1,isNaN(c)?null:(d=a.getDate(),isNaN(d)?null:(c<10&&(c="0"+c),d<10&&(d="0"+d),b+"-"+c+"-"+d)))}function g(a){if(!a)return"";var b=a.indexOf("#");return-1===b?a:a.substring(b+1)}function h(a){if(!a)return"";var b=a.indexOf("#");return-1===b?a:a.substring(0,b)}function i(a){return void 0!==a&&null!==a}return{convertStringToFloat:a,convertFloatToString:b,stringToDate:c,dateToString:d,getPairID:h,getPairName:g,isFormFieldVisible:i}}),Injector.factory("UnsupportedSystemFunctionsApiProvider",[],function(){function a(){throw new Error("FindControlLike: "+webconLocale.cUnsupportedFunction)}function b(){throw new Error("GetPrefix: "+webconLocale.cUnsupportedFunction)}return{findControlLike:a,getPrefix:b}}),Injector.instance("LicenceInfoPanelService",[],function(){function a(){}return{setLicenceInfo:a}}),Injector.instance("BPSDataSourceLinkService",["UrlsFactory"],function(a){function b(a,b){return{showAsALink:a,elementId:b.elementId}}function c(b,c){var d=a.createForElement(b);return{displayName:d,url:a.addQueryParams(d,c,!0)}}function d(b,c){var d=a.createForElement(b,"",!0,"view",!0);return{displayName:d,url:a.addQueryParams(d,c,!0)}}function e(b,c,d){var e=a.createForNewElement(b,c);return{displayName:e,url:a.addQueryParams(e,d,!0)}}return{createUrl:c,createEmbedViewUrl:d,createStartUrl:e,createShowAsALinkData:b}},Injector.env.lite),Injector.instance("CalculateTextWidthService",[],function(){function a(a){var c=b||(b=document.createElement("canvas")),d=c.getContext("2d");return d.font='14px "Segoe UI", "Segoe", Tahoma, Helvetica, Arial, sans-serif',d.measureText(a||"").width}var b;return{calc:a}},Injector.env.lite),Injector.factory("OpenLinkHandler",["$Window","QueryStringParamsService","HyperLinkFormatter","PortalOpenLinkHandler","FormInfo","RedirectService"],function(a,b,c,d,e,f){function g(a,b){if(Guard.notNullOrEmpty(a,"urlData"),a.url){var c=function(){if(a.isBpsElement&&!a.isExternal){var c=a.openMode===s.newWindow;i(a,c,b)}else k(a.url,a.isExternal,a.openMode)};if(b)return void c();d.openInModeOrDefault(a.url,c,a.isExternal)}}function h(a,b){e.editMode&&(a=Object.assign({},a,{openMode:s.newWindow})),g(a,b)}function i(a,b,c){var e=function(){if(b)return void(a.isStart?f.redirectToNewElementInNewWindow(a.dtypeId,a.wfId,a.queryParams):f.redirectToElementInNewWindow(a.elementId,a.queryParams));a.isStart?f.redirectToNewElement(a.dtypeId,a.wfId,null,a.queryParams):f.redirectToElement(a.elementId,a.queryParams)};if(c)return void e();d.openInModeOrDefault(a.url,e,a.isExternal)}function j(a,b,c){c=!!e.editMode||c,i({url:b,isBpsElement:!0,elementId:a,queryParams:""},c)}function k(b,c,d){d===s.sameWindow?f.redirectToUrl(b,c):a.open(b,"_blank")}function l(b){a.location.href=b}function m(a,b){Guard.notNullOrEmpty(a,"url");var d=c.parseRawLinkWithoutEditModeRestrictions(a,b);return b&&(d.openMode=b),g(d,!0),d.openMode===s.sameWindow&&!d.isCustomProtocol}function n(a,b,d){Guard.notNullOrEmpty(a,"url");var e=c.parseRawLinkData(a,b);d&&(e.openMode=b),g(e)}function o(){a.webcon=a.webcon||{},a.webcon.open=n}function p(a){return a.ctrlKey||1===a.button}function q(a,b){return!!p(a)||(a.preventDefault(),a.stopPropagation(),b&&b(),!1)}function r(a){k(a,!1,s.sameWindow)}var s=c.openModeEnum;return{openUrlData:g,openUrlDataByUserClick:h,open:n,openElement:j,registerGlobalOpen:o,openExternalProtocol:l,openWithoutRestrictions:m,openHistory:r,openLinkEvent:q}},Injector.env.lite),Injector.instance("$LocalStorage",[],function(){return localStorage}),Injector.instance("LocaleSort",[],function(){function a(a,b,c){var d=0;return b=_.iteratee(b,c),_.pluck(_.map(a,function(a,c,e){return{value:a,index:d++,criteria:b(a,c,e)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;if(c!==d){if("string"==typeof c&&"string"==typeof d)return c.localeCompare(d);if(c>d||void 0===c)return 1;if(c<d||void 0===d)return-1}return a.index-b.index}),"value")}return{localeSort:a}}),
Injector.instance("Localization",["ClientInfo","$Window"],function(a,b){function c(a){var b=window.webcon.localizationLibraries;return a.contains("pl")?b.pl:b.en}var d=c(a.language),e=moment();return e.locale(window.formMomentCulture),{getDecimal:function(){return d.decimal},getDateFormat:function(){return e.localeData().longDateFormat("L")},getDateWithTimeFormat:function(a){var b=e.localeData();return b.longDateFormat("L")+" "+b.longDateFormat(a?"LTS":"LT")},getTimeFormat:function(a){return e.localeData().longDateFormat(a?"LTS":"LT")},is12HoursMode:function(a){return a.contains("h")&&a.toLowerCase().contains("a")},initializeGlobalMoment:function(){moment.locale(b.formMomentCulture)}}}),window.webcon=function(a){var b=a.localizationLibraries||{};return b.en={decimal:"."},a.localizationLibraries=b,a}(window.webcon||{}),window.webcon=function(a){var b=a.localizationLibraries||{};return b.pl={decimal:","},a.localizationLibraries=b,a}(window.webcon||{}),window.webcon=function(a){return(a=a||{}).math={abs:function(a){return new Big(a).abs()},cmp:function(a,b){return new Big(a).cmp(new Big(b))},div:function(a,b){return new Big(a).div(new Big(b))},eq:function(a,b){return new Big(a).eq(new Big(b))},gt:function(a,b){return new Big(a).gt(new Big(b))},gte:function(a,b){return new Big(a).gte(new Big(b))},lt:function(a,b){return new Big(a).lt(new Big(b))},lte:function(a,b){return new Big(a).lte(new Big(b))},minus:function(a,b){return new Big(a).minus(new Big(b))},mod:function(a,b){return new Big(a).mod(new Big(b))},plus:function(a,b){return new Big(a).plus(new Big(b))},pow:function(a,b){return new Big(a).pow(new Big(b))},round:function(a,b){return new Big(a).round(b)},sqrt:function(a){return new Big(a).sqrt()},times:function(a,b){return new Big(a).times(new Big(b))},toExponential:function(a,b){return new Big(a).toExponential(b)},toFixed:function(a,b){return new Big(a).toFixed(b)},toPrecision:function(a,b){return new Big(a).toPrecision(b)},toString:function(a){return new Big(a).toString()},valueOf:function(a){return new Big(a).valueOf()}},a}(window.webcon||{}),Injector.factory("MoveNextStepService",["RedirectService","DeviceInfo","FormInfo","PopupController","ActionService","QueryStringParamsService","$Window"],function(a,b,c,d,e,f,g){function h(d,e,f){if(c.isNew&&b.isNativeMobileApp()){var h={elementId:d};g.WebviewManager.setElementId(h)}var j=i();b.isNativeMobileApp()?e?a.redirectToElement(d,j,!1):g.WebviewManager.close(f):a.redirectToElement(d,j,!1)}function i(){var a="?",b=f.getQueryStringParams(!0),c="mobiledevice",d="isnative",e=b[c],g=b[d];return e&&(a=f.setParameter(c,e,a)),g&&(a=f.setParameter(d,g,a)),a}function j(a,b,c,e){var f={forceRefresh:!0,errors:[]},g=function(){h(a,b,f)};if(c.showConfirm){d.showWFConfirmControl(g,2e3,g,webconLocale.cOnMoveNextStepTitle,c.elementSignature,a,c.transitionStatusMessage)}else g()}return{onMoveNextStep:j}}),Injector.factory("NumbersService",["ClientInfo"],function(a){function b(a,b){if(!b)return c.NumberCommon.formats.formatCurrentCulture;switch(a){case 0:return c.NumberCommon.formats.formatCommaAndDot;case 1:return c.NumberCommon.formats.formatSpaceAndComma;case 2:return c.NumberCommon.formats.formatCurrentCulture;case 3:return c.NumberCommon.formats.formatThousandCurrentCulture}return c.NumberCommon.formats.formatCurrentCulture}var c=window.webcon.numbers;return{getNumberFormat:function(d){var e={amountFormat:b(d.amountFormat,d.showAsAmount),culture:a.language,currencyCode:d.currencyCode,scale:d.scale,showCurrencyCode:d.showCurrencyCode};return new c.NumberFormatting(e)},getNumberKeyboard:function(a){return new c.NumberKeyboard(a)},numberValidation:c.NumberValidation}},Injector.env.global),Injector.instance("OcrBlockClickService",["$Window","Localization","FocusRegistrationService","MaskApplier","SmartDateTimeConverter","SmartDecimalConverter"],function(a,b,c,d,e,f){function g(g,o,p,q){var r=c.getLastFocusedFormField();if(r){var s=a.model[r];if(s){var t=h(r),u=a.GetValue(t),v=s.ocrData,w=v?v.mask:null,x=d.applyMask(w,"WFD_"+t,g.text);if(i(t)){var y=e.replaceDate(x);return void(y&&(a.SetTypedValue(t,{value:y}),v&&m(r,g,p,q)))}var z=j(t)||k(t);if(z){u&&o&&(x=u+x);var A=b.getDecimal();x=f.replaceDecimal(A,x)}if(x){if(u&&o&&!z)return x=u+" "+x,a.SetValue(t,x,l(t)?{validate:!1}:null),void(v&&n(r,g,p,q));a.SetValue(t,x,l(t)?{validate:!1}:null),v&&m(r,g,p,q)}}}}function h(a){return a.split("_")[0]}function i(a){return a.startsWith("AttDateTime")}function j(a){return a.startsWith("AttDecimal")}function k(a){return a.startsWith("AttInt")}function l(a){return a.startsWith("AttChoose")}function m(b,c,d,e){a.model[b].ocrData=Object.assign(a.model[b].ocrData,{valueChanged:!0,wasRecognized:!0,blocks:[{left:c.left,right:c.right,top:c.top,bottom:c.bottom}],wordsIds:[c.id],attId:e,pageIndex:d})}function n(b,c,d,e){var f=a.model[b].ocrData;f.valueChanged=!0,f.wasRecognized=!0,f.blocks.push({left:c.left,right:c.right,top:c.top,bottom:c.bottom}),f.attId=e,f.pageIndex=d,f.wordsIds?f.wordsIds.push[c.id]:f.wordsIds=[c.id]}return{handleOcrBlockClick:g}}),Injector.instance("OcrVerificationViewService",["Store","$Window"],function(a,b){function c(b){a.dispatch(h.OcrActions.createSetActiveBlock(b))}function d(){a.dispatch(h.OcrActions.createResetActiveBlock())}function e(){var b=a.getState();return b.ocr?b.ocr.activeBlock:{}}function f(b){a.dispatch(h.OcrActions.changePage(b))}function g(a,c){b.model[c].ocrData.markedForRelearning=a}var h=webcon.redux=webcon.redux||{};return{setActiveBlock:c,resetActiveBlock:d,getActiveBlock:e,changeCurrentPage:f,toggleMarkForRelearning:g}}),Injector.factory("OnceAtTimeWrapper",["logger"],function(a){function b(a){return Guard.notNull(a,"functionToCall"),f=a,this}function c(){if(e&&f)return e=!1,f.apply(this,arguments);a.debug("ClickWasIgnored")}function d(){e=!0}var e=!0,f=null;return{call:c,reset:d,create:b}}),Injector.factory("OpenLinkHandler",["$Window","DeviceInfo","QueryStringParamsService",{depName:"OpenLinkHandler",depEnv:Injector.env.lite},"HyperLinkFormatter"],function(a,b,c,d,e){function f(a,b){Guard.notNullOrEmpty(a,"url"),h(e.parseRawLinkData(a,b))}function g(c,e){a.WebviewManager&&b.isNativeMobileApp()?i(e):d.openElement(c,e)}function h(c){if(Guard.notNullOrEmpty(c,"urlData"),c.url)if(a.WebviewManager&&b.isNativeMobileApp()){var e=c.url;c.isExternal?j(e,m.externalWebBrowser):i(e)}else d.openUrlData(c)}function i(a){a=c.setParameter("isNative","1",a);var b=c.getQueryStringParams().mobileDevice;a=c.setParameter("mobileDevice",b,a),j(a,m.internalWebView)}function j(b,c){if(b.startsWith("/")){var d=a.location;b=d.protocol+"//"+d.hostname+(d.port?":"+d.port:"")+b}var e={url:b,mode:c};a.WebviewManager.navigate(e)}function k(c){if(a.WebviewManager&&b.isNativeMobileApp()){var d={url:c,mode:m.externalWebBrowser};a.WebviewManager.navigate(d)}else a.location.href=c}function l(c){a.WebviewManager&&b.isNativeMobileApp()?i(c):d.openHistory(c)}var m={internalWebView:1,externalWebBrowser:0};return{openUrlData:h,open:f,openElement:g,registerGlobalOpen:d.registerGlobalOpen,openExternalProtocol:k,openWithoutRestrictions:f,openHistory:l,openLinkEvent:d.openLinkEvent,openUrlDataByUserClick:d.openUrlDataByUserClick}}),Injector.instance("DeletedElementService",["PopupController","RedirectService"],function(a,b){function c(c){var d=b.redirectToSource;a.showWFConfirmControl(d,5e3,d,c.title,c.elementSignature,c.elementId)}return{onDeleteSuccess:c}},Injector.env.outlook),Injector.factory("RedirectService",[{depName:"RedirectService",depEnv:Injector.env.global},"QueryStringParamsService","$Window"],function(a,b,c){function d(a){c.external&&"function"==typeof c.external[a]&&c.external[a]()}function e(c,e,f){var g=b.removeParameter("DTYPE_ID");g=b.removeParameter("WF_ID",g),g=b.removeParameter("COM_ID",g),g=b.setParameter("WFD_ID",c,g),a.redirectToElement(c,e,f),d("RefreshElementContext")}function f(){d("GoToElementList")}return{redirectToUrl:a.redirectToUrl,redirectToElementInNewWindow:a.redirectToElementInNewWindow,redirectToNewElement:a.redirectToNewElement,redirectToElement:e,redirectToCompany:a.redirectToCompany,toggleEdit:a.toggleEdit,toggleAdminMode:a.toggleAdminMode,openNewWindow:a.openNewWindow,reload:a.reload,redirectToSource:f,returnFromHistoryView:a.returnFromHistoryView,redirectToUrlInNewWindow:a.redirectToUrlInNewWindow,redirectToUrlInNewTab:a.redirectToUrlInNewTab}},Injector.env.outlook),Injector.factory("ShouldRenderService",[{depName:"ShouldRenderService",depEnv:Injector.env.global}],function(a){function b(b){return Guard.notNull(b,"model"),"SystemAttachments"!==b.type&&a.checkIfShouldRender(b)}return{checkIfShouldRender:b}},Injector.env.outlook),Injector.instance("UrlsFactory",[{depName:"UrlsFactory",depEnv:Injector.env.global}],function(a){function b(){return!1}return{createForElement:a.createForElement,addQueryParams:a.addQueryParams,getCurrentReturnUrl:a.getCurrentReturnUrl,showReturnButton:b,createForNewElement:a.createForNewElement,createHistoryUrl:a.createHistoryUrl,createEmbedUrl:a.createEmbedUrl}},Injector.env.outlook),Injector.instance("PanelOrderService",["$Window"],function(a){function b(){var b=$(a).width();b<=991?$("#BottomPanel").insertAfter($("#RightPanel")):b>991&&$("#BottomPanel").insertAfter($("#RightPanelOuter"))}function c(){var c=$(a).width();d!=c&&(d=c,b())}var d=$(a).width();return{setProperlyBottomPanel:b,setProperlyBottomPanelOnWidthChange:c}}),Injector.factory("PortalElementInfoRefresher",[],function(){function a(a){}return{refreshInfo:a}}),Injector.instance("PortalOpenLinkHandler",[],function(){function a(a,b,c){b&&b()}return{openInModeOrDefault:a}}),Injector.factory("QueryString",["$Window"],function(a){function b(b){b=b.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var c=new RegExp("[\\?&]"+b+"=([^&#]*)","i"),d=c.exec(a.location.search);return null===d?"":decodeURIComponent(d[1].replace(/\+/g," "))}return{getParameter:b}}),Injector.factory("QueryStringParamsService",["$Window"],function(a){function b(b){if(void 0!==a&&void 0!==a.location&&void 0!==a.location.search){for(var c=a.location.search.substr(1).split("&"),d={},e=0;e<c.length;++e){var f=c[e].split("=",2),g=b?f[0].toLowerCase():f[0];1==f.length?d[g]="":d[g]=decodeURIComponent(f[1].replace(/\+/g," "))}return d}}function c(){if(void 0===a||void 0===a.location||void 0===a.location.search)throw new Error("WinIsUndefined");return a.location.search.substr(1).split("&").filter(function(a){return 0!==a.length}).map(function(a){var b=a.split("=");return 2==b.length?b[0]:a})}function d(b,c,d){var e=new RegExp("([?&])"+b+"=.*?(&|$)","i"),f=d||a.location.toString();return f.match(e)?f.replace(e,"$1"+b+"="+c+"$2"):(-1===f.indexOf("?")?f+="?":-1===f.indexOf("?",f.length-1)&&(f+="&"),f+b+"="+c)}function e(a,b,c){var d=encodeURIComponent(b);return this.setParameter(a,d,c)}function f(b,c){var d=c||a.location.toString(),e=d.split("?");if(e.length>=2){for(var f=encodeURIComponent(b),g=e[1].split(/[&;]/g),h=g.length;h-- >0;)-1!==g[h].lastIndexOf(f,0)&&g.splice(h,1);return d=e[0]+"?"+g.join("&")}return d}function g(b,c){var d=c||a.location.toString(),e=d.split("?");if(e.length>=2){for(var f=encodeURIComponent(b.toLowerCase()),g=e[1].split(/[&;]/g),h=g.length;h-- >0;)-1!==g[h].toLowerCase().lastIndexOf(f,0)&&g.splice(h,1);return d=e[0]+"?"+g.join("&")}return d}return{getQueryStringParams:b,setParameter:d,removeParameter:f,removeParameterCaseInsensitive:g,getQueryStringKeys:c,availableParameters:["WF_ID","WFD_ID","DTYPE_ID","COM_ID","isNative","Source","mobileDevice","debug","EditMode","Mode","SUBDTYPEID","DEF_COMID","disableSubelementValidation","version","Archive","FRM_ID","OutlookEdit","PATH_ID","isInSidebar"],setEncodedParameter:e}}),Injector.instance("QuickPathService",[],function(){function a(a,b,c,d,e){}return{goQuickPath:a}}),Injector.instance("RedrawService",["logger","ComponentContainerService"],function(a,b){function c(c){if(b.isRegistered(c)){a.trace("componentRedrawing:"+c);var d=new Date,e=b.getComponent(c);_.each(e,function(a){a.forceUpdate()});var f=new Date-d;a.trace("componentRedrawn:"+c+",inTime:"+f)}}return{isRendered:function(a){return b.isRegistered(a)},areMainPanelsRendered:function(){return b.areMainPanelsRegistered()},redraw:c,applyProps:function(c,d){Guard.notNull(d,"props"),a.trace("component applyProps: "+c);var e=new Date,f=b.getComponent(c);_.each(f,function(a){a.updateProps?a.updateProps(Object.assign({},a.props,d)):(a.props=Object.assign({},a.props,d),a.forceUpdate())});var g=new Date-e;a.trace("componentApplyProps:"+c+",inTime:"+g)},redrawMainPanels:function(){this.areMainPanelsRendered()&&(c("Header"),c("LeftColumn"),c("RightColumn"),c("Bottom"),c("MainPanel"))}}}),Injector.factory("ModelDefinition",["AttachmentsReducer","SubelementsReducer","EnvironmentReducer","FormReducer","OcrReducer"],function(a,b,c,d,e){return Redux.combineReducers({attachments:a,subelements:b,environment:c,form:d,ocr:e})}),window.webcon=function(a){return(a.redux=a.redux||{}).AttachmentsActions={ATTACHMENTS_ADD_ATTACHMENT_FAILED:"ATTACHMENTS_ADD_ATTACHMENT_FAILED",ATTACHMENTS_ADD_ATTACHMENT_REQUEST:"ATTACHMENTS_ADD_ATTACHMENT_REQUEST",ATTACHMENTS_ADD_ATTACHMENT_SKIPPED:"ATTACHMENTS_ADD_ATTACHMENT_SKIPPED",ATTACHMENTS_ADD_ATTACHMENT_SUCCESS:"ATTACHMENTS_ADD_ATTACHMENT_SUCCESS",ATTACHMENTS_CANCEL_INFO:"ATTACHMENTS_CANCEL_INFO",ATTACHMENTS_CATEGORIES_LOAD_REQUEST:"ATTACHMENTS_CATEGORIES_LOAD_REQUEST",ATTACHMENTS_CATEGORIES_LOAD_SUCCESS:"ATTACHMENTS_CATEGORIES_LOAD_SUCCESS",ATTACHMENTS_DELETE_ATTACHMENT_REQUEST:"ATTACHMENTS_DELETE_ATTACHMENT_REQUEST",ATTACHMENTS_DELETE_ATTACHMENT_SUCCESS:"ATTACHMENTS_DELETE_ATTACHMENT_SUCCESS",ATTACHMENTS_EDIT_INFO:"ATTACHMENTS_EDIT_INFO",ATTACHMENTS_EXEC_ACTION_FAILED:"ATTACHMENTS_EXEC_ACTION_FAILED",ATTACHMENTS_EXEC_ACTION_REQUEST:"ATTACHMENTS_EXEC_ACTION_REQUEST",ATTACHMENTS_EXEC_ACTION_SUCCESS:"ATTACHMENTS_EXEC_ACTION_SUCCESS",ATTACHMENTS_SAVE_INFO_REQUEST:"ATTACHMENTS_SAVE_INFO_REQUEST",ATTACHMENTS_SAVE_INFO_SUCCESS:"ATTACHMENTS_SAVE_INFO_SUCCESS",ATTACHMENTS_TOGGLE_GROUP:"ATTACHMENTS_TOGGLE_GROUP",ATTACHMENTS_LOAD_CURRENT_CONVERSATIONS_FAILED:"ATTACHMENTS_LOAD_CURRENT_CONVERSATIONS_FAILED",ATTACHMENTS_LOAD_CURRENT_CONVERSATIONS_REQUEST:"ATTACHMENTS_LOAD_CURRENT_CONVERSATIONS_REQUEST",ATTACHMENTS_LOAD_CURRENT_CONVERSATIONS_SUCCESS:"ATTACHMENTS_LOAD_CURRENT_CONVERSATIONS_SUCCESS",ATTACHMENTS_LOAD_CURRENT_FAILED:"ATTACHMENTS_LOAD_CURRENT_FAILED",ATTACHMENTS_LOAD_CURRENT_REQUEST:"ATTACHMENTS_LOAD_CURRENT_REQUEST",ATTACHMENTS_LOAD_CURRENT_SUCCESS:"ATTACHMENTS_LOAD_CURRENT_SUCCESS",ATTACHMENTS_LOAD_RELATED_CONVERSATIONS_FAILED:"ATTACHMENTS_LOAD_RELATED_CONVERSATIONS_FAILED",ATTACHMENTS_LOAD_RELATED_CONVERSATIONS_REQUEST:"ATTACHMENTS_LOAD_RELATED_CONVERSATIONS_REQUEST",ATTACHMENTS_LOAD_RELATED_CONVERSATIONS_SUCCESS:"ATTACHMENTS_LOAD_RELATED_CONVERSATIONS_SUCCESS",ATTACHMENTS_LOAD_RELATED_FAILED:"ATTACHMENTS_LOAD_RELATED_FAILED",ATTACHMENTS_LOAD_RELATED_REQUEST:"ATTACHMENTS_LOAD_RELATED_REQUEST",ATTACHMENTS_LOAD_RELATED_SUCCESS:"ATTACHMENTS_LOAD_RELATED_SUCCESS",ATTACHMENTS_CHANGE_INFO:"ATTACHMENTS_CHANGE_INFO",ATTACHMENTS_UPDATE_ATT_COUNT:"ATTACHMENTS_UPDATE_ATT_COUNT",createAddAttachmentFailedAction:function(a){return{type:this.ATTACHMENTS_ADD_ATTACHMENT_FAILED,payload:a}},createAddAttachmentRequestAction:function(a){return{type:this.ATTACHMENTS_ADD_ATTACHMENT_REQUEST,payload:a}},createAddAttachmentSkippedAction:function(a){return{type:this.ATTACHMENTS_ADD_ATTACHMENT_SKIPPED,node:a}},createAddAttachmentSuccessAction:function(a,b){return{type:this.ATTACHMENTS_ADD_ATTACHMENT_SUCCESS,attachment:b,node:a}},createCancelInfoAction:function(a){return{type:this.ATTACHMENTS_CANCEL_INFO,node:a}},createCategoriesLoadRequestAction:function(){return{type:this.ATTACHMENTS_CATEGORIES_LOAD_REQUEST}},createCategoriesLoadSuccessAction:function(a){return{type:this.ATTACHMENTS_CATEGORIES_LOAD_SUCCESS,payload:a}},createDeleteAttachmentRequestAction:function(a){return{type:this.ATTACHMENTS_DELETE_ATTACHMENT_REQUEST,node:a}},createDeleteAttachmentSuccessAction:function(a){return{type:this.ATTACHMENTS_DELETE_ATTACHMENT_SUCCESS,node:a}},createEditInfoAction:function(a){return{type:this.ATTACHMENTS_EDIT_INFO,node:a}},createExecActionFailedAction:function(a,b,c){return{type:this.ATTACHMENTS_EXEC_ACTION_FAILED,action:b,error:c,node:a}},createExecActionRequestAction:function(a,b){return{type:this.ATTACHMENTS_EXEC_ACTION_REQUEST,action:b,node:a}},createExecActionSuccessAction:function(a,b,c){return{type:this.ATTACHMENTS_EXEC_ACTION_SUCCESS,action:b,node:a,payload:c}},createSaveInfoRequestAction:function(a,b,c){return{type:this.ATTACHMENTS_SAVE_INFO_REQUEST,description:c,name:b,node:a}},createSaveInfoSuccessAction:function(a,b){return{type:this.ATTACHMENTS_SAVE_INFO_SUCCESS,node:a,payload:b}},createToggleGroupAction:function(a){return{type:this.ATTACHMENTS_TOGGLE_GROUP,id:a}},createLoadCurrentConversationsFailedAction:function(){return{type:this.ATTACHMENTS_LOAD_CURRENT_CONVERSATIONS_FAILED}},createLoadCurrentConversationsRequestAction:function(a){return{type:this.ATTACHMENTS_LOAD_CURRENT_CONVERSATIONS_REQUEST,payload:a}},createLoadCurrentConversationsSuccessAction:function(a){return{type:this.ATTACHMENTS_LOAD_CURRENT_CONVERSATIONS_SUCCESS,payload:a}},createLoadCurrentFailedAction:function(){return{type:this.ATTACHMENTS_LOAD_CURRENT_FAILED}},createLoadCurrentRequestAction:function(a){return{type:this.ATTACHMENTS_LOAD_CURRENT_REQUEST,payload:a}},createLoadCurrentSuccessAction:function(a){return{type:this.ATTACHMENTS_LOAD_CURRENT_SUCCESS,payload:a}},createLoadRelatedConversationsFailedAction:function(){return{type:this.ATTACHMENTS_LOAD_RELATED_CONVERSATIONS_REQUEST}},createLoadRelatedConversationsRequestAction:function(a){return{type:this.ATTACHMENTS_LOAD_RELATED_CONVERSATIONS_REQUEST,payload:a}},createLoadRelatedConversationsSuccessAction:function(a){return{type:this.ATTACHMENTS_LOAD_RELATED_CONVERSATIONS_SUCCESS,payload:a}},createLoadRelatedFailedAction:function(){return{type:this.ATTACHMENTS_LOAD_RELATED_FAILED}},createLoadRelatedRequestAction:function(a){return{type:this.ATTACHMENTS_LOAD_RELATED_REQUEST,payload:a}},createLoadRelatedSuccessAction:function(a){return{type:this.ATTACHMENTS_LOAD_RELATED_SUCCESS,payload:a}},createChangeInfoAction:function(a){return{type:this.ATTACHMENTS_CHANGE_INFO,category:a.category,description:a.description,name:a.name,node:a}},createUpdateAttCountAction:function(){return{type:this.ATTACHMENTS_UPDATE_ATT_COUNT}}},a}(window.webcon||{}),Injector.factory("AttachmentsReducer",["AttachmentsSorter","ModelMapper","TreeHelper","$Window","AttachmentsFinder"],function(a,b,c,d,e){function f(a,b,c,d){var e=_.findIndex(a,function(a){return a.id===b.id});if(e>=0){var f=a[e].nodes.slice();f.push(c),a[e]=Object.assign({},a[e],{nodes:d(a[e])(f)})}else a.push(b)}function g(a,b){for(var c=void 0,d=0;d<a.length;d++){var e=a[d],f=_.findIndex(e.nodes,function(a){return a.attId===b.attId});if(f>=0){c=e.nodes.splice(f,1)[0],0===e.nodes.length&&a.splice(d,1);break}}return c}function h(a,b){var c=_.findIndex(a,function(a){return a.id===b});c>=0&&a.splice(c,1)[0]}function i(a,c){a=a.slice();var d=_.findIndex(a,function(a){return b.isConversations(a)});if(d>=0){var e=a[d].nodes.slice(),f=_.findIndex(e,function(a){return b.isCurrent(a)});f>=0&&(e[f]=Object.assign({},e[f],c)),a[d]=Object.assign({},a[d],{nodes:e})}return a}function j(a,c){a=a.slice();var d=_.findIndex(a,function(a){return b.isCurrent(a)});return d>=0&&(a[d]=Object.assign({},a[d],c)),a}function k(c,d,e){if(c=c.slice(),d.nodeType===b.attachmentNodeType.file){var f=_.findIndex(c,function(a){return b.isCurrent(a)});if(f>=0){var g=e(c[f].nodes);c[f]=Object.assign({},c[f],{nodes:a.sortByConfig(g,a.attachmentSortOrder.name)})}}else if(d.nodeType===b.attachmentNodeType.message){var h=_.findIndex(c,function(a){return b.isConversations(a)});if(h>=0){var i=c[h].nodes.slice(),j=_.findIndex(i,function(a){return b.isCurrent(a)});if(j>=0){var k=e(i[j].nodes);i[j]=Object.assign({},i[j],{nodes:a.sortBy(k,"sentDate").reverse()})}c[h]=Object.assign({},c[h],{nodes:i})}}return c}var l=webcon.redux,m=[];return function(n,o){var p,q,r,s,t,u,v;switch(n=n||m,p=n.attachments,o.type){case l.AttachmentsActions.ATTACHMENTS_ADD_ATTACHMENT_FAILED:var w=!0;return o.payload&&(w=!1),p=j(n.attachments,{isLoading:w}),p=i(p,{isLoading:w}),Object.assign({},n,{attachments:p,statuses:Object.assign({},n.statuses,{current:Object.assign({},n.statuses.current,{isLoading:w}),currentConversations:Object.assign({},n.statuses.currentConversations,{isLoading:w})})});case l.AttachmentsActions.ATTACHMENTS_ADD_ATTACHMENT_REQUEST:return p=j(n.attachments,{isLoading:!0}),p=i(p,{isLoading:!0}),Object.assign({},n,{attachments:p,statuses:Object.assign({},n.statuses,{current:Object.assign({},n.statuses.current,{isLoading:!0}),currentConversations:Object.assign({},n.statuses.currentConversations,{isLoading:!0})})});case l.AttachmentsActions.ATTACHMENTS_ADD_ATTACHMENT_SKIPPED:var w=!0;return o.node.isLastFileDone&&(w=!1),p=j(p,{isLoading:w}),p=i(p,{isLoading:w}),Object.assign({},n,{attachments:p,statuses:Object.assign({},n.statuses,{current:Object.assign({},n.statuses.current,{isLoading:w}),currentConversations:Object.assign({},n.statuses.currentConversations,{isLoading:w})})});case l.AttachmentsActions.ATTACHMENTS_ADD_ATTACHMENT_SUCCESS:var w=!0;return o.node.isLastFileDone&&(w=!1),p=j(p,{isLoading:w}),p=i(p,{isLoading:w}),p=k(p,o.node.nodes[0],function(b){return b=b.slice(),f(b,o.node,o.node.nodes[0],function(b){return a.sortFunctionFactory(b,d.model.attachmentConfig.orderType)}),b}),Object.assign({},n,{attachments:p,statuses:Object.assign({},n.statuses,{current:Object.assign({},n.statuses.current,{isLoading:w}),currentConversations:Object.assign({},n.statuses.currentConversations,{isLoading:w})})});case l.AttachmentsActions.ATTACHMENTS_CANCEL_INFO:return p=k(n.attachments,o.node,function(a){return c.updateNode(a,function(a){return a.attId===o.node.attId},function(){return{isEdited:!1,isSaving:!1}})}),p=j(p,{isLoading:!1}),p=i(p,{isLoading:!1}),Object.assign({},n,{attachments:p});case l.AttachmentsActions.ATTACHMENTS_DELETE_ATTACHMENT_REQUEST:return p=k(n.attachments,o.node,function(a){return c.updateNode(a,function(a){return a.attId===o.node.attId},function(){return{isDeleting:!0}})}),Object.assign({},n,{attachments:p});case l.AttachmentsActions.ATTACHMENTS_DELETE_ATTACHMENT_SUCCESS:return p=k(n.attachments,o.node,function(a){return a=a.slice(),g(a,o.node),a}),Object.assign({},n,{attachments:p});case l.AttachmentsActions.ATTACHMENTS_CATEGORIES_LOAD_REQUEST:return q=Object.assign({},n.categories,{categories:[],defaultCategory:null}),Object.assign({},n,{categories:q});case l.AttachmentsActions.ATTACHMENTS_CATEGORIES_LOAD_SUCCESS:return q=Object.assign({},n.categories,{categories:o.payload.categories,defaultCategory:o.payload.defaultCategory}),Object.assign({},n,{categories:q});case l.AttachmentsActions.ATTACHMENTS_EDIT_INFO:return p=k(n.attachments,o.node,function(a){return c.updateNode(a,function(a){return a.attId===o.node.attId},function(){return{isEdited:!0,isSaving:!1}})}),Object.assign({},n,{attachments:p});case l.AttachmentsActions.ATTACHMENTS_EXEC_ACTION_FAILED:return p=j(n.attachments,{isLoading:!1}),p=i(p,{isLoading:!1}),Object.assign({},n,{attachments:p,statuses:Object.assign({},n.statuses,{current:Object.assign({},n.statuses.current,{isLoading:!1}),currentConversations:Object.assign({},n.statuses.currentConversations,{isLoading:!1})})});case l.AttachmentsActions.ATTACHMENTS_EXEC_ACTION_REQUEST:return p=j(n.attachments,{isLoading:!0}),p=i(p,{isLoading:!0}),Object.assign({},n,{attachments:p,statuses:Object.assign({},n.statuses,{current:Object.assign({},n.statuses.current,{isLoading:!0}),currentConversations:Object.assign({},n.statuses.currentConversations,{isLoading:!0})})});case l.AttachmentsActions.ATTACHMENTS_EXEC_ACTION_SUCCESS:return p=j(n.attachments,{isLoading:!1}),p=i(p,{isLoading:!1}),Object.assign({},n,{attachments:p,statuses:Object.assign({},n.statuses,{current:Object.assign({},n.statuses.current,{isLoading:!1}),currentConversations:Object.assign({},n.statuses.currentConversations,{isLoading:!1})})});case l.AttachmentsActions.ATTACHMENTS_SAVE_INFO_REQUEST:return p=k(n.attachments,o.node,function(a){return c.updateNode(a,function(a){return a.attId===o.node.attId},function(){return{category:o.category,description:o.description,isSaving:!0,name:o.name}})}),Object.assign({},n,{attachments:p});case l.AttachmentsActions.ATTACHMENTS_SAVE_INFO_SUCCESS:var x,y=!1,z=o.payload.nodes[0],A=o.payload,B=!1;return p=j(p,{isLoading:!1}),p=i(p,{isLoading:!1}),p=k(p,o.node,function(b){return u=c.updateNode(b,function(a){return a.attId===z.attId},function(a,b){return x=a,y=x.category!==z.category||b.id!==A.id,B=x.nodeType!==z.nodeType,Object.assign({},z,{isEdited:!1,isSaving:!1})},function(b){return a.sortFunctionFactory(b,d.model.attachmentConfig.orderType)}),y&&!B&&(g(u,x),f(u,A,z,function(b){return a.sortFunctionFactory(b,d.model.attachmentConfig.orderType)})),u}),B&&(p=k(p,x,function(a){return a=a.slice(),g(a,x),a}),p=k(p,z,function(b){return b=b.slice(),f(b,A,z,function(b){return a.sortFunctionFactory(b,d.model.attachmentConfig.orderType)}),b})),Object.assign({},n,{attachments:p,statuses:Object.assign({},n.statuses,{current:Object.assign({},n.statuses.current,{isLoading:!1}),currentConversations:Object.assign({},n.statuses.currentConversations,{isLoading:!1})})});case l.AttachmentsActions.ATTACHMENTS_TOGGLE_GROUP:return p=c.updateNode(n.attachments,function(a){return a.id===o.id},function(a){return{isFolded:!a.isFolded}}),Object.assign({},n,{attachments:p});case l.AttachmentsActions.ATTACHMENTS_LOAD_CURRENT_FAILED:return p=j(n.attachments,{isLoading:!1}),Object.assign({},n,{attachments:p,statuses:Object.assign({},n.statuses,{current:Object.assign({},n.statuses.current,{isLoading:!1,isRequested:!1})})});case l.AttachmentsActions.ATTACHMENTS_LOAD_CURRENT_REQUEST:return p=j(n.attachments,{isLoading:!0}),Object.assign({},n,{attachments:p,statuses:Object.assign({},n.statuses,{current:Object.assign({},n.statuses.current,{isLoading:!0,isRequested:!0})})});case l.AttachmentsActions.ATTACHMENTS_LOAD_CURRENT_SUCCESS:return p=n.attachments.slice(),t=_.findIndex(p,function(a){return b.isCurrent(a)}),t>=0?p[t]=Object.assign({},p[t],o.payload,{isLoading:!1}):p.push(o.payload),p=c.sortNodes(p,function(b){return a.sortFunctionFactory(b,d.model.attachmentConfig.orderType)}),Object.assign({},n,{attachments:a.sortBy(p,"order"),statuses:Object.assign({},n.statuses,{current:Object.assign({},n.statuses.current,{isLoading:!1})})});case l.AttachmentsActions.ATTACHMENTS_LOAD_CURRENT_CONVERSATIONS_FAILED:return p=i(n.attachments,{isLoading:!1}),Object.assign({},n,{attachments:p,statuses:Object.assign({},n.statuses,{currentConversations:Object.assign({},n.statuses.currentConversations,{isLoading:!1,isRequested:!1})})});case l.AttachmentsActions.ATTACHMENTS_LOAD_CURRENT_CONVERSATIONS_REQUEST:return p=i(n.attachments,{isLoading:!0}),Object.assign({},n,{attachments:p,statuses:Object.assign({},n.statuses,{currentConversations:Object.assign({},n.statuses.currentConversations,{isLoading:!0,isRequested:!0})})});case l.AttachmentsActions.ATTACHMENTS_LOAD_CURRENT_CONVERSATIONS_SUCCESS:if(p=n.attachments.slice(),(r=_.findIndex(p,function(a){return b.isConversations(a)}))>=0){var C=p[r].nodes.slice();s=_.findIndex(C,function(a){return b.isCurrent(a)}),s>=0?C[s]=Object.assign({},C[s],o.payload.nodes[0].nodes,{isLoading:!1}):C.push(o.payload.nodes[0]),p[r]=Object.assign({},p[r],{nodes:C})}else p.push(o.payload);return p=c.sortNodes(p,function(b){return a.sortFunctionFactory(b,d.model.attachmentConfig.orderType)}),Object.assign({},n,{attachments:a.sortBy(p,"order"),statuses:Object.assign({},n.statuses,{currentConversations:Object.assign({},n.statuses.currentConversations,{isLoading:!1})})});case l.AttachmentsActions.ATTACHMENTS_LOAD_RELATED_CONVERSATIONS_FAILED:return p=n.attachments.slice(),r=_.findIndex(p,function(a){return b.isConversations(a)}),r>=0&&(C=p[r].nodes,v=_.filter(C,function(a){return a.staticNodeType===b.staticAttachmentTreeNodeType.custom||a.staticNodeType===b.staticAttachmentTreeNodeType.relatedChild||a.staticNodeType===b.staticAttachmentTreeNodeType.relatedParent}),_.map(v,function(a){for(var b=0;b<C.length;b++)C[b].id===a.id&&(C[b]=Object.assign({},C[b],{isLoading:!1}))}),h(C,"node_conv_tmp")),Object.assign({},n,{attachments:a.sortBy(p,"order"),statuses:Object.assign({},n.statuses,{conversations:Object.assign({},n.statuses.conversations,{isLoading:!1,isRequested:!1})})});case l.AttachmentsActions.ATTACHMENTS_LOAD_RELATED_CONVERSATIONS_REQUEST:return p=n.attachments.slice(),r=_.findIndex(p,function(a){return b.isConversations(a)}),r>=0&&(C=p[r].nodes,v=_.filter(C,function(a){return a.staticNodeType===b.staticAttachmentTreeNodeType.custom||a.staticNodeType===b.staticAttachmentTreeNodeType.relatedChild||a.staticNodeType===b.staticAttachmentTreeNodeType.relatedParent}),_.map(v,function(a){for(var b=0;b<C.length;b++)C[b].id===a.id&&(C[b]=Object.assign({},C[b],{isLoading:!0}))}),0===v.length&&C.push({id:"node_conv_tmp",isLoading:!0,isVirtual:!0,nodeType:3,nodes:[],order:2,staticNodeType:4})),Object.assign({},n,{attachments:a.sortBy(p,"order"),statuses:Object.assign({},n.statuses,{conversations:Object.assign({},n.statuses.conversations,{isLoading:!0,isRequested:!0})})});case l.AttachmentsActions.ATTACHMENTS_LOAD_RELATED_CONVERSATIONS_SUCCESS:if(p=n.attachments.slice(),(r=_.findIndex(p,function(a){return b.isConversations(a)}))>=0){for(C=p[r].nodes.slice(),D=0;D<o.payload.nodes.length;D++)E=o.payload.nodes[D],t=_.findIndex(C,function(a){return a.id===E.id}),t>=0?C[t]=Object.assign({},C[t],E,{isLoading:!1}):C.push(E);h(C,"node_conv_tmp"),p[r]=Object.assign({},p[r],{nodes:C})}else p.push(o.payload);return p=c.sortNodes(p,function(b){return a.sortFunctionFactory(b,d.model.attachmentConfig.orderType)}),Object.assign({},n,{attachments:a.sortBy(p,"order"),statuses:Object.assign({},n.statuses,{conversations:Object.assign({},n.statuses.conversations,{isLoading:!1})})});case l.AttachmentsActions.ATTACHMENTS_LOAD_RELATED_FAILED:return p=n.attachments.slice(),v=_.filter(p,function(a){return a.staticNodeType===b.staticAttachmentTreeNodeType.custom||a.staticNodeType===b.staticAttachmentTreeNodeType.relatedChild||a.staticNodeType===b.staticAttachmentTreeNodeType.relatedParent}),_.map(v,function(a){for(var b=0;b<p.length;b++)p[b].id===a.id&&(p[b]=Object.assign({},p[b],{isLoading:!1}))}),h(p,"node_tmp"),Object.assign({},n,{attachments:a.sortBy(p,"order"),statuses:Object.assign({},n.statuses,{all:Object.assign({},n.statuses.all,{isLoading:!1,isRequested:!1})})});case l.AttachmentsActions.ATTACHMENTS_LOAD_RELATED_REQUEST:return p=n.attachments.slice(),v=_.filter(p,function(a){return a.staticNodeType===b.staticAttachmentTreeNodeType.custom||a.staticNodeType===b.staticAttachmentTreeNodeType.relatedChild||a.staticNodeType===b.staticAttachmentTreeNodeType.relatedParent}),_.map(v,function(a){for(var b=0;b<p.length;b++)p[b].id===a.id&&(p[b]=Object.assign({},p[b],{isLoading:!0}))}),0===v.length&&p.push({id:"node_tmp",isLoading:!0,isVirtual:!0,nodeType:3,nodes:[],order:2,staticNodeType:4}),Object.assign({},n,{attachments:a.sortBy(p,"order"),statuses:Object.assign({},n.statuses,{all:Object.assign({},n.statuses.all,{isLoading:!0,isRequested:!0})})});case l.AttachmentsActions.ATTACHMENTS_LOAD_RELATED_SUCCESS:p=n.attachments.slice();for(var D=0;D<o.payload.length;D++){var E=o.payload[D];t=_.findIndex(p,function(a){return a.id===E.id}),t>=0?p[t]=Object.assign({},p[t],E,{isLoading:!1}):p.push(E)}return h(p,"node_tmp"),p=c.sortNodes(p,function(b){return a.sortFunctionFactory(b,d.model.attachmentConfig.orderType)}),Object.assign({},n,{attachments:a.sortBy(p,"order"),statuses:Object.assign({},n.statuses,{all:Object.assign({},n.statuses.all,{isLoading:!1})})});case l.AttachmentsActions.ATTACHMENTS_CHANGE_INFO:return p=k(n.attachments,o.node,function(a){return c.updateNode(a,function(a){return a.attId===o.node.attId
},function(){return{category:o.category,description:o.description,name:o.name}})}),Object.assign({},n,{attachments:p});case l.AttachmentsActions.ATTACHMENTS_UPDATE_ATT_COUNT:var F=e.getCurrentAttachmentsFlatList(n.attachments),G=e.getCurrentConversationsFlatList(n.attachments);return d.G_ATTCOUNT=F.length+G.length,Object.assign({},n,{attachmentsCount:d.G_ATTCOUNT});default:return n}}}),Injector.instance("EnvironmentReducer",[],function(){var a=webcon.redux,b=function(){return[]};return a.EnvironmentReducer||b}),window.webcon=function(a){return(a.redux=a.redux||{}).FormActions={FORM_REGISTER_FOCUS:"FORM_REGISTER_FOCUS",createFormRegisterFocus:function(a){return{type:this.FORM_REGISTER_FOCUS,fieldName:a}}},a}(window.webcon||{}),Injector.instance("FormReducer",[],function(){var a=webcon.redux,b=function(){return[]};return function(c,d){switch(c=c||b,d.type){case a.FormActions.FORM_REGISTER_FOCUS:return Object.assign({},c,{lastFocusedFormField:d.fieldName});default:return c}}}),window.webcon=function(a){return(a.redux=a.redux||{}).OcrActions={SET_ACTIVE_BLOCK:"SET_ACTIVE_BLOCK",createSetActiveBlock:function(a){return{type:this.SET_ACTIVE_BLOCK,block:a}},RESET_ACTIVE_BLOCK:"RESET_ACTIVE_BLOCK",createResetActiveBlock:function(){return{type:this.RESET_ACTIVE_BLOCK}},CHANGE_PAGE:"CHANGE_PAGE",changePage:function(a){return{type:this.CHANGE_PAGE,pageIndex:a}}},a}(window.webcon||{}),Injector.instance("OcrReducer",[],function(){var a=webcon.redux,b={};return function(c,d){switch(c=c||b,d.type){case a.OcrActions.SET_ACTIVE_BLOCK:return Object.assign({},c,{activeBlock:d.block,pageIndex:d.block.pageIndex});case a.OcrActions.RESET_ACTIVE_BLOCK:return Object.assign({},c,{activeBlock:void 0});case a.OcrActions.CHANGE_PAGE:return Object.assign({},c,{activeBlock:c.activeBlock,pageIndex:d.pageIndex});default:return c}}}),window.webcon=function(a){return(a.redux=a.redux||{}).SubelementsActions={SUBELEMENTS_CHANGE:"SUBELEMENTS_CHANGE",createChangeActions:function(a,b,c,d){return{type:this.SUBELEMENTS_CHANGE,rowId:a,value:b,fieldName:c,subelementsFieldName:d}},SUBELEMENTS_REMOVE_ROW:"SUBELEMENTS_REMOVE_ROW",createRemoveActions:function(a,b){return{type:this.SUBELEMENTS_REMOVE_ROW,rowId:a,subelementsFieldName:b}},SUBELEMENTS_CLONE_ROW:"SUBELEMENTS_CLONE_ROW",createCloneActions:function(a,b){return{type:this.SUBELEMENTS_CLONE_ROW,newModel:b,subelementsFieldName:a}},SUBELEMENTS_RESTORE_DEFAULTS:"SUBELEMENTS_RESTORE_DEFAULTS",createRestoreDefaultsAction:function(a,b){return{type:this.SUBELEMENTS_RESTORE_DEFAULTS,subelementsFieldName:a,newModel:b}},SUBELEMENTS_REMOVE_ALL:"SUBELEMENTS_REMOVE_ALL",createRemoveAllAction:function(a){return{type:this.SUBELEMENTS_REMOVE_ALL,subelementsFieldName:a}},SUBELEMENTS_ADD_ROW:"SUBELEMENTS_ADD_ROW",createAddRowActions:function(a,b){return{type:this.SUBELEMENTS_ADD_ROW,newModel:b,subelementsFieldName:a}},SUBELEMENTS_CHANGE_VALIDATION_MESSAGE:"SUBELEMENTS_CHANGE_VALIDATION_MESSAGE",createChangeValidationMessageActions:function(a,b,c,d,e){return{type:this.SUBELEMENTS_CHANGE_VALIDATION_MESSAGE,messages:a,fieldName:b,rowId:c,subelementsFieldName:d,saveRestrictions:e}},SUBELEMENTS_CHANGE_VALIDATION:"SUBELEMENTS_CHANGE_VALIDATION",createChangeValidationActions:function(a,b,c,d,e){return{type:this.SUBELEMENTS_CHANGE_VALIDATION,isValid:a,fieldName:b,rowId:c,subelementsFieldName:d,saveRestrictions:e}},SUBELEMENTS_CHANGE_SAVERESTRICTIONS:"SUBELEMENTS_CHANGE_SAVERESTRICTIONS",createChangeSaveRestrictionsActions:function(a,b,c,d,e,f){return{type:this.SUBELEMENTS_CHANGE_SAVERESTRICTIONS,isSavable:a,fieldName:c,rowId:d,value:b,subelementsFieldName:e,message:f}},SUBELEMENTS_CHANGE_COLUMN_VISIBILITY:"SUBELEMENTS_CHANGE_COLUMN_VISIBILITY",createChangeSubelementsColumnVisibilityActions:function(a,b,c){return{type:this.SUBELEMENTS_CHANGE_COLUMN_VISIBILITY,subelementsFieldName:a,columnName:b,isVisible:c}},SUBELEMENTS_UNDO_CHANGE_COLUMN_VISIBILITY:"SUBELEMENTS_UNDO_CHANGE_COLUMN_VISIBILITY",createUndoChangeSubelementsColumnVisibilityActions:function(a,b){return{type:this.SUBELEMENTS_UNDO_CHANGE_COLUMN_VISIBILITY,subelementsFieldName:a,originalColumns:b}},SUBELEMENTS_REMOVE_SELECTED_ROWS:"SUBELEMENTS_REMOVE_SELECTED_ROWS",createRemoveSelectedRowsActions:function(a,b){return{type:this.SUBELEMENTS_REMOVE_SELECTED_ROWS,subelementsFieldName:a,rows:b}},SUBELEMENTS_UNDO_EDIT_ROW:"SUBELEMENTS_UNDO_EDIT_ROW",createUndoEditRowAction:function(a,b,c){return{type:this.SUBELEMENTS_UNDO_EDIT_ROW,subelementsFieldName:a,rowId:b,originalRow:c}},SUBELEMENTS_APPLY_RECALCULATE:"SUBELEMENTS_APPLY_RECALCULATE",createApplyRecalculateAction:function(a,b){return{type:this.SUBELEMENTS_APPLY_RECALCULATE,subelementsFieldName:a,data:b}},SUBELEMENTS_APPLY_ROW_RECALCULATE:"SUBELEMENTS_APPLY_ROW_RECALCULATE",createApplyRowRecalculateAction:function(a,b,c){return{type:this.SUBELEMENTS_APPLY_ROW_RECALCULATE,subelementsFieldName:a,data:b,affectedColumns:c}}},a}(window.webcon||{}),Injector.factory("SubelementsReducer",[],function(){var a=webcon.redux,b=[];return function(c,d){return c=c||b,c.map(function(b){if(b.info.fieldName===d.subelementsFieldName)switch(d.type){case a.SubelementsActions.SUBELEMENTS_CHANGE:var c=createSubsCloneForDataChange(b);return c.control.data=createChangedData(b,d),c;case a.SubelementsActions.SUBELEMENTS_REMOVE_ROW:var e=createSubsCloneForDataChange(b);return e.control.data=createRemoveRow(b,d),e;case a.SubelementsActions.SUBELEMENTS_CLONE_ROW:var f=createSubsCloneForDataChange(b);return f.control.data=createCloneRow(b,d),f;case a.SubelementsActions.SUBELEMENTS_RESTORE_DEFAULTS:var g=createSubsCloneForDataChange(b);return g.control.data=createRestoreDefaults(d),g;case a.SubelementsActions.SUBELEMENTS_REMOVE_ALL:var h=createSubsCloneForDataChange(b);return h.control.data=createRemoveAll(),h;case a.SubelementsActions.SUBELEMENTS_ADD_ROW:var i=createSubsCloneForDataChange(b);return i.control.data=createAddRow(b,d),i;case a.SubelementsActions.SUBELEMENTS_CHANGE_VALIDATION_MESSAGE:var j=createSubsCloneForDataChange(b);return j.control.data=createAddValidationMessage(b,d),j;case a.SubelementsActions.SUBELEMENTS_CHANGE_VALIDATION:return handleChangeValidation(b,d);case a.SubelementsActions.SUBELEMENTS_CHANGE_SAVERESTRICTIONS:var k=createSubsCloneForDataChange(b);return k.control.data=createChangeSaveRestrictions(b,d),k;case a.SubelementsActions.SUBELEMENTS_CHANGE_COLUMN_VISIBILITY:var l=createSubsCloneForColumnsConfigChange(b);return l.control.config.columns=createChangeColumnVisibility(b,d),l;case a.SubelementsActions.SUBELEMENTS_UNDO_CHANGE_COLUMN_VISIBILITY:var m=createSubsCloneForColumnsConfigChange(b);return m.control.config.columns=createUndoChangeColumnsVisibility(b,d),m;case a.SubelementsActions.SUBELEMENTS_REMOVE_SELECTED_ROWS:var n=createSubsCloneForDataChange(b);return n.control.data=createRemoveSelectedRows(b,d),n;case a.SubelementsActions.SUBELEMENTS_UNDO_EDIT_ROW:var o=createSubsCloneForDataChange(b);return o.control.data=createUndoEditRow(b,d),o;case a.SubelementsActions.SUBELEMENTS_APPLY_RECALCULATE:var p=createSubsCloneForDataChange(b);return p.control.data={rows:mergeValidationBetweenRows(d.data.rows,b.control.data.rows)},p.control.config.columnsConfiguration=Object.assign({},p.control.config.columnsConfiguration,d.data.columnsConfiguration),p.control.isLoading=!1,p;case a.SubelementsActions.SUBELEMENTS_APPLY_ROW_RECALCULATE:var q=createSubsCloneForDataChange(b);return q.control.data={rows:b.control.data.rows.map(function(a){return a.id===d.data.id?updateSpecificCells(mergeValidationBetweenSingleRows(d.data,a),a,d.affectedColumns):a})},q}return b})}}),Injector.instance("Store",[],function(){function a(a){e=a}function b(){return e.getState()}function c(a){e.dispatch(a)}function d(){return e}var e;return{getState:b,saveStore:a,dispatch:c,getStore:d}},Injector.env.global),Injector.instance("SubelementsStoreController",["Store","logger"],function(a,b){function c(c){Guard.notNull(c,"SubelementsIdentifier");var d=a.getState(),e=_.find(d.subelements,function(a){return a.info.id===c});return e||b.warning("Subelements not found: "+c),e}function d(c){Guard.notNull(c,"FieldName");var d=a.getState(),e=_.find(d.subelements,function(a){return a.info.fieldName===c});return e||b.warning("Subelements not found: "+subelementsIdentifier),e}return{findSubelementsControlById:c,findSubelementsControlByFieldName:d}}),Injector.instance("ReturnHandler",["logger","$Window","PopupClosingFunctionsService","CheckoutService"],function(a,b,c,d){function e(){b.webcon=b.webcon||{},b.webcon.back=f}function f(){a.log("back");var b=c.pop();return b?(b(),1):(d.setExpiringCheckout(),0)}return{registerBackFunction:e}}),Injector.factory("RichTextToolbarService",[],function(){function a(a){var d=[],e=[];return a.undoRedo&&d.push(b.history),d.push(b.inline),a.alignment&&d.push(b.textAlign),a.paragraph&&d.push(b.blockType),a.font&&d.push(b.fontFamily),a.fontSize&&d.push(b.fontSize),a.lists&&d.push(b.list),a.links&&(d.push(b.link),d.push(b.image)),a.colors&&d.push(b.colorPicker),a.removeFormatting&&d.push(b.remove),a.special&&d.push(b.emoji),a.formatting&&(e.push(c.bold),e.push(c.italic),e.push(c.underline),e.push(c.strikethrough)),a.index&&(e.push(c.subscript),e.push(c.superscript)),{options:d,inline:{options:e}}}var b={textAlign:"textAlign",remove:"remove",colorPicker:"colorPicker",emoji:"emoji",fontFamily:"fontFamily",fontSize:"fontSize",image:"image",inline:"inline",link:"link",list:"list",blockType:"blockType",history:"history"},c={bold:"bold",italic:"italic",underline:"underline",strikethrough:"strikethrough",subscript:"subscript",superscript:"superscript"};return{getToolbar:a}}),Injector.factory("SaveRestrictionsService",["SubelementSaveRestrictionsService","ErrorDisplayService","DecimalValidator","$Window","DateTimeValidator"],function(a,b,c,d,e){function f(a,b){a&&a.saveRestrictions.messages.push(b)}function g(b,c){var e=c.saveRestrictions.isSavable,f=h(b);return"Subelements"!==d.model[f.fieldName].type||a.validateModel(f.fieldName)||(e=!1),e}function h(a){var b=_.find(d.model.controls,function(b){return b.fieldName==a});if(!b)throw new Error("ThereIsn'tOneControlFor :"+a);return b}function i(a){a.saveRestrictions={isSavable:!0,messages:[]},a.validation.messages=[]}function j(){var a=!0,c=d.model;return _.each(c.controls,function(d){var e=c[d.fieldName],f=g(d.fieldName,e);a=a&&f,!f&&e.saveRestrictions.messages.length>0&&b.addValidationError({title:d.displayName,errorMessage:e.saveRestrictions.messages[0]})}),b.showErrorAlert(),a}function k(a,b,d){var g=!0,h=a,j=a.config,k=h.type;return i(a),"FloatingPoint"!==k||c.isValid(b,j)||(g=!1,f(a,webconLocale.cValueMustMatchFormat+' "'+c.getCorrectFormat(j).replace(" ","")+'".')),"Date"!==k||e.isValid(b,j.includeTime)||(g=!1,f(a,webconLocale.cValueMustMatchFormat+' "'+e.getCorrectFormat(j.includeTime)+'".')),d?d({isSavable:g,invalidValue:b}):(h.saveRestrictions.isSavable=g,h.saveRestrictions.invalidValue=b),g}function l(b,d,f,g,h,i){var j=!0,k=b,l=b.config,m=k.type,n="";return a.removeAllErrors(i,g,h),"FloatingPoint"!==m||c.isValid(d,l)||(j=!1,n=webconLocale.cValueMustMatchFormat+' "'+c.getCorrectFormat(l).replace(" ","")+'".',a.addErrorMessage(i,g,n,h,d)),"Picker"===m&&(d=d.rawValue),"Date"!==m||e.isValid(d,l.includeTime)||(j=!1,n=webconLocale.cValueMustMatchFormat+' "'+e.getCorrectFormat(l.includeTime)+'".',a.addErrorMessage(i,g,n,h,d)),f?f({isSavable:j,invalidValue:d,message:n||d}):(k.saveRestrictions.isSavable=j,k.saveRestrictions.invalidValue=d),j}return{validate:k,validateModel:j,addErrorMessage:f,validateSubelementsCell:l}}),Injector.factory("SubelementSaveRestrictionsService",["logger","ModelController","ErrorDisplayService","$Window","Store"],function(a,b,c,d,e){function f(a,b,c,d,f){var g={isValid:!1,isSavable:!1,invalidValue:f,messages:[c]};a&&b.cells[a]&&e.dispatch(l.SubelementsActions.createChangeValidationMessageActions([c],a,b.id,d,g))}function g(a,b,c){var d={isValid:!0,isSavable:!0,messages:[]};e.dispatch(l.SubelementsActions.createChangeValidationMessageActions([],a,b.id,c,d)),e.dispatch(l.SubelementsActions.createChangeValidationActions(!0,a,b.id,c,d))}function h(a,b){return b.cells[a].saveRestrictions.isSavable}function i(a,b){var c=_.find(a,function(a){return a.fieldName==b});if(!c)throw new Error("ThereIsn'tOneControlFor :"+b);return c}function j(a){var b=!0,c=e.getState(),f=_.find(c.subelements,function(b){return b.info.fieldName===a}).control,g=i(d.model.controls,a);return _.each(f.data.rows,function(c,d){var e=k(c,a,g.displayName,d);b=b&&e}),b=b}function k(a,b,e,f){var g=!0,i=d.model[b].config.columns;return _.each(i,function(b){var d=a.cells[b.fieldName],i=h(b.fieldName,a);if(g=g&&i,!i){var j;if(e){var k=f+1;j=e+", ",j+=webconLocale.cValidationMessageRow+" "+k+", ",j+=webconLocale.cValidationMessageColumn+" "+b.displayName}else j=b.displayName;c.addValidationError({title:j,errorMessage:d.saveRestrictions.messages[0]})}}),g}var l=webcon.redux;return{validateModel:j,validateModelSingleRow:k,addErrorMessage:f,removeAllErrors:g}}),Injector.factory("SaveRestrictionsChecker",["$Window"],function(a){function b(b){return a.model[b].saveRestrictions.isSavable}return{checkIsSavable:b}}),Injector.factory("SubelementsSaveRestrictionsCheckerCreator",["Store"],function(a){function b(b,c){function d(d){var e=a.getState(),f=e.subelements,g=_.find(f,function(a){return a.info.fieldName===b});return _.find(g.control.data.rows,function(a){return a.id===c}).cells[d].saveRestrictions.isSavable}return{checkIsSavable:d}}return{create:b}}),Injector.instance("ScriptsRunner",["ActionService","$Window","logger"],function(a,b,c){function d(){var c=b.model.scripts,d=c.urlToRedirectOnLoad;d&&a.handleActionInvoke(d),e((c.jsToRegister||"")+" ; "),_.each(c.onPageLoad,function(a){e(a)})}function e(a,b){if(b)for(var d in b)b.hasOwnProperty(d)&&void 0!==b[d]&&(a="var "+d+" = "+b[d]+";"+a);try{return $.globalEval(a)}catch(a){c.error("ErrorInUserScript",a)}}function f(a,b){if(b)for(var d in b)b.hasOwnProperty(d)&&(a="var "+d+" = "+b[d]+";"+a);try{return window.eval(a)}catch(a){c.error("ErrorInUserScript",a)}}return{runOnLoadScripts:d,runClientScript:e,runClientScriptWithReturn:f}}),Injector.factory("ShouldRenderService",[],function(){function a(a){return Guard.notNull(a,"model"),"SystemElementId"!==a.type&&("SystemTaskDetails"!==a.type||void 0!==a.data&&null!==a.data)}return{checkIfShouldRender:a}},Injector.env.global),Injector.instance("SidebarContextService",[],function(){function a(){return!1}function b(){return!1}return{isInSidebar:a,isInIframe:b}}),Injector.instance("SignatureService",["FormInfo","DeviceInfo","$Window"],function(a,b,c){function d(){var d=a.signature;if(d&&b.isNativeMobileApp()){var e={signature:d};c.WebviewManager.setSignature(e)}}return{setDocumentSignature:d}}),Injector.instance("StyleStringHelper",[],function(){function a(a){if(a.length<=0)return{};var b=a.match(/([\w-]*)\s*:\s*(\S*\('\S*'\)|[^;]+)/g);return null==b?{}:b.reduce(function(a,b){if(b.length<=0||-1===b.indexOf(":"))return a;var c=b.split(":");return a[c[0].trim().replace(/(-\w)/g,function(a){return a[1].toUpperCase()})]=c.slice(1).join(":").trim(),a},{})}function b(a){return a.length?a.replace(/\s/g,"").split(";").filter(function(a){return!!a}).map(function(a){return a.split(":")}).reduce(function(a,b){return a[b[0]]=b[1],a},{}):{}}function c(a){return a&&a.split(";").join(":").replace(/ /g,"").split(":").includes("color")}function d(a,b){var c=[],d=b||"";for(var e in a)c.push(e+d);return c}return{formRuleSuffix:"FormRule",convertStyleStringToReactStyleObject:a,convertStyleStringToStyleObject:b,checkIfStyleStringSetsColor:c,convertObjectToClassNamesArray:d}}),Injector.factory("SubelementsDependencyService",[],function(){function a(a,b){function c(a){if(!_.includes(d,a)){d.push(a),_.includes(e,a)||e.push(a);var f=b.config.columns.find(function(b){return b.fieldName===a});f&&f.dependantColumns&&_.each(f.dependantColumns,function(a){c(a)})}}var d=[a],e=[],f=b.config.columns.find(function(b){return b.fieldName===a});return _.each(f.dependantColumns,function(a){c(a)}),e}return{getDeepDependants:a}}),Injector.instance("SubelementsQueueService",["WebServiceController","SubelementsUpdater"],function(a,b){function c(a,c,d,e,f){i(function(f){b.updateSingleRow(a,c,d,j(f,e))},f)}function d(b,c,d,e,f){i(function(g){a.addNewSubelementRow(b,c,j(g,d),e,f)})}function e(a){i(function(c){b.update(a,function(){c()})})}function f(a,b,c){i(function(b){c(a,j(b))})}function g(a,b){i(function(c){b(a),c()})}function h(a){var b={};return Promise.race([a,b]).then(function(a){return a===b?"pending":"fulfilled"},function(){return"rejected"})}function i(a,b){l?h(l).then(function(b){l="fulfilled"===b?new Promise(a):l.then(function(){return new Promise(a)})}):l=new Promise(a),b&&m.push(b)}function j(a,b){return function(c){a(),b&&b(c),h(l).then(function(a){"fulfilled"===a?k():l=l.then(k)})}}function k(){m.forEach(function(a){a()}),m=[]}var l=null,m=[];return{queueAddNewSubelementRow:d,queueUpdateSubelements:e,queueRecalculateRow:c,queueDeleteRow:g,queueCloneRow:f}}),Injector.factory("SubelementsStartup",["ColumnSumService"],function(a){function b(a){c(a)}function c(b){_.forEach(b,function(b){b.control.data.initialized&&a.propagateSummaries(b.info.fieldName)})}return{startup:b}}),Injector.factory("TemporaryFilesUploadService",["ErrorDisplayService","Ajax","FormInfo","$Window"],function(a,b,c,d){function e(e,f,g,h,i){$(e).fileupload({url:d.location.origin+((d.initModel?d.initModel.runningAddress:"")||"")+c.contextWebUrl+b.getUrl("UploadTemporaryFile"),dropZone:null,autoUpload:!1,done:function(a,b){var c=b.result;f(c)}}).bind("fileuploadadd",function(b,c){if(i){var d=i(c);d.isValid?c.submit():a.displayErrorMessageOnTop(d.message,0)}else c.submit()}).bind("fileuploadstart",function(){g&&g()}).bind("fileuploadfail",function(){a.displayErrorMessageOnTop(webconLocale.cErrorWhileConnection,0),h&&h()})}return{registerUpload:e}}),Injector.factory("TreeTraversingService",[],function(){function a(a,c){var d=b(a,c);return _.reject(d,function(a){return c.id===a.id})}function b(a,c){if(!a||!c)return[];for(var d in a)if(a.hasOwnProperty(d)){var e=a[d],f=e.childNodes;if(e.id===c.id)return[e];if(f){var g=b(f,c);if(0!==g.length)return g.push(e),g}}return[]}return{getNodesInPathToNode:a}}),Injector.instance("UpdateAttBlockingPanelService",["logger"],function(a){function b(){e++}function c(){e>0?e--:a.warning("TooManyUnblocksPotentialRisk")}function d(){return 0!==e}var e=0;return{block:b,unblock:c,isBusy:d}}),Injector.instance("UrlsFactory",[],function(){function a(a){}function b(a,b,c){}function c(){return""}function d(a){return a}function e(){return!1}function f(a,b){}return{createForElement:a,getCurrentReturnUrl:c,showReturnButton:e,createForNewElement:b,addQueryParams:d,createHistoryUrl:f}}),Injector.instance("UserInteractionExecutor",["UpdateAttBlockingPanelService","logger"],function(a,b){function c(){return a.isBusy()}function d(a){if(c())var d=0,e=window.setInterval(function(){if(!c()||d>=100)return a(),void window.clearInterval(e);d++,b.trace("Waiting:"+d+";ForInternalActionsToCompleteBeforeInvokingUserAction")},50);else b.trace("ExecutingUserActionWithoutWaiting"),a()}return{executeWithActiveWaiting:d}}),Injector.instance("AttributeEditabilityValidator",["$Window","ControlNameCleaner"],function(a,b){function c(c){Guard.notNullOrEmpty(c,"FieldName");var d=function(a){return a.fieldName.startsWith(b.cleanName(c.toString()))};return _.find(a.model.controls,d)}function d(a){var b=c(a);return null!==b&&void 0!==b&&"ReadOnlyHtml"===b.editMode}return{isReadonly:d}}),Injector.factory("ColumnSumService",["$Window","SubelementsStoreController"],function(a,b){function c(a,b){var c=a.columns.map(function(a){return a.fieldName}),e=c.filter(function(b){return a.columnsConfiguration[b].config&&!0===a.columnsConfiguration[b].config.showSummary}),f={};return e.forEach(function(a){f[a]=d(a,b)}),f}function d(b,c){var d=c.map(function(a){return a.cells[b]&&a.cells[b].data&&a.cells[b].data.value?a.cells[b].data.value:0}),e=0;return d.length>0&&(e=_.reduce(d,function(b,c){return a.webcon.math.plus(g(b),g(c))})),g(e)}function e(c){var e=a.model[c];if(e&&e.config&&e.config.columnsSumPropagation){var f=e.config;_.each(f.columnsSumPropagation,function(e){if(f.columnsConfiguration[e.columnName]){var g=b.findSubelementsControlByFieldName(c),h=g.control.data.rows,i=d(e.columnName,h);a.SetValue(e.fieldName,i,{forceOnReadonly:!0})}})}}function f(c,e){var f=a.model[c],g=b.findSubelementsControlByFieldName(c),h=g.control.data.rows;if(f&&f.config&&f.config.columnsSumPropagation){var i=f.config;_.each(i.columnsSumPropagation,function(b){if(b.columnName===e&&i.columnsConfiguration[b.columnName]){var c=d(b.columnName,h);a.SetValue(b.fieldName,c,{forceOnReadonly:!0})}})}}function g(a){return parseFloat(parseFloat(a).toFixed(6))}return{calculateSums:c,propagateSummaries:e,propagateSummary:f}}),Injector.factory("DateTimeValidator",["Localization"],function(a){function b(a,b){return(a&&a._isAMomentObject?a:moment(a,this.getCorrectFormat(b),!0)).isValid()||!a}function c(b){return b?a.getDateWithTimeFormat():a.getDateFormat()}return{isValid:b,getCorrectFormat:c}}),Injector.factory("DecimalValidator",["ClientInfo","NumbersService"],function(a,b){function c(a,c){if(!a)return!0;var d=b.numberValidation.errorCodes,e=b.getNumberFormat(c);if(e){var f=e.validate(a);return f.isValid||f.errorCode===d.tooManyDecimalPlaces}return!1}function d(a,c){if(!a)return!0;var d=b.getNumberFormat(c);if(d){return d.validate(a).isValid}return!1}function e(a){var c=b.getNumberFormat(a);return c?c.format(1e3).formatted:0}return{isValid:c,isValidAndCheckDecimalPlaces:d,getCorrectFormat:e}}),Injector.factory("DelegateValidator",[],function(){return{isDataValid:function(a,b){var c=webconLocale.cForwardTaskWindowTitle;return 0===a.length?(Injector.resolve(["PopupController"],function(a){a.showWFAlert(c,webconLocale.cTasksToDelegateNotSelected)}),!1):!(!b||0===b.length)||(Injector.resolve(["PopupController"],function(a){a.showWFAlert(c,webconLocale.cPersonToDelegateNotSelected)}),!1)}}}),Injector.factory("EmailValidator",[],function(){function a(a){return!a||!a.value||b.test(a.value)}var b=/^(([^<>()\[\]\.,;:\s@"]+(\.[^<>()\[\]\.,;:\s@"]+)*)|(".+"))@((([^<>()[\]\.,;:\s@"]+\.)+[^<>()[\]\.,;:\s@"]+)|(\[(\d{1,3}\.){3}\d{1,3}]))$/;return{isValid:a}}),Injector.factory("EmptyValueValidator",["$Window"],function(a){function b(a){return!a}function c(a){return!a||!a.primary}function d(a){return void 0===a||null===a||""===a}function e(a){return!a}function f(a){return!a||!a.value}function g(a){return!a||!a.selected||!a.selected.value}function h(a){return!a||!(void 0!==a.address&&null!==a.address||void 0!==a.latitude&&null!==a.latitude&&void 0!==a.longitude&&null!==a.longitude)}function i(a){if(a&&a.hasCustomValue)return!a.customValue;var b=a&&a.rawValue,c=a&&a.pickerEntities&&a.pickerEntities.length>0;return!b&&!c}function j(a){var b=!1;if(a&&a.selectedValues)for(var c in a.selectedValues)a.selectedValues.hasOwnProperty(c)&&(b=!0);return!b}function k(a){return!a||!a.id||!a.name}function l(a){return!a||0===a.links.length||!a.links[0].url}function m(a){return!a||!a.imageUrl}function n(a){return!a||!a.rows||!a.rows.length}function o(a){return void 0===a||null===a||""===a||d(a.value)}function p(a){return!a||!a.attachmentIds||!a.attachmentIds.length}function q(b){return a.webcon.customControls&&a.webcon.customControls.emptyValueValidators?a.webcon.customControls.emptyValueValidators[b.pluginGuid]:null}return{isEmpty:function(a,r,s){if(s.plugin){var t=q(s.plugin);if(t&&"function"==typeof t){var u={};return Injector.resolve(["CustomControlsFactory"],function(a){u=t({model:r,sdkConfiguration:a.getSdkConfiguration(s.plugin.sdkConfiguration),fieldConfiguration:a.getFieldConfiguration(s)})}),!u}}switch(a){case"CalculatedText":return!1;case"SingleRowText":return b(r);case"MultiRowText":return c(r);case"Date":case"Integer":return d(r);case"FloatingPoint":case"FloatingPointCalculated":return o(r);case"Bool":return e(r);case"Choose":return g(r);case"Autocomplete":case"Picker":case"People":return i(r);case"GoogleMap":return h(r);case"SurveyRating":return d(r);case"SurveyChoose":return j(r);case"ChoiceTree":return k(r);case"Link":return l(r);case"LinkReadonly":return!1;case"Image":return m(r);case"Subelements":return n(r);case"SqlGrid":case"SqlRow":return!1;case"RelativeAttachments":case"LocalAttachments":return p(r);case"Email":case"Picture":case"HandwrittenSignature":return f(r)}throw new Error("UnknownControlToValidate:"+a)}}}),Injector.factory("FieldNameValidator",["$Window","Store","SubelementsStoreController","logger"],function(a,b,c,d){function e(b,c){var e=function(a){return a.fieldName===b+"_"+c.toString()};return a.model.controls.some(e)?b+"_"+c.toString():void d.warning("ThereIsNoFieldId:"+c)}function f(a){Guard.notNullOrEmpty(a,"SubelementsControlId");var b=i(a),e=b.replace(/^\D+/g,""),f=0;e&&(f=parseInt(e));var g=c.findSubelementsControlById(f);return g?g.info.fieldName:void d.warning("ControlIsNotSubelement: "+a)}function g(b){Guard.notNullOrEmpty(b,"FieldName");var c=i(b),e=function(a){return a.fieldName.startsWith(c+"_")};return a.model.controls.some(e)?c:void d.warning("ThereIsNoFieldNamed:"+b)}function h(b){Guard.onlyNumber(b,"Id");var c=function(a){return a.id===b};return a.model.controls.some(c)?b:void d.warning("ThereIsNoFieldWithId:"+b)}function i(a){var b=a.toString();return b.startsWith("WFD_")?b.substring(4):b.startsWith("Survey")?b.substring(6):b}return{validateFieldId:h,validateFieldName:g,validateFieldNameForNotUniqueField:e,validateFieldNameForSubelement:f}}),Injector.instance("LocalAttachmentsValidator",["Store","AttachmentsFinder"],function(a,b){function c(c){for(var d=c.attachmentIds,e=a.getState().attachments.attachments,f=0;f<d.length;f++)if(!b.findInCurrentAttachments(e,function(a){return a.attId===d[f]},!0))return!1;return!0}return{isValid:c}}),Injector.factory("PrivilegesValidator",[],function(){return{isDataValid:function(a,b){return null!==a&&b>0}}}),Injector.factory("RegexValidator",[],function(){return{isValid:function(a,b,c){if(!c)return!0;var d=new RegExp(b);return"SingleRowText"===a?d.test(c):"MultiRowText"!==a||d.test(c.primary)}}}),Injector.factory("SingleValueValidator",[],function(){function a(a){return a?a.toString().splitRemoveEmptyEntries(";").length:0}function b(a){return a.pickerEntities?a.pickerEntities.length:0}function c(c,d){return"Picker"!==c&&"People"!==c&&"Autocomplete"!==c||(!d||a(d.rawValue)+b(d)<=1)}return{isValid:c}}),Injector.instance("SubelementCellEditabilityValidator",["SubelementsStoreController"],function(a){function b(b,c){Guard.notNullOrEmpty(b,"FieldName"),Guard.notNullOrEmpty(c,"ColumnName");var d=a.findSubelementsControlById(b);return d?_.find(d.control.config.columns,function(a){return a.fieldName===c}):null}function c(a,c){var d=b(a,c);return!!d&&"ReadOnlyHtml"===d.editMode}return{isReadonly:c}}),Injector.instance("SubelementEditabilityValidator",["Store","SubelementsStoreController"],function(a,b){function c(a){Guard.notNullOrEmpty(a,"SubelementsControlName");var c=b.findSubelementsControlById(a);return null!==c&&void 0!==c&&"ReadOnlyHtml"===c.info.editMode}return{isReadonly:c}}),window.webcon=function(a){return Injector.factory("SubelementValidationService",["logger","EmptyValueValidator","RegexValidator","SingleValueValidator","ErrorDisplayService","QueryStringParamsService","DecimalValidator","EmailValidator","LocalAttachmentsValidator","Store","ModelController"],function(b,c,d,e,f,g,h,i,j,k,l){function m(a,b){var c=_.find(a,function(a){return a.fieldName==b});if(!c)throw new Error("ThereIsn'tOneControlFor :"+b);return c}function n(a){var b=k.getState(),c=b.subelements.filter(function(b){return b.info.fieldName===a})[0];if(!c)throw new Error("ThereIsn'tOneControlFor :"+a);return c}function o(a,b,c){p(a,b,webconLocale.cProvideValueForRequiredField,c,null,!0)}function p(a,b,c,d,e,f){var g={isValid:!1,isSavable:f||!1,messages:[c],invalidValue:e&&e.value?e.value.toString():null};a&&b.cells[a]&&k.dispatch(y.SubelementsActions.createChangeValidationMessageActions([c],a,b.id,d,g))}function q(a,b,c){var d={isValid:!0,isSavable:!0,messages:[]};k.dispatch(y.SubelementsActions.createChangeValidationMessageActions([],a,b.id,c,d)),k.dispatch(y.SubelementsActions.createChangeValidationActions(!0,a,b.id,c,d))}function r(a){if(x())return!0;var b=!0,c=n(a),d=c.control;return _.each(d.data.rows,function(d,e){var f=t(d,a,c.info.displayName,e);b=b&&f}),b}function s(a){var b=!0,c=n(a),d=c.control;return _.each(d.data.rows,function(c){var d=u(c,a);b=b&&d}),b}function t(a,b,c,d){if(x())return!0;var e=!0,g=n(b),h=g.control.config.columns;return _.each(h,function(i){var j=a.cells[i.fieldName],k=w(h,i.fieldName,a,j.data,g.control.config.columnsConfiguration,b);if(e=e&&k,!k){var l;if(c){var m=d+1;l=c+", ",l+=webconLocale.cValidationMessageRow+" "+m+", ",l+=webconLocale.cValidationMessageColumn+" "+i.displayName}else l=i.displayName;var o=n(b),p=o.control.data.rows.find(function(b){return b.id===a.id}),q=p.cells[i.fieldName];f.addValidationError({title:l,errorMessage:q.validation.messages[0]})}}),e}function u(a,b){if(x())return!0;var c=!0,d=n(b),e=d.control.config.columns;return _.each(e,function(e){var f=a.cells[e.fieldName],g=d.control.config.columnsConfiguration[e.fieldName].config,h=f.type;if(l.isPicker(f)){var i=v(g,h,f.data,e,a,b);c=c&&i}var j={isSavable:c,isValid:c};k.dispatch(y.SubelementsActions.createChangeValidationActions(c,e.fieldName,a.id,b,j))}),c}function v(a,c,d,f,g,h){return!!x()||(!(a&&!a.allowMultiValue&&!e.isValid(c,d))||(b.log(f.fieldName+" singleValueValidationFailed"),p(f.fieldName,g,webconLocale.cTooManyValues,h,d,!0),!1))}function w(a,e,f,g,l,n){if(x())return!0;var r=!0,s=!0,t=m(a,e),u=f.cells[e],w=l[e].config,z=u.type;if(q(t.fieldName,f,n),t.required){var A=_.find(f.columnRequiredInfos,function(a){return a.columnName===e});A&&A.isRequired&&c.isEmpty(z,g)&&(b.log(t.fieldName+" isRequiredAndEmpty"),r=!1,o(t.fieldName,f,n))}t.regexValidation&&(d.isValid(z,t.regexValidation,g)||(b.log(t.fieldName+" regexValidationFailed"),r=!1,s=!0,p(t.fieldName,f,t.regexValidationMessage,n,g,s))),v(w,z,g,t,f,n)||(s=!1,r=!1),"FloatingPoint"!==z||h.isValidAndCheckDecimalPlaces(g.value,w)||(r=!1,s=!1,p(t.fieldName,f,webconLocale.cValueMustMatchFormat+' "'+h.getCorrectFormat(w).replace(" ","")+'".',n,g)),"Email"!==z||i.isValid(g)||(r=!1,s=!1,p(t.fieldName,f,webconLocale.cInvalidEmailFormat,n,g)),"LocalAttachments"!==z||j.isValid(g)||(r=!1,s=!1,p(t.fieldName,f,webconLocale.cAttachmentDoesNotExist,n,g));var B={isSavable:s,isValid:r};return r&&k.dispatch(y.SubelementsActions.createChangeValidationActions(r,e,f.id,n,B)),r}function x(){return"1"===g.getQueryStringParams().disableSubelementValidation}var y=a.redux;return{validate:w,validateModel:r,validateModelSingleRow:t,validateModelOnStart:s}}),a}(window.webcon||{}),Injector.factory("SubelementsValidationWrapper",["SubelementValidationService"],function(a){function b(b,c,d,e){return{validate:function(f,g){return a.validate(b,f,c,g,d,e)}}}function c(b){return a.validateModel(b)}function d(b){return a.validateModelOnStart(b)}return{createValidator:b,validateModel:c,validateModelOnStart:d}}),Injector.factory("SumValidator",[],function(){function a(a){return c(_.reduce(a,function(a,b){return c(a)+c(b)}))}function b(a,b){return c(a)===c(b)}function c(a){return parseFloat(parseFloat(a).toFixed(6))}return{sumValues:a,checkEquality:b}}),Injector.factory("ValidationService",["logger","SubelementsValidationWrapper","EmptyValueValidator","RegexValidator","SingleValueValidator","ModelController","ErrorDisplayService","DecimalValidator","EmailValidator","$Window","Store","FormInfo"],function(a,b,c,d,e,f,g,h,i,j,k,l){function m(a){var b=_.find(j.model.controls,function(b){return b.fieldName==a});if(!b)throw new Error("ThereIsn'tOneControlFor :"+a);return b}function n(a){o(a,webconLocale.cProvideValueForRequiredField)}function o(a,b){
a&&j.model[a]&&j.model[a].validation.messages.push(b)}function p(a){j.model[a].validation={isValid:!0,messages:[]}}function q(a,b){var c=!0,d=j.model;return _.each(d.controls,function(a){var e,f=d[a.fieldName];if("Subelements"===f.type){var h=k.getState();e=_.find(h.subelements,function(b){return b.info.fieldName===a.fieldName}).control.data}else e=f.data;var i=t(a.fieldName,e,b);c=c&&i,!i&&f.validation.messages.length>0&&g.addValidationError({title:a.displayName,errorMessage:f.validation.messages[0]})}),Injector.resolve(["MassActionsService"],function(a){a.setValidationResult(c)}),a&&g.showErrorAlert(),c}function r(){var a=_.filter(j.model.controls,function(a){return f.isPicker(a)}),c=!0;return _.each(a,function(a){var d,e=j.model[a.fieldName],f=j.model[a.fieldName].config,g=e.type;"Subelements"!==g?d=s(f,g,j.model[a.fieldName].data,a):b.validateModelOnStart(a.fieldName)||(d=!1),c=c&&d,e.validation.isValid=c}),c}function s(b,c,d,f,g){return!(b&&!b.allowMultiValue&&!e.isValid(c,d))||(a.log(f.fieldName+" singleValueValidationFailed"),g||o(f.fieldName,webconLocale.cTooManyValues),!1)}function t(e,f,g){var k=!0,l=m(e),q=l.plugin,r=j.model[l.fieldName],t=j.model[l.fieldName].config,v=r.type;if(g||p(l.fieldName),l.required&&c.isEmpty(v,f,l)&&(a.log(l.fieldName+" isRequiredAndEmpty"),k=!1,g||n(l.fieldName)),"ReadOnlyHtml"!==l.editMode&&l.regexValidation&&(d.isValid(v,l.regexValidation,f)||(a.log(l.fieldName+" regexValidationFailed"),k=!1,g||o(l.fieldName,l.regexValidationMessage))),q){var w=u(q);if(w&&"function"==typeof w){var x={};return Injector.resolve(["CustomControlsFactory"],function(a){x=w({model:f,sdkConfiguration:a.getSdkConfiguration(q.sdkConfiguration),fieldConfiguration:a.getFieldConfiguration(l)})}),x.isValid||(k=!1,g||o(l.fieldName,x.errorMessage)),r.validation.isValid=k,k}}return s(t,v,f,l)||(k=!1),"Subelements"!==v||b.validateModel(l.fieldName)||(k=!1),"FloatingPoint"!==v||h.isValidAndCheckDecimalPlaces(f.value,r.config)||(k=!1,g||o(l.fieldName,webconLocale.cValueMustMatchFormat+' "'+h.getCorrectFormat(r.config).replace(" ","")+'".')),"Email"!==v||i.isValid(f)||(k=!1,g||o(l.fieldName,webconLocale.cInvalidEmailFormat)),r.validation.isValid=k,k}function u(a){return j.webcon.customControls&&j.webcon.customControls.additionalValidators?j.webcon.customControls.additionalValidators[a.pluginGuid]:null}function v(){return!l.isDocumentTemplate||1===k.getState().attachments.attachmentsCount}return{validate:t,validateModel:q,addErrorMessage:o,validateModelOnStart:r,validateAttachments:v}}),Injector.factory("WaitingPanelService",[],function(){function a(a){c=!0,_.delay(function(){c&&a(!0)},500)}function b(a){a(!1),c=!1}var c=!0;return{showLoadingPanel:a,hideLoadingPanel:b}}),Injector.factory("DataPairHelper",[],function(){function a(a){return a?a.split("#")[0]:""}function b(a){if(!a)return"";var b=a.split("#");return 2!=b.length?1==b.length?a:"":b[1]}return{getIdFromPair:a,getNameFromPair:b}}),Injector.factory("WCFTools",[],function(){function a(a){return a?"/Date("+a.valueOf()+")/":""}function b(a){return a?new Date(parseInt(a.match(/\/Date\(([0-9]+)(?:.*)\)\//)[1])):""}function c(a,c){return"string"==typeof c&&/\/Date\(([0-9]+)(?:.*)\)\//.exec(c)?b(c):c}return{getDateFromWCFFormat:b,getDateForWCF:a,dateTimeReviver:c}}),Injector.factory("$Window",[],function(){return window}),Injector.factory("WorkflowDiagramService",["$Window","FormInfo","PopupController","PortalAttachmentPreviewService","DeviceInfo"],function(a,b,c,d,e){function f(a){return h+"/api/nav/db/"+b.dbId+"/element/"+b.wfdId+"/step/"+a+"/workflowDiagram"}function g(b){var c=f(b);e.isNativeMobileApp()?a.WebviewManager.attachment({url:c,mode:1}):d.showAttachmentPreviewInModal(c,webconLocale.cWorkflowPreview,"png")}var h=a.location.origin+((a.initModel?a.initModel.runningAddress:"")||"");return{showWorkflowDiagram:g}}),Injector.instance("logger",["SystemSettings","$LocalStorage","$Window"],function(a,b,c){function d(){return window.console&&window.console.log}function e(a,b){try{c.WebviewManager&&c.WebviewManager.error&&c.WebviewManager.error([{url:c.location.href,date:(new Date).toString(),code:b,info:a}])}catch(a){}}function f(a,c){b&&(n.length>99&&n.shift(),n.push({date:new Date,msg:a,category:c}),b.WebconBPS_logs=JSON.stringify(n))}function g(a){if(a)console.log(b.WebconBPS_logs);else{var c=JSON.parse(b.WebconBPS_logs);_.each(c,function(a){console.log(a)})}}function h(){n=[],b&&(b.WebconBPS_logs=JSON.stringify(n))}function i(a,b){f(a,"warning"),d()&&window.console.warn?console.warn(a,b):d()&&console.log(a),e(a,2)}function j(a,b){f(a,"error"),d()&&window.console.error?console.error(a,b):d()&&console.log(a),e(a,3)}function k(b){a.isInDebug&&f(b,"log"),d()&&console.log(b)}function l(b){a.isInDebug&&(f(b,"debug"),d()&&console.log(b),e(b,1))}function m(b){(a.isInDebug||a.isInTrace)&&(f(b,"trace"),d()&&console.log(b),e(b,0))}!b&&d()&&console.log("localStorageIsNotAvailable-loggingOnlyToConsole");var n=[];return b&&b.WebconBPS_logs&&(n=JSON.parse(b.WebconBPS_logs)),{log:k,debug:l,trace:m,warning:i,error:j,print:g,clear:h}});
//# sourceMappingURL=mobileScripts.min.js.map