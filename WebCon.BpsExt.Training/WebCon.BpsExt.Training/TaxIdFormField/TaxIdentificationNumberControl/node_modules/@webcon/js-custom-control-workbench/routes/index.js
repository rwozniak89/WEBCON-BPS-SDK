const express = require('express');
const readManifest = require('../lib/readManifest');

const configureIndexRoute = (app, configuration) => {
    const router = express.Router();

    /* GET home page. */
    router.get('/', async (req, res, next) => {
        const manifest = await readManifest(configuration.distPath);
        configuration.manifest = manifest;

        res.render('index', {
            title: 'WEBCON BPS Form Field Extension JS Workbench',
            id: configuration.manifest.solutionId,
        });
    });

    app.use('/', router);
};

module.exports = configureIndexRoute;
